<!doctype html>
<!--
  LiquidityBooster • Profi-Nachweis (Hörsaal-Freischaltung)
  GitHub-Pfad: lp-anfang/pages/profi-nachweis.html

  Assets (lokal, optional):
  - Logo: lp-anfang/library/logos/liquiditybooster-logo.png

  Commit-Message: pages/profi-nachweis – Profi-Quiz (Hardcore) + Haftung/Bestätigung + Hörsaal-Freischaltung (Look&Feel, White)

  Testlink (nocache):
  https://adler-fsa.github.io/lp-anfang/pages/profi-nachweis.html?nocache=__TS__

  Hinweis:
  - Diese GitHub-Seite kann serverseitige Dashboard-Logs nicht direkt speichern.
  - Deshalb wird (1) lokal ein Freischalt-Flag gespeichert (localStorage)
    und (2) optional versucht, ein JSON an einen relativen Endpoint zu senden:
      POST /api/profi-nachweis
    Falls kein Endpoint existiert, läuft alles weiterhin lokal (ohne Fehler-Abbruch).
-->
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Profi-Nachweis – Hörsaal-Freischaltung</title>
  <meta name="description" content="Profi-Nachweis (Hardcore) zur Hörsaal-Freischaltung inkl. Risiko- & Haftungserklärung (DE/EN), lokal ohne externe Ressourcen." />
  <meta name="robots" content="noindex,nofollow" />

  <style>
    :root{
      --bg:#ffffff;
      --panel:#ffffff;
      --panel2:#f8fafc;
      --ink:#0b1220;
      --muted:#46505f;
      --line:rgba(15,23,42,.18);
      --shadow:0 18px 50px rgba(2,6,23,.10);

      --gold:#eab308;
      --gold2:#f5d363;
      --dark:#0b1220;

      --ok:#16a34a;
      --warn:#b45309;
      --bad:#b91c1c;

      --radius:18px;
      --radius2:14px;
      --pad:18px;
      --max:980px;
    }

    *{box-sizing:border-box;}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";}
    a{color:inherit;}
    .wrap{max-width:var(--max);margin:0 auto;padding:22px 16px 60px;}
    .topbar{
      position:sticky;top:0;z-index:10;
      background:rgba(255,255,255,.92);
      backdrop-filter:saturate(140%) blur(10px);
      border-bottom:1px solid var(--line);
    }
    .topbar-inner{
      max-width:var(--max);margin:0 auto;
      padding:10px 16px;display:flex;align-items:center;gap:12px;justify-content:space-between;
    }
    .brand{display:flex;align-items:center;gap:10px;min-width:0;}
    .brand img{height:34px;width:auto;display:block;}
    .brand .title{font-weight:800;letter-spacing:.2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      border:1px solid var(--line);
      background:linear-gradient(180deg,#fff,#f8fafc);
      padding:8px 10px;border-radius:999px;
      box-shadow:0 8px 22px rgba(2,6,23,.06);
      font-weight:650;
    }
    .lang{
      display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:flex-end;
    }
    .btn{
      appearance:none;border:1px solid var(--line);background:linear-gradient(180deg,#fff,#f8fafc);
      padding:10px 12px;border-radius:12px;cursor:pointer;
      font-weight:750;letter-spacing:.15px;
      box-shadow:0 10px 28px rgba(2,6,23,.08);
      transition:transform .08s ease, box-shadow .2s ease, border-color .2s ease;
    }
    .btn:hover{transform:translateY(-1px);box-shadow:0 14px 34px rgba(2,6,23,.12);border-color:rgba(15,23,42,.28);}
    .btn:active{transform:translateY(0);}
    .btn.primary{
      border-color:rgba(234,179,8,.55);
      background:linear-gradient(180deg,#fff4c8,#fde68a);
      box-shadow:0 16px 40px rgba(234,179,8,.22);
    }
    .btn.dark{
      border-color:rgba(15,23,42,.28);
      background:linear-gradient(180deg,#0b1220,#070b14);
      color:#fff;
      box-shadow:0 18px 46px rgba(2,6,23,.20);
    }
    .btn.small{padding:8px 10px;border-radius:10px;font-weight:800;}
    .btn[disabled]{opacity:.55;cursor:not-allowed;transform:none;box-shadow:none;}

    .hero{
      margin:18px 0 14px;
      border:1px solid var(--line);
      border-radius:var(--radius);
      background:
        radial-gradient(circle at 18% 0%, rgba(234,179,8,.22) 0%, rgba(234,179,8,0) 46%),
        radial-gradient(circle at 100% 12%, rgba(2,6,23,.06) 0%, rgba(2,6,23,0) 48%),
        linear-gradient(180deg,#ffffff,#f8fafc);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .hero-inner{padding:22px 18px;}
    .h1{margin:0;font-size:24px;line-height:1.15;font-weight:900;}
    .sub{margin:10px 0 0;color:var(--muted);line-height:1.55;}
    .note{
      margin-top:14px;
      display:flex;gap:10px;align-items:flex-start;
      padding:12px 12px;border-radius:14px;
      border:1px dashed rgba(15,23,42,.25);
      background:rgba(255,255,255,.8);
    }
    .note svg{flex:0 0 auto;margin-top:2px;}
    .grid{display:grid;grid-template-columns:1fr;gap:14px;margin-top:14px;}
    @media (min-width: 880px){
      .grid{grid-template-columns:1.15fr .85fr;}
    }
    .card{
      border:1px solid var(--line);
      border-radius:var(--radius);
      background:linear-gradient(180deg,#fff,#f8fafc);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .card .head{
      padding:14px 16px;border-bottom:1px solid var(--line);
      display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;
    }
    .card .head .t{font-weight:900;}
    .card .body{padding:16px;}
    .meta{display:flex;gap:8px;flex-wrap:wrap;}
    .tag{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;border-radius:999px;
      border:1px solid var(--line);background:#fff;
      font-weight:800;color:var(--muted);
    }
    .tag.ok{border-color:rgba(22,163,74,.35);color:var(--ok);}
    .tag.bad{border-color:rgba(185,28,28,.35);color:var(--bad);}
    .tag.warn{border-color:rgba(180,83,9,.35);color:var(--warn);}

    .q{
      border:1px solid rgba(15,23,42,.16);
      background:#fff;border-radius:16px;
      padding:14px 14px;
      box-shadow:0 12px 26px rgba(2,6,23,.06);
      margin:0 0 12px;
    }
    .q:last-child{margin-bottom:0;}
    .q .qt{
      font-weight:900;margin:0 0 10px;
      display:flex;gap:10px;align-items:flex-start;
    }
    .qnum{
      width:28px;height:28px;border-radius:10px;
      background:linear-gradient(180deg,#fff4c8,#fde68a);
      border:1px solid rgba(234,179,8,.55);
      display:flex;align-items:center;justify-content:center;
      font-weight:950;
      flex:0 0 auto;
      box-shadow:0 10px 22px rgba(234,179,8,.18);
    }
    .opts{display:grid;gap:8px;}
    .opt{
      display:flex;gap:10px;align-items:flex-start;
      padding:10px 10px;border-radius:12px;
      border:1px solid rgba(15,23,42,.14);
      background:linear-gradient(180deg,#fff,#f8fafc);
      cursor:pointer;
      transition:transform .08s ease, border-color .2s ease;
    }
    .opt:hover{transform:translateY(-1px);border-color:rgba(15,23,42,.24);}
    .opt input{margin-top:3px;}
    .opt .k{
      width:26px;height:26px;border-radius:9px;
      display:flex;align-items:center;justify-content:center;
      border:1px solid rgba(15,23,42,.18);
      background:#fff;
      font-weight:950;
      flex:0 0 auto;
    }
    .footer-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px;}
    .small{font-size:12.5px;color:var(--muted);line-height:1.55;margin:8px 0 0;}
    .divider{height:1px;background:var(--line);margin:14px 0;}
    .liab{
      border:1px solid rgba(15,23,42,.18);
      background:#fff;
      border-radius:16px;
      padding:14px;
      box-shadow:0 12px 28px rgba(2,6,23,.06);
    }
    .liab h3{margin:0 0 10px;font-size:16px;font-weight:950;}
    .liab ol{margin:0;padding-left:18px;color:var(--ink);line-height:1.55;}
    .liab li{margin:6px 0;}
    .check{
      display:flex;gap:10px;align-items:flex-start;
      margin-top:12px;padding:10px;border-radius:12px;
      border:1px dashed rgba(15,23,42,.22);
      background:linear-gradient(180deg,#fff,#f8fafc);
    }
    .check input{margin-top:4px;}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;}
    .audit{
      margin-top:10px;
      border:1px solid rgba(15,23,42,.14);
      background:linear-gradient(180deg,#fff,#f8fafc);
      border-radius:14px;
      padding:10px;
      color:var(--muted);
      font-size:12.5px;
      line-height:1.55;
      overflow:auto;
    }
    .hide{display:none !important;}
  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <img src="../library/logos/liquiditybooster-logo.png" alt="LiquidityBooster" onerror="this.style.display='none';" />
        <div class="title" data-i18n="top.title">Profi-Nachweis</div>
      </div>

      <div class="lang">
        <span class="pill" title="Status">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 2l8.66 5v10L12 22l-8.66-5V7L12 2z" stroke="rgba(15,23,42,.85)" stroke-width="1.5"/>
            <path d="M8.5 12.2l2.2 2.2 4.8-5" stroke="rgba(22,163,74,.95)" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span id="statusPill" class="mono">LOCKED</span>
        </span>

        <button class="btn small" id="langDE" type="button">DE</button>
        <button class="btn small" id="langEN" type="button">EN</button>
      </div>
    </div>
  </div>

  <div class="wrap">
    <div class="hero">
      <div class="hero-inner">
        <h1 class="h1" data-i18n="hero.h1">Profi-Nachweis (Hardcore) – Hörsaal-Freischaltung</h1>
        <p class="sub" data-i18n="hero.sub">
          Du kannst den Hörsaal nur sehen, wenn du entweder den regulären Lernweg gehst oder hier den Profi-Nachweis bestehst.
          Dieser Profi-Nachweis ist kein Kurs und keine Zertifizierung. Er dient ausschließlich dazu, dass du als Mitglied bestätigst
          und nachweist, dass du grundlegende Risiken, Marktmechaniken und Projekt-Realitäten verstehst und deshalb keine Schulung benötigst.
        </p>

        <div class="note">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 3a9 9 0 100 18 9 9 0 000-18z" stroke="rgba(15,23,42,.85)" stroke-width="1.5"/>
            <path d="M12 7.2v6.1" stroke="rgba(15,23,42,.85)" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M12 16.9h.01" stroke="rgba(15,23,42,.85)" stroke-width="2.4" stroke-linecap="round"/>
          </svg>
          <div>
            <div style="font-weight:900" data-i18n="hero.noteTitle">Wichtig</div>
            <div class="small" data-i18n="hero.noteText">
              Bitte beantworte jede Frage ehrlich und ohne Hilfe. Der Nachweis ist für Personen gedacht, die bereits eigenständig im Markt agieren
              und die Risiken wirklich beherrschen.
            </div>
          </div>
        </div>

        <div class="footer-actions">
          <button class="btn primary" id="startBtn" type="button" data-i18n="btn.start">Kompetenz-Check starten</button>
          <button class="btn" id="resetBtn" type="button" data-i18n="btn.reset">Zurücksetzen</button>
        </div>

        <p class="small" id="metaLine">
          <span class="mono" id="metaInfo"></span>
        </p>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT: QUIZ -->
      <div class="card" id="quizCard">
        <div class="head">
          <div class="t" data-i18n="quiz.title">Fragen</div>
          <div class="meta">
            <span class="tag" id="tagAttempts"><span data-i18n="meta.attempts">Versuche</span>: <span class="mono" id="attemptsVal">0</span></span>
            <span class="tag" id="tagScore"><span data-i18n="meta.score">Score</span>: <span class="mono" id="scoreVal">—</span></span>
            <span class="tag warn" id="tagRule"><span data-i18n="meta.rule">Bestehen</span>: <span class="mono">8/10</span></span>
          </div>
        </div>
        <div class="body">
          <div id="quizWrap" class="hide"></div>

          <div class="footer-actions">
            <button class="btn dark hide" id="submitBtn" type="button" data-i18n="btn.submit">Auswerten</button>
            <button class="btn hide" id="retryBtn" type="button" data-i18n="btn.retry">Erneut versuchen</button>
          </div>

          <div id="resultBox" class="hide" style="margin-top:12px;"></div>
        </div>
      </div>

      <!-- RIGHT: LIABILITY + UNLOCK -->
      <div class="card" id="unlockCard">
        <div class="head">
          <div class="t" data-i18n="unlock.title">Freischaltung</div>
          <div class="meta">
            <span class="tag bad" id="gateStateTag"><span data-i18n="unlock.state">Status</span>: <span class="mono" id="gateStateText">LOCKED</span></span>
          </div>
        </div>
        <div class="body">
          <div id="lockedInfo">
            <p class="sub" style="margin:0" data-i18n="unlock.lockedText">
              Nach dem Bestehen wird dir die Risiko- und Haftungserklärung angezeigt. Erst nach deiner aktiven Bestätigung wird der Hörsaal freigeschaltet.
            </p>
          </div>

          <div id="liabilityWrap" class="hide">
            <div class="liab">
              <h3 data-i18n="liab.h3">Risiko- und Haftungserklärung (Pflichtbestätigung)</h3>
              <ol>
                <li data-i18n="liab.1"><b>Eigenverantwortung:</b> Ich handle vollständig eigenverantwortlich. Alle Entscheidungen, Handlungen und Ausführungen erfolgen ausschließlich durch mich.</li>
                <li data-i18n="liab.2"><b>Keine Anlageberatung:</b> LiquidityBooster / Club / Hörsaal liefert Informationen, Einordnungen und Projekt-Updates, jedoch keine individuelle Anlageberatung, keine Kauf-/Verkaufsanweisungen und keine Garantie.</li>
                <li data-i18n="liab.3"><b>Kein Anspruch:</b> Aus der Darstellung von Projekten, Token, Protokollen oder Marktinformationen entsteht kein Anspruch auf Gewinn, Performance, Verfügbarkeit, Listings oder Auszahlungen.</li>
                <li data-i18n="liab.4"><b>Totalverlustrisiko:</b> Ich verstehe, dass digitale Assets hochriskant sind und ein Totalverlust jederzeit möglich ist (z. B. Marktbewegung, Liquiditätsmangel, Delisting, Depeg, Hacks/Exploits, technische Fehler, Betreiber-/Admin-Risiken, Regulatorik).</li>
                <li data-i18n="liab.5"><b>Technik-/Protokollrisiko:</b> Ich verstehe, dass auch „erfolgreiche“ Transaktionen, Smart-Contract-Interaktionen oder Listings Risiken enthalten (z. B. falsches Netzwerk, falscher Token-Contract, Approvals, MEV, Slippage).</li>
                <li data-i18n="liab.6"><b>Keine Verwahrung / kein Ausführungsservice:</b> Der Club übernimmt keine Verwahrung, keine Ausführung und keinen Zugriff auf meine Wallets/Accounts.</li>
                <li data-i18n="liab.7"><b>Eigene Prüfungspflicht:</b> Ich bin selbst verantwortlich für Prüfung, Dokumentation und Einhaltung meiner persönlichen Pflichten (z. B. steuerliche Dokumentation, rechtliche Rahmenbedingungen).</li>
                <li data-i18n="liab.8"><b>Zweck der Freischaltung:</b> Die Freischaltung erfolgt ausschließlich aufgrund meines Profi-Nachweises und meiner Bestätigung, dass ich keine Schulung benötige.</li>
              </ol>

              <label class="check">
                <input type="checkbox" id="liabilityCheck" />
                <div>
                  <div style="font-weight:900" data-i18n="liab.checkTitle">Bestätigung</div>
                  <div class="small" style="margin:4px 0 0" data-i18n="liab.checkText">
                    Ich habe die Risiko- und Haftungserklärung vollständig gelesen, verstanden und akzeptiere sie. Ich bestätige, dass ich eigenverantwortlich handle.
                  </div>
                </div>
              </label>

              <div class="footer-actions" style="margin-top:12px;">
                <button class="btn primary" id="unlockBtn" type="button" disabled data-i18n="btn.unlock">Akzeptieren &amp; Hörsaal freischalten</button>
              </div>

              <div class="audit" id="auditBox"></div>
            </div>
          </div>

          <div id="unlockedWrap" class="hide">
            <div class="tag ok" style="display:inline-flex;">
              <span data-i18n="unlock.active">Freischaltung aktiv</span>: <span class="mono" id="unlockedAt">—</span>
            </div>

            <p class="sub" style="margin:10px 0 0" data-i18n="unlock.successText">
              Der Hörsaal ist jetzt für dein Mitgliedskonto freigeschaltet. Du kannst ab sofort die Hörsaal-Inhalte und die dazugehörigen Projekt-Bereiche sehen.
            </p>

            <div class="footer-actions">
              <!-- Link bitte später auf euren echten internen Hörsaal-Pfad setzen -->
              <a class="btn dark" id="hoersaalLink" href="#" data-i18n="btn.hoersaal" role="button">Zum Hörsaal</a>
            </div>

            <div class="divider"></div>
            <div class="small">
              <span data-i18n="unlock.localHint">Hinweis:</span>
              <span data-i18n="unlock.localHint2">Freischaltung ist lokal markiert (Browser). Optional wird zusätzlich ein Server-Log versucht (Dashboard).</span>
            </div>

            <div class="audit" id="auditBox2"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      // ====== CONFIG ======
      const PASS_SCORE = 8; // 8/10 bestehen
      const STORAGE_KEY = "lb_profi_unlock_v1";
      const STORAGE_ATTEMPTS = "lb_profi_attempts_v1";
      const STORAGE_LAST = "lb_profi_last_v1";
      const LIABILITY_VERSION = "liability_v1.0";
      const QUIZ_VERSION = "profi_hardcore_v1.0";

      // Optional: interner Endpoint (relativ) fürs Club-Dashboard.
      const API_ENDPOINT = "/api/profi-nachweis"; // kann bei euch serverseitig existieren oder nicht

      // ====== I18N ======
      const I18N = {
        de: {
          "top.title":"Profi-Nachweis",
          "hero.h1":"Profi-Nachweis (Hardcore) – Hörsaal-Freischaltung",
          "hero.sub":"Du kannst den Hörsaal nur sehen, wenn du entweder den regulären Lernweg gehst oder hier den Profi-Nachweis bestehst. Dieser Profi-Nachweis ist kein Kurs und keine Zertifizierung. Er dient ausschließlich dazu, dass du als Mitglied bestätigst und nachweist, dass du grundlegende Risiken, Marktmechaniken und Projekt-Realitäten verstehst und deshalb keine Schulung benötigst. Wenn du den Profi-Nachweis bestehst, wird dir anschließend eine Risiko- und Haftungserklärung angezeigt. Erst nach deiner aktiven Bestätigung wird der Hörsaal freigeschaltet.",
          "hero.noteTitle":"Wichtig",
          "hero.noteText":"Bitte beantworte jede Frage ehrlich und ohne Hilfe. Der Nachweis ist für Personen gedacht, die bereits eigenständig im Markt agieren und die Risiken wirklich beherrschen.",
          "btn.start":"Kompetenz-Check starten",
          "btn.reset":"Zurücksetzen",
          "quiz.title":"Fragen",
          "meta.attempts":"Versuche",
          "meta.score":"Score",
          "meta.rule":"Bestehen",
          "btn.submit":"Auswerten",
          "btn.retry":"Erneut versuchen",
          "unlock.title":"Freischaltung",
          "unlock.state":"Status",
          "unlock.lockedText":"Nach dem Bestehen wird dir die Risiko- und Haftungserklärung angezeigt. Erst nach deiner aktiven Bestätigung wird der Hörsaal freigeschaltet.",
          "liab.h3":"Risiko- und Haftungserklärung (Pflichtbestätigung)",
          "liab.1":"<b>Eigenverantwortung:</b> Ich handle vollständig eigenverantwortlich. Alle Entscheidungen, Handlungen und Ausführungen erfolgen ausschließlich durch mich.",
          "liab.2":"<b>Keine Anlageberatung:</b> LiquidityBooster / Club / Hörsaal liefert Informationen, Einordnungen und Projekt-Updates, jedoch keine individuelle Anlageberatung, keine Kauf-/Verkaufsanweisungen und keine Garantie.",
          "liab.3":"<b>Kein Anspruch:</b> Aus der Darstellung von Projekten, Token, Protokollen oder Marktinformationen entsteht kein Anspruch auf Gewinn, Performance, Verfügbarkeit, Listings oder Auszahlungen.",
          "liab.4":"<b>Totalverlustrisiko:</b> Ich verstehe, dass digitale Assets hochriskant sind und ein Totalverlust jederzeit möglich ist (z. B. Marktbewegung, Liquiditätsmangel, Delisting, Depeg, Hacks/Exploits, technische Fehler, Betreiber-/Admin-Risiken, Regulatorik).",
          "liab.5":"<b>Technik-/Protokollrisiko:</b> Ich verstehe, dass auch „erfolgreiche“ Transaktionen, Smart-Contract-Interaktionen oder Listings Risiken enthalten (z. B. falsches Netzwerk, falscher Token-Contract, Approvals, MEV, Slippage).",
          "liab.6":"<b>Keine Verwahrung / kein Ausführungsservice:</b> Der Club übernimmt keine Verwahrung, keine Ausführung und keinen Zugriff auf meine Wallets/Accounts.",
          "liab.7":"<b>Eigene Prüfungspflicht:</b> Ich bin selbst verantwortlich für Prüfung, Dokumentation und Einhaltung meiner persönlichen Pflichten (z. B. steuerliche Dokumentation, rechtliche Rahmenbedingungen).",
          "liab.8":"<b>Zweck der Freischaltung:</b> Die Freischaltung erfolgt ausschließlich aufgrund meines Profi-Nachweises und meiner Bestätigung, dass ich keine Schulung benötige.",
          "liab.checkTitle":"Bestätigung",
          "liab.checkText":"Ich habe die Risiko- und Haftungserklärung vollständig gelesen, verstanden und akzeptiere sie. Ich bestätige, dass ich eigenverantwortlich handle.",
          "btn.unlock":"Akzeptieren & Hörsaal freischalten",
          "unlock.active":"Freischaltung aktiv",
          "unlock.successText":"Der Hörsaal ist jetzt für dein Mitgliedskonto freigeschaltet. Du kannst ab sofort die Hörsaal-Inhalte und die dazugehörigen Projekt-Bereiche sehen.",
          "btn.hoersaal":"Zum Hörsaal",
          "unlock.localHint":"Hinweis:",
          "unlock.localHint2":"Freischaltung ist lokal markiert (Browser). Optional wird zusätzlich ein Server-Log versucht (Dashboard).",

          "msg.ready":"Bereit. Klicke auf „Kompetenz-Check starten“.",
          "msg.needAll":"Bitte beantworte alle 10 Fragen.",
          "msg.passTitle":"Ergebnis: Voraussetzung erfüllt",
          "msg.passText":"Du hast den Profi-Nachweis bestanden. Damit kannst du den Hörsaal freischalten, sofern du im nächsten Schritt die Risiko- und Haftungserklärung aktiv bestätigst.",
          "msg.failTitle":"Ergebnis: Voraussetzung nicht erfüllt",
          "msg.failText":"Du hast den Profi-Nachweis nicht bestanden. Das ist kein Problem: Du kannst jederzeit den regulären Lernweg nutzen und später erneut antreten. Der Hörsaal bleibt bis dahin gesperrt, weil die Freischaltung nur bei nachgewiesener Risikokompetenz erfolgt."
        },
        en: {
          "top.title":"Pro Proof",
          "hero.h1":"Pro Proof (Hardcore) – Lecture Hall Unlock",
          "hero.sub":"You can only see the lecture hall if you either follow the regular learning path or pass the pro proof here. This pro proof is not a course and not a certification. It exists solely so you, as a member, confirm and demonstrate that you understand core risks, market mechanics and project realities and therefore do not require training. If you pass, you will be shown a risk & liability statement. Only after your active confirmation will the lecture hall be unlocked.",
          "hero.noteTitle":"Important",
          "hero.noteText":"Please answer each question honestly and without assistance. This proof is intended for people who already operate independently and truly understand the risks.",
          "btn.start":"Start competence check",
          "btn.reset":"Reset",
          "quiz.title":"Questions",
          "meta.attempts":"Attempts",
          "meta.score":"Score",
          "meta.rule":"Pass",
          "btn.submit":"Evaluate",
          "btn.retry":"Try again",
          "unlock.title":"Unlock",
          "unlock.state":"Status",
          "unlock.lockedText":"After you pass, the risk & liability statement will be shown. Only after your active confirmation will the lecture hall be unlocked.",
          "liab.h3":"Risk & Liability Statement (required)",
          "liab.1":"<b>Personal responsibility:</b> I act fully on my own responsibility. All decisions, actions and executions are performed exclusively by me.",
          "liab.2":"<b>No investment advice:</b> LiquidityBooster / Club / lecture hall provides information, context and project updates, but no individual investment advice, no buy/sell instructions and no guarantee.",
          "liab.3":"<b>No entitlement:</b> Presenting projects, tokens, protocols or market information creates no entitlement to profit, performance, availability, listings or withdrawals.",
          "liab.4":"<b>Total loss risk:</b> I understand that digital assets are high risk and total loss is possible at any time (e.g. market moves, lack of liquidity, delisting, depeg, hacks/exploits, technical errors, operator/admin risks, regulation).",
          "liab.5":"<b>Tech/protocol risk:</b> I understand that even “successful” transactions, smart-contract interactions or listings can involve risks (e.g. wrong network, wrong token contract, approvals, MEV, slippage).",
          "liab.6":"<b>No custody / no execution service:</b> The club provides no custody, no execution and no access to my wallets/accounts.",
          "liab.7":"<b>Own duty of review:</b> I am responsible for my own review, documentation and compliance with personal obligations (e.g. tax documentation, legal framework).",
          "liab.8":"<b>Purpose of unlock:</b> The unlock is granted solely based on my pro proof and my confirmation that I do not require training.",
          "liab.checkTitle":"Confirmation",
          "liab.checkText":"I have read, understood and accept the risk & liability statement. I confirm that I act on my own responsibility.",
          "btn.unlock":"Accept & unlock lecture hall",
          "unlock.active":"Unlock active",
          "unlock.successText":"The lecture hall is now unlocked for your membership account. You can now access lecture hall content and the related project areas.",
          "btn.hoersaal":"Go to lecture hall",
          "unlock.localHint":"Note:",
          "unlock.localHint2":"Unlock is marked locally (browser). Optionally a server log is attempted (dashboard).",

          "msg.ready":"Ready. Click “Start competence check”.",
          "msg.needAll":"Please answer all 10 questions.",
          "msg.passTitle":"Result: requirement fulfilled",
          "msg.passText":"You passed the pro proof. You can now unlock the lecture hall once you actively confirm the risk & liability statement.",
          "msg.failTitle":"Result: requirement not fulfilled",
          "msg.failText":"You did not pass. No problem: you can follow the regular learning path and retry later. The lecture hall remains locked until proven risk competence is met."
        }
      };

      function escapeHTML(s){
        return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
      }

      // ====== QUESTIONS (Hardcore) ======
      // exactly 1 correct per question
      const QUESTIONS = [
        {
          id:"q1",
          i18nKey:"q1",
          text:{
            de:"Token-Transfers: TX ist „Success“, aber der Empfänger sieht den Token nicht. Was ist die häufigste Profi-Erklärung?",
            en:"Token transfers: TX is “Success”, but recipient can’t see the token. What’s the most common pro explanation?"
          },
          options:[
            {k:"A", de:"Der Token hat 0 Dezimalstellen, deshalb wird er nicht angezeigt.", en:"The token has 0 decimals, so it won’t display."},
            {k:"B", de:"Es wurde auf der falschen Chain gesendet oder es ist der falsche Token-Contract/Token nicht hinzugefügt (falsches Netzwerk/Contract).", en:"It was sent on the wrong chain or it’s the wrong token contract / token not added (wrong network/contract)."},
            {k:"C", de:"„Success“ bedeutet nur, dass die Wallet erfolgreich war, nicht die Blockchain.", en:"“Success” only means the wallet succeeded, not the blockchain."}
          ],
          correct:"B"
        },
        {
          id:"q2",
          i18nKey:"q2",
          text:{
            de:"AMM-Swaps: Warum ist „Price Impact“ manchmal absurd hoch?",
            en:"AMM swaps: Why can “price impact” be absurdly high?"
          },
          options:[
            {k:"A", de:"Zu geringe Pool-Liquidität relativ zur Swap-Größe (Reserve-Verhältnis kippt).", en:"Pool liquidity is too low relative to swap size (reserves get skewed)."},
            {k:"B", de:"Der RPC ist langsam, darum „berechnet“ die DEX falsch.", en:"The RPC is slow, so the DEX calculates wrong."},
            {k:"C", de:"Gas ist zu niedrig, darum steigt der Price Impact.", en:"Gas is too low, therefore price impact increases."}
          ],
          correct:"A"
        },
        {
          id:"q3",
          i18nKey:"q3",
          text:{
            de:"Tokenomics: Unlocks & Vesting – was ist häufig das kritischste Risiko?",
            en:"Tokenomics: Unlocks & vesting – what’s often the most critical risk?"
          },
          options:[
            {k:"A", de:"Unlocks sind neutral, weil sie längst eingepreist sind.", en:"Unlocks are neutral because they’re always priced in."},
            {k:"B", de:"Der Chart steigt meistens, weil Unlocks Aufmerksamkeit bringen.", en:"Price usually rises because unlocks bring attention."},
            {k:"C", de:"Angebots-Schock: Mehr frei handelbare Token treffen auf begrenzte Nachfrage/Liquidität → Abwärtsdruck möglich.", en:"Supply shock: more tradable tokens meet limited demand/liquidity → possible downside pressure."}
          ],
          correct:"C"
        },
        {
          id:"q4",
          i18nKey:"q4",
          text:{
            de:"FDV vs. Market Cap – welche Aussage ist korrekt?",
            en:"FDV vs market cap – which statement is correct?"
          },
          options:[
            {k:"A", de:"FDV = Market Cap, nur anders benannt.", en:"FDV equals market cap, just another name."},
            {k:"B", de:"Hohe FDV bei kleiner circulating supply kann spätere Unlocks als massiven Angebotsdruck bedeuten.", en:"High FDV with low circulating supply can imply strong future supply pressure via unlocks."},
            {k:"C", de:"FDV ist nur für Aktien relevant, nicht für Token.", en:"FDV only matters for stocks, not tokens."}
          ],
          correct:"B"
        },
        {
          id:"q5",
          i18nKey:"q5",
          text:{
            de:"Warum ist „upgradeable contract + Admin key“ ein Risikofaktor?",
            en:"Why is “upgradeable contract + admin key” a risk factor?"
          },
          options:[
            {k:"A", de:"Weil Upgrades immer kostenlos sind und darum häufiger genutzt werden.", en:"Because upgrades are always free and therefore more frequent."},
            {k:"B", de:"Weil ein Admin (oder kompromittierter Admin) Logik ändern kann (Fees, Transfer-Regeln, Minting, Blacklist) → Asset-Risiko.", en:"Because an admin (or compromised admin) can change logic (fees, transfer rules, minting, blacklist) → asset risk."},
            {k:"C", de:"Weil Upgrades die Blockchain „zentralisieren“.", en:"Because upgrades “centralize” the blockchain."}
          ],
          correct:"B"
        },
        {
          id:"q6",
          i18nKey:"q6",
          text:{
            de:"Welche Onchain-Eigenschaft ist ein klassischer Honeypot-Indikator?",
            en:"Which on-chain property is a classic honeypot indicator?"
          },
          options:[
            {k:"A", de:"Der Token erlaubt Transfers/Sells nur unter Bedingungen (Whitelist/Blacklist/DEX-Block) – normale Adressen können nicht sauber verkaufen.", en:"Token restricts transfers/sells (whitelist/blacklist/DEX block) so normal addresses can’t sell properly."},
            {k:"B", de:"Der Token hat ein Logo und eine Website.", en:"The token has a logo and a website."},
            {k:"C", de:"Der Token nutzt 18 Dezimalstellen.", en:"The token uses 18 decimals."}
          ],
          correct:"A"
        },
        {
          id:"q7",
          i18nKey:"q7",
          text:{
            de:"MEV / Sandwich – welche Maßnahme reduziert Sandwich-Risiko am ehesten?",
            en:"MEV / sandwich – which measure reduces sandwich risk the most?"
          },
          options:[
            {k:"A", de:"Slippage höher setzen, damit der Swap sicher durchgeht.", en:"Increase slippage so the swap surely goes through."},
            {k:"B", de:"Sehr kleine Gas Fees setzen, damit Bots dich nicht sehen.", en:"Set very low gas so bots can’t see you."},
            {k:"C", de:"Slippage eng halten, Limit/Quote nutzen oder private/MEV-geschützte Routing-Optionen verwenden.", en:"Keep slippage tight, use limits/quotes or private/MEV-protected routing options."}
          ],
          correct:"C"
        },
        {
          id:"q8",
          i18nKey:"q8",
          text:{
            de:"Stablecoin-Risiko: Welche Aussage ist professionell korrekt?",
            en:"Stablecoin risk: Which statement is professionally correct?"
          },
          options:[
            {k:"A", de:"Stablecoins können depegen; Mechanismus (collateralisiert/algorithmisch/Issuer-Risk) und Einlösbarkeit sind entscheidend.", en:"Stablecoins can depeg; mechanism (collateralized/algorithmic/issuer risk) and redeemability matter."},
            {k:"B", de:"Stablecoins sind immer 1:1, weil sie „stable“ heißen.", en:"Stablecoins are always 1:1 because they’re called stable."},
            {k:"C", de:"Depeg passiert nur bei Meme-Coins, nicht bei Stablecoins.", en:"Depegs only happen with meme coins, not stablecoins."}
          ],
          correct:"A"
        },
        {
          id:"q9",
          i18nKey:"q9",
          text:{
            de:"CEX-Listing / Auszahlungsrisiko: Welche Aussage ist korrekt?",
            en:"CEX listing / withdrawal risk: Which statement is correct?"
          },
          options:[
            {k:"A", de:"CEX-Listing garantiert freie Auszahlungen, weil die Börse damit haftet.", en:"A CEX listing guarantees withdrawals because the exchange is liable."},
            {k:"B", de:"Auch bei seriösen Börsen kann Withdrawal pausiert werden (Maintenance, Chain-Issue, Compliance, Liquidity) → Exit-Plan ist Pflicht.", en:"Even reputable exchanges can pause withdrawals (maintenance, chain issues, compliance, liquidity) → an exit plan is essential."},
            {k:"C", de:"Sobald KYC vorliegt, sind Auszahlungen rechtlich immer in Echtzeit durchsetzbar.", en:"Once KYC is done, withdrawals are always legally enforceable in real time."}
          ],
          correct:"B"
        },
        {
          id:"q10",
          i18nKey:"q10",
          text:{
            de:"Warum ist „Wallet Copy Trading“ kein Profi-Beweis, sondern ein Risiko?",
            en:"Why is “wallet copy trading” not a pro proof but a risk?"
          },
          options:[
            {k:"A", de:"Weil Onchain-Trades immer fake sind.", en:"Because on-chain trades are always fake."},
            {k:"B", de:"Weil Timing/Einstand nicht repliziert wird (MEV, Frontrun, Slippage) und Kontext fehlt (Hedges, OTC, vesting, Insider).", en:"Because you can’t replicate timing/entry (MEV, front-run, slippage) and context is missing (hedges, OTC, vesting, insiders)."},
            {k:"C", de:"Weil Wallets nur auf Testnets handeln.", en:"Because wallets only trade on testnets."}
          ],
          correct:"B"
        }
      ];

      // ====== DOM ======
      const $ = (id)=>document.getElementById(id);

      const statusPill = $("statusPill");
      const metaInfo = $("metaInfo");
      const startBtn = $("startBtn");
      const resetBtn = $("resetBtn");
      const quizWrap = $("quizWrap");
      const submitBtn = $("submitBtn");
      const retryBtn = $("retryBtn");
      const resultBox = $("resultBox");

      const attemptsVal = $("attemptsVal");
      const scoreVal = $("scoreVal");
      const gateStateText = $("gateStateText");
      const gateStateTag = $("gateStateTag");

      const lockedInfo = $("lockedInfo");
      const liabilityWrap = $("liabilityWrap");
      const liabilityCheck = $("liabilityCheck");
      const unlockBtn = $("unlockBtn");

      const unlockedWrap = $("unlockedWrap");
      const unlockedAt = $("unlockedAt");
      const auditBox = $("auditBox");
      const auditBox2 = $("auditBox2");
      const hoersaalLink = $("hoersaalLink");

      const langDE = $("langDE");
      const langEN = $("langEN");

      // ====== STATE ======
      let lang = (localStorage.getItem("lb_lang") || "de");
      let order = []; // question order (fixed per start)
      let started = false;

      function nowISO(){
        return new Date().toISOString();
      }

      function fmtLocal(iso){
        try{
          const d = new Date(iso);
          return d.toLocaleString(lang === "de" ? "de-DE" : "en-US", { hour12:false });
        }catch(e){
          return iso;
        }
      }

      function setStatusLabel(){
        const unlock = getUnlock();
        const label = unlock?.unlocked ? "UNLOCKED" : "LOCKED";
        statusPill.textContent = label;

        gateStateText.textContent = label;
        gateStateTag.classList.remove("ok","bad","warn");
        gateStateTag.classList.add(unlock?.unlocked ? "ok" : "bad");
      }

      function applyI18n(){
        document.documentElement.lang = (lang === "de" ? "de" : "en");
        localStorage.setItem("lb_lang", lang);

        // i18n text nodes
        document.querySelectorAll("[data-i18n]").forEach(el=>{
          const key = el.getAttribute("data-i18n");
          const val = (I18N[lang] && I18N[lang][key]) ? I18N[lang][key] : null;
          if(val !== null){
            // Allow simple inline markup in specific keys (liability list)
            if(val.includes("<b>")) el.innerHTML = val;
            else el.textContent = val;
          }
        });

        // Re-render questions if started
        if(started){
          renderQuestions();
        }

        setMetaLine();
      }

      function setMetaLine(){
        const attempts = getAttempts();
        const last = localStorage.getItem(STORAGE_LAST);
        const lastTxt = last ? fmtLocal(last) : "—";
        metaInfo.textContent = `${QUIZ_VERSION} • ${LIABILITY_VERSION} • attempts=${attempts} • last=${lastTxt}`;
      }

      function getAttempts(){
        const n = parseInt(localStorage.getItem(STORAGE_ATTEMPTS) || "0", 10);
        return Number.isFinite(n) ? n : 0;
      }

      function incAttempts(){
        const n = getAttempts() + 1;
        localStorage.setItem(STORAGE_ATTEMPTS, String(n));
        attemptsVal.textContent = String(n);
        localStorage.setItem(STORAGE_LAST, nowISO());
        setMetaLine();
        return n;
      }

      function clearAttempts(){
        localStorage.removeItem(STORAGE_ATTEMPTS);
        localStorage.removeItem(STORAGE_LAST);
        attemptsVal.textContent = "0";
        setMetaLine();
      }

      function getUnlock(){
        try{
          const raw = localStorage.getItem(STORAGE_KEY);
          if(!raw) return null;
          return JSON.parse(raw);
        }catch(e){
          return null;
        }
      }

      function setUnlock(payload){
        localStorage.setItem(STORAGE_KEY, JSON.stringify(payload));
      }

      function clearUnlock(){
        localStorage.removeItem(STORAGE_KEY);
      }

      function shuffle(arr){
        const a = arr.slice();
        for(let i=a.length-1;i>0;i--){
          const j = Math.floor(Math.random()*(i+1));
          [a[i],a[j]] = [a[j],a[i]];
        }
        return a;
      }

      function renderQuestions(){
        quizWrap.innerHTML = "";
        quizWrap.classList.remove("hide");
        submitBtn.classList.remove("hide");

        const qList = order.map(idx => QUESTIONS[idx]);

        qList.forEach((q, qi)=>{
          const box = document.createElement("div");
          box.className = "q";
          box.setAttribute("data-qid", q.id);

          const title = document.createElement("div");
          title.className = "qt";
          title.innerHTML = `<span class="qnum">${qi+1}</span><span>${escapeHTML(q.text[lang])}</span>`;
          box.appendChild(title);

          const opts = document.createElement("div");
          opts.className = "opts";

          q.options.forEach(opt=>{
            const label = document.createElement("label");
            label.className = "opt";
            label.innerHTML = `
              <input type="radio" name="${q.id}" value="${opt.k}" />
              <span class="k">${opt.k}</span>
              <span>${escapeHTML(lang==="de" ? opt.de : opt.en)}</span>
            `;
            opts.appendChild(label);
          });

          box.appendChild(opts);
          quizWrap.appendChild(box);
        });
      }

      function buildResultCard(ok, score){
        const t = document.createElement("div");
        t.className = "card";
        t.style.boxShadow = "none";
        t.style.borderRadius = "16px";
        t.style.marginTop = "0";
        t.style.background = "#fff";
        t.style.border = "1px solid rgba(15,23,42,.14)";

        const head = document.createElement("div");
        head.className = "head";
        head.style.borderBottom = "1px solid rgba(15,23,42,.14)";

        const title = document.createElement("div");
        title.className = "t";
        title.textContent = ok ? I18N[lang]["msg.passTitle"] : I18N[lang]["msg.failTitle"];

        const meta = document.createElement("div");
        meta.className = "meta";

        const tag = document.createElement("span");
        tag.className = "tag " + (ok ? "ok" : "bad");
        tag.innerHTML = `${escapeHTML(I18N[lang]["meta.score"])}: <span class="mono">${score}/10</span>`;
        meta.appendChild(tag);

        head.appendChild(title);
        head.appendChild(meta);

        const body = document.createElement("div");
        body.className = "body";

        const p = document.createElement("div");
        p.className = "sub";
        p.style.margin = "0";
        p.textContent = ok ? I18N[lang]["msg.passText"] : I18N[lang]["msg.failText"];

        body.appendChild(p);

        t.appendChild(head);
        t.appendChild(body);

        return t;
      }

      function allAnswered(){
        for(const idx of order){
          const q = QUESTIONS[idx];
          const picked = document.querySelector(`input[name="${q.id}"]:checked`);
          if(!picked) return false;
        }
        return true;
      }

      function calcScore(){
        let score = 0;
        const answers = {};
        for(const idx of order){
          const q = QUESTIONS[idx];
          const picked = document.querySelector(`input[name="${q.id}"]:checked`);
          const val = picked ? picked.value : "";
          answers[q.id] = val;
          if(val === q.correct) score++;
        }
        return { score, answers };
      }

      function setGateLocked(){
        lockedInfo.classList.remove("hide");
        liabilityWrap.classList.add("hide");
        unlockedWrap.classList.add("hide");
        liabilityCheck.checked = false;
        unlockBtn.disabled = true;
        setStatusLabel();
      }

      function setGatePassedPending(assessment){
        lockedInfo.classList.add("hide");
        liabilityWrap.classList.remove("hide");
        unlockedWrap.classList.add("hide");
        liabilityCheck.checked = false;
        unlockBtn.disabled = true;

        // audit preview (what would be logged)
        auditBox.textContent =
`dashboard_payload (preview)
{
  "quiz_version": "${QUIZ_VERSION}",
  "liability_version": "${LIABILITY_VERSION}",
  "passed": true,
  "score": ${assessment.score},
  "answers": ${JSON.stringify(assessment.answers)},
  "timestamp": "${assessment.timestamp}"
}`;
        setStatusLabel();
      }

      function setGateUnlocked(payload){
        lockedInfo.classList.add("hide");
        liabilityWrap.classList.add("hide");
        unlockedWrap.classList.remove("hide");

        unlockedAt.textContent = fmtLocal(payload.unlocked_at);
        auditBox2.textContent =
`dashboard_payload (stored)
{
  "quiz_version": "${payload.quiz_version}",
  "liability_version": "${payload.liability_version}",
  "passed": true,
  "score": ${payload.score},
  "accepted_liability": true,
  "accepted_at": "${payload.accepted_at}",
  "unlocked_at": "${payload.unlocked_at}"
}`;
        setStatusLabel();
      }

      async function tryServerLog(payload){
        // optional logging; silent failure (no external deps)
        try{
          await fetch(API_ENDPOINT, {
            method:"POST",
            headers: { "Content-Type":"application/json" },
            body: JSON.stringify(payload)
          });
        }catch(e){
          // intentionally silent
        }
      }

      function initFromStorage(){
        const attempts = getAttempts();
        attemptsVal.textContent = String(attempts);

        const unlock = getUnlock();
        if(unlock && unlock.unlocked){
          scoreVal.textContent = (typeof unlock.score === "number") ? `${unlock.score}/10` : "—";
          setGateUnlocked(unlock);
        }else{
          scoreVal.textContent = "—";
          setGateLocked();
        }
        setMetaLine();
      }

      function startQuiz(){
        started = true;
        resultBox.classList.add("hide");
        resultBox.innerHTML = "";
        retryBtn.classList.add("hide");

        // fixed random order per start
        order = shuffle([...Array(QUESTIONS.length).keys()]);
        renderQuestions();

        // show helpful status
        if(!getUnlock()?.unlocked){
          setGateLocked();
        }
      }

      function resetAll(){
        // local reset only
        started = false;
        order = [];
        quizWrap.innerHTML = "";
        quizWrap.classList.add("hide");
        submitBtn.classList.add("hide");
        retryBtn.classList.add("hide");
        resultBox.classList.add("hide");
        resultBox.innerHTML = "";
        scoreVal.textContent = "—";
        clearUnlock();
        clearAttempts();
        setGateLocked();
      }

      // ====== EVENTS ======
      langDE.addEventListener("click", ()=>{ lang="de"; applyI18n(); });
      langEN.addEventListener("click", ()=>{ lang="en"; applyI18n(); });

      startBtn.addEventListener("click", startQuiz);
      resetBtn.addEventListener("click", resetAll);

      submitBtn.addEventListener("click", ()=>{
        if(!allAnswered()){
          resultBox.classList.remove("hide");
          resultBox.innerHTML = "";
          const warn = document.createElement("div");
          warn.className = "tag warn";
          warn.style.display = "inline-flex";
          warn.textContent = I18N[lang]["msg.needAll"];
          resultBox.appendChild(warn);
          return;
        }

        const attempts = incAttempts();
        const { score, answers } = calcScore();
        scoreVal.textContent = `${score}/10`;

        const ok = score >= PASS_SCORE;
        resultBox.classList.remove("hide");
        resultBox.innerHTML = "";
        resultBox.appendChild(buildResultCard(ok, score));

        if(ok){
          const assessment = {
            quiz_version: QUIZ_VERSION,
            liability_version: LIABILITY_VERSION,
            passed: true,
            score,
            answers,
            timestamp: nowISO(),
            attempt: attempts
          };
          setGatePassedPending(assessment);

          // keep assessment around for final acceptance
          window.__lb_assessment = assessment;
        }else{
          setGateLocked();
          retryBtn.classList.remove("hide");
        }
      });

      retryBtn.addEventListener("click", ()=>{
        startQuiz();
      });

      liabilityCheck.addEventListener("change", ()=>{
        unlockBtn.disabled = !liabilityCheck.checked;
      });

      unlockBtn.addEventListener("click", async ()=>{
        if(!liabilityCheck.checked) return;

        const assessment = window.__lb_assessment;
        if(!assessment || !assessment.passed){
          // safety fallback
          setGateLocked();
          return;
        }

        const payload = {
          unlocked: true,
          quiz_version: QUIZ_VERSION,
          liability_version: LIABILITY_VERSION,
          score: assessment.score,
          accepted_liability: true,
          accepted_at: nowISO(),
          unlocked_at: nowISO()
        };

        setUnlock(payload);
        setGateUnlocked(payload);

        // optional server log
        tryServerLog({
          type:"profi_unlock",
          ...payload,
          // optional: pass through answers if you want it in dashboard
          // answers: assessment.answers,
          // attempt: assessment.attempt
        });
      });

      // ====== INIT ======
      applyI18n();
      initFromStorage();
      setStatusLabel();

      // Hörsaal-Link: hier später euren echten internen Pfad setzen
      hoersaalLink.addEventListener("click", (e)=>{
        // default prevent if not set
        if(hoersaalLink.getAttribute("href") === "#"){
          e.preventDefault();
        }
      });
    })();
  </script>
</body>
</html>
