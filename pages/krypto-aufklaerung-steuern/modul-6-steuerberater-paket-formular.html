<!doctype html>
<!--
  FSA-CLUB • Krypto-Aufklärung • Steuern & Dokumentation • Modul 6
  GitHub-Pfad: lp-anfang/pages/krypto-aufklaerung-steuern/modul-6-steuerberater-paket-formular.html
  Commit-Message: krypto-aufklaerung-steuern – Modul 6 (Steuerberater-Paket) im Kapitel-48 Muster + Beispieltexte im Feld (DE/EN, i18n, Print, LocalStorage, nocache)
  Testlink (nocache): https://adler-fsa.github.io/lp-anfang/pages/krypto-aufklaerung-steuern/modul-6-steuerberater-paket-formular.html?nocache=__TS__
-->
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modul 6 – Steuerberater-Paket: Eingabeseite + Druck/PDF</title>
  <meta name="description" content="Modul 6: Steuerberater-Paket – Eingabeseite mit Beispielen + Drucken/PDF. Einsteigerfreundlich, ruhig, ohne Steuer- oder Rechtsberatung. DE/EN, i18n." />

  <style>
    :root{
      --bg:#050814;
      --bg2:#020617;
      --panel:rgba(15,23,42,.90);
      --panel2:rgba(15,23,42,.78);
      --txt:#e9eef7;
      --muted:#a9b4c7;
      --gold:#d4af37;
      --gold2:#f2d37a;
      --line:rgba(212,175,55,.38);
      --shadow:0 24px 60px rgba(0,0,0,.55);
      --glow:0 0 26px rgba(212,175,55,.22), 0 12px 30px rgba(0,0,0,.55);
      --radius:18px;
      --maxw:1100px;
      --ink:#0b1220;
    }

    *{box-sizing:border-box;}

    html,body{
      margin:0;
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(212,175,55,.10), transparent 55%),
        radial-gradient(900px 600px at 80% 30%, rgba(94,168,255,.08), transparent 60%),
        linear-gradient(180deg,var(--bg),var(--bg2));
      color:var(--txt);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      overflow-x:hidden;
    }

    /* Text-Sicherheit (Pflicht) */
    body, .panel, .wrap, p, li, h1, h2, h3, .muted, .callout, .mini, input, textarea, label, .hint, .kicker{
      overflow-wrap:anywhere;
      word-break:break-word;
      hyphens:auto;
    }

    .wrap{max-width:var(--maxw);margin:0 auto;padding:34px 18px 60px;}

    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      margin:6px 0 14px;
    }
    .brand{display:flex;flex-direction:column;gap:6px;min-width:min(680px,100%);}
    .kicker{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 10px;border-radius:999px;
      border:1px solid rgba(212,175,55,.25);
      background:rgba(0,0,0,.18);
      color:var(--gold2);
      font-size:12px;font-weight:800;letter-spacing:.25px;
      width:fit-content; white-space:nowrap;
    }
    .dot{
      width:8px;height:8px;border-radius:99px;
      background:rgba(242,211,122,.9);
      box-shadow:0 0 12px rgba(212,175,55,.35)
    }

    h1{margin:0;font-size:34px;line-height:1.1;font-weight:900}
    .sub{margin:2px 0 0;color:var(--muted);max-width:95ch;line-height:1.55}

    .line{height:2px;background:linear-gradient(90deg,transparent,var(--gold),transparent);opacity:.85;margin:12px 0 18px;}

    .panel{
      background:linear-gradient(180deg,var(--panel),var(--panel2));
      border:1px solid rgba(212,175,55,.22);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      backdrop-filter: blur(6px);
      padding:18px 18px;
      position:relative;
      overflow:hidden;
      margin-top:14px;
    }
    .panel:before{
      content:"";
      position:absolute;inset:-2px;
      background:radial-gradient(650px 240px at 10% 0%, rgba(212,175,55,.10), transparent 55%);
      pointer-events:none;
    }
    .panel > *{position:relative;z-index:1;}

    h2{
      margin:16px 0 8px;
      font-size:18px;
      letter-spacing:.2px;
      color:var(--gold2);
    }
    h3{
      margin:14px 0 8px;
      font-size:15.5px;
      letter-spacing:.2px;
      color:var(--gold2);
    }
    p{margin:0 0 10px;color:var(--txt);line-height:1.68;font-size:14.7px;opacity:.98}
    ul{margin:0 0 10px 18px;color:var(--txt);line-height:1.68;font-size:14.7px;opacity:.98}
    li{margin:4px 0;}
    .muted{color:var(--muted);}

    .hr{
      height:1px;
      background:linear-gradient(90deg,transparent,rgba(212,175,55,.35),transparent);
      margin:14px 0;
      opacity:.9;
    }

    .callout{
      margin:12px 0 12px;
      padding:12px 12px;
      border-radius:14px;
      border:1px dashed rgba(212,175,55,.30);
      background:rgba(0,0,0,.14);
      color:var(--txt);
      line-height:1.55;
      font-size:14px;
    }
    .callout b{color:var(--gold2);}

    /* Formulare / Felder – wie Kapitel 48 */
    .formBlock{
      border-radius:16px;
      border:1px solid rgba(212,175,55,.22);
      background:rgba(0,0,0,.14);
      padding:12px 12px;
      margin-top:10px;
    }
    .formHead{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .formHead .t{
      font-weight:900;
      color:var(--gold2);
      letter-spacing:.2px;
    }
    .formHead .m{
      color:var(--muted);
      font-size:12.8px;
      line-height:1.45;
      max-width:92ch;
    }

    .fg{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 900px){
      .fg{grid-template-columns:1fr;}
    }
    .field{
      display:flex;
      flex-direction:column;
      gap:6px;
      min-width:0;
    }
    .field label{
      font-weight:900;
      font-size:12.8px;
      color:var(--txt);
    }

    .hint{
      color:var(--muted);
      font-size:12.5px;
      line-height:1.45;
    }

    .field input[type="text"],
    .field textarea{
      width:100%;
      padding:10px 10px;
      border-radius:12px;
      border:1px solid rgba(212,175,55,.22);
      background:rgba(0,0,0,.20);
      color:var(--txt);
      outline:none;
      font-size:14px;
      line-height:1.35;
      transition: border-color .12s ease, filter .12s ease;
    }
    .field textarea{min-height:88px;resize:vertical;}
    .field input[type="text"]:focus,
    .field textarea:focus{
      border-color: rgba(242,211,122,.55);
      filter: brightness(1.03);
    }

    /* Beispieltext im Feld (wie „echter Text“, aber gedimmt) */
    .isExample{
      color: rgba(169,180,199,.92) !important;
    }

    .btnRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
      margin-top:10px;
    }
    .btn{
      appearance:none;border:none;cursor:pointer;
      padding:10px 12px;border-radius:14px;
      background:linear-gradient(180deg, rgba(212,175,55,.95), rgba(212,175,55,.75));
      color:#111; font-weight:900; letter-spacing:.2px;
      box-shadow:var(--glow);
      text-decoration:none;
      display:inline-flex;align-items:center;gap:8px;
      white-space:nowrap;
    }
    .btn2{
      appearance:none;border:1px solid rgba(212,175,55,.28);cursor:pointer;
      padding:10px 12px;border-radius:14px;
      background:rgba(0,0,0,.22);
      color:var(--txt); font-weight:900;
      text-decoration:none;
      display:inline-flex;align-items:center;gap:8px;
      white-space:nowrap;
    }
    .btn2:hover{background:rgba(0,0,0,.28);}
    .btn:hover{filter:brightness(1.03);}

    .footerNav{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      margin-top:14px;
      padding-top:12px;
      border-top:1px solid rgba(212,175,55,.18);
    }
    .footerNav .left,
    .footerNav .mid,
    .footerNav .right{
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;
    }
    .navBtn{
      appearance:none;border:1px solid rgba(212,175,55,.22);
      background:rgba(0,0,0,.18);
      color:var(--txt);
      padding:10px 12px;
      border-radius:14px;
      font-weight:900;
      cursor:pointer;
      text-decoration:none;
      white-space:nowrap;
    }
    .navBtn:hover{background:rgba(0,0,0,.22);}
    .navBtnPrimary{
      border:none;
      background:linear-gradient(180deg, rgba(212,175,55,.95), rgba(212,175,55,.75));
      color:#111;
      box-shadow:var(--glow);
    }

    /* Print */
    @page{ margin:14mm; }

    @media print{
      html,body{
        background:#fff !important;
        color:#000 !important;
        height:auto !important;
        overflow:visible !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      .wrap{padding:0 !important; max-width:none !important;}
      .topbar,.line,.footerNav,.btnRow{display:none !important;}

      .panel{
        box-shadow:none !important;
        background:#fff !important;
        border:1px solid #999 !important;
        backdrop-filter:none !important;
      }
      .panel:before{display:none !important;}

      h2,h3{color:#000 !important;}
      p,li,.muted,.callout,.hint{color:#000 !important;}

      .formBlock,.callout{
        background:#fff !important;
        box-shadow:none !important;
        border:1px solid #bbb !important;
      }

      input,textarea{
        background:#fff !important;
        color:#000 !important;
        border:1px solid #999 !important;
      }

      /* Print-Fix Umbrüche */
      h2,h3{break-after: avoid; page-break-after: avoid;}
      p,li{orphans:3; widows:3;}
      .callout,.formBlock,.hr{break-inside: avoid; page-break-inside: avoid;}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="kicker"><span class="dot"></span> <span data-i18n="kicker">Krypto-Aufklärung • Steuern</span></div>
        <div>
          <h1 data-i18n="title">Modul 6 – Steuerberater-Paket: Eingabeseite + Druck/PDF (mit Beispielen)</h1>
          <div class="sub" data-i18n="subtitle">
            Dieses Modul ist die praktische Arbeitserleichterung: Du sammelst die wichtigsten Informationen so, dass ein Steuerberater schnell versteht, was Sache ist.
          </div>
        </div>
      </div>

      <div class="btnRow" style="margin-top:0;">
        <button class="btn2" type="button" id="langBtn" aria-label="Sprache wechseln"><span data-i18n="lang_btn">DE/EN</span></button>
        <a class="btn2" href="./index.html" data-internal><span data-i18n="to_index">Index</span></a>
        <button class="btn navBtnPrimary" type="button" id="printBtnTop"><span data-i18n="print">Drucken</span></button>
      </div>
    </div>

    <div class="line"></div>

    <section class="panel">

      <div class="callout">
        <p data-i18n="intro_p1">
          Viele Steuerberater stellen ähnliche Fragen – nicht, weil sie „misstrauen“, sondern weil sie aus den Informationen die richtige Einordnung ableiten müssen.
          Ziel: Du gehst nicht mit „Chaos“ hin, sondern mit einem sauberen Überblick.
        </p>
        <div class="hr"></div>
        <p style="margin:0 0 8px;"><b data-i18n="intro_p2">So soll die Seite funktionieren (inhaltlich):</b></p>
        <ul>
          <li data-i18n="intro_li1">Du hast Eingabefelder für die wichtigsten Punkte.</li>
          <li data-i18n="intro_li2">In jedem Feld steht ein Beispieltext als Orientierung.</li>
          <li data-i18n="intro_li3">Sobald du in das Feld klickst, verschwindet das Beispiel.</li>
          <li data-i18n="intro_li4">Danach kannst du auf „Drucken“ gehen und hast ein sauberes PDF für den Termin.</li>
        </ul>
      </div>

      <div class="callout">
        <b data-i18n="note_b">Ruhiger Hinweis:</b>
        <span data-i18n="note">
          Du musst dem Steuerberater nicht „beweisen, dass alles richtig ist“. Du gibst ihm nur die Grundlage, um es richtig einzuordnen.
          Je klarer deine Übersicht, desto ruhiger und günstiger verläuft die Arbeit.
        </span>
      </div>

      <h2 data-i18n="s1_title">Abschnitt 1 – Basisdaten (einfach)</h2>
      <p class="muted" data-i18n="s1_desc">Steuerjahr, Wohnsitzland und eine kurze Beschreibung deiner Situation.</p>

      <div class="formBlock">
        <div class="formHead">
          <div class="t" data-i18n="s1_head">Basisdaten</div>
          <div class="m"><span class="hint" data-i18n="hint_click">Klick → Beispiel verschwindet</span></div>
        </div>

        <div class="fg">
          <div class="field">
            <label for="taxYear" data-i18n="f_taxYear">Steuerjahr</label>
            <input id="taxYear" type="text" data-field="taxYear"
              data-example-de="2026" data-example-en="2026" value="" />
          </div>

          <div class="field">
            <label for="country" data-i18n="f_country">Wohnsitzland / Steuerpflicht</label>
            <input id="country" type="text" data-field="country"
              data-example-de="Deutschland" data-example-en="Germany" value="" />
          </div>

          <div class="field" style="grid-column:1/-1;">
            <label for="situation" data-i18n="f_situation">Kurzbeschreibung deiner Situation</label>
            <textarea id="situation" data-field="situation"
              data-example-de="Privat, Einsteiger, wenige Käufe, keine Firma"
              data-example-en="Private, beginner, few buys, no company"></textarea>
          </div>
        </div>
      </div>

      <h2 data-i18n="s2_title">Abschnitt 2 – Plattformen & Konten</h2>
      <p class="muted" data-i18n="s2_desc">Welche Börsen/Plattformen, welche Wallets und welche Bankkonten du nutzt.</p>

      <div class="formBlock">
        <div class="formHead">
          <div class="t" data-i18n="s2_head">Plattformen & Konten</div>
          <div class="m"><span class="hint" data-i18n="hint_click">Klick → Beispiel verschwindet</span></div>
        </div>

        <div class="fg">
          <div class="field" style="grid-column:1/-1;">
            <label for="exchanges" data-i18n="f_exchanges">Welche Börsen/Plattformen genutzt?</label>
            <textarea id="exchanges" data-field="exchanges"
              data-example-de="Börse A, Börse B"
              data-example-en="Exchange A, Exchange B"></textarea>
          </div>

          <div class="field" style="grid-column:1/-1;">
            <label for="wallets" data-i18n="f_wallets">Welche Wallets genutzt?</label>
            <textarea id="wallets" data-field="wallets"
              data-example-de="Hardware Wallet, Mobile Wallet"
              data-example-en="Hardware wallet, mobile wallet"></textarea>
          </div>

          <div class="field" style="grid-column:1/-1;">
            <label for="banks" data-i18n="f_banks">Bankkonten für Ein-/Auszahlungen</label>
            <textarea id="banks" data-field="banks"
              data-example-de="Girokonto bei Bank X"
              data-example-en="Current account at Bank X"></textarea>
          </div>
        </div>
      </div>

      <h2 data-i18n="s3_title">Abschnitt 3 – Was hast du gemacht? (Auswahl + Details)</h2>
      <p class="muted" data-i18n="s3_desc">Setze Haken und notiere pro Punkt einen kurzen Satz.</p>

      <div class="formBlock">
        <div class="formHead">
          <div class="t" data-i18n="s3_head">Aktivitäten</div>
          <div class="m"><span class="hint" data-i18n="hint_click">Klick → Beispiel verschwindet</span></div>
        </div>

        <div class="fg">
          <div class="field">
            <label><input type="checkbox" data-field="c_buySell" /> <span data-i18n="c_buySell_t">Kaufen/Verkaufen</span></label>
            <textarea id="d_buySell" data-field="d_buySell"
              data-example-de="Käufe monatlich, Verkäufe selten"
              data-example-en="Buys monthly, sells rarely"></textarea>
          </div>

          <div class="field">
            <label><input type="checkbox" data-field="c_swap" /> <span data-i18n="c_swap_t">Krypto-zu-Krypto-Tausch</span></label>
            <textarea id="d_swap" data-field="d_swap"
              data-example-de="einige Swaps, meist USDT/ETH"
              data-example-en="some swaps, mostly USDT/ETH"></textarea>
          </div>

          <div class="field">
            <label><input type="checkbox" data-field="c_pay" /> <span data-i18n="c_pay_t">Bezahlen mit Krypto</span></label>
            <textarea id="d_pay" data-field="d_pay"
              data-example-de="nein"
              data-example-en="no"></textarea>
          </div>

          <div class="field">
            <label><input type="checkbox" data-field="c_rewards" /> <span data-i18n="c_rewards_t">Rewards/Erträge</span></label>
            <textarea id="d_rewards" data-field="d_rewards"
              data-example-de="Staking-Rewards erhalten"
              data-example-en="Received staking rewards"></textarea>
          </div>

          <div class="field">
            <label><input type="checkbox" data-field="c_airdrops" /> <span data-i18n="c_airdrops_t">Airdrops/Token-Zuteilungen</span></label>
            <textarea id="d_airdrops" data-field="d_airdrops"
              data-example-de="nein / einmal"
              data-example-en="no / once"></textarea>
          </div>

          <div class="field">
            <label><input type="checkbox" data-field="c_mining" /> <span data-i18n="c_mining_t">Mining/Validierung</span></label>
            <textarea id="d_mining" data-field="d_mining"
              data-example-de="nein"
              data-example-en="no"></textarea>
          </div>
        </div>
      </div>

      <h2 data-i18n="s4_title">Abschnitt 4 – Dokumentationsstand</h2>
      <p class="muted" data-i18n="s4_desc">CSV, Belege, und offene Punkte (Fehlstellen) – ehrlich notieren.</p>

      <div class="formBlock">
        <div class="formHead">
          <div class="t" data-i18n="s4_head">Dokumentation</div>
          <div class="m"><span class="hint" data-i18n="hint_click">Klick → Beispiel verschwindet</span></div>
        </div>

        <div class="fg">
          <div class="field" style="grid-column:1/-1;">
            <label for="csv" data-i18n="f_csv">CSV-Exporte vorhanden?</label>
            <textarea id="csv" data-field="csv"
              data-example-de="ja, von Börse A / teilweise"
              data-example-en="yes, from Exchange A / partly"></textarea>
          </div>

          <div class="field" style="grid-column:1/-1;">
            <label for="proofs" data-i18n="f_proofs">Screenshots/Belege vorhanden?</label>
            <textarea id="proofs" data-field="proofs"
              data-example-de="Kaufbestätigungen, Kontoauszüge"
              data-example-en="Trade confirmations, bank statements"></textarea>
          </div>

          <div class="field" style="grid-column:1/-1;">
            <label for="gaps" data-i18n="f_gaps">Fehlstellen/Probleme</label>
            <textarea id="gaps" data-field="gaps"
              data-example-de="Ein Wallet-Transfer nicht sicher zugeordnet"
              data-example-en="One wallet transfer not clearly matched"></textarea>
          </div>
        </div>
      </div>

      <h2 data-i18n="s5_title">Abschnitt 5 – Deine Fragen an den Steuerberater</h2>
      <p class="muted" data-i18n="s5_desc">Was willst du klären, wo bist du unsicher, und was soll am Ende rauskommen?</p>

      <div class="formBlock">
        <div class="formHead">
          <div class="t" data-i18n="s5_head">Fragen</div>
          <div class="m"><span class="hint" data-i18n="hint_click">Klick → Beispiel verschwindet</span></div>
        </div>

        <div class="fg">
          <div class="field" style="grid-column:1/-1;">
            <label for="questions" data-i18n="f_questions">Was willst du konkret klären?</label>
            <textarea id="questions" data-field="questions"
              data-example-de="Welche Vorgänge sind relevant? Wie erfasse ich Rewards?"
              data-example-en="Which activities are relevant? How should I record rewards?"></textarea>
          </div>

          <div class="field">
            <label for="uncertainty" data-i18n="f_uncertainty">Was ist dein größter Unsicherheitsbereich?</label>
            <textarea id="uncertainty" data-field="uncertainty"
              data-example-de="Swaps und Gebühren"
              data-example-en="Swaps and fees"></textarea>
          </div>

          <div class="field">
            <label for="wish" data-i18n="f_wish">Was wünschst du dir vom Ergebnis?</label>
            <textarea id="wish" data-field="wish"
              data-example-de="Saubere Jahresübersicht, klare Vorgehensweise fürs nächste Jahr"
              data-example-en="A clean yearly overview and a clear process for next year"></textarea>
          </div>
        </div>

        <div class="btnRow">
          <button class="btn2" type="button" id="resetBtn"><span data-i18n="reset">Zurücksetzen</span></button>
          <button class="btn2" type="button" id="saveBtn"><span data-i18n="save">Speichern</span></button>
          <button class="btn navBtnPrimary" type="button" id="printBtn"><span data-i18n="print2">Drucken / PDF</span></button>
        </div>
      </div>

      <h2 data-i18n="gloss_title">Mini-Glossar (Modul 6)</h2>
      <div class="formBlock">
        <ul style="margin:0 0 0 18px;">
          <li data-i18n="g1"><b>Steuerberater-Paket:</b> Deine strukturierte Vorbereitung (kein „Beweis“, sondern Ordnung).</li>
          <li data-i18n="g2"><b>Erfassungslogik:</b> Wie Vorgänge gesammelt und zugeordnet werden.</li>
          <li data-i18n="g3"><b>Fehlstelle:</b> Ein Punkt, der noch unklar ist (lieber ehrlich notieren).</li>
          <li data-i18n="g4"><b>Drittgelder:</b> Geld, das nicht dir gehört (wenn relevant, klar kennzeichnen).</li>
          <li data-i18n="g5"><b>Abgabereife:</b> „So sortiert, dass ein Profi damit arbeiten kann.“</li>
        </ul>
      </div>

      <div class="footerNav">
        <div class="left">
          <a class="navBtn" href="./modul-5-stop-regeln-ordnung.html" data-internal><span data-i18n="prev">Zurück: Modul 5</span></a>
        </div>
        <div class="mid">
          <a class="navBtn" href="./index.html" data-internal><span data-i18n="to_index2">Zum Index</span></a>
        </div>
        <div class="right">
          <button class="navBtn navBtnPrimary" type="button" id="printBtnBottom"><span data-i18n="print">Drucken</span></button>
        </div>
      </div>

    </section>
  </div>

  <script>
    (function(){
      const LS_LANG  = "fsa_lang";
      const LS_DATA  = "fsa_krypto_steuern_mod6";

      const dict = {
        de:{
          kicker:"Krypto-Aufklärung • Steuern",
          lang_btn:"DE/EN",
          to_index:"Index",
          to_index2:"Zum Index",
          prev:"Zurück: Modul 5",
          print:"Drucken",
          print2:"Drucken / PDF",
          save:"Speichern",
          reset:"Zurücksetzen",

          title:"Modul 6 – Steuerberater-Paket: Eingabeseite + Druck/PDF (mit Beispielen)",
          subtitle:"Dieses Modul ist die praktische Arbeitserleichterung: Du sammelst die wichtigsten Informationen so, dass ein Steuerberater schnell versteht, was Sache ist.",

          intro_p1:"Viele Steuerberater stellen ähnliche Fragen – nicht, weil sie „misstrauen“, sondern weil sie aus den Informationen die richtige Einordnung ableiten müssen. Ziel: Du gehst nicht mit „Chaos“ hin, sondern mit einem sauberen Überblick.",
          intro_p2:"So soll die Seite funktionieren (inhaltlich):",
          intro_li1:"Du hast Eingabefelder für die wichtigsten Punkte.",
          intro_li2:"In jedem Feld steht ein Beispieltext als Orientierung.",
          intro_li3:"Sobald du in das Feld klickst, verschwindet das Beispiel.",
          intro_li4:"Danach kannst du auf „Drucken“ gehen und hast ein sauberes PDF für den Termin.",
          note_b:"Ruhiger Hinweis:",
          note:"Du musst dem Steuerberater nicht „beweisen, dass alles richtig ist“. Du gibst ihm nur die Grundlage, um es richtig einzuordnen. Je klarer deine Übersicht, desto ruhiger und günstiger verläuft die Arbeit.",
          hint_click:"Klick → Beispiel verschwindet",

          s1_title:"Abschnitt 1 – Basisdaten (einfach)",
          s1_desc:"Steuerjahr, Wohnsitzland und eine kurze Beschreibung deiner Situation.",
          s1_head:"Basisdaten",
          f_taxYear:"Steuerjahr",
          f_country:"Wohnsitzland / Steuerpflicht",
          f_situation:"Kurzbeschreibung deiner Situation",

          s2_title:"Abschnitt 2 – Plattformen & Konten",
          s2_desc:"Welche Börsen/Plattformen, welche Wallets und welche Bankkonten du nutzt.",
          s2_head:"Plattformen & Konten",
          f_exchanges:"Welche Börsen/Plattformen genutzt?",
          f_wallets:"Welche Wallets genutzt?",
          f_banks:"Bankkonten für Ein-/Auszahlungen",

          s3_title:"Abschnitt 3 – Was hast du gemacht? (Auswahl + Details)",
          s3_desc:"Setze Haken und notiere pro Punkt einen kurzen Satz.",
          s3_head:"Aktivitäten",
          c_buySell_t:"Kaufen/Verkaufen",
          c_swap_t:"Krypto-zu-Krypto-Tausch",
          c_pay_t:"Bezahlen mit Krypto",
          c_rewards_t:"Rewards/Erträge",
          c_airdrops_t:"Airdrops/Token-Zuteilungen",
          c_mining_t:"Mining/Validierung",

          s4_title:"Abschnitt 4 – Dokumentationsstand",
          s4_desc:"CSV, Belege, und offene Punkte (Fehlstellen) – ehrlich notieren.",
          s4_head:"Dokumentation",
          f_csv:"CSV-Exporte vorhanden?",
          f_proofs:"Screenshots/Belege vorhanden?",
          f_gaps:"Fehlstellen/Probleme",

          s5_title:"Abschnitt 5 – Deine Fragen an den Steuerberater",
          s5_desc:"Was willst du klären, wo bist du unsicher, und was soll am Ende rauskommen?",
          s5_head:"Fragen",
          f_questions:"Was willst du konkret klären?",
          f_uncertainty:"Was ist dein größter Unsicherheitsbereich?",
          f_wish:"Was wünschst du dir vom Ergebnis?",

          gloss_title:"Mini-Glossar (Modul 6)",
          g1:"<b>Steuerberater-Paket:</b> Deine strukturierte Vorbereitung (kein „Beweis“, sondern Ordnung).",
          g2:"<b>Erfassungslogik:</b> Wie Vorgänge gesammelt und zugeordnet werden.",
          g3:"<b>Fehlstelle:</b> Ein Punkt, der noch unklar ist (lieber ehrlich notieren).",
          g4:"<b>Drittgelder:</b> Geld, das nicht dir gehört (wenn relevant, klar kennzeichnen).",
          g5:"<b>Abgabereife:</b> „So sortiert, dass ein Profi damit arbeiten kann.“"
        },
        en:{
          kicker:"Crypto Education • Taxes",
          lang_btn:"DE/EN",
          to_index:"Index",
          to_index2:"Back to index",
          prev:"Back: Module 5",
          print:"Print",
          print2:"Print / PDF",
          save:"Save",
          reset:"Reset",

          title:"Module 6 – Tax Advisor Package: Input page + Print/PDF (with examples)",
          subtitle:"This module is practical relief: you collect the key information so a tax advisor quickly understands what’s going on.",

          intro_p1:"Many tax advisors ask similar questions — not because they “distrust”, but because they need the information to classify things correctly. Goal: you don’t show up with chaos, but with a clean overview.",
          intro_p2:"How this page works (content):",
          intro_li1:"You have input fields for the most important points.",
          intro_li2:"Each field contains an example text as orientation.",
          intro_li3:"As soon as you click into the field, the example disappears.",
          intro_li4:"Then you can hit “Print” and you get a clean PDF for your appointment.",
          note_b:"Calm note:",
          note:"You don’t need to “prove everything is correct”. You only provide the foundation so a professional can classify it properly. The clearer your overview, the calmer and often cheaper the work becomes.",
          hint_click:"Click → example disappears",

          s1_title:"Section 1 – Basics (simple)",
          s1_desc:"Tax year, residence, and a short description of your situation.",
          s1_head:"Basics",
          f_taxYear:"Tax year",
          f_country:"Residence / tax liability",
          f_situation:"Short description of your situation",

          s2_title:"Section 2 – Platforms & accounts",
          s2_desc:"Which exchanges/platforms, which wallets, and which bank accounts you use.",
          s2_head:"Platforms & accounts",
          f_exchanges:"Which exchanges/platforms did you use?",
          f_wallets:"Which wallets did you use?",
          f_banks:"Bank accounts for deposits/withdrawals",

          s3_title:"Section 3 – What did you do? (selection + details)",
          s3_desc:"Tick boxes and write one short sentence per point.",
          s3_head:"Activities",
          c_buySell_t:"Buy/Sell",
          c_swap_t:"Crypto-to-crypto swaps",
          c_pay_t:"Paying with crypto",
          c_rewards_t:"Rewards / yield",
          c_airdrops_t:"Airdrops / token allocations",
          c_mining_t:"Mining / validation",

          s4_title:"Section 4 – Documentation status",
          s4_desc:"CSV, proofs, and open points (gaps) — write down honestly.",
          s4_head:"Documentation",
          f_csv:"Do you have CSV exports?",
          f_proofs:"Do you have screenshots/proofs?",
          f_gaps:"Gaps / issues",

          s5_title:"Section 5 – Your questions for the tax advisor",
          s5_desc:"What do you want clarified, where are you unsure, and what outcome do you want?",
          s5_head:"Questions",
          f_questions:"What do you want to clarify specifically?",
          f_uncertainty:"What is your biggest uncertainty?",
          f_wish:"What result do you want?",

          gloss_title:"Mini glossary (Module 6)",
          g1:"<b>Tax advisor package:</b> structured preparation (not “proof”, but order).",
          g2:"<b>Capture logic:</b> how activities are collected and matched.",
          g3:"<b>Gap:</b> something still unclear (better to note honestly).",
          g4:"<b>Third-party funds:</b> money that is not yours (if relevant, mark clearly).",
          g5:"<b>Ready to hand over:</b> sorted so a professional can work with it."
        }
      };

      const html = document.documentElement;

      function lang(){
        return (html.getAttribute("lang")==="en") ? "en" : "de";
      }

      function setI18n(l){
        html.setAttribute("lang", l);
        const d = dict[l] || dict.de;
        document.querySelectorAll("[data-i18n]").forEach(el=>{
          const k = el.getAttribute("data-i18n");
          const v = d[k];
          if(typeof v !== "string") return;
          if(v.includes("<b>")) el.innerHTML = v; else el.textContent = v;
        });
        localStorage.setItem(LS_LANG, l);
        syncExamplesToLanguage();
      }

      function $(id){ return document.getElementById(id); }

      const fields = Array.from(document.querySelectorAll("input[data-example-de], textarea[data-example-de]"));
      const nodes  = Array.from(document.querySelectorAll("[data-field]"));

      function isEmpty(v){ return ((v||"").trim()===""); }

      function getExampleFor(el, l){
        return el.dataset[(l==="en") ? "exampleEn" : "exampleDe"] || "";
      }

      function markExample(el, on){
        if(on){
          el.classList.add("isExample");
          el.dataset.isExample = "1";
        }else{
          el.classList.remove("isExample");
          el.dataset.isExample = "0";
        }
      }

      function ensureExample(el){
        const l = lang();
        const ex = getExampleFor(el, l);
        if(isEmpty(el.value)){
          el.value = ex;
          markExample(el, true);
        }
      }

      function syncExamplesToLanguage(){
        const l = lang();
        fields.forEach(el=>{
          const ex = getExampleFor(el, l);
          const isEx = (el.dataset.isExample === "1");
          if(isEx){
            el.value = ex;
            markExample(el, true);
          }else{
            if(isEmpty(el.value)) ensureExample(el);
          }
        });
      }

      fields.forEach(el=>{
        el.addEventListener("focus", ()=>{
          if(el.dataset.isExample === "1"){
            el.value = "";
            markExample(el, false);
          }
        });
        el.addEventListener("blur", ()=>{
          if(isEmpty(el.value)){
            ensureExample(el);
          }
        });
        el.addEventListener("input", ()=>{
          if(el.dataset.isExample === "1"){
            // falls irgendein Browser input feuert, während Beispiel drin ist:
            if(el.value !== getExampleFor(el, lang())) markExample(el, false);
          }
        });
      });

      function safeParse(json, fallback){
        try{ return JSON.parse(json); }catch(e){ return fallback; }
      }

      function getState(){
        return safeParse(localStorage.getItem(LS_DATA) || "{}", {});
      }

      function setState(obj){
        localStorage.setItem(LS_DATA, JSON.stringify(obj));
      }

      function readFromNode(node){
        if(node.type === "checkbox") return !!node.checked;
        return node.value;
      }

      function applyToNode(node, value){
        if(node.type === "checkbox") node.checked = !!value;
        else node.value = (value == null ? "" : String(value));
      }

      function restore(){
        const s = getState();
        if(s && typeof s === "object"){
          if(s.lang === "en" || s.lang === "de") setI18n(s.lang);
          if(s.fields && typeof s.fields === "object"){
            nodes.forEach(n=>{
              const k = n.getAttribute("data-field");
              if(k in s.fields) applyToNode(n, s.fields[k]);
            });
          }
          if(s.examples && typeof s.examples === "object"){
            fields.forEach(el=>{
              const id = el.id;
              if(!id) return;
              const isEx = !!s.examples[id];
              markExample(el, isEx);
            });
          }
        }
        // fehlende Beispiele nachziehen
        fields.forEach(el=>{
          if(isEmpty(el.value)) ensureExample(el);
          // wenn Wert exakt dem Beispiel entspricht, markiere als Beispiel
          const ex = getExampleFor(el, lang());
          if((el.value||"") === ex) markExample(el, true);
        });
      }

      function saveNow(){
        const s = getState();
        s.lang = lang();
        s.fields = s.fields || {};
        s.examples = s.examples || {};
        nodes.forEach(n=>{
          const k = n.getAttribute("data-field");
          s.fields[k] = readFromNode(n);
        });
        fields.forEach(el=>{
          if(!el.id) return;
          s.examples[el.id] = (el.dataset.isExample === "1");
        });
        setState(s);
      }

      let t=null;
      function scheduleSave(){
        if(t) window.clearTimeout(t);
        t = window.setTimeout(saveNow, 220);
      }

      function resetAll(){
        localStorage.removeItem(LS_DATA);
        nodes.forEach(n=>{
          if(n.type === "checkbox") n.checked = false;
          else n.value = "";
        });
        fields.forEach(el=>{ markExample(el,false); });
        fields.forEach(el=>ensureExample(el));
        scheduleSave();
      }

      function doPrint(){
        // Für Print: Beispieltexte kurzzeitig leeren, danach wiederherstellen
        const snapshot = fields.map(el=>({ el, v: el.value, isEx: (el.dataset.isExample==="1") }));
        snapshot.forEach(s=>{
          if(s.isEx) s.el.value = "";
        });
        window.print();
        window.setTimeout(()=>{
          snapshot.forEach(s=>{
            s.el.value = s.v;
            markExample(s.el, s.isEx);
          });
          syncExamplesToLanguage();
        }, 250);
      }

      function applyNoCache(){
        const links = Array.from(document.querySelectorAll("a[data-internal]"));
        links.forEach(a=>{
          a.addEventListener("click", (ev)=>{
            ev.preventDefault();
            const tstamp = Date.now();
            try{
              const u = new URL(a.getAttribute("href"), location.href);
              u.searchParams.set("nocache", String(tstamp));
              location.href = u.pathname + u.search + u.hash;
            }catch(e){
              location.href = a.getAttribute("href");
            }
          });
        });
      }

      // Bindings
      $("langBtn").addEventListener("click", ()=>{
        setI18n(lang()==="en" ? "de" : "en");
        scheduleSave();
      });

      $("saveBtn").addEventListener("click", saveNow);
      $("resetBtn").addEventListener("click", resetAll);

      $("printBtn").addEventListener("click", doPrint);
      $("printBtnTop").addEventListener("click", doPrint);
      $("printBtnBottom").addEventListener("click", doPrint);

      nodes.forEach(n=>{
        n.addEventListener("input", scheduleSave);
        n.addEventListener("change", scheduleSave);
      });

      // Init
      setI18n((localStorage.getItem(LS_LANG)==="en") ? "en" : "de");

      // iOS/Safari BFCache
      window.addEventListener("pageshow", ()=>{ restore(); });
      document.addEventListener("visibilitychange", ()=>{
        if(document.visibilityState === "visible") restore();
      });

      applyNoCache();
      restore();
      // sicherstellen, dass bei Erstaufruf Beispiele sichtbar sind
      fields.forEach(el=>ensureExample(el));
    })();
  </script>
</body>
</html>
