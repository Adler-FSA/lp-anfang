<!doctype html>
<!--
  FSA • Schnellstart Kurs • Modul 1 – Sicherheit zuerst
  GitHub-Pfad: lp-anfang/pages/schnellstart/modul-1-sicherheit.html
  Commit-Message: schnellstart – modul 1 sicherheit (DE/EN) + PDF Pflichtverweis + kursnotizen shared + printlayout
  Testlink (nocache): https://adler-fsa.github.io/lp-anfang/pages/schnellstart/modul-1-sicherheit.html?nocache=__TS__
-->
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modul 1 – Sicherheit zuerst (Schnellstart Kurs)</title>
  <meta name="description" content="Schnellstart Kurs – Modul 1: Sicherheit zuerst. Laienfreundlich, Stop-Signale, Seed-Regeln, Klarheits-Test. Kursnotizen (LocalStorage), Print/PDF." />

  <style>
    :root{
      --bg:#050814;
      --bg2:#020617;
      --panel:rgba(15,23,42,.88);
      --panel2:rgba(15,23,42,.72);
      --txt:#e9eef7;
      --muted:#a9b4c7;
      --gold:#d4af37;
      --gold2:#f2d37a;
      --line:rgba(212,175,55,.38);
      --shadow:0 24px 60px rgba(0,0,0,.55);
      --glow:0 0 26px rgba(212,175,55,.22), 0 12px 30px rgba(0,0,0,.55);
      --radius:18px;
      --maxw:1100px;
    }
    *{box-sizing:border-box;}
    html,body{
      margin:0;
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(212,175,55,.10), transparent 55%),
        radial-gradient(900px 600px at 80% 30%, rgba(94,168,255,.08), transparent 60%),
        linear-gradient(180deg,var(--bg),var(--bg2));
      color:var(--txt);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      overflow-x:hidden;
      -webkit-text-size-adjust:100%;
      text-size-adjust:100%;
    }

    /* Text-Sicherheit */
    body{
      hyphens:auto;
      -webkit-hyphens:auto;
      -ms-hyphens:auto;
      overflow-wrap:anywhere;
      word-break:normal;
    }
    p,h1,h2,h3,li,td,th,.sub,.muted,.label{
      overflow-wrap:anywhere;
      word-break:normal;
      hyphens:auto;
      -webkit-hyphens:auto;
      -ms-hyphens:auto;
    }

    .wrap{max-width:var(--maxw);margin:0 auto;padding:34px 18px 60px;}
    .topbar{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap;margin:6px 0 14px;}
    .brand{display:flex;flex-direction:column;gap:8px;min-width:min(720px,100%);}

    .kicker{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 10px;border-radius:999px;
      border:1px solid rgba(212,175,55,.25);
      background:rgba(0,0,0,.18);
      color:var(--gold2);
      font-size:12px;font-weight:800;letter-spacing:.25px;
      width:fit-content; white-space:nowrap;
    }
    .dot{width:8px;height:8px;border-radius:99px;background:rgba(242,211,122,.9);box-shadow:0 0 12px rgba(212,175,55,.35)}

    h1{margin:0;font-size:34px;line-height:1.1;font-weight:900}
    .sub{margin:2px 0 0;color:var(--muted);max-width:95ch;line-height:1.55}
    .line{height:2px;background:linear-gradient(90deg,transparent,var(--gold),transparent);opacity:.85;margin:12px 0 18px;}

    .panel{
      background:linear-gradient(180deg,var(--panel),var(--panel2));
      border:1px solid rgba(212,175,55,.22);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      backdrop-filter: blur(6px);
      padding:18px 18px;
      position:relative;
      overflow:hidden;
      margin-top:14px;
    }
    .panel:before{
      content:"";
      position:absolute;inset:-2px;
      background:radial-gradient(650px 240px at 10% 0%, rgba(212,175,55,.10), transparent 55%);
      pointer-events:none;
    }
    .panel > *{position:relative;z-index:1;}

    h2{margin:0 0 8px;font-size:18px;letter-spacing:.2px;color:var(--gold2)}
    h3{margin:12px 0 8px;font-size:15px;letter-spacing:.2px;color:var(--gold2)}
    p{margin:0 0 10px;color:var(--txt);line-height:1.7;font-size:14.5px;opacity:.98}
    .muted{color:var(--muted);}
    .hr{height:1px;background:rgba(212,175,55,.22);margin:14px 0}

    /* Language switch */
    .langBar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:flex-end;}
    .langBtn{
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(212,175,55,.28);
      background:rgba(0,0,0,.22);
      color:var(--txt);
      font-weight:900;
      display:inline-flex;align-items:center;gap:8px;
      white-space:nowrap;cursor:pointer;
    }
    .langBtn[aria-pressed="true"]{
      background:linear-gradient(180deg, rgba(212,175,55,.95), rgba(212,175,55,.75));
      color:#111;border:none;box-shadow:var(--glow);
    }

    /* Callout */
    .callout{
      border:1px solid rgba(212,175,55,.25);
      background:rgba(0,0,0,.16);
      border-radius:16px;
      padding:12px;
      box-shadow:0 0 18px rgba(212,175,55,.10);
      margin:10px 0 12px;
      overflow:hidden;
      min-width:0;
    }
    .callout strong{color:var(--gold2);}

    /* Simple list */
    .bul{
      margin:8px 0 0;
      padding-left:18px;
      color:var(--txt);
      line-height:1.7;
      font-size:14.5px;
      opacity:.98;
    }
    .bul li{margin:6px 0;}

    /* Inputs */
    .fieldRow{display:grid;grid-template-columns:1fr;gap:8px;margin:10px 0 2px;}
    .label{font-size:13px;color:var(--muted);font-weight:700;}
    .inp{
      width:100%;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(212,175,55,.22);
      background:rgba(0,0,0,.18);
      color:var(--txt);
      outline:none;
      font-size:14px;
      line-height:1.4;
      min-width:0;
    }
    .inp:focus{border-color:rgba(212,175,55,.42);box-shadow:0 0 0 3px rgba(212,175,55,.10);}
    .inp::placeholder{color:rgba(169,180,199,.75);}

    textarea{
      width:100%;
      min-height:200px;
      resize:vertical;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(212,175,55,.22);
      background:rgba(0,0,0,.18);
      color:var(--txt);
      outline:none;
      line-height:1.6;
      font-size:14px;
      min-width:0;
    }
    textarea:focus{border-color:rgba(212,175,55,.42);box-shadow:0 0 0 3px rgba(212,175,55,.10);}

    /* Buttons */
    .smallBtn,.navBtn{
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(212,175,55,.28);
      background:rgba(0,0,0,.22);
      color:var(--txt);
      font-weight:900;
      display:inline-flex;align-items:center;gap:8px;
      white-space:nowrap;cursor:pointer;
      text-decoration:none;
    }
    .smallBtn:hover,.navBtn:hover{background:rgba(0,0,0,.28);}
    .navBtnPrimary{
      background:linear-gradient(180deg, rgba(212,175,55,.95), rgba(212,175,55,.75));
      color:#111;border:none;box-shadow:var(--glow);
    }
    .navBtnPrimary:hover{filter:brightness(1.03);}
    .ico{width:16px;height:16px;display:inline-block;vertical-align:middle}

    .noteRow{
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin-top:10px
    }
    .saveHint{font-size:12px;color:var(--muted);}
    .footerNav{margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;justify-content:space-between;align-items:center;}
    .footerNav .left,.footerNav .mid,.footerNav .right{display:flex;gap:10px;flex-wrap:wrap;align-items:center;}

    /* PRINT */
    @page{ margin:14mm; }
    @media print{
      html,body{
        background:#fff !important;color:#000 !important;
        height:auto !important;overflow:visible !important;
        -webkit-print-color-adjust: exact;print-color-adjust: exact;
      }
      .wrap{padding:0 !important;}
      .langBar{display:none !important;}
      .noteRow button{display:none !important;}
      .footerNav{display:none !important;}

      .panel{
        box-shadow:none !important;background:#fff !important;
        border:1px solid #999 !important;backdrop-filter:none !important;
      }
      .panel:before{display:none !important;}
      .sub,p,textarea,.muted,.label,li{color:#000 !important;}
      h1,h2,h3{color:#000 !important;}
      .line{background:#999 !important;}
      a{color:#000 !important;text-decoration:none !important;}

      textarea,.inp{
        border:1px solid #999 !important;background:#fff !important;color:#000 !important;
      }
      .callout{background:#fff !important;border:1px solid #999 !important;box-shadow:none !important;}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="kicker"><span class="dot"></span> <span data-i18n="kicker">Schnellstart Kurs – Modul 1</span></div>
        <div>
          <h1 data-i18n="h1">Sicherheit zuerst</h1>
          <div class="sub" data-i18n="sub">Du lernst die wichtigsten Regeln, bevor du irgendetwas mit Geld, Links oder Bestätigungen machst.</div>
        </div>
      </div>

      <div class="langBar" aria-label="Language">
        <button class="langBtn" type="button" id="btnDE" aria-pressed="true">DE</button>
        <button class="langBtn" type="button" id="btnEN" aria-pressed="false">EN</button>
      </div>
    </div>

    <div class="line"></div>

    <section class="panel">
      <h2 data-i18n="sec1_title">1) Seed Phrase = Generalschlüssel (wichtigste Regel)</h2>
      <p data-i18n="sec1_p1">
        Wenn du eine Wallet erstellst, bekommst du 12 oder 24 Wörter. Das ist deine Seed Phrase. Stell dir das wie den Generalschlüssel zu einem Tresor vor.
        Wer diese Wörter hat, kann dein Wallet öffnen.
      </p>

      <div class="callout">
        <p style="margin:0;line-height:1.65;" data-i18n="sec1_callout">
          <strong>Regel:</strong> Diese Wörter werden niemals digital gespeichert. Sie werden nur handschriftlich notiert – am besten auf der Druckvorlage <b>FSA-Office-Sicherung.pdf</b>.
        </p>
      </div>

      <ul class="bul" data-i18n="sec1_list">
        <li>Kein Screenshot</li>
        <li>Nicht in Notizen-App speichern</li>
        <li>Nicht in Cloud (iCloud/Google Drive/Dropbox)</li>
        <li>Nicht per E-Mail oder Messenger senden</li>
        <li>Niemals an „Support“ geben</li>
      </ul>

      <div class="hr"></div>

      <h2 data-i18n="sec2_title">2) Keine Hilfe, die Zugriff will</h2>
      <p data-i18n="sec2_p1">
        Wenn jemand dir „helfen“ will und dafür Seed-Wörter, Bildschirmfreigabe oder Remote-Zugriff verlangt, ist das ein Stop-Signal.
        Gute Hilfe braucht niemals deinen Generalschlüssel.
      </p>

      <div class="callout">
        <p style="margin:0;line-height:1.65;" data-i18n="sec2_callout">
          <strong>Merke:</strong> „Schick mir kurz die Wörter“ = Betrug. „Mach Bildschirmfreigabe“ = Risiko. In Ruhe prüfen oder nicht machen.
        </p>
      </div>

      <div class="hr"></div>

      <h2 data-i18n="sec3_title">3) Stop-Signale (wenn das passiert: Pause)</h2>
      <p class="muted" data-i18n="sec3_p1">Wenn 2–3 Punkte zutreffen, machst du STOP und gehst nicht weiter.</p>
      <ul class="bul" data-i18n="sec3_list">
        <li>Zeitdruck („nur heute“, „letzte Chance“)</li>
        <li>Auszahlung nur nach Nachzahlung („Fee“, „Tax“, „Unlock“)</li>
        <li>„Support“ schreibt dich aktiv an und fordert Zugriff</li>
        <li>Du darfst keine kritischen Fragen stellen („FUD“, Kick/Bann)</li>
        <li>Die Website-Adresse ist nicht 100% identisch (Copycat)</li>
      </ul>

      <div class="hr"></div>

      <h2 data-i18n="sec4_title">4) Der Klarheits-Test (3 Fragen)</h2>
      <p data-i18n="sec4_p1">
        Bevor du irgendwo klickst oder etwas bestätigst, musst du diese 3 Fragen beantworten können:
      </p>
      <ul class="bul" data-i18n="sec4_list">
        <li>Was ist das? (1 Satz)</li>
        <li>Wofür ist es da / woher kommt das Geld? (1 Satz)</li>
        <li>Was soll ich tun? (z. B. Wallet verbinden, etwas bestätigen, Geld senden)</li>
      </ul>
      <p class="muted" data-i18n="sec4_p2">
        Wenn du das nicht kannst: nicht weitermachen. Erst verstehen, dann handeln.
      </p>

      <div class="hr"></div>

      <h2 data-i18n="notes_title">Kursnotizen (Modul 1)</h2>
      <p class="muted" data-i18n="notes_sub">Alles bleibt nur auf deinem Gerät (LocalStorage). Es wird nichts gesendet.</p>

      <div class="fieldRow">
        <div class="label" data-i18n="f1_label">A) Meine wichtigste No-Go Regel (in meinen Worten):</div>
        <input class="inp" id="m1_rule" type="text" placeholder="…" data-i18n-placeholder="ph_dots" />
      </div>

      <div class="fieldRow">
        <div class="label" data-i18n="f2_label">B) Meine 2 Stop-Signale (die ich sofort erkenne):</div>
        <input class="inp" id="m1_stop" type="text" placeholder="…" data-i18n-placeholder="ph_dots" />
      </div>

      <div class="fieldRow">
        <div class="label" data-i18n="f3_label">C) Mein Klarheits-Test (1–2 Sätze):</div>
        <input class="inp" id="m1_clarity" type="text" placeholder="…" data-i18n-placeholder="ph_dots" />
      </div>

      <div class="hr"></div>

      <p class="muted"><b data-i18n="free_notes">Freie Notizen (optional):</b></p>
      <textarea id="m1_notes" placeholder="…" data-i18n-placeholder="ph_notes"></textarea>

      <div class="noteRow">
        <div class="saveHint" id="saveHint" data-i18n="save_unsaved">Nicht gespeichert.</div>
        <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:flex-end;">
          <button class="smallBtn" type="button" id="clearPage">
            <svg class="ico" viewBox="0 0 24 24" aria-hidden="true">
              <path fill="currentColor" d="M7 4h10l1 2h4v2H2V6h4l1-2zm2 6h2v10H9V10zm4 0h2v10h-2V10zm-6 0h2v10H7V10zm10 0h2v10c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V10h14z"/>
            </svg>
            <span data-i18n="btn_clear_page">Seiten-Notizen löschen</span>
          </button>
          <button class="smallBtn" type="button" id="clearAll">
            <svg class="ico" viewBox="0 0 24 24" aria-hidden="true">
              <path fill="currentColor" d="M5 4h14v2H5V4zm2 4h10l-1 14H8L7 8zm4 2h2v10h-2V10z"/>
            </svg>
            <span data-i18n="btn_clear_all">Alle Kurs-Notizen löschen</span>
          </button>
        </div>
      </div>

      <div class="footerNav">
        <div class="left">
          <a class="navBtn" href="./index.html" data-internal>← <span data-i18n="btn_index">Kursstart</span></a>
        </div>
        <div class="mid">
          <a class="navBtn" href="./index.html" data-internal>← <span data-i18n="btn_back">Zurück</span></a>
          <a class="navBtn navBtnPrimary" href="./modul-2-wallet.html" data-internal><span data-i18n="btn_next">Weiter: Modul 2</span> →</a>
        </div>
        <div class="right">
          <button class="navBtn navBtnPrimary" type="button" id="printBtn">
            <svg class="ico" viewBox="0 0 24 24" aria-hidden="true">
              <path fill="currentColor" d="M6 9V3h12v6H6zm10-2V5H8v2h8zM6 19v-4H4a2 2 0 0 1-2-2v-3a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v3a2 2 0 0 1-2 2h-2v4H6zm2-2h8v-4H8v4z"/>
            </svg>
            <span data-i18n="btn_print">Drucken</span>
          </button>
        </div>
      </div>
    </section>
  </div>

  <script>
    (function(){
      "use strict";

      const COURSE_KEY = "fsa_schnellstart_notes_v1";
      const LANG_KEY   = "fsa_schnellstart_lang_v1";
      const PAGE_ID    = "modul1";

      const FIELD_IDS  = ["m1_rule","m1_stop","m1_clarity","m1_notes"];

      function safeGet(k){ try{ return localStorage.getItem(k); }catch(e){ return null; } }
      function safeSet(k,v){ try{ localStorage.setItem(k, v); }catch(e){} }
      function safeRemove(k){ try{ localStorage.removeItem(k); }catch(e){} }

      function loadCourseObject(){
        const raw = safeGet(COURSE_KEY);
        if(!raw) return { v:1, pages:{} };
        try{
          const obj = JSON.parse(raw);
          if(!obj || typeof obj !== "object") return { v:1, pages:{} };
          if(!obj.pages || typeof obj.pages !== "object") obj.pages = {};
          if(!obj.v) obj.v = 1;
          return obj;
        }catch(e){
          return { v:1, pages:{} };
        }
      }
      function saveCourseObject(obj){ safeSet(COURSE_KEY, JSON.stringify(obj)); }

      /* Print */
      const printBtn = document.getElementById("printBtn");
      if(printBtn) printBtn.addEventListener("click", ()=>window.print());

      /* I18N */
      const i18n = {
        de:{
          kicker:"Schnellstart Kurs – Modul 1",
          h1:"Sicherheit zuerst",
          sub:"Du lernst die wichtigsten Regeln, bevor du irgendetwas mit Geld, Links oder Bestätigungen machst.",

          sec1_title:"1) Seed Phrase = Generalschlüssel (wichtigste Regel)",
          sec1_p1:"Wenn du eine Wallet erstellst, bekommst du 12 oder 24 Wörter. Das ist deine Seed Phrase. Stell dir das wie den Generalschlüssel zu einem Tresor vor. Wer diese Wörter hat, kann dein Wallet öffnen.",
          sec1_callout:"<strong>Regel:</strong> Diese Wörter werden niemals digital gespeichert. Sie werden nur handschriftlich notiert – am besten auf der Druckvorlage <b>FSA-Office-Sicherung.pdf</b>.",
          sec1_list:"<li>Kein Screenshot</li><li>Nicht in Notizen-App speichern</li><li>Nicht in Cloud (iCloud/Google Drive/Dropbox)</li><li>Nicht per E-Mail oder Messenger senden</li><li>Niemals an „Support“ geben</li>",

          sec2_title:"2) Keine Hilfe, die Zugriff will",
          sec2_p1:"Wenn jemand dir „helfen“ will und dafür Seed-Wörter, Bildschirmfreigabe oder Remote-Zugriff verlangt, ist das ein Stop-Signal. Gute Hilfe braucht niemals deinen Generalschlüssel.",
          sec2_callout:"<strong>Merke:</strong> „Schick mir kurz die Wörter“ = Betrug. „Mach Bildschirmfreigabe“ = Risiko. In Ruhe prüfen oder nicht machen.",

          sec3_title:"3) Stop-Signale (wenn das passiert: Pause)",
          sec3_p1:"Wenn 2–3 Punkte zutreffen, machst du STOP und gehst nicht weiter.",
          sec3_list:"<li>Zeitdruck („nur heute“, „letzte Chance“)</li><li>Auszahlung nur nach Nachzahlung („Fee“, „Tax“, „Unlock“)</li><li>„Support“ schreibt dich aktiv an und fordert Zugriff</li><li>Du darfst keine kritischen Fragen stellen („FUD“, Kick/Bann)</li><li>Die Website-Adresse ist nicht 100% identisch (Copycat)</li>",

          sec4_title:"4) Der Klarheits-Test (3 Fragen)",
          sec4_p1:"Bevor du irgendwo klickst oder etwas bestätigst, musst du diese 3 Fragen beantworten können:",
          sec4_list:"<li>Was ist das? (1 Satz)</li><li>Wofür ist es da / woher kommt das Geld? (1 Satz)</li><li>Was soll ich tun? (z. B. Wallet verbinden, etwas bestätigen, Geld senden)</li>",
          sec4_p2:"Wenn du das nicht kannst: nicht weitermachen. Erst verstehen, dann handeln.",

          notes_title:"Kursnotizen (Modul 1)",
          notes_sub:"Alles bleibt nur auf deinem Gerät (LocalStorage). Es wird nichts gesendet.",
          f1_label:"A) Meine wichtigste No-Go Regel (in meinen Worten):",
          f2_label:"B) Meine 2 Stop-Signale (die ich sofort erkenne):",
          f3_label:"C) Mein Klarheits-Test (1–2 Sätze):",
          free_notes:"Freie Notizen (optional):",

          save_unsaved:"Nicht gespeichert.",
          save_saved:"Gespeichert (lokal).",

          btn_clear_page:"Seiten-Notizen löschen",
          btn_clear_all:"Alle Kurs-Notizen löschen",
          btn_index:"Kursstart",
          btn_back:"Zurück",
          btn_next:"Weiter: Modul 2",
          btn_print:"Drucken",

          ph_dots:"…",
          ph_notes:"Freie Notizen zu Modul 1 …",

          confirm_clear_page:"Seiten-Notizen wirklich löschen?",
          confirm_clear_all:"ALLE Kurs-Notizen auf diesem Gerät löschen?",
          alert_cleared:"Daten gelöscht."
        },
        en:{
          kicker:"Quick Start Course — Module 1",
          h1:"Safety First",
          sub:"You learn the most important rules before you do anything with money, links, or confirmations.",

          sec1_title:"1) Seed phrase = master key (most important rule)",
          sec1_p1:"When you create a wallet, you receive 12 or 24 words. That is your seed phrase. Think of it as the master key to a vault. Whoever has these words can open your wallet.",
          sec1_callout:"<strong>Rule:</strong> These words are never stored digitally. Write them down by hand — ideally on the printed sheet <b>FSA-Office-Sicherung.pdf</b>.",
          sec1_list:"<li>No screenshots</li><li>Do not store in a notes app</li><li>Do not store in the cloud (iCloud/Google Drive/Dropbox)</li><li>Do not send by email or messenger</li><li>Never give it to “support”</li>",

          sec2_title:"2) No “help” that wants access",
          sec2_p1:"If someone wants to “help” and asks for seed words, screen sharing, or remote access, that is a stop signal. Real help never needs your master key.",
          sec2_callout:"<strong>Remember:</strong> “Send me the words” = scam. “Turn on screen sharing” = risk. Check calmly — or don’t do it.",

          sec3_title:"3) Stop signals (if this happens: pause)",
          sec3_p1:"If 2–3 points apply, you STOP and do not continue.",
          sec3_list:"<li>Pressure (“only today”, “last chance”)</li><li>Payout only after paying a fee (“fee”, “tax”, “unlock”)</li><li>“Support” contacts you first and asks for access</li><li>You are not allowed to ask critical questions</li><li>The website address is not 100% identical (copycat)</li>",

          sec4_title:"4) The clarity test (3 questions)",
          sec4_p1:"Before you click anything or confirm something, you must answer these 3 questions:",
          sec4_list:"<li>What is it? (1 sentence)</li><li>What is it for / where does the money come from? (1 sentence)</li><li>What do I have to do? (connect wallet, confirm, send money, etc.)</li>",
          sec4_p2:"If you can’t explain it: do not continue. Understand first, act second.",

          notes_title:"Course notes (Module 1)",
          notes_sub:"Everything stays only on your device (LocalStorage). Nothing is sent anywhere.",
          f1_label:"A) My most important no-go rule (in my words):",
          f2_label:"B) My 2 stop signals (I will spot immediately):",
          f3_label:"C) My clarity test (1–2 sentences):",
          free_notes:"Free notes (optional):",

          save_unsaved:"Not saved.",
          save_saved:"Saved (local).",

          btn_clear_page:"Clear this page notes",
          btn_clear_all:"Clear all course notes",
          btn_index:"Course start",
          btn_back:"Back",
          btn_next:"Next: Module 2",
          btn_print:"Print",

          ph_dots:"…",
          ph_notes:"Free notes for Module 1 …",

          confirm_clear_page:"Really clear this page notes?",
          confirm_clear_all:"Clear ALL course notes on this device?",
          alert_cleared:"Data cleared."
        }
      };

      const hintEl = document.getElementById("saveHint");
      let lastHintState = "unsaved";

      function refreshHintLang(lang){
        if(!hintEl) return;
        hintEl.textContent = (lastHintState === "saved")
          ? ((lang === "en") ? i18n.en.save_saved : i18n.de.save_saved)
          : ((lang === "en") ? i18n.en.save_unsaved : i18n.de.save_unsaved);
      }

      function setLang(lang){
        const d = (lang === "en") ? i18n.en : i18n.de;
        document.documentElement.lang = (lang === "en") ? "en" : "de";
        safeSet(LANG_KEY, (lang === "en") ? "en" : "de");

        document.querySelectorAll("[data-i18n]").forEach(el=>{
          const key = el.getAttribute("data-i18n");
          if(key && Object.prototype.hasOwnProperty.call(d, key)){
            el.innerHTML = d[key];
          }
        });
        document.querySelectorAll("[data-i18n-placeholder]").forEach(el=>{
          const key = el.getAttribute("data-i18n-placeholder");
          if(key && Object.prototype.hasOwnProperty.call(d, key)){
            el.setAttribute("placeholder", d[key]);
          }
        });

        const btnDE = document.getElementById("btnDE");
        const btnEN = document.getElementById("btnEN");
        if(btnDE && btnEN){
          const isEN = (lang === "en");
          btnEN.setAttribute("aria-pressed", isEN ? "true" : "false");
          btnDE.setAttribute("aria-pressed", isEN ? "false" : "true");
        }
        refreshHintLang(lang);
      }

      document.getElementById("btnDE").addEventListener("click", ()=>setLang("de"));
      document.getElementById("btnEN").addEventListener("click", ()=>setLang("en"));

      /* Restore notes */
      function restorePageData(){
        const obj = loadCourseObject();
        const page = obj.pages[PAGE_ID] || {};
        FIELD_IDS.forEach(id=>{
          const el = document.getElementById(id);
          if(!el) return;
          if(Object.prototype.hasOwnProperty.call(page, id)){
            el.value = page[id] || "";
          }
        });
      }

      let saveTimer = null;
      function scheduleSave(){
        const lang = safeGet(LANG_KEY) === "en" ? "en" : "de";
        lastHintState = "unsaved";
        refreshHintLang(lang);

        if(saveTimer) clearTimeout(saveTimer);
        saveTimer = setTimeout(function(){
          const obj = loadCourseObject();
          if(!obj.pages[PAGE_ID]) obj.pages[PAGE_ID] = {};
          const page = obj.pages[PAGE_ID];

          FIELD_IDS.forEach(id=>{
            const el = document.getElementById(id);
            if(el) page[id] = el.value || "";
          });

          saveCourseObject(obj);
          lastHintState = "saved";
          refreshHintLang(lang);
        }, 250);
      }

      FIELD_IDS.forEach(id=>{
        const el = document.getElementById(id);
        if(!el) return;
        el.addEventListener("input", scheduleSave);
        el.addEventListener("change", scheduleSave);
      });

      document.getElementById("clearPage").addEventListener("click", function(){
        const lang = safeGet(LANG_KEY) === "en" ? "en" : "de";
        const msg = (lang === "en") ? i18n.en.confirm_clear_page : i18n.de.confirm_clear_page;
        if(!confirm(msg)) return;

        const obj = loadCourseObject();
        obj.pages[PAGE_ID] = {};
        saveCourseObject(obj);

        FIELD_IDS.forEach(id=>{
          const el = document.getElementById(id);
          if(el) el.value = "";
        });

        lastHintState = "unsaved";
        refreshHintLang(lang);
      });

      document.getElementById("clearAll").addEventListener("click", function(){
        const lang = safeGet(LANG_KEY) === "en" ? "en" : "de";
        const msg = (lang === "en") ? i18n.en.confirm_clear_all : i18n.de.confirm_clear_all;
        if(!confirm(msg)) return;

        safeRemove(COURSE_KEY);

        FIELD_IDS.forEach(id=>{
          const el = document.getElementById(id);
          if(el) el.value = "";
        });

        lastHintState = "unsaved";
        refreshHintLang(lang);
        alert((lang === "en") ? i18n.en.alert_cleared : i18n.de.alert_cleared);
      });

      /* nocache for internal links */
      (function(){
        const t = Date.now();
        document.querySelectorAll('a[data-internal]').forEach(a=>{
          try{
            const href = a.getAttribute('href');
            const u = new URL(href, location.href);
            u.searchParams.set('nocache', t);
            a.href = u.pathname + u.search + u.hash;
          }catch(e){}
        });
      })();

      /* INIT */
      const preferred = safeGet(LANG_KEY);
      const lang = (preferred === "en") ? "en" : "de";
      setLang(lang);
      restorePageData();

      (function(){
        const obj = loadCourseObject();
        const page = obj.pages[PAGE_ID] || {};
        const hasAny = FIELD_IDS.some(id=> (page[id] || "").trim().length > 0);
        lastHintState = hasAny ? "saved" : "unsaved";
        refreshHintLang(lang);
      })();

    })();
  </script>
</body>
</html>
