<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vorschau Einkommensrechner (Clubpreise)</title>
  <meta name="description" content="Einkommens-Vorschau: L1 20%, L2 15%, L3 10% auf bezahlte Umsätze. Preise: Clubpreise (-20%)." />
  <meta name="robots" content="index,follow" />

  <style>
    :root{
      --bg:#ffffff;
      --ink:#0b0b0b;
      --muted:#3a3a3a;
      --line:#d9d9d9;
      --panel:#f6f6f6;
      --panel2:#fbfbfb;
      --focus:#111111;
      --radius:14px;
      --shadow:0 10px 24px rgba(0,0,0,.08);

      /* recurring highlight (subtle, white/black compatible) */
      --rec-bg:#f1f6ff;
      --rec-edge:#1f3a66;

      /* booster pink (Logo-Farbe) */
      --booster:#d1007a;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:var(--bg);
      color:var(--ink);
    }
    a{color:inherit}
    .wrap{
      max-width:1180px;
      margin:0 auto;
      padding:22px 16px 40px;
    }
    header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      margin-bottom:14px;
    }
    .title{
      margin:0;
      font-size:22px;
      line-height:1.2;
      letter-spacing:.2px;
    }
    .sub{
      margin:6px 0 0 0;
      color:var(--muted);
      font-size:13.5px;
      line-height:1.35;
      max-width:78ch;
    }
    .lang{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .btn{
      appearance:none;
      border:1px solid var(--line);
      background:#fff;
      color:var(--ink);
      padding:8px 10px;
      border-radius:10px;
      font-weight:600;
      font-size:13px;
      cursor:pointer;
      box-shadow:none;
      white-space:nowrap;
    }
    .btn:active{transform:translateY(1px)}
    .btn.primary{
      border-color:var(--ink);
      background:var(--ink);
      color:#fff;
    }
    .btn.ghost{ background:transparent; }

    /* Reset-Button: Booster-Pink */
    .btn.booster{
      border-color:var(--booster);
      background:var(--booster);
      color:#fff;
    }
    .btn.booster:active{ transform:translateY(1px); }
    .btn.booster:focus{
      outline:none;
      box-shadow:0 0 0 3px rgba(209,0,122,.22);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:14px;
      margin-top:12px;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
      header{flex-direction:column; align-items:stretch}
      .lang{justify-content:flex-start}
    }

    .card{
      border:1px solid var(--line);
      border-radius:var(--radius);
      background:var(--panel2);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .card .hd{
      padding:14px 14px 10px;
      border-bottom:1px solid var(--line);
      background:var(--panel);
    }
    .card .hd h2{
      margin:0;
      font-size:15px;
      letter-spacing:.2px;
    }
    .card .bd{ padding:14px; }

    .note{
      border:1px dashed var(--line);
      background:#fff;
      border-radius:12px;
      padding:12px;
      color:var(--muted);
      font-size:13.5px;
      line-height:1.35;
    }

    table{ width:100%; border-collapse:collapse; }
    th, td{
      border-bottom:1px solid var(--line);
      padding:10px 8px;
      vertical-align:middle;
      font-size:13.5px;
      background:#fff;
    }
    th{
      text-align:left;
      font-size:12px;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:var(--muted);
      background:#ffffff;
      position:sticky;
      top:0;
      z-index:1;
    }
    .twrap{
      max-height:560px;
      overflow:auto;
      border:1px solid var(--line);
      border-radius:12px;
      background:#fff;
    }

    .pname{ font-weight:700; display:block; margin-bottom:2px; }
    .pcat{ font-size:12.5px; color:var(--muted); }
    .price{
      font-variant-numeric: tabular-nums;
      font-weight:700;
      white-space:nowrap;
    }
    .num{
      width:86px;
      max-width:100%;
      padding:8px 8px;
      border:1px solid var(--line);
      border-radius:10px;
      outline:none;
      background:#fff;
      color:var(--ink);
      font-variant-numeric: tabular-nums;
    }
    .num:focus{
      border-color:var(--focus);
      box-shadow:0 0 0 3px rgba(0,0,0,.10);
    }
    .right{
      text-align:right;
      font-variant-numeric: tabular-nums;
      white-space:nowrap;
    }

    /* recurring row highlight */
    tr.recurring td{ background:var(--rec-bg); }
    tr.recurring td:first-child{ box-shadow: inset 4px 0 0 var(--rec-edge); }
    .rec-tag{
      display:inline-block;
      margin-top:6px;
      font-size:11px;
      font-weight:800;
      letter-spacing:.10em;
      text-transform:uppercase;
      color:var(--rec-edge);
      background:#fff;
      border:1px solid rgba(31,58,102,.35);
      border-radius:999px;
      padding:3px 8px;
    }

    .kpis{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      margin-bottom:12px;
    }
    @media (max-width:520px){ .kpis{grid-template-columns:1fr} }
    .kpi{
      border:1px solid var(--line);
      background:#fff;
      border-radius:12px;
      padding:12px;
    }
    .kpi .lbl{
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.12em;
      color:var(--muted);
      margin-bottom:6px;
    }
    .kpi .val{
      font-size:20px;
      font-weight:800;
      font-variant-numeric: tabular-nums;
    }
    .kpi .hint{
      margin-top:6px;
      font-size:12.5px;
      color:var(--muted);
      line-height:1.25;
    }

    .split{ display:grid; grid-template-columns:1fr; gap:10px; }
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      border:1px solid var(--line);
      background:#fff;
      border-radius:12px;
      padding:10px 12px;
    }
    .row .l{ color:var(--muted); font-weight:700; }
    .row .r{ font-weight:800; font-variant-numeric: tabular-nums; white-space:nowrap; }

    .foot{
      margin-top:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-start;
    }
    .mini{ font-size:12.5px; color:var(--muted); }

    .year2{
      margin-top:12px;
      border:1px solid var(--line);
      background:#fff;
      border-radius:12px;
      padding:12px;
    }
    .year2.hintRecurring{
      background:var(--rec-bg);
      border-color:rgba(31,58,102,.25);
    }
    .year2.hintRecurring .cap{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom:6px;
    }
    .year2 .cap .badge{
      display:inline-block;
      font-size:11px;
      font-weight:900;
      letter-spacing:.10em;
      text-transform:uppercase;
      color:var(--rec-edge);
      background:#fff;
      border:1px solid rgba(31,58,102,.35);
      border-radius:999px;
      padding:3px 8px;
      white-space:nowrap;
    }
    .year2 h3{ margin:0; font-size:14px; letter-spacing:.2px; }
    .year2 .desc{
      margin:0 0 10px 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.3;
    }
    .year2 .kpis2{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
      margin-bottom:10px;
    }
    .year2 .kpi2{
      border:1px solid var(--line);
      border-radius:12px;
      padding:10px 12px;
      background:var(--panel2);
    }
    .year2 .kpi2 .lbl{
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.12em;
      color:var(--muted);
      margin-bottom:6px;
    }
    .year2 .kpi2 .val{
      font-size:18px;
      font-weight:900;
      font-variant-numeric: tabular-nums;
      white-space:nowrap;
    }
    .year2 .rows2{ display:grid; grid-template-columns:1fr; gap:8px; }
    .year2 .row2{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      border:1px solid var(--line);
      border-radius:12px;
      padding:9px 12px;
      background:#fff;
    }
    .year2 .row2 .l{ color:var(--muted); font-weight:800; }
    .year2 .row2 .r{ font-weight:900; font-variant-numeric: tabular-nums; white-space:nowrap; }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <h1 class="title" data-i18n="title">Vorschau Einkommensrechner (Clubpreise)</h1>
        <p class="sub" data-i18n="subtitle">
          Ebene 0 (du) rechnet auf bezahlte Umsätze: L1 = 20%, L2 = 15%, L3 = 10%. Alle Preise sind Clubpreise (-20%).
        </p>
      </div>

      <div class="lang" aria-label="Language">
        <button class="btn primary" id="langDE" type="button">DE</button>
        <button class="btn ghost" id="langEN" type="button">EN</button>
        <button class="btn booster" id="resetBtn" type="button" data-i18n="reset">Zurücksetzen</button>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <div class="hd">
          <h2 data-i18n="inputsTitle">Eingaben (Anzahl Käufe pro Ebene)</h2>
        </div>
        <div class="bd">
          <div class="note" data-i18n="noteTop">
            Hinweis: Das ist eine Vorschau auf mögliches Einkommen. Keine Garantie. Berechnung erfolgt nur auf bezahlte Umsätze.
          </div>

          <div style="height:12px"></div>

          <div class="twrap" role="region" aria-label="Rechner Tabelle">
            <table>
              <thead>
                <tr>
                  <th data-i18n="thProduct">Produkt</th>
                  <th class="right" data-i18n="thPrice">Clubpreis</th>
                  <th class="right" data-i18n="thL1">L1</th>
                  <th class="right" data-i18n="thL2">L2</th>
                  <th class="right" data-i18n="thL3">L3</th>
                </tr>
              </thead>
              <tbody id="rows"></tbody>
            </table>
          </div>

          <div class="foot">
            <span class="mini" data-i18n="formula">Formel: (Anzahl Käufe × Clubpreis) × Satz je Ebene.</span>
            <span class="mini" data-i18n="recLegend">Markierung: Wiederkehrender Beitrag (Verlängerung möglich).</span>
          </div>
        </div>
      </section>

      <aside class="card">
        <div class="hd">
          <h2 data-i18n="resultsTitle">Ergebnis (Ebene 0)</h2>
        </div>
        <div class="bd">
          <div class="kpis">
            <div class="kpi">
              <div class="lbl" data-i18n="kpiTotal">Provision Gesamt</div>
              <div class="val" id="kpiTotal">0,00 €</div>
              <div class="hint" data-i18n="kpiTotalHint">Summe aus L1 (20%) + L2 (15%) + L3 (10%).</div>
            </div>
            <div class="kpi">
              <div class="lbl" data-i18n="kpiPaid">Bezahlter Umsatz (gesamt)</div>
              <div class="val" id="kpiRevenue">0,00 €</div>
              <div class="hint" data-i18n="kpiPaidHint">Summe aller eingegebenen Käufe × Clubpreise (L1+L2+L3).</div>
            </div>
          </div>

          <div class="split">
            <div class="row"><div class="l" data-i18n="lvl1">L1-Provision (20%)</div><div class="r" id="pL1">0,00 €</div></div>
            <div class="row"><div class="l" data-i18n="lvl2">L2-Provision (15%)</div><div class="r" id="pL2">0,00 €</div></div>
            <div class="row"><div class="l" data-i18n="lvl3">L3-Provision (10%)</div><div class="r" id="pL3">0,00 €</div></div>
          </div>

          <div style="height:12px"></div>

          <div class="note" id="noteBottom" data-i18n="noteBottom">
            Alle Preise sind Clubpreise (-20%). Ebene 0 ist immer die Basis: Du füllst L1 (20%), L1 füllt L2 (15% für dich), L2 füllt L3 (10% für dich).
          </div>

          <div class="year2 hintRecurring" aria-label="Jahr 2 Verlängerung">
            <div class="cap">
              <h3 data-i18n="y2Title">Tragfähigkeit – Jahr 2 (Verlängerung)</h3>
              <span class="badge" data-i18n="y2Badge">Wiederkehrend</span>
            </div>
            <p class="desc" data-i18n="y2Desc">
              Zusatz-Ansicht: Diese Werte entstehen nur, wenn im Folgejahr wiederkehrende Beiträge erneut bezahlt werden (Mitgliedschaft + beide Leadmaschinen).
            </p>

            <div class="kpis2">
              <div class="kpi2">
                <div class="lbl" data-i18n="y2Prov">Wiederkehrende Provision (Jahr 2)</div>
                <div class="val" id="y2TotalProv">0,00 €</div>
              </div>
            </div>

            <div class="rows2">
              <div class="row2"><div class="l" data-i18n="y2L1">Jahr-2 Provision aus L1 (20%)</div><div class="r" id="y2PL1">0,00 €</div></div>
              <div class="row2"><div class="l" data-i18n="y2L2">Jahr-2 Provision aus L2 (15%)</div><div class="r" id="y2PL2">0,00 €</div></div>
              <div class="row2"><div class="l" data-i18n="y2L3">Jahr-2 Provision aus L3 (10%)</div><div class="r" id="y2PL3">0,00 €</div></div>
            </div>
          </div>

        </div>
      </aside>
    </div>
  </div>

  <script>
    (function(){
      "use strict";

      const RATES = { L1: 0.20, L2: 0.15, L3: 0.10 };

      const PRODUCTS = [
        { id:"membership_year", name_de:"Club-Mitgliedschaft (Jahresgebühr)", name_en:"Club Membership (annual fee)", cat_de:"MITGLIEDSCHAFT", cat_en:"MEMBERSHIP", price:60.00 },
        { id:"kickoff_ticket",   name_de:"Kick-Off Seminar – Ticket (Frühbucher)", name_en:"Kick-Off Seminar – Ticket (early bird)", cat_de:"MITGLIEDSCHAFT", cat_en:"MEMBERSHIP", price:39.20 },
        { id:"lead_starter",     name_de:"Leadmaschine für Starter (Jahresgebühr)", name_en:"Lead machine for starters (annual fee)", cat_de:"LEADMASCHINE", cat_en:"LEAD MACHINE", price:60.00 },

        { id:"lead_pro",
          name_de:"Leadmaschine für Profis (Jahresgebühr – 2× halbjährlich)",
          name_en:"Lead machine for pros (annual fee – paid semi-annually)",
          cat_de:"LEADMASCHINE", cat_en:"LEAD MACHINE",
          price:298.00
        },

        { id:"weekend_setup",    name_de:"Weekend-Setup (2-Tage-Workshop)", name_en:"Weekend Setup (2-day workshop)", cat_de:"COACHING", cat_en:"COACHING", price:399.00 },
        { id:"nft_course",       name_de:"NFT Kurs", name_en:"NFT Course", cat_de:"COACHING", cat_en:"COACHING", price:160.00 },
        { id:"book",             name_de:"Buch „Die Rückeroberung der eigenen Souveränität“", name_en:"Book “Reclaiming Your Sovereignty”", cat_de:"COACHING", cat_en:"COACHING", price:31.20 },
        { id:"trading_course",   name_de:"Tradingkurs", name_en:"Trading Course", cat_de:"COACHING", cat_en:"COACHING", price:180.00 },
        { id:"krypto_setup",     name_de:"Krypto Setup Kurs", name_en:"Crypto Setup Course", cat_de:"COACHING", cat_en:"COACHING", price:140.00 }
      ];

      const RECURRING_IDS = new Set(["membership_year","lead_starter","lead_pro"]);

      // Startbild (3×3 Logik) für wiederkehrende Produkte:
      const START_DEFAULTS = {
        membership_year: { L1: 3, L2: 9,  L3: 27 },
        lead_starter:    { L1: 3, L2: 9,  L3: 27 },
        lead_pro:        { L1: 3, L2: 9,  L3: 27 }
      };

      const $rows = document.getElementById("rows");
      const $kpiTotal = document.getElementById("kpiTotal");
      const $kpiRevenue = document.getElementById("kpiRevenue");
      const $pL1 = document.getElementById("pL1");
      const $pL2 = document.getElementById("pL2");
      const $pL3 = document.getElementById("pL3");

      const $y2TotalProv = document.getElementById("y2TotalProv");
      const $y2PL1 = document.getElementById("y2PL1");
      const $y2PL2 = document.getElementById("y2PL2");
      const $y2PL3 = document.getElementById("y2PL3");

      const $langDE = document.getElementById("langDE");
      const $langEN = document.getElementById("langEN");
      const $resetBtn = document.getElementById("resetBtn");

      let LANG = "de";

      function fmtEUR(n){
        const locale = (LANG === "de") ? "de-DE" : "en-GB";
        return new Intl.NumberFormat(locale, { style:"currency", currency:"EUR" }).format(n);
      }

      function clampInt(v){
        const n = Number(v);
        if (!Number.isFinite(n) || n < 0) return 0;
        return Math.floor(n);
      }

      function escapeHtml(str){
        return String(str)
          .replaceAll("&","&amp;")
          .replaceAll("<","&lt;")
          .replaceAll(">","&gt;")
          .replaceAll('"',"&quot;")
          .replaceAll("'","&#039;");
      }

      function makeKey(pid,lvl){ return pid + "|" + lvl; }

      function readInputsToMap(){
        const map = {};
        const inputs = $rows.querySelectorAll("input.num");
        for (const el of inputs){
          const pid = el.getAttribute("data-pid");
          const lvl = el.getAttribute("data-lvl");
          map[makeKey(pid,lvl)] = String(clampInt(el.value));
        }
        return map;
      }

      function writeInputsFromMap(map){
        const inputs = $rows.querySelectorAll("input.num");
        for (const el of inputs){
          const pid = el.getAttribute("data-pid");
          const lvl = el.getAttribute("data-lvl");
          const k = makeKey(pid,lvl);
          if (map[k] != null) el.value = map[k];
        }
      }

      function makeInput(pid, lvl){
        const input = document.createElement("input");
        input.type = "number";
        input.min = "0";
        input.step = "1";
        input.inputMode = "numeric";
        input.className = "num";
        input.value = "0";
        input.setAttribute("data-pid", pid);
        input.setAttribute("data-lvl", lvl);
        input.addEventListener("input", recalc);
        input.addEventListener("blur", () => {
          input.value = String(clampInt(input.value));
          recalc();
        });
        return input;
      }

      function renderRows(){
        $rows.innerHTML = "";
        for (const p of PRODUCTS){
          const tr = document.createElement("tr");
          const isRec = RECURRING_IDS.has(p.id);
          if (isRec) tr.classList.add("recurring");

          const tdP = document.createElement("td");
          tdP.innerHTML =
            `<span class="pname">${escapeHtml(LANG==="de" ? p.name_de : p.name_en)}</span>
             <span class="pcat">${escapeHtml(LANG==="de" ? p.cat_de : p.cat_en)}</span>
             ${isRec ? `<span class="rec-tag">${escapeHtml(LANG==="de" ? "Wiederkehrend" : "Recurring")}</span>` : ""}`;
          tr.appendChild(tdP);

          const tdPrice = document.createElement("td");
          tdPrice.className = "right price";
          tdPrice.textContent = fmtEUR(p.price);
          tr.appendChild(tdPrice);

          const tdL1 = document.createElement("td");
          tdL1.className = "right";
          tdL1.appendChild(makeInput(p.id, "L1"));
          tr.appendChild(tdL1);

          const tdL2 = document.createElement("td");
          tdL2.className = "right";
          tdL2.appendChild(makeInput(p.id, "L2"));
          tr.appendChild(tdL2);

          const tdL3 = document.createElement("td");
          tdL3.className = "right";
          tdL3.appendChild(makeInput(p.id, "L3"));
          tr.appendChild(tdL3);

          $rows.appendChild(tr);
        }
      }

      function setStartDefaults(){
        // alle Felder zuerst 0
        const inputs = $rows.querySelectorAll("input.num");
        for (const el of inputs) el.value = "0";

        // Startwerte nur für wiederkehrende Produkte setzen (3/9/27)
        for (const pid of Object.keys(START_DEFAULTS)){
          const d = START_DEFAULTS[pid];
          const iL1 = $rows.querySelector(`input.num[data-pid="${pid}"][data-lvl="L1"]`);
          const iL2 = $rows.querySelector(`input.num[data-pid="${pid}"][data-lvl="L2"]`);
          const iL3 = $rows.querySelector(`input.num[data-pid="${pid}"][data-lvl="L3"]`);
          if (iL1) iL1.value = String(d.L1);
          if (iL2) iL2.value = String(d.L2);
          if (iL3) iL3.value = String(d.L3);
        }

        recalc();
      }

      function recalc(){
        let revL1 = 0, revL2 = 0, revL3 = 0;
        let revY2L1 = 0, revY2L2 = 0, revY2L3 = 0;

        const inputs = $rows.querySelectorAll("input.num");
        for (const el of inputs){
          const pid = el.getAttribute("data-pid");
          const lvl = el.getAttribute("data-lvl");
          const p = PRODUCTS.find(x => x.id === pid);
          if (!p) continue;

          const qty = clampInt(el.value);
          const revenue = qty * p.price;

          if (lvl === "L1") revL1 += revenue;
          else if (lvl === "L2") revL2 += revenue;
          else if (lvl === "L3") revL3 += revenue;

          if (RECURRING_IDS.has(pid)){
            if (lvl === "L1") revY2L1 += revenue;
            else if (lvl === "L2") revY2L2 += revenue;
            else if (lvl === "L3") revY2L3 += revenue;
          }
        }

        const provL1 = revL1 * RATES.L1;
        const provL2 = revL2 * RATES.L2;
        const provL3 = revL3 * RATES.L3;

        const totalProv = provL1 + provL2 + provL3;
        const totalRev = revL1 + revL2 + revL3;

        $pL1.textContent = fmtEUR(provL1);
        $pL2.textContent = fmtEUR(provL2);
        $pL3.textContent = fmtEUR(provL3);

        $kpiTotal.textContent = fmtEUR(totalProv);
        $kpiRevenue.textContent = fmtEUR(totalRev);

        const y2ProvL1 = revY2L1 * RATES.L1;
        const y2ProvL2 = revY2L2 * RATES.L2;
        const y2ProvL3 = revY2L3 * RATES.L3;

        const y2Prov = y2ProvL1 + y2ProvL2 + y2ProvL3;

        $y2TotalProv.textContent = fmtEUR(y2Prov);
        $y2PL1.textContent = fmtEUR(y2ProvL1);
        $y2PL2.textContent = fmtEUR(y2ProvL2);
        $y2PL3.textContent = fmtEUR(y2ProvL3);
      }

      // Pinker Reset: löscht alle Zahlen (damit eigene Werte eingetragen werden können)
      function resetAll(){
        const inputs = $rows.querySelectorAll("input.num");
        for (const el of inputs) el.value = "0";
        recalc();
      }

      const I18N = {
        de: {
          title: "Vorschau Einkommensrechner (Clubpreise)",
          subtitle: "Ebene 0 (du) rechnet auf bezahlte Umsätze: L1 = 20%, L2 = 15%, L3 = 10%. Alle Preise sind Clubpreise (-20%).",
          reset: "Zurücksetzen",
          inputsTitle: "Eingaben (Anzahl Käufe pro Ebene)",
          noteTop: "Hinweis: Das ist eine Vorschau auf mögliches Einkommen. Keine Garantie. Berechnung erfolgt nur auf bezahlte Umsätze.",
          thProduct: "Produkt",
          thPrice: "Clubpreis",
          thL1: "L1",
          thL2: "L2",
          thL3: "L3",
          formula: "Formel: (Anzahl Käufe × Clubpreis) × Satz je Ebene.",
          recLegend: "Markierung: Wiederkehrender Beitrag (Verlängerung möglich).",
          resultsTitle: "Ergebnis (Ebene 0)",
          kpiTotal: "Provision Gesamt",
          kpiTotalHint: "Summe aus L1 (20%) + L2 (15%) + L3 (10%).",
          kpiPaid: "Bezahlter Umsatz (gesamt)",
          kpiPaidHint: "Summe aller eingegebenen Käufe × Clubpreise (L1+L2+L3).",
          lvl1: "L1-Provision (20%)",
          lvl2: "L2-Provision (15%)",
          lvl3: "L3-Provision (10%)",
          noteBottom: "Alle Preise sind Clubpreise (-20%). Ebene 0 ist immer die Basis: Du füllst L1 (20%), L1 füllt L2 (15% für dich), L2 füllt L3 (10% für dich).",
          y2Title: "Tragfähigkeit – Jahr 2 (Verlängerung)",
          y2Badge: "Wiederkehrend",
          y2Desc: "Zusatz-Ansicht: Diese Werte entstehen nur, wenn im Folgejahr wiederkehrende Beiträge erneut bezahlt werden (Mitgliedschaft + beide Leadmaschinen).",
          y2Prov: "Wiederkehrende Provision (Jahr 2)",
          y2L1: "Jahr-2 Provision aus L1 (20%)",
          y2L2: "Jahr-2 Provision aus L2 (15%)",
          y2L3: "Jahr-2 Provision aus L3 (10%)"
        },
        en: {
          title: "Income Preview Calculator (Club prices)",
          subtitle: "Level 0 (you) calculates on paid revenue: L1 = 20%, L2 = 15%, L3 = 10%. All prices are club prices (-20%).",
          reset: "Reset",
          inputsTitle: "Inputs (number of purchases per level)",
          noteTop: "Note: This is a preview of possible income. No guarantee. Calculation is based on paid revenue only.",
          thProduct: "Product",
          thPrice: "Club price",
          thL1: "L1",
          thL2: "L2",
          thL3: "L3",
          formula: "Formula: (purchases × club price) × level rate.",
          recLegend: "Highlight: Recurring fee (renewal possible).",
          resultsTitle: "Result (Level 0)",
          kpiTotal: "Total commission",
          kpiTotalHint: "Sum of L1 (20%) + L2 (15%) + L3 (10%).",
          kpiPaid: "Paid revenue (total)",
          kpiPaidHint: "Sum of all entered purchases × club prices (L1+L2+L3).",
          lvl1: "L1 commission (20%)",
          lvl2: "L2 commission (15%)",
          lvl3: "L3 commission (10%)",
          noteBottom: "All prices are club prices (-20%). Level 0 is always the base: you fill L1 (20%), L1 fills L2 (15% for you), L2 fills L3 (10% for you).",
          y2Title: "Sustainability – Year 2 (Renewal)",
          y2Badge: "Recurring",
          y2Desc: "Extra view: These values occur only if recurring fees are paid again in the following year (membership + both lead machines).",
          y2Prov: "Recurring commission (Year 2)",
          y2L1: "Year-2 commission from L1 (20%)",
          y2L2: "Year-2 commission from L2 (15%)",
          y2L3: "Year-2 commission from L3 (10%)"
        }
      };

      function applyLang(next){
        const saved = readInputsToMap();

        LANG = (next === "en") ? "en" : "de";
        document.documentElement.lang = LANG;

        if (LANG === "de"){
          $langDE.classList.add("primary"); $langDE.classList.remove("ghost");
          $langEN.classList.remove("primary"); $langEN.classList.add("ghost");
        } else {
          $langEN.classList.add("primary"); $langEN.classList.remove("ghost");
          $langDE.classList.remove("primary"); $langDE.classList.add("ghost");
        }

        const dict = I18N[LANG];
        const nodes = document.querySelectorAll("[data-i18n]");
        for (const n of nodes){
          const key = n.getAttribute("data-i18n");
          if (dict[key] != null) n.textContent = dict[key];
        }

        renderRows();
        writeInputsFromMap(saved);
        recalc();
      }

      $langDE.addEventListener("click", () => applyLang("de"));
      $langEN.addEventListener("click", () => applyLang("en"));
      $resetBtn.addEventListener("click", resetAll);

      renderRows();
      applyLang("de");
      // Startansicht (3/9/27) für wiederkehrende Produkte
      setStartDefaults();
    })();
  </script>
</body>
</html>
