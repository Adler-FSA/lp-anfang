<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tragfähigkeits-Rechner – 3 Ebenen</title>
  <meta name="description" content="Tragfähigkeits-Rechner: 1–50 neue Mitglieder/Monat, Produkte auswählbar, Aktiv-Quoten frei einstellbar, 3 Ebenen (20/15/10), druckbar als PDF, LocalStorage, DE/EN." />
  <meta name="robots" content="noindex,nofollow" />

  <style>
    :root{
      --bg:#ffffff;
      --txt:#0b0b0b;
      --muted:#444;
      --line:#cfcfcf;
      --soft:#f6f6f6;
      --soft2:#fbfbfb;
      --btn:#111;
      --btnTxt:#fff;
      --radius:14px;
      --shadow:0 10px 24px rgba(0,0,0,.08);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      background:var(--bg);
      color:var(--txt);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .wrap{
      max-width:1120px;
      margin:0 auto;
      padding:22px 16px 60px;
    }

    header{
      display:flex;
      gap:14px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
      border-bottom:1px solid var(--line);
      padding-bottom:14px;
      margin-bottom:14px;
    }
    h1{
      font-size:22px;
      line-height:1.2;
      margin:0 0 6px 0;
      letter-spacing:.2px;
    }
    .sub{
      margin:0;
      color:var(--muted);
      font-size:14px;
      line-height:1.5;
      max-width:820px;
    }

    .topActions{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }

    .btn{
      appearance:none;
      border:1px solid var(--btn);
      background:var(--btn);
      color:var(--btnTxt);
      padding:10px 12px;
      border-radius:12px;
      font-weight:800;
      font-size:13px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
    }
    .btn.secondary{
      background:#fff;
      color:#111;
      border:1px solid var(--line);
      font-weight:800;
    }
    .btn:active{transform:translateY(1px)}
    .btn svg{width:16px;height:16px}

    .lang{
      display:flex;
      gap:8px;
      align-items:center;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      background:#fff;
      font-size:13px;
      font-weight:900;
      cursor:pointer;
      user-select:none;
    }
    .pill[aria-pressed="true"]{
      border-color:#111;
      box-shadow:0 0 0 2px rgba(0,0,0,.08) inset;
    }

    .intro{
      border:1px solid var(--line);
      background:var(--soft2);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:14px;
      margin:14px 0;
    }
    .intro h2{
      margin:0 0 8px 0;
      font-size:16px;
      letter-spacing:.2px;
    }
    .intro p{
      margin:8px 0 0 0;
      color:var(--txt);
      font-size:13.5px;
      line-height:1.55;
    }
    .intro .muted{
      color:var(--muted);
      font-size:12.5px;
      line-height:1.5;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
    }
    @media (max-width: 920px){
      .grid{grid-template-columns:1fr}
    }

    .card{
      border:1px solid var(--line);
      background:var(--soft2);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:14px;
    }
    .card h2{
      margin:0 0 10px 0;
      font-size:16px;
      letter-spacing:.2px;
    }
    .hint{
      margin:0 0 10px 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.5;
    }

    .row{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap:10px;
      align-items:center;
      padding:10px;
      border-radius:12px;
      background:#fff;
      border:1px solid var(--line);
      margin-bottom:10px;
    }
    @media (max-width:560px){
      .row{grid-template-columns:1fr}
    }
    label{
      font-weight:900;
      font-size:13px;
    }
    .small{
      color:var(--muted);
      font-size:12px;
      line-height:1.4;
      margin-top:4px;
    }

    input[type="number"], select{
      width:100%;
      padding:10px 10px;
      border-radius:12px;
      border:1px solid var(--line);
      font-size:14px;
      background:#fff;
      color:#111;
      box-sizing:border-box;
    }
    input[type="range"]{
      width:100%;
      accent-color:#111;
    }

    .split{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width:560px){
      .split{grid-template-columns:1fr}
    }

    .checkLine{
      display:flex;
      align-items:flex-start;
      gap:10px;
      padding:10px;
      border:1px solid var(--line);
      border-radius:12px;
      background:#fff;
      margin-bottom:10px;
    }
    .checkLine input{margin-top:3px}
    .checkMain{display:flex; flex-direction:column; gap:2px; flex:1;}
    .priceTag{font-family:var(--mono); font-size:12px; color:#111; white-space:nowrap;}

    details{
      border:1px dashed var(--line);
      border-radius:12px;
      padding:10px 12px;
      background:#fff;
    }
    summary{
      cursor:pointer;
      font-weight:950;
      font-size:13px;
      list-style:none;
    }
    summary::-webkit-details-marker{display:none}
    .detailsBody{padding-top:10px}

    .kpiGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width:920px){
      .kpiGrid{grid-template-columns:1fr}
    }
    .kpi{
      border:1px solid var(--line);
      border-radius:12px;
      background:#fff;
      padding:12px;
    }
    .kpi .t{font-size:12px; color:var(--muted); margin:0 0 6px 0; font-weight:900;}
    .kpi .v{font-size:18px; margin:0; font-weight:950; letter-spacing:.2px;}
    .kpi .s{margin:6px 0 0 0; font-size:12px; color:var(--muted); line-height:1.4;}

    table{
      width:100%;
      border-collapse:collapse;
      background:#fff;
      border:1px solid var(--line);
      border-radius:12px;
      overflow:hidden;
    }
    th, td{
      padding:10px 10px;
      border-bottom:1px solid var(--line);
      font-size:13px;
      text-align:left;
      vertical-align:top;
    }
    th{
      background:var(--soft);
      font-weight:950;
      font-size:12px;
      letter-spacing:.2px;
      text-transform:uppercase;
    }
    tr:last-child td{border-bottom:none}
    .mono{font-family:var(--mono)}
    .right{text-align:right}
    .muted{color:var(--muted)}

    .foot{
      margin-top:14px;
      padding-top:14px;
      border-top:1px solid var(--line);
      color:var(--muted);
      font-size:12px;
      line-height:1.55;
    }

    /* PRINT */
    @media print{
      @page { margin: 12mm; }
      header{border-bottom:1px solid #000}
      .topActions, .lang, .noPrint{display:none !important}
      .card, .intro{box-shadow:none}
      .wrap{max-width:none; padding:0}
      a{color:#000; text-decoration:none}
      .card, .row, table, .kpi, .intro{break-inside:avoid}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <h1 data-i18n="h1">Tragfähigkeits-Rechner (3 Ebenen)</h1>
        <p class="sub" data-i18n="sub">
          Rechne dir selbst aus, was bei 1–50 neuen Mitgliedern pro Monat möglich sein kann.
          Mitgliedschaft (60 €) ist der stabile Sockel. Weitere Bausteine kannst du optional dazunehmen.
        </p>
      </div>

      <div class="topActions noPrint">
        <div class="lang" aria-label="Sprache">
          <button class="pill" id="langDE" type="button" aria-pressed="true">DE</button>
          <button class="pill" id="langEN" type="button" aria-pressed="false">EN</button>
        </div>

        <button class="btn secondary" id="btnReset" type="button">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M3 12a9 9 0 0 1 15.36-6.36" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M18 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M21 12a9 9 0 0 1-15.36 6.36" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span data-i18n="reset">Reset</span>
        </button>

        <button class="btn secondary" id="btnCopy" type="button">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M9 9h10v12H9V9Z" stroke="currentColor" stroke-width="2"/>
            <path d="M5 3h10v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M5 7h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M5 7v14h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span data-i18n="copy">Kopieren</span>
        </button>

        <button class="btn" id="btnPrint" type="button">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 8V3h10v5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M7 17h10v4H7v-4Z" stroke="currentColor" stroke-width="2"/>
            <path d="M6 18H5a3 3 0 0 1-3-3v-4a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v4a3 3 0 0 1-3 3h-1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M18 12h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
          </svg>
          <span data-i18n="print">Drucken</span>
        </button>
      </div>
    </header>

    <!-- INTRO / EXPLANATION -->
    <section class="intro">
      <h2 data-i18n="introTitle">Was dieser Rechner zeigt (kurz & verständlich)</h2>
      <p class="muted" data-i18n="introP1">
        Dieser Rechner hilft dir, einen möglichen Tragfähigkeits-Prozess zu verstehen. Du stellst ein, wie viele neue Mitglieder du pro Monat gewinnst (Ebene 1).
        Danach kannst du annehmen, wie viele davon später selbst aktiv werden und weitere Mitglieder gewinnen (Ebene 2 und Ebene 3).
      </p>
      <p class="muted" data-i18n="introP2">
        Wichtig: Mitgliedschaft (60 €) ist der stabile Sockel. Weitere Bausteine (Leadmaschine, Weekend-Setup) rechnest du nur dann mit, wenn du sie aktivierst.
        Das Tool ist eine Orientierungshilfe – keine Zusage oder Garantie.
      </p>
      <p class="muted" data-i18n="introP3">
        Extra-Hebel: Wenn du zusätzlich Promotoren aufbaust, kannst du einstellen, wie viele Promotoren du anwirbst und wie viele neue Mitglieder diese pro Monat bringen.
        So wird sichtbar, wie sich Tragfähigkeit langfristig zusammensetzen kann.
      </p>
    </section>

    <div class="grid">
      <!-- INPUTS -->
      <section class="card">
        <h2 data-i18n="inputs">Eingaben</h2>
        <p class="hint" data-i18n="inputsHint">
          Stelle ein, wie viele neue Mitglieder du pro Monat gewinnst. Danach wähle, welche Bausteine in die Beispielrechnung einfließen sollen.
        </p>

        <div class="row">
          <div>
            <label for="m1" data-i18n="m1Label">Neue Mitglieder pro Monat (Ebene 1)</label>
            <div class="small" data-i18n="m1Help">Das sind deine direkten neuen Mitglieder pro Monat. Bereich: 1 bis 50.</div>
          </div>
          <div>
            <div class="split">
              <input id="m1" type="number" min="1" max="50" step="1" value="20" />
              <select id="period">
                <option value="1" data-i18n="p1">1 Monat</option>
                <option value="3" data-i18n="p3">1 Quartal (3 Monate)</option>
                <option value="12" data-i18n="p12">12 Monate</option>
              </select>
            </div>
            <div style="margin-top:8px">
              <input id="m1r" type="range" min="1" max="50" step="1" value="20" />
            </div>
          </div>
        </div>

        <!-- TEAM / PROMOTERS -->
        <div class="row">
          <div>
            <label for="promoters" data-i18n="promotersLabel">Zusätzliche Promotoren (Team-Hebel)</label>
            <div class="small" data-i18n="promotersHelp">
              Beispiel: Was wäre, wenn du 1 Promotor anwirbst? Stelle hier die Anzahl ein (0–20) und wie viele neue Mitglieder jeder Promotor pro Monat bringt.
            </div>
          </div>
          <div>
            <div class="split">
              <input id="promoters" type="number" min="0" max="20" step="1" value="0" />
              <input id="promotersRate" type="number" min="0" max="50" step="1" value="20" />
            </div>
            <div class="small muted" data-i18n="promotersRateHelp">
              Rechts: Neue Mitglieder pro Monat je Promotor.
            </div>
            <div class="small muted" style="margin-top:6px">
              <span data-i18n="promotersQuick">Schnellwahl:</span>
              <button class="btn secondary noPrint" id="btnOnePromoter" type="button" style="padding:8px 10px; font-size:12px;">
                <span data-i18n="onePromoterBtn">1 Promotor einsetzen</span>
              </button>
            </div>
          </div>
        </div>

        <div class="row">
          <div>
            <label data-i18n="buildingBlocks">Bausteine (Umsatz pro neuem Mitglied)</label>
            <div class="small" data-i18n="blocksHelp">
              Mitgliedschaft ist fix. Alles andere ist optional und wird nur gerechnet, wenn du es auswählst.
            </div>
          </div>
          <div>
            <div class="checkLine">
              <input id="bMembership" type="checkbox" checked disabled />
              <div class="checkMain">
                <div style="display:flex;justify-content:space-between;gap:10px;">
                  <div><strong data-i18n="membership">Mitgliedschaft</strong></div>
                  <div class="priceTag">60 €</div>
                </div>
                <div class="small" data-i18n="membershipHelp">Stabiler Sockel (nicht abwählbar).</div>
              </div>
            </div>

            <div class="checkLine">
              <input id="bLead" type="checkbox" />
              <div class="checkMain">
                <div style="display:flex;justify-content:space-between;gap:10px;">
                  <div><strong data-i18n="leadSmall">Leadmaschine (klein)</strong></div>
                  <div class="priceTag">60 €</div>
                </div>
                <div class="small" data-i18n="leadHelp">Optionaler Baustein zur Werbung.</div>
              </div>
            </div>

            <div class="checkLine">
              <input id="bWeekend" type="checkbox" />
              <div class="checkMain">
                <div style="display:flex;justify-content:space-between;gap:10px;">
                  <div><strong data-i18n="weekend">Weekend-Setup</strong></div>
                  <div class="priceTag">399 €</div>
                </div>
                <div class="small" data-i18n="weekendHelp">Optionaler Baustein zur Orientierung & Umsetzung.</div>
              </div>
            </div>
          </div>
        </div>

        <!-- QUOTES / ASSUMPTIONS always visible (not hidden) -->
        <div class="row">
          <div>
            <label data-i18n="quotesTitle">Aktiv-Quoten & Leistung (deine Annahmen)</label>
            <div class="small" data-i18n="quotesHelp">
              Hier stellst du ein, wie viele aktiv werden und wie viele neue Mitglieder pro aktivem Mitglied entstehen.
              Damit kann jeder seine eigenen Annahmen definieren.
            </div>
          </div>
          <div>
            <div class="split">
              <div>
                <label class="small" for="act1" style="font-weight:950" data-i18n="act1Short">E1→E2 aktiv (%)</label>
                <input id="act1" type="number" min="0" max="100" step="1" value="60" />
              </div>
              <div>
                <label class="small" for="prod1" style="font-weight:950" data-i18n="prod1Short">E1→E2 neue/Monat</label>
                <input id="prod1" type="number" min="0" max="50" step="1" value="20" />
              </div>
            </div>

            <div class="split" style="margin-top:10px;">
              <div>
                <label class="small" for="act2" style="font-weight:950" data-i18n="act2Short">E2→E3 aktiv (%)</label>
                <input id="act2" type="number" min="0" max="100" step="1" value="50" />
              </div>
              <div>
                <label class="small" for="prod2" style="font-weight:950" data-i18n="prod2Short">E2→E3 neue/Monat</label>
                <input id="prod2" type="number" min="0" max="50" step="1" value="20" />
              </div>
            </div>

            <div class="small muted" style="margin-top:10px" data-i18n="sharesHelp">
              Beteiligung Ursprung (fix): Ebene 1: 20% • Ebene 2: 15% • Ebene 3: 10%
            </div>

            <div class="small muted" style="margin-top:6px">
              <button class="btn secondary noPrint" id="btnDefaults" type="button" style="padding:8px 10px; font-size:12px;">
                <span data-i18n="defaultsBtn">Standardwerte wiederherstellen</span>
              </button>
            </div>
          </div>
        </div>

        <div class="foot">
          <div data-i18n="legalNote">
            Hinweis: Das Tool ist eine Rechenhilfe zur Orientierung. Es zeigt mögliche Entwicklungen anhand deiner Eingaben und Annahmen – keine Zusage oder Garantie.
          </div>
          <div class="small" style="margin-top:8px" data-i18n="savedNote">
            Deine Einstellungen werden automatisch lokal im Browser gespeichert (LocalStorage).
          </div>
        </div>
      </section>

      <!-- OUTPUTS -->
      <section class="card">
        <h2 data-i18n="outputs">Ergebnis</h2>
        <p class="hint" data-i18n="outputsHint">
          Du siehst unten die Mitgliederzahlen und den Umsatz pro Ebene – sowie den Anteil für den Ursprung (20% / 15% / 10%).
        </p>

        <div class="kpiGrid">
          <div class="kpi">
            <p class="t" data-i18n="kpiPack">Umsatz pro neuem Mitglied (gewählt)</p>
            <p class="v mono" id="kpiPack">–</p>
            <p class="s" data-i18n="kpiPackHelp">Summe aus Mitgliedschaft (fix) und optionalen Bausteinen.</p>
          </div>
          <div class="kpi">
            <p class="t" data-i18n="kpiPeriod">Zeitraum</p>
            <p class="v" id="kpiPeriod">–</p>
            <p class="s" data-i18n="kpiPeriodHelp">Die Monatswerte werden für Quartal/Jahr kumuliert.</p>
          </div>
          <div class="kpi">
            <p class="t" data-i18n="kpiNew">Neue Mitglieder gesamt (kumuliert)</p>
            <p class="v mono" id="kpiNew">–</p>
            <p class="s" data-i18n="kpiNewHelp">Ebene 1 + Ebene 2 + Ebene 3 im gewählten Zeitraum.</p>
          </div>
          <div class="kpi">
            <p class="t" data-i18n="kpiEarn">Verdienst Ursprung (kumuliert)</p>
            <p class="v mono" id="kpiEarn">–</p>
            <p class="s" data-i18n="kpiEarnHelp">Beteiligung über 3 Ebenen: 20% / 15% / 10%.</p>
          </div>
        </div>

        <div style="margin-top:12px">
          <table aria-label="Ergebnis Tabelle">
            <thead>
              <tr>
                <th data-i18n="thLevel">Ebene</th>
                <th class="right" data-i18n="thNewM">Neue Mitglieder (Monat)</th>
                <th class="right" data-i18n="thNewT">Neue Mitglieder (Zeitraum)</th>
                <th class="right" data-i18n="thRevM">Umsatz (Monat)</th>
                <th class="right" data-i18n="thRevT">Umsatz (Zeitraum)</th>
                <th class="right" data-i18n="thEarnT">Ursprung-Anteil (Zeitraum)</th>
              </tr>
            </thead>
            <tbody id="tbl"></tbody>
          </table>
        </div>

        <div class="foot">
          <div><strong data-i18n="explainTitle">Kurz erklärt (für Neue)</strong></div>
          <div class="small" style="margin-top:6px" data-i18n="explainText">
            Ebene 1 sind deine direkten neuen Mitglieder (plus optional: zusätzliche Promotoren). Ein Teil wird später aktiv und bringt weitere Mitglieder (Ebene 2).
            Aus Ebene 2 kann wiederum Ebene 3 entstehen. Mitgliedschaft (60 €) ist der stabile Sockel.
            Weitere Bausteine rechnest du nur dann mit, wenn du sie aktivierst.
          </div>
        </div>
      </section>
    </div>
  </div>

  <script>
    (function(){
      const LS_KEY = "fsa_tragfaehigkeit_rechner_v2";

      // Prices
      const PRICE_MEMBERSHIP = 60;
      const PRICE_LEAD = 60;
      const PRICE_WEEKEND = 399;

      // Origin shares (fixed)
      const SHARE_L1 = 0.20;
      const SHARE_L2 = 0.15;
      const SHARE_L3 = 0.10;

      // UI
      const m1 = document.getElementById("m1");
      const m1r = document.getElementById("m1r");
      const period = document.getElementById("period");

      const promoters = document.getElementById("promoters");
      const promotersRate = document.getElementById("promotersRate");
      const btnOnePromoter = document.getElementById("btnOnePromoter");

      const bLead = document.getElementById("bLead");
      const bWeekend = document.getElementById("bWeekend");

      const act1 = document.getElementById("act1");
      const prod1 = document.getElementById("prod1");
      const act2 = document.getElementById("act2");
      const prod2 = document.getElementById("prod2");

      const btnDefaults = document.getElementById("btnDefaults");

      const kpiPack = document.getElementById("kpiPack");
      const kpiPeriod = document.getElementById("kpiPeriod");
      const kpiNew = document.getElementById("kpiNew");
      const kpiEarn = document.getElementById("kpiEarn");
      const tbl = document.getElementById("tbl");

      const btnPrint = document.getElementById("btnPrint");
      const btnCopy = document.getElementById("btnCopy");
      const btnReset = document.getElementById("btnReset");

      const langDE = document.getElementById("langDE");
      const langEN = document.getElementById("langEN");

      const I18N = {
        de: {
          h1:"Tragfähigkeits-Rechner (3 Ebenen)",
          sub:"Rechne dir selbst aus, was bei 1–50 neuen Mitgliedern pro Monat möglich sein kann. Mitgliedschaft (60 €) ist der stabile Sockel. Weitere Bausteine kannst du optional dazunehmen.",
          reset:"Reset",
          copy:"Kopieren",
          print:"Drucken",
          introTitle:"Was dieser Rechner zeigt (kurz & verständlich)",
          introP1:"Dieser Rechner hilft dir, einen möglichen Tragfähigkeits-Prozess zu verstehen. Du stellst ein, wie viele neue Mitglieder du pro Monat gewinnst (Ebene 1). Danach kannst du annehmen, wie viele davon später selbst aktiv werden und weitere Mitglieder gewinnen (Ebene 2 und Ebene 3).",
          introP2:"Wichtig: Mitgliedschaft (60 €) ist der stabile Sockel. Weitere Bausteine (Leadmaschine, Weekend-Setup) rechnest du nur dann mit, wenn du sie aktivierst. Das Tool ist eine Orientierungshilfe – keine Zusage oder Garantie.",
          introP3:"Extra-Hebel: Wenn du zusätzlich Promotoren aufbaust, kannst du einstellen, wie viele Promotoren du anwirbst und wie viele neue Mitglieder diese pro Monat bringen. So wird sichtbar, wie sich Tragfähigkeit langfristig zusammensetzen kann.",
          inputs:"Eingaben",
          inputsHint:"Stelle ein, wie viele neue Mitglieder du pro Monat gewinnst. Danach wähle, welche Bausteine in die Beispielrechnung einfließen sollen.",
          m1Label:"Neue Mitglieder pro Monat (Ebene 1)",
          m1Help:"Das sind deine direkten neuen Mitglieder pro Monat. Bereich: 1 bis 50.",
          p1:"1 Monat",
          p3:"1 Quartal (3 Monate)",
          p12:"12 Monate",
          promotersLabel:"Zusätzliche Promotoren (Team-Hebel)",
          promotersHelp:"Beispiel: Was wäre, wenn du 1 Promotor anwirbst? Stelle hier die Anzahl ein (0–20) und wie viele neue Mitglieder jeder Promotor pro Monat bringt.",
          promotersRateHelp:"Rechts: Neue Mitglieder pro Monat je Promotor.",
          promotersQuick:"Schnellwahl:",
          onePromoterBtn:"1 Promotor einsetzen",
          buildingBlocks:"Bausteine (Umsatz pro neuem Mitglied)",
          blocksHelp:"Mitgliedschaft ist fix. Alles andere ist optional und wird nur gerechnet, wenn du es auswählst.",
          membership:"Mitgliedschaft",
          membershipHelp:"Stabiler Sockel (nicht abwählbar).",
          leadSmall:"Leadmaschine (klein)",
          leadHelp:"Optionaler Baustein zur Werbung.",
          weekend:"Weekend-Setup",
          weekendHelp:"Optionaler Baustein zur Orientierung & Umsetzung.",
          quotesTitle:"Aktiv-Quoten & Leistung (deine Annahmen)",
          quotesHelp:"Hier stellst du ein, wie viele aktiv werden und wie viele neue Mitglieder pro aktivem Mitglied entstehen. Damit kann jeder seine eigenen Annahmen definieren.",
          act1Short:"E1→E2 aktiv (%)",
          prod1Short:"E1→E2 neue/Monat",
          act2Short:"E2→E3 aktiv (%)",
          prod2Short:"E2→E3 neue/Monat",
          sharesHelp:"Beteiligung Ursprung (fix): Ebene 1: 20% • Ebene 2: 15% • Ebene 3: 10%",
          defaultsBtn:"Standardwerte wiederherstellen",
          legalNote:"Hinweis: Das Tool ist eine Rechenhilfe zur Orientierung. Es zeigt mögliche Entwicklungen anhand deiner Eingaben und Annahmen – keine Zusage oder Garantie.",
          savedNote:"Deine Einstellungen werden automatisch lokal im Browser gespeichert (LocalStorage).",
          outputs:"Ergebnis",
          outputsHint:"Du siehst unten die Mitgliederzahlen und den Umsatz pro Ebene – sowie den Anteil für den Ursprung (20% / 15% / 10%).",
          kpiPack:"Umsatz pro neuem Mitglied (gewählt)",
          kpiPackHelp:"Summe aus Mitgliedschaft (fix) und optionalen Bausteinen.",
          kpiPeriod:"Zeitraum",
          kpiPeriodHelp:"Die Monatswerte werden für Quartal/Jahr kumuliert.",
          kpiNew:"Neue Mitglieder gesamt (kumuliert)",
          kpiNewHelp:"Ebene 1 + Ebene 2 + Ebene 3 im gewählten Zeitraum.",
          kpiEarn:"Verdienst Ursprung (kumuliert)",
          kpiEarnHelp:"Beteiligung über 3 Ebenen: 20% / 15% / 10%.",
          thLevel:"Ebene",
          thNewM:"Neue Mitglieder (Monat)",
          thNewT:"Neue Mitglieder (Zeitraum)",
          thRevM:"Umsatz (Monat)",
          thRevT:"Umsatz (Zeitraum)",
          thEarnT:"Ursprung-Anteil (Zeitraum)",
          explainTitle:"Kurz erklärt (für Neue)",
          explainText:"Ebene 1 sind deine direkten neuen Mitglieder (plus optional: zusätzliche Promotoren). Ein Teil wird später aktiv und bringt weitere Mitglieder (Ebene 2). Aus Ebene 2 kann wiederum Ebene 3 entstehen. Mitgliedschaft (60 €) ist der stabile Sockel. Weitere Bausteine rechnest du nur dann mit, wenn du sie aktivierst.",
          level1:"Ebene 1",
          level2:"Ebene 2",
          level3:"Ebene 3",
          total:"Gesamt",
          copiedOk:"Kopiert.",
          copiedFail:"Kopieren nicht möglich."
        },
        en: {
          h1:"Sustainability Calculator (3 Levels)",
          sub:"Calculate what could be possible with 1–50 new members per month. Membership (€60) is the stable base. You can optionally include additional building blocks.",
          reset:"Reset",
          copy:"Copy",
          print:"Print",
          introTitle:"What this calculator shows (short & clear)",
          introP1:"This calculator helps you understand a possible sustainability process. You set how many new members you gain per month (Level 1). Then you can assume how many of them become active later and bring additional members (Levels 2 and 3).",
          introP2:"Important: Membership (€60) is the stable base. Additional blocks (Lead Machine, Weekend Setup) are only included if you select them. This tool is for orientation—no promise or guarantee.",
          introP3:"Extra lever: If you build additional promoters, you can set how many promoters you recruit and how many new members each promoter brings per month. This shows how sustainability can be composed over time.",
          inputs:"Inputs",
          inputsHint:"Set how many new members you gain per month. Then choose which building blocks should be included in the example calculation.",
          m1Label:"New members per month (Level 1)",
          m1Help:"These are your direct new members per month. Range: 1 to 50.",
          p1:"1 month",
          p3:"1 quarter (3 months)",
          p12:"12 months",
          promotersLabel:"Additional promoters (team lever)",
          promotersHelp:"Example: what if you recruit 1 promoter? Set the number (0–20) and how many new members each promoter brings per month.",
          promotersRateHelp:"Right: new members per month per promoter.",
          promotersQuick:"Quick:",
          onePromoterBtn:"Apply 1 promoter",
          buildingBlocks:"Building blocks (revenue per new member)",
          blocksHelp:"Membership is fixed. Everything else is optional and only counted when selected.",
          membership:"Membership",
          membershipHelp:"Stable base (cannot be deselected).",
          leadSmall:"Lead machine (small)",
          leadHelp:"Optional advertising block.",
          weekend:"Weekend setup",
          weekendHelp:"Optional block for orientation & implementation.",
          quotesTitle:"Activation quotes & output (your assumptions)",
          quotesHelp:"Set how many become active and how many new members per active member occur. Everyone can define their own assumptions here.",
          act1Short:"L1→L2 active (%)",
          prod1Short:"L1→L2 new/month",
          act2Short:"L2→L3 active (%)",
          prod2Short:"L2→L3 new/month",
          sharesHelp:"Origin share (fixed): Level 1: 20% • Level 2: 15% • Level 3: 10%",
          defaultsBtn:"Restore defaults",
          legalNote:"Note: This tool is a calculation aid for orientation. It shows possible developments based on your inputs and assumptions—no promise or guarantee.",
          savedNote:"Your settings are stored locally in your browser (LocalStorage).",
          outputs:"Results",
          outputsHint:"Below you see member counts and revenue per level—plus the origin share (20% / 15% / 10%).",
          kpiPack:"Revenue per new member (selected)",
          kpiPackHelp:"Sum of membership (fixed) and optional blocks.",
          kpiPeriod:"Period",
          kpiPeriodHelp:"Monthly values are accumulated for quarter/year.",
          kpiNew:"Total new members (accumulated)",
          kpiNewHelp:"Level 1 + Level 2 + Level 3 in the selected period.",
          kpiEarn:"Origin earnings (accumulated)",
          kpiEarnHelp:"3-level participation: 20% / 15% / 10%.",
          thLevel:"Level",
          thNewM:"New members (month)",
          thNewT:"New members (period)",
          thRevM:"Revenue (month)",
          thRevT:"Revenue (period)",
          thEarnT:"Origin share (period)",
          explainTitle:"Quick explanation (for beginners)",
          explainText:"Level 1 are your direct new members (plus optional: additional promoters). Some later become active and bring additional members (Level 2). From Level 2, Level 3 can emerge. Membership (€60) is the stable base. You only include other blocks when you select them.",
          level1:"Level 1",
          level2:"Level 2",
          level3:"Level 3",
          total:"Total",
          copiedOk:"Copied.",
          copiedFail:"Copy not available."
        }
      };

      let LANG = "de";

      function t(key){
        const dict = I18N[LANG] || I18N.de;
        return dict[key] ?? I18N.de[key] ?? key;
      }

      function fmtEUR(n){
        const v = Number(n || 0);
        // EUR format fixed DE-like (as in project)
        return v.toLocaleString("de-DE", {minimumFractionDigits:2, maximumFractionDigits:2}) + " €";
      }
      function fmtInt(n){
        const v = Math.round(Number(n || 0));
        return v.toLocaleString("de-DE");
      }

      function clamp(el, min, max){
        let v = Number(el.value);
        if (!Number.isFinite(v)) v = min;
        v = Math.max(min, Math.min(max, v));
        el.value = String(v);
        return v;
      }

      function packValue(){
        let sum = PRICE_MEMBERSHIP;
        if (bLead.checked) sum += PRICE_LEAD;
        if (bWeekend.checked) sum += PRICE_WEEKEND;
        return sum;
      }

      function applyI18N(){
        document.documentElement.lang = (LANG === "de" ? "de" : "en");
        document.querySelectorAll("[data-i18n]").forEach(el=>{
          const k = el.getAttribute("data-i18n");
          el.textContent = t(k);
        });
        Array.from(period.options).forEach(opt=>{
          const k = opt.getAttribute("data-i18n");
          if (k) opt.textContent = t(k);
        });
        langDE.setAttribute("aria-pressed", LANG==="de" ? "true" : "false");
        langEN.setAttribute("aria-pressed", LANG==="en" ? "true" : "false");
        calc();
      }

      function calc(){
        const months = Number(period.value);

        const m1v = clamp(m1, 1, 50);
        m1r.value = String(m1v);

        const prom = clamp(promoters, 0, 20);
        const promRate = clamp(promotersRate, 0, 50);

        const a1 = clamp(act1, 0, 100) / 100;
        const p1 = clamp(prod1, 0, 50);

        const a2 = clamp(act2, 0, 100) / 100;
        const p2 = clamp(prod2, 0, 50);

        const pack = packValue();

        // LEVEL 1 monthly new members:
        // your direct + promoters * their rate
        const lvl1_new_m = m1v + (prom * promRate);

        // LEVEL 2 monthly new members:
        // active from lvl1 (rounded) times p1
        const lvl1_active_m = Math.round(lvl1_new_m * a1);
        const lvl2_new_m = lvl1_active_m * p1;

        // LEVEL 3 monthly new members:
        const lvl2_active_m = Math.round(lvl2_new_m * a2);
        const lvl3_new_m = lvl2_active_m * p2;

        // Monthly revenue per level
        const lvl1_rev_m = lvl1_new_m * pack;
        const lvl2_rev_m = lvl2_new_m * pack;
        const lvl3_rev_m = lvl3_new_m * pack;

        // Period totals
        const lvl1_new_t = lvl1_new_m * months;
        const lvl2_new_t = lvl2_new_m * months;
        const lvl3_new_t = lvl3_new_m * months;

        const lvl1_rev_t = lvl1_rev_m * months;
        const lvl2_rev_t = lvl2_rev_m * months;
        const lvl3_rev_t = lvl3_rev_m * months;

        const earn1_t = lvl1_rev_t * SHARE_L1;
        const earn2_t = lvl2_rev_t * SHARE_L2;
        const earn3_t = lvl3_rev_t * SHARE_L3;

        const new_total_t = lvl1_new_t + lvl2_new_t + lvl3_new_t;
        const earn_total = earn1_t + earn2_t + earn3_t;

        // KPIs
        kpiPack.textContent = fmtEUR(pack);
        kpiPeriod.textContent = (LANG==="de")
          ? (months === 1 ? "1 Monat" : months + " Monate")
          : (months === 1 ? "1 month" : months + " months");
        kpiNew.textContent = fmtInt(new_total_t);
        kpiEarn.textContent = fmtEUR(earn_total);

        // table rows
        const rows = [
          {name: t("level1"), nm:lvl1_new_m, nt:lvl1_new_t, rm:lvl1_rev_m, rt:lvl1_rev_t, et:earn1_t},
          {name: t("level2"), nm:lvl2_new_m, nt:lvl2_new_t, rm:lvl2_rev_m, rt:lvl2_rev_t, et:earn2_t},
          {name: t("level3"), nm:lvl3_new_m, nt:lvl3_new_t, rm:lvl3_rev_m, rt:lvl3_rev_t, et:earn3_t},
          {name: t("total"),
            nm:(lvl1_new_m+lvl2_new_m+lvl3_new_m),
            nt:new_total_t,
            rm:(lvl1_rev_m+lvl2_rev_m+lvl3_rev_m),
            rt:(lvl1_rev_t+lvl2_rev_t+lvl3_rev_t),
            et:earn_total
          }
        ];

        tbl.innerHTML = rows.map(r => `
          <tr>
            <td><strong>${escapeHtml(r.name)}</strong></td>
            <td class="right mono">${fmtInt(r.nm)}</td>
            <td class="right mono">${fmtInt(r.nt)}</td>
            <td class="right mono">${fmtEUR(r.rm)}</td>
            <td class="right mono">${fmtEUR(r.rt)}</td>
            <td class="right mono">${fmtEUR(r.et)}</td>
          </tr>
        `).join("");

        saveState();
      }

      function escapeHtml(s){
        return String(s).replace(/[&<>"']/g, c => ({
          "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
        }[c]));
      }

      function saveState(){
        const state = {
          LANG,
          m1: Number(m1.value),
          period: String(period.value),
          promoters: Number(promoters.value),
          promotersRate: Number(promotersRate.value),
          bLead: !!bLead.checked,
          bWeekend: !!bWeekend.checked,
          act1: Number(act1.value),
          prod1: Number(prod1.value),
          act2: Number(act2.value),
          prod2: Number(prod2.value)
        };
        try{ localStorage.setItem(LS_KEY, JSON.stringify(state)); }catch(e){}
      }

      function loadState(){
        try{
          const raw = localStorage.getItem(LS_KEY);
          if(!raw) return;
          const s = JSON.parse(raw);
          if (s && typeof s === "object"){
            if (s.LANG === "de" || s.LANG === "en") LANG = s.LANG;

            if (Number.isFinite(s.m1)) m1.value = String(s.m1);
            if (s.period === "1" || s.period === "3" || s.period === "12") period.value = s.period;

            if (Number.isFinite(s.promoters)) promoters.value = String(s.promoters);
            if (Number.isFinite(s.promotersRate)) promotersRate.value = String(s.promotersRate);

            bLead.checked = !!s.bLead;
            bWeekend.checked = !!s.bWeekend;

            if (Number.isFinite(s.act1)) act1.value = String(s.act1);
            if (Number.isFinite(s.prod1)) prod1.value = String(s.prod1);
            if (Number.isFinite(s.act2)) act2.value = String(s.act2);
            if (Number.isFinite(s.prod2)) prod2.value = String(s.prod2);
          }
        }catch(e){}
      }

      async function copySummary(){
        const months = Number(period.value);
        const pack = packValue();

        const m1v = Number(m1.value);
        const prom = Number(promoters.value);
        const promRate = Number(promotersRate.value);

        const a1 = Number(act1.value)/100;
        const p1 = Number(prod1.value);
        const a2 = Number(act2.value)/100;
        const p2 = Number(prod2.value);

        const lvl1_new_m = m1v + (prom * promRate);
        const lvl1_active_m = Math.round(lvl1_new_m * a1);
        const lvl2_new_m = lvl1_active_m * p1;
        const lvl2_active_m = Math.round(lvl2_new_m * a2);
        const lvl3_new_m = lvl2_active_m * p2;

        const lvl1_rev_t = (lvl1_new_m * pack) * months;
        const lvl2_rev_t = (lvl2_new_m * pack) * months;
        const lvl3_rev_t = (lvl3_new_m * pack) * months;

        const earn_total = (lvl1_rev_t*SHARE_L1) + (lvl2_rev_t*SHARE_L2) + (lvl3_rev_t*SHARE_L3);
        const new_total_t = (lvl1_new_m+lvl2_new_m+lvl3_new_m) * months;

        const lines = [];
        lines.push(LANG==="de" ? "Tragfähigkeits-Rechner (3 Ebenen)" : "Sustainability Calculator (3 Levels)");
        lines.push("—");
        lines.push((LANG==="de" ? "Zeitraum: " : "Period: ") + (LANG==="de" ? (months===1?"1 Monat":months+" Monate") : (months===1?"1 month":months+" months")));
        lines.push((LANG==="de" ? "Umsatz pro neuem Mitglied: " : "Revenue per new member: ") + fmtEUR(pack));
        lines.push((LANG==="de" ? "Neue Mitglieder gesamt (Zeitraum): " : "Total new members (period): ") + fmtInt(new_total_t));
        lines.push((LANG==="de" ? "Verdienst Ursprung (Zeitraum): " : "Origin earnings (period): ") + fmtEUR(earn_total));
        lines.push("");
        lines.push((LANG==="de" ? "Annahmen (deine Werte):" : "Assumptions (your values):"));
        lines.push((LANG==="de" ? "- Team-Hebel (Promotoren): " : "- Team lever (promoters): ") + prom + " × " + promRate + (LANG==="de" ? " neue/Monat" : " new/month"));
        lines.push((LANG==="de" ? "- Aktiv E1→E2: " : "- Active L1→L2: ") + Math.round(a1*100) + "%, " + (LANG==="de" ? "Leistung: " : "Output: ") + p1 + "/Monat");
        lines.push((LANG==="de" ? "- Aktiv E2→E3: " : "- Active L2→L3: ") + Math.round(a2*100) + "%, " + (LANG==="de" ? "Leistung: " : "Output: ") + p2 + "/Monat");
        lines.push((LANG==="de" ? "- Beteiligung: 20% / 15% / 10%" : "- Shares: 20% / 15% / 10%"));

        const text = lines.join("\n");

        try{
          if (navigator.clipboard && navigator.clipboard.writeText){
            await navigator.clipboard.writeText(text);
            btnCopy.title = t("copiedOk");
          }else{
            throw new Error("no clipboard");
          }
        }catch(e){
          btnCopy.title = t("copiedFail");
        }
      }

      function resetAll(){
        LANG = "de";
        m1.value = "20";
        m1r.value = "20";
        period.value = "1";

        promoters.value = "0";
        promotersRate.value = "20";

        bLead.checked = false;
        bWeekend.checked = false;

        act1.value = "60";
        prod1.value = "20";
        act2.value = "50";
        prod2.value = "20";

        try{ localStorage.removeItem(LS_KEY); }catch(e){}
        applyI18N();
      }

      function restoreDefaults(){
        act1.value = "60";
        prod1.value = "20";
        act2.value = "50";
        prod2.value = "20";
        calc();
      }

      // events
      m1.addEventListener("input", calc);
      m1r.addEventListener("input", ()=>{ m1.value = m1r.value; calc(); });
      period.addEventListener("change", calc);

      promoters.addEventListener("input", calc);
      promotersRate.addEventListener("input", calc);

      btnOnePromoter.addEventListener("click", ()=>{
        promoters.value = "1";
        calc();
      });

      bLead.addEventListener("change", calc);
      bWeekend.addEventListener("change", calc);

      act1.addEventListener("input", calc);
      prod1.addEventListener("input", calc);
      act2.addEventListener("input", calc);
      prod2.addEventListener("input", calc);

      btnDefaults.addEventListener("click", restoreDefaults);

      btnPrint.addEventListener("click", ()=> window.print());
      btnCopy.addEventListener("click", copySummary);
      btnReset.addEventListener("click", resetAll);

      langDE.addEventListener("click", ()=>{ LANG="de"; saveState(); applyI18N(); });
      langEN.addEventListener("click", ()=>{ LANG="en"; saveState(); applyI18N(); });

      // init
      loadState();
      applyI18N();
    })();
  </script>
</body>
</html>
