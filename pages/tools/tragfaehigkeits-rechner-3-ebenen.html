<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tragfähigkeits-Rechner – 3 Ebenen</title>
  <meta name="description" content="Tragfähigkeits-Rechner: Arbeitstage 1–30, Promotoren frei, Produkte per Haken, Aktiv-Quoten frei, 3 Ebenen (20/15/10), druckbar als PDF, LocalStorage, DE/EN." />
  <meta name="robots" content="noindex,nofollow" />

  <style>
    :root{
      --bg:#ffffff;
      --txt:#0b0b0b;
      --muted:#444;
      --line:#cfcfcf;
      --soft:#f6f6f6;
      --soft2:#fbfbfb;
      --btn:#111;
      --btnTxt:#fff;
      --radius:14px;
      --shadow:0 10px 24px rgba(0,0,0,.08);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      background:var(--bg);
      color:var(--txt);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .wrap{
      max-width:1120px;
      margin:0 auto;
      padding:22px 16px 60px;
    }

    header{
      display:flex;
      gap:14px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
      border-bottom:1px solid var(--line);
      padding-bottom:14px;
      margin-bottom:14px;
    }
    h1{
      font-size:22px;
      line-height:1.2;
      margin:0 0 6px 0;
      letter-spacing:.2px;
    }
    .sub{
      margin:0;
      color:var(--muted);
      font-size:14px;
      line-height:1.5;
      max-width:820px;
    }

    .topActions{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }

    .btn{
      appearance:none;
      border:1px solid var(--btn);
      background:var(--btn);
      color:var(--btnTxt);
      padding:10px 12px;
      border-radius:12px;
      font-weight:800;
      font-size:13px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
    }
    .btn.secondary{
      background:#fff;
      color:#111;
      border:1px solid var(--line);
      font-weight:800;
    }
    .btn:active{transform:translateY(1px)}
    .btn svg{width:16px;height:16px}

    .lang{
      display:flex;
      gap:8px;
      align-items:center;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      background:#fff;
      font-size:13px;
      font-weight:900;
      cursor:pointer;
      user-select:none;
    }
    .pill[aria-pressed="true"]{
      border-color:#111;
      box-shadow:0 0 0 2px rgba(0,0,0,.08) inset;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
    }
    @media (max-width: 920px){
      .grid{grid-template-columns:1fr}
    }

    .card{
      border:1px solid var(--line);
      background:var(--soft2);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:14px;
    }
    .card h2{
      margin:0 0 10px 0;
      font-size:16px;
      letter-spacing:.2px;
    }
    .hint{
      margin:0 0 10px 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.5;
    }

    .row{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap:10px;
      align-items:center;
      padding:10px;
      border-radius:12px;
      background:#fff;
      border:1px solid var(--line);
      margin-bottom:10px;
    }
    @media (max-width:560px){
      .row{grid-template-columns:1fr}
    }
    label{
      font-weight:900;
      font-size:13px;
    }
    .small{
      color:var(--muted);
      font-size:12px;
      line-height:1.4;
      margin-top:4px;
    }

    input[type="number"], select{
      width:100%;
      padding:10px 10px;
      border-radius:12px;
      border:1px solid var(--line);
      font-size:14px;
      background:#fff;
      color:#111;
      box-sizing:border-box;
    }
    input[type="range"]{
      width:100%;
      accent-color:#111;
    }

    .split{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width:560px){
      .split{grid-template-columns:1fr}
    }

    .checkLine{
      display:flex;
      align-items:flex-start;
      gap:10px;
      padding:10px;
      border:1px solid var(--line);
      border-radius:12px;
      background:#fff;
      margin-bottom:10px;
    }
    .checkLine input{margin-top:3px}
    .checkMain{display:flex; flex-direction:column; gap:2px; flex:1;}
    .priceTag{font-family:var(--mono); font-size:12px; color:#111; white-space:nowrap;}

    .kpiGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width:920px){
      .kpiGrid{grid-template-columns:1fr}
    }
    .kpi{
      border:1px solid var(--line);
      border-radius:12px;
      background:#fff;
      padding:12px;
    }
    .kpi .t{font-size:12px; color:var(--muted); margin:0 0 6px 0; font-weight:900;}
    .kpi .v{font-size:18px; margin:0; font-weight:950; letter-spacing:.2px;}
    .kpi .s{margin:6px 0 0 0; font-size:12px; color:var(--muted); line-height:1.4;}

    table{
      width:100%;
      border-collapse:collapse;
      background:#fff;
      border:1px solid var(--line);
      border-radius:12px;
      overflow:hidden;
    }
    th, td{
      padding:10px 10px;
      border-bottom:1px solid var(--line);
      font-size:13px;
      text-align:left;
      vertical-align:top;
    }
    th{
      background:var(--soft);
      font-weight:950;
      font-size:12px;
      letter-spacing:.2px;
      text-transform:uppercase;
    }
    tr:last-child td{border-bottom:none}
    .mono{font-family:var(--mono)}
    .right{text-align:right}
    .muted{color:var(--muted)}

    .foot{
      margin-top:14px;
      padding-top:14px;
      border-top:1px solid var(--line);
      color:var(--muted);
      font-size:12px;
      line-height:1.55;
    }

    /* Accordions */
    .accordions{
      border:1px solid var(--line);
      background:var(--soft2);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:12px;
      margin:14px 0;
    }
    .acc{
      border:1px solid var(--line);
      border-radius:12px;
      background:#fff;
      margin:10px 0;
      overflow:hidden;
    }
    .acc summary{
      list-style:none;
      cursor:pointer;
      font-weight:950;
      font-size:13px;
      padding:12px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      user-select:none;
    }
    .acc summary::-webkit-details-marker{display:none}
    .acc .chev{
      width:18px;height:18px; flex:0 0 auto;
      transition: transform .18s ease;
    }
    .acc[open] .chev{transform:rotate(180deg)}
    .accBody{
      padding:0 12px 12px 12px;
      border-top:1px solid var(--line);
      font-size:13.5px;
      line-height:1.55;
      color:var(--txt);
    }
    .accBody p{margin:10px 0 0 0}
    .accBody .muted{color:var(--muted); font-size:12.5px}
    .accBody .mono{font-family:var(--mono); font-size:12.5px}
    .accBody ul{margin:10px 0 0 18px}
    .accBody li{margin:6px 0}

    /* PRINT */
    @media print{
      @page { margin: 12mm; }
      header{border-bottom:1px solid #000}
      .topActions, .lang, .noPrint{display:none !important}
      .card, .accordions{box-shadow:none}
      .wrap{max-width:none; padding:0}
      .card, .row, table, .kpi, .accordions, .acc{break-inside:avoid}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <h1 data-i18n="h1">Tragfähigkeits-Rechner (3 Ebenen)</h1>
        <p class="sub" data-i18n="sub">
          Rechne dir selbst aus, was bei 1–50 neuen Mitgliedern pro Monat möglich sein kann.
          Mitgliedschaft (60 €) ist der stabile Sockel. Weitere Bausteine kannst du optional dazunehmen.
        </p>
      </div>

      <div class="topActions noPrint">
        <div class="lang" aria-label="Sprache">
          <button class="pill" id="langDE" type="button" aria-pressed="true">DE</button>
          <button class="pill" id="langEN" type="button" aria-pressed="false">EN</button>
        </div>

        <button class="btn secondary" id="btnReset" type="button">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M3 12a9 9 0 0 1 15.36-6.36" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M18 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M21 12a9 9 0 0 1-15.36 6.36" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span data-i18n="reset">Reset</span>
        </button>

        <button class="btn secondary" id="btnCopy" type="button">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M9 9h10v12H9V9Z" stroke="currentColor" stroke-width="2"/>
            <path d="M5 3h10v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M5 7h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M5 7v14h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span data-i18n="copy">Kopieren</span>
        </button>

        <button class="btn" id="btnPrint" type="button">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 8V3h10v5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M7 17h10v4H7v-4Z" stroke="currentColor" stroke-width="2"/>
            <path d="M6 18H5a3 3 0 0 1-3-3v-4a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v4a3 3 0 0 1-3 3h-1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M18 12h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
          </svg>
          <span data-i18n="print">Drucken</span>
        </button>
      </div>
    </header>

    <!-- ACCORDION INFO BOXES -->
    <section class="accordions">
      <details class="acc" open>
        <summary>
          <span data-i18n="acc1Title">Was dieser Rechner zeigt (kurz & verständlich)</span>
          <svg class="chev" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </summary>
        <div class="accBody">
          <p class="muted" data-i18n="acc1P1">
            Dieser Rechner ist eine Rechenhilfe zur Orientierung. Du stellst ein, was du tust (Arbeitstage, Abschlüsse pro Tag) und welche Annahmen du triffst (Aktiv-Quoten und Leistung). Daraus wird eine mögliche Tragfähigkeit sichtbar.
          </p>
          <ul>
            <li class="muted" data-i18n="acc1L1">Ebene 1: deine direkten neuen Mitglieder (plus optional: Promotoren als Team-Hebel).</li>
            <li class="muted" data-i18n="acc1L2">Ebene 2: ein Teil aus Ebene 1 wird aktiv und bringt weitere Mitglieder.</li>
            <li class="muted" data-i18n="acc1L3">Ebene 3: aus Ebene 2 kann eine dritte Ebene entstehen (maximal 3 Ebenen).</li>
          </ul>
          <p class="muted" data-i18n="acc1P2">
            Mitgliedschaft (60 €) ist der stabile Sockel. Weitere Bausteine rechnest du nur dann mit, wenn du sie per Haken aktivierst.
          </p>
        </div>
      </details>

      <details class="acc">
        <summary>
          <span data-i18n="acc2Title">Beispiel: Was wäre, wenn du nur 1 Promotor aufbaust?</span>
          <svg class="chev" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </summary>
        <div class="accBody">
          <p class="muted" data-i18n="acc2P1">
            Wenn du einen einzigen Promotor aufbaust, der jeden Arbeitstag 1 neues Mitglied gewinnt, entsteht zusätzlich zu deiner eigenen Aktivität ein stabiler Zufluss.
          </p>
          <p class="mono" data-i18n="acc2P2">
            Zusatz-Zufluss pro Monat = Arbeitstage × 1 Mitglied pro Tag.
          </p>
          <p class="muted" data-i18n="acc2P3">
            Der Promotor sorgt für den Abschluss (Mitgliedschaft). Alles Weitere (Lernen, Nutzung, Tempo) entscheidet jedes Mitglied eigenverantwortlich – getragen durch Handbuch und Kurse.
          </p>
        </div>
      </details>

      <details class="acc">
        <summary>
          <span data-i18n="acc3Title">Warum nur die Mitgliedschaft aktiv angeboten wird</span>
          <svg class="chev" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </summary>
        <div class="accBody">
          <p class="muted" data-i18n="acc3P1">
            Im System gibt es inzwischen bis zu 50 Produkte/Bausteine, die langfristig zur Tragfähigkeit beitragen können. Trotzdem bleibt das Prinzip bewusst einfach:
          </p>
          <p class="muted" data-i18n="acc3P2">
            Der Promotor bietet aktiv nur die Mitgliedschaft an. Mit dem Abschluss der Mitgliedschaft ist die Aufgabe erledigt.
          </p>
          <p class="muted" data-i18n="acc3P3">
            Danach entscheidet jedes Mitglied freiwillig, wann es welche Bausteine nutzt und welche Produkte es sich selbst bestellt. Das „ewige Erklären“ übernimmt das System: Handbuch, Kurse und klare Lernpfade.
          </p>
          <p class="muted" data-i18n="acc3P4">
            So wird Lebenszeit gewonnen: Der Promotor ist nicht dauerhaft Supporter, sondern kann sich auf Akquise und Abschluss konzentrieren.
          </p>
        </div>
      </details>

      <details class="acc">
        <summary>
          <span data-i18n="acc4Title">Hinweis: 20% bis 40% Eigenumsatz (nicht im Rechner abgebildet)</span>
          <svg class="chev" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </summary>
        <div class="accBody">
          <p class="muted" data-i18n="acc4P1">
            Die im Rechner gezeigten Anteile (z. B. 20% / 15% / 10%) sind eine Beispiel-Logik zur Orientierung. In der Praxis kann der persönliche Eigenumsatz – je nach Entwicklung – von 20% bis auf 40% anwachsen.
          </p>
          <p class="muted" data-i18n="acc4P2">
            Diese Dynamik wird hier bewusst nicht abgebildet, weil es um Tragfähigkeit und Verständnis geht – nicht um Abrechnung.
          </p>
        </div>
      </details>

      <details class="acc">
        <summary>
          <span data-i18n="acc5Title">Wichtig: Keine Abrechnung, keine Garantie</span>
          <svg class="chev" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </summary>
        <div class="accBody">
          <p class="muted" data-i18n="acc5P1">
            Das Tool ist eine Rechenhilfe zur Orientierung. Es zeigt mögliche Entwicklungen anhand deiner Eingaben und Annahmen – keine Zusage oder Garantie.
          </p>
          <p class="muted" data-i18n="acc5P2">
            Es erzeugt keine Abrechnung und ersetzt keine individuelle Planung. Jeder bestimmt sein Tempo und seine Entscheidungen selbst.
          </p>
        </div>
      </details>
    </section>

    <div class="grid">
      <!-- INPUTS -->
      <section class="card">
        <h2 data-i18n="inputs">Eingaben</h2>
        <p class="hint" data-i18n="inputsHint">
          Stelle ein, wie viele neue Mitglieder du pro Monat gewinnst. Danach wähle, welche Bausteine in die Beispielrechnung einfließen sollen.
        </p>

        <!-- Workdays + self signups -->
        <div class="row">
          <div>
            <label for="workdays" data-i18n="workdaysLabel">Arbeitstage pro Monat</label>
            <div class="small" data-i18n="workdaysHelp">Wähle deine Einsatztage pro Monat. Bereich: 1 bis 30.</div>
          </div>
          <div class="split">
            <input id="workdays" type="number" min="1" max="30" step="1" value="20" />
            <input id="selfPerDay" type="number" min="0" max="10" step="1" value="1" />
          </div>
          <div class="small muted" style="grid-column:1 / -1" data-i18n="selfPerDayHelp">Rechts: neue Mitglieder pro Arbeitstag (eigene Abschlüsse).</div>
        </div>

        <!-- Period -->
        <div class="row">
          <div>
            <label for="period" data-i18n="periodLabel">Zeitraum</label>
            <div class="small" data-i18n="periodHelp">Monat / Quartal / Jahr – alle Werte werden sauber kumuliert.</div>
          </div>
          <div>
            <select id="period">
              <option value="1" data-i18n="p1">1 Monat</option>
              <option value="3" data-i18n="p3">1 Quartal (3 Monate)</option>
              <option value="12" data-i18n="p12">12 Monate</option>
            </select>
          </div>
        </div>

        <!-- TEAM / PROMOTERS -->
        <div class="row">
          <div>
            <label for="promoters" data-i18n="promotersLabel">Zusätzliche Promotoren (Team-Hebel)</label>
            <div class="small" data-i18n="promotersHelp">
              Stelle ein, wie viele Promotoren du zusätzlich aufbaust. Diese erzeugen zusätzlichen Zufluss in Ebene 1.
            </div>
          </div>
          <div>
            <div class="split">
              <input id="promoters" type="number" min="0" max="50" step="1" value="0" />
              <input id="promotersPerDay" type="number" min="0" max="10" step="1" value="1" />
            </div>
            <div class="small muted" data-i18n="promotersPerDayHelp">Rechts: neue Mitglieder pro Arbeitstag je Promotor.</div>
            <div class="small muted" style="margin-top:6px">
              <span data-i18n="promotersQuick">Schnellwahl:</span>
              <button class="btn secondary noPrint" id="btnOnePromoter" type="button" style="padding:8px 10px; font-size:12px;">
                <span data-i18n="onePromoterBtn">1 Promotor einsetzen</span>
              </button>
            </div>
          </div>
        </div>

        <!-- PRODUCTS -->
        <div class="row">
          <div>
            <label data-i18n="buildingBlocks">Bausteine (Umsatz pro neuem Mitglied)</label>
            <div class="small" data-i18n="blocksHelp">
              Mitgliedschaft ist fix. Alles andere ist optional und wird nur gerechnet, wenn du es auswählst.
            </div>
          </div>
          <div>
            <div class="checkLine">
              <input id="bMembership" type="checkbox" checked disabled />
              <div class="checkMain">
                <div style="display:flex;justify-content:space-between;gap:10px;">
                  <div><strong data-i18n="membership">Mitgliedschaft</strong></div>
                  <div class="priceTag">60 €</div>
                </div>
                <div class="small" data-i18n="membershipHelp">Stabiler Sockel (nicht abwählbar).</div>
              </div>
            </div>

            <div class="checkLine">
              <input id="bLead" type="checkbox" />
              <div class="checkMain">
                <div style="display:flex;justify-content:space-between;gap:10px;">
                  <div><strong data-i18n="leadSmall">Leadmaschine (klein)</strong></div>
                  <div class="priceTag">60 €</div>
                </div>
                <div class="small" data-i18n="leadHelp">Optionaler Baustein zur Werbung.</div>
              </div>
            </div>

            <div class="checkLine">
              <input id="bWeekend" type="checkbox" />
              <div class="checkMain">
                <div style="display:flex;justify-content:space-between;gap:10px;">
                  <div><strong data-i18n="weekend">Weekend-Setup</strong></div>
                  <div class="priceTag">399 €</div>
                </div>
                <div class="small" data-i18n="weekendHelp">Optionaler Baustein zur Orientierung & Umsetzung.</div>
              </div>
            </div>

            <div class="small muted" data-i18n="productsNote" style="margin-top:8px">
              Hinweis: Im System gibt es bis zu 50 Produkte. Hier im Rechner wählst du nur die Bausteine aus, die du für dein Szenario mitrechnen möchtest.
            </div>
          </div>
        </div>

        <!-- QUOTES / ASSUMPTIONS -->
        <div class="row">
          <div>
            <label data-i18n="quotesTitle">Aktiv-Quoten & Leistung (deine Annahmen)</label>
            <div class="small" data-i18n="quotesHelp">
              Hier stellst du ein, wie viele aktiv werden und wie viele neue Mitglieder pro aktivem Mitglied entstehen.
            </div>
          </div>
          <div>
            <div class="split">
              <div>
                <label class="small" for="act1" style="font-weight:950" data-i18n="act1Short">E1→E2 aktiv (%)</label>
                <input id="act1" type="number" min="0" max="100" step="1" value="30" />
              </div>
              <div>
                <label class="small" for="prod1" style="font-weight:950" data-i18n="prod1Short">E1→E2 neue/Monat</label>
                <input id="prod1" type="number" min="0" max="50" step="1" value="5" />
              </div>
            </div>

            <div class="split" style="margin-top:10px;">
              <div>
                <label class="small" for="act2" style="font-weight:950" data-i18n="act2Short">E2→E3 aktiv (%)</label>
                <input id="act2" type="number" min="0" max="100" step="1" value="20" />
              </div>
              <div>
                <label class="small" for="prod2" style="font-weight:950" data-i18n="prod2Short">E2→E3 neue/Monat</label>
                <input id="prod2" type="number" min="0" max="50" step="1" value="3" />
              </div>
            </div>

            <div class="small muted" style="margin-top:10px" data-i18n="sharesHelp">
              Beteiligung Ursprung (Beispiel): Ebene 1: 20% • Ebene 2: 15% • Ebene 3: 10%
            </div>

            <div class="small muted" style="margin-top:6px">
              <button class="btn secondary noPrint" id="btnDefaults" type="button" style="padding:8px 10px; font-size:12px;">
                <span data-i18n="defaultsBtn">Standardwerte wiederherstellen</span>
              </button>
            </div>
          </div>
        </div>

        <div class="foot">
          <div data-i18n="savedNote">
            Deine Einstellungen werden automatisch lokal im Browser gespeichert (LocalStorage).
          </div>
        </div>
      </section>

      <!-- OUTPUTS -->
      <section class="card">
        <h2 data-i18n="outputs">Ergebnis</h2>
        <p class="hint" data-i18n="outputsHint">
          Du siehst unten die Mitgliederzahlen und den Umsatz pro Ebene – sowie den Anteil für den Ursprung (Beispiel-Logik).
        </p>

        <div class="kpiGrid">
          <div class="kpi">
            <p class="t" data-i18n="kpiPack">Umsatz pro neuem Mitglied (gewählt)</p>
            <p class="v mono" id="kpiPack">–</p>
            <p class="s" data-i18n="kpiPackHelp">Summe aus Mitgliedschaft (fix) und optionalen Bausteinen.</p>
          </div>
          <div class="kpi">
            <p class="t" data-i18n="kpiPeriod">Zeitraum</p>
            <p class="v" id="kpiPeriod">–</p>
            <p class="s" data-i18n="kpiPeriodHelp">Die Monatswerte werden für Quartal/Jahr kumuliert.</p>
          </div>
          <div class="kpi">
            <p class="t" data-i18n="kpiNew">Neue Mitglieder gesamt (kumuliert)</p>
            <p class="v mono" id="kpiNew">–</p>
            <p class="s" data-i18n="kpiNewHelp">Ebene 1 + Ebene 2 + Ebene 3 im gewählten Zeitraum.</p>
          </div>
          <div class="kpi">
            <p class="t" data-i18n="kpiEarn">Verdienst Ursprung (kumuliert)</p>
            <p class="v mono" id="kpiEarn">–</p>
            <p class="s" data-i18n="kpiEarnHelp">Beispiel-Logik: 20% / 15% / 10% (keine Abrechnung).</p>
          </div>
        </div>

        <div style="margin-top:12px">
          <table aria-label="Ergebnis Tabelle">
            <thead>
              <tr>
                <th data-i18n="thLevel">Ebene</th>
                <th class="right" data-i18n="thNewM">Neue Mitglieder (Monat)</th>
                <th class="right" data-i18n="thNewT">Neue Mitglieder (Zeitraum)</th>
                <th class="right" data-i18n="thRevM">Umsatz (Monat)</th>
                <th class="right" data-i18n="thRevT">Umsatz (Zeitraum)</th>
                <th class="right" data-i18n="thEarnT">Ursprung-Anteil (Zeitraum)</th>
              </tr>
            </thead>
            <tbody id="tbl"></tbody>
          </table>
        </div>

        <div class="foot">
          <div><strong data-i18n="explainTitle">Kurz erklärt (für Neue)</strong></div>
          <div class="small" style="margin-top:6px" data-i18n="explainText">
            Ebene 1 sind deine direkten neuen Mitglieder (plus optional: Promotoren). Ein Teil wird später aktiv und bringt weitere Mitglieder (Ebene 2).
            Aus Ebene 2 kann wiederum Ebene 3 entstehen. Mitgliedschaft (60 €) ist der stabile Sockel. Weitere Bausteine rechnest du nur dann mit, wenn du sie aktivierst.
          </div>
        </div>
      </section>
    </div>
  </div>

  <script>
    (function(){
      const LS_KEY = "fsa_tragfaehigkeit_rechner_v3";

      // Prices
      const PRICE_MEMBERSHIP = 60;
      const PRICE_LEAD = 60;
      const PRICE_WEEKEND = 399;

      // Origin shares (example only)
      const SHARE_L1 = 0.20;
      const SHARE_L2 = 0.15;
      const SHARE_L3 = 0.10;

      // UI
      const workdays = document.getElementById("workdays");
      const selfPerDay = document.getElementById("selfPerDay");
      const period = document.getElementById("period");

      const promoters = document.getElementById("promoters");
      const promotersPerDay = document.getElementById("promotersPerDay");
      const btnOnePromoter = document.getElementById("btnOnePromoter");

      const bLead = document.getElementById("bLead");
      const bWeekend = document.getElementById("bWeekend");

      const act1 = document.getElementById("act1");
      const prod1 = document.getElementById("prod1");
      const act2 = document.getElementById("act2");
      const prod2 = document.getElementById("prod2");

      const btnDefaults = document.getElementById("btnDefaults");

      const kpiPack = document.getElementById("kpiPack");
      const kpiPeriod = document.getElementById("kpiPeriod");
      const kpiNew = document.getElementById("kpiNew");
      const kpiEarn = document.getElementById("kpiEarn");
      const tbl = document.getElementById("tbl");

      const btnPrint = document.getElementById("btnPrint");
      const btnCopy = document.getElementById("btnCopy");
      const btnReset = document.getElementById("btnReset");

      const langDE = document.getElementById("langDE");
      const langEN = document.getElementById("langEN");

      const I18N = {
        de: {
          h1:"Tragfähigkeits-Rechner (3 Ebenen)",
          sub:"Rechne dir selbst aus, was bei wiederholbaren Prozessen möglich sein kann. Mitgliedschaft (60 €) ist der stabile Sockel. Weitere Bausteine kannst du optional dazunehmen.",
          reset:"Reset",
          copy:"Kopieren",
          print:"Drucken",

          acc1Title:"Was dieser Rechner zeigt (kurz & verständlich)",
          acc1P1:"Dieser Rechner ist eine Rechenhilfe zur Orientierung. Du stellst ein, was du tust (Arbeitstage, Abschlüsse pro Tag) und welche Annahmen du triffst (Aktiv-Quoten und Leistung). Daraus wird eine mögliche Tragfähigkeit sichtbar.",
          acc1L1:"Ebene 1: deine direkten neuen Mitglieder (plus optional: Promotoren als Team-Hebel).",
          acc1L2:"Ebene 2: ein Teil aus Ebene 1 wird aktiv und bringt weitere Mitglieder.",
          acc1L3:"Ebene 3: aus Ebene 2 kann eine dritte Ebene entstehen (maximal 3 Ebenen).",
          acc1P2:"Mitgliedschaft (60 €) ist der stabile Sockel. Weitere Bausteine rechnest du nur dann mit, wenn du sie per Haken aktivierst.",

          acc2Title:"Beispiel: Was wäre, wenn du nur 1 Promotor aufbaust?",
          acc2P1:"Wenn du einen einzigen Promotor aufbaust, der jeden Arbeitstag 1 neues Mitglied gewinnt, entsteht zusätzlich zu deiner eigenen Aktivität ein stabiler Zufluss.",
          acc2P2:"Zusatz-Zufluss pro Monat = Arbeitstage × 1 Mitglied pro Tag.",
          acc2P3:"Der Promotor sorgt für den Abschluss (Mitgliedschaft). Alles Weitere (Lernen, Nutzung, Tempo) entscheidet jedes Mitglied eigenverantwortlich – getragen durch Handbuch und Kurse.",

          acc3Title:"Warum nur die Mitgliedschaft aktiv angeboten wird",
          acc3P1:"Im System gibt es inzwischen bis zu 50 Produkte/Bausteine, die langfristig zur Tragfähigkeit beitragen können. Trotzdem bleibt das Prinzip bewusst einfach:",
          acc3P2:"Der Promotor bietet aktiv nur die Mitgliedschaft an. Mit dem Abschluss der Mitgliedschaft ist die Aufgabe erledigt.",
          acc3P3:"Danach entscheidet jedes Mitglied freiwillig, wann es welche Bausteine nutzt und welche Produkte es sich selbst bestellt. Das „ewige Erklären“ übernimmt das System: Handbuch, Kurse und klare Lernpfade.",
          acc3P4:"So wird Lebenszeit gewonnen: Der Promotor ist nicht dauerhaft Supporter, sondern kann sich auf Akquise und Abschluss konzentrieren.",

          acc4Title:"Hinweis: 20% bis 40% Eigenumsatz (nicht im Rechner abgebildet)",
          acc4P1:"Die im Rechner gezeigten Anteile (z. B. 20% / 15% / 10%) sind eine Beispiel-Logik zur Orientierung. In der Praxis kann der persönliche Eigenumsatz – je nach Entwicklung – von 20% bis auf 40% anwachsen.",
          acc4P2:"Diese Dynamik wird hier bewusst nicht abgebildet, weil es um Tragfähigkeit und Verständnis geht – nicht um Abrechnung.",

          acc5Title:"Wichtig: Keine Abrechnung, keine Garantie",
          acc5P1:"Das Tool ist eine Rechenhilfe zur Orientierung. Es zeigt mögliche Entwicklungen anhand deiner Eingaben und Annahmen – keine Zusage oder Garantie.",
          acc5P2:"Es erzeugt keine Abrechnung und ersetzt keine individuelle Planung. Jeder bestimmt sein Tempo und seine Entscheidungen selbst.",

          inputs:"Eingaben",
          inputsHint:"Stelle deine Arbeitstage, Abschlüsse pro Tag und optional Promotoren ein. Danach wähle, welche Bausteine in dein Szenario einfließen sollen.",
          workdaysLabel:"Arbeitstage pro Monat",
          workdaysHelp:"Wähle deine Einsatztage pro Monat. Bereich: 1 bis 30.",
          selfPerDayHelp:"Rechts: neue Mitglieder pro Arbeitstag (eigene Abschlüsse).",
          periodLabel:"Zeitraum",
          periodHelp:"Monat / Quartal / Jahr – alle Werte werden sauber kumuliert.",
          p1:"1 Monat",
          p3:"1 Quartal (3 Monate)",
          p12:"12 Monate",

          promotersLabel:"Zusätzliche Promotoren (Team-Hebel)",
          promotersHelp:"Stelle ein, wie viele Promotoren du zusätzlich aufbaust. Diese erzeugen zusätzlichen Zufluss in Ebene 1.",
          promotersPerDayHelp:"Rechts: neue Mitglieder pro Arbeitstag je Promotor.",
          promotersQuick:"Schnellwahl:",
          onePromoterBtn:"1 Promotor einsetzen",

          buildingBlocks:"Bausteine (Umsatz pro neuem Mitglied)",
          blocksHelp:"Mitgliedschaft ist fix. Alles andere ist optional und wird nur gerechnet, wenn du es auswählst.",
          membership:"Mitgliedschaft",
          membershipHelp:"Stabiler Sockel (nicht abwählbar).",
          leadSmall:"Leadmaschine (klein)",
          leadHelp:"Optionaler Baustein zur Werbung.",
          weekend:"Weekend-Setup",
          weekendHelp:"Optionaler Baustein zur Orientierung & Umsetzung.",
          productsNote:"Hinweis: Im System gibt es bis zu 50 Produkte. Hier im Rechner wählst du nur die Bausteine aus, die du für dein Szenario mitrechnen möchtest.",

          quotesTitle:"Aktiv-Quoten & Leistung (deine Annahmen)",
          quotesHelp:"Hier stellst du ein, wie viele aktiv werden und wie viele neue Mitglieder pro aktivem Mitglied entstehen.",
          act1Short:"E1→E2 aktiv (%)",
          prod1Short:"E1→E2 neue/Monat",
          act2Short:"E2→E3 aktiv (%)",
          prod2Short:"E2→E3 neue/Monat",
          sharesHelp:"Beteiligung Ursprung (Beispiel): Ebene 1: 20% • Ebene 2: 15% • Ebene 3: 10%",
          defaultsBtn:"Standardwerte wiederherstellen",
          savedNote:"Deine Einstellungen werden automatisch lokal im Browser gespeichert (LocalStorage).",

          outputs:"Ergebnis",
          outputsHint:"Du siehst unten die Mitgliederzahlen und den Umsatz pro Ebene – sowie den Anteil für den Ursprung (Beispiel-Logik).",
          kpiPack:"Umsatz pro neuem Mitglied (gewählt)",
          kpiPackHelp:"Summe aus Mitgliedschaft (fix) und optionalen Bausteinen.",
          kpiPeriod:"Zeitraum",
          kpiPeriodHelp:"Die Monatswerte werden für Quartal/Jahr kumuliert.",
          kpiNew:"Neue Mitglieder gesamt (kumuliert)",
          kpiNewHelp:"Ebene 1 + Ebene 2 + Ebene 3 im gewählten Zeitraum.",
          kpiEarn:"Verdienst Ursprung (kumuliert)",
          kpiEarnHelp:"Beispiel-Logik: 20% / 15% / 10% (keine Abrechnung).",

          thLevel:"Ebene",
          thNewM:"Neue Mitglieder (Monat)",
          thNewT:"Neue Mitglieder (Zeitraum)",
          thRevM:"Umsatz (Monat)",
          thRevT:"Umsatz (Zeitraum)",
          thEarnT:"Ursprung-Anteil (Zeitraum)",

          explainTitle:"Kurz erklärt (für Neue)",
          explainText:"Ebene 1 sind deine direkten neuen Mitglieder (plus optional: Promotoren). Ein Teil wird später aktiv und bringt weitere Mitglieder (Ebene 2). Aus Ebene 2 kann wiederum Ebene 3 entstehen. Mitgliedschaft (60 €) ist der stabile Sockel. Weitere Bausteine rechnest du nur dann mit, wenn du sie aktivierst.",

          level1:"Ebene 1",
          level2:"Ebene 2",
          level3:"Ebene 3",
          total:"Gesamt",

          copiedOk:"Kopiert.",
          copiedFail:"Kopieren nicht möglich."
        },
        en: {
          h1:"Sustainability Calculator (3 Levels)",
          sub:"Calculate what could be possible with repeatable processes. Membership (€60) is the stable base. You can optionally include additional building blocks.",
          reset:"Reset",
          copy:"Copy",
          print:"Print",

          acc1Title:"What this calculator shows (short & clear)",
          acc1P1:"This calculator is an orientation tool. You define what you do (working days, sign-ups per day) and your assumptions (activation rates and output). This makes a possible sustainability path visible.",
          acc1L1:"Level 1: your direct new members (plus optional: promoters as a team lever).",
          acc1L2:"Level 2: a portion of Level 1 becomes active and brings additional members.",
          acc1L3:"Level 3: a third level can emerge from Level 2 (maximum 3 levels).",
          acc1P2:"Membership (€60) is the stable base. Additional blocks are only included when you tick them.",

          acc2Title:"Example: what if you build only 1 promoter?",
          acc2P1:"If you build one single promoter who brings 1 new member per working day, this creates a steady inflow on top of your own activity.",
          acc2P2:"Additional inflow per month = working days × 1 sign-up per day.",
          acc2P3:"The promoter closes the membership. Everything after that (learning, usage, pace) is decided independently by each member—carried by the handbook and courses.",

          acc3Title:"Why only the membership is actively offered",
          acc3P1:"The system includes up to 50 products/building blocks that can contribute to long-term sustainability. Still, the principle stays intentionally simple:",
          acc3P2:"The promoter actively offers only the membership. Once the membership is closed, the job is done.",
          acc3P3:"After that, each member voluntarily decides which blocks to use and which products to purchase. The ongoing explanation is carried by the system: handbook, courses, and clear learning paths.",
          acc3P4:"This saves time: the promoter is not a permanent supporter, but focuses on acquisition and closing the membership.",

          acc4Title:"Note: 20% up to 40% personal share (not modeled here)",
          acc4P1:"The shown shares (e.g., 20% / 15% / 10%) are an example logic for orientation. In real development, a person’s own share can grow from 20% up to 40% depending on progress.",
          acc4P2:"This dynamic is intentionally not modeled here because the goal is sustainability and understanding—not billing.",

          acc5Title:"Important: no billing, no guarantee",
          acc5P1:"This tool is an orientation calculator. It shows possible developments based on your inputs and assumptions—no promise or guarantee.",
          acc5P2:"It does not create billing and does not replace individual planning. Everyone controls their pace and decisions.",

          inputs:"Inputs",
          inputsHint:"Set your working days, sign-ups per day, and optional promoters. Then choose which building blocks to include in your scenario.",
          workdaysLabel:"Working days per month",
          workdaysHelp:"Choose your working days per month. Range: 1 to 30.",
          selfPerDayHelp:"Right: new members per working day (your own sign-ups).",
          periodLabel:"Period",
          periodHelp:"Month / quarter / year—values are accumulated properly.",
          p1:"1 month",
          p3:"1 quarter (3 months)",
          p12:"12 months",

          promotersLabel:"Additional promoters (team lever)",
          promotersHelp:"Set how many promoters you additionally build. They generate additional inflow into Level 1.",
          promotersPerDayHelp:"Right: new members per working day per promoter.",
          promotersQuick:"Quick:",
          onePromoterBtn:"Apply 1 promoter",

          buildingBlocks:"Building blocks (revenue per new member)",
          blocksHelp:"Membership is fixed. Everything else is optional and only counted when selected.",
          membership:"Membership",
          membershipHelp:"Stable base (cannot be deselected).",
          leadSmall:"Lead machine (small)",
          leadHelp:"Optional advertising block.",
          weekend:"Weekend setup",
          weekendHelp:"Optional orientation & implementation block.",
          productsNote:"Note: the system includes up to 50 products. Here you only select the blocks you want to include in your scenario.",

          quotesTitle:"Activation rates & output (your assumptions)",
          quotesHelp:"Set how many become active and how many new members per active member occur.",
          act1Short:"L1→L2 active (%)",
          prod1Short:"L1→L2 new/month",
          act2Short:"L2→L3 active (%)",
          prod2Short:"L2→L3 new/month",
          sharesHelp:"Origin share (example): Level 1: 20% • Level 2: 15% • Level 3: 10%",
          defaultsBtn:"Restore defaults",
          savedNote:"Your settings are stored locally in your browser (LocalStorage).",

          outputs:"Results",
          outputsHint:"Below you see member counts and revenue per level—plus the origin share (example logic).",
          kpiPack:"Revenue per new member (selected)",
          kpiPackHelp:"Sum of membership (fixed) and optional blocks.",
          kpiPeriod:"Period",
          kpiPeriodHelp:"Monthly values are accumulated for quarter/year.",
          kpiNew:"Total new members (accumulated)",
          kpiNewHelp:"Level 1 + Level 2 + Level 3 in the selected period.",
          kpiEarn:"Origin earnings (accumulated)",
          kpiEarnHelp:"Example logic: 20% / 15% / 10% (no billing).",

          thLevel:"Level",
          thNewM:"New members (month)",
          thNewT:"New members (period)",
          thRevM:"Revenue (month)",
          thRevT:"Revenue (period)",
          thEarnT:"Origin share (period)",

          explainTitle:"Quick explanation (for beginners)",
          explainText:"Level 1 are your direct new members (plus optional: promoters). Some later become active and bring additional members (Level 2). From Level 2, Level 3 can emerge. Membership (€60) is the stable base. You only include other blocks when you select them.",

          level1:"Level 1",
          level2:"Level 2",
          level3:"Level 3",
          total:"Total",

          copiedOk:"Copied.",
          copiedFail:"Copy not available."
        }
      };

      let LANG = "de";

      function t(key){
        const dict = I18N[LANG] || I18N.de;
        return dict[key] ?? I18N.de[key] ?? key;
      }

      function fmtEUR(n){
        const v = Number(n || 0);
        return v.toLocaleString("de-DE", {minimumFractionDigits:2, maximumFractionDigits:2}) + " €";
      }
      function fmtInt(n){
        const v = Math.round(Number(n || 0));
        return v.toLocaleString("de-DE");
      }

      function clamp(el, min, max){
        let v = Number(el.value);
        if (!Number.isFinite(v)) v = min;
        v = Math.max(min, Math.min(max, v));
        el.value = String(v);
        return v;
      }

      function packValue(){
        let sum = PRICE_MEMBERSHIP;
        if (bLead.checked) sum += PRICE_LEAD;
        if (bWeekend.checked) sum += PRICE_WEEKEND;
        return sum;
      }

      function applyI18N(){
        document.documentElement.lang = (LANG === "de" ? "de" : "en");
        document.querySelectorAll("[data-i18n]").forEach(el=>{
          const k = el.getAttribute("data-i18n");
          el.textContent = t(k);
        });
        Array.from(period.options).forEach(opt=>{
          const k = opt.getAttribute("data-i18n");
          if (k) opt.textContent = t(k);
        });
        langDE.setAttribute("aria-pressed", LANG==="de" ? "true" : "false");
        langEN.setAttribute("aria-pressed", LANG==="en" ? "true" : "false");
        calc();
      }

      function calc(){
        const months = Number(period.value);

        const wd = clamp(workdays, 1, 30);
        const self = clamp(selfPerDay, 0, 10);

        const prom = clamp(promoters, 0, 50);
        const promPerDay = clamp(promotersPerDay, 0, 10);

        const a1 = clamp(act1, 0, 100) / 100;
        const out2 = clamp(prod1, 0, 50);

        const a2 = clamp(act2, 0, 100) / 100;
        const out3 = clamp(prod2, 0, 50);

        const pack = packValue();

        // Level 1 monthly new members:
        const lvl1_self_m = wd * self;
        const lvl1_team_m = prom * wd * promPerDay;
        const lvl1_new_m = lvl1_self_m + lvl1_team_m;

        // Level 2 monthly new members:
        const lvl1_active_m = Math.round(lvl1_new_m * a1);
        const lvl2_new_m = lvl1_active_m * out2;

        // Level 3 monthly new members:
        const lvl2_active_m = Math.round(lvl2_new_m * a2);
        const lvl3_new_m = lvl2_active_m * out3;

        // Monthly revenue per level
        const lvl1_rev_m = lvl1_new_m * pack;
        const lvl2_rev_m = lvl2_new_m * pack;
        const lvl3_rev_m = lvl3_new_m * pack;

        // Period totals
        const lvl1_new_t = lvl1_new_m * months;
        const lvl2_new_t = lvl2_new_m * months;
        const lvl3_new_t = lvl3_new_m * months;

        const lvl1_rev_t = lvl1_rev_m * months;
        const lvl2_rev_t = lvl2_rev_m * months;
        const lvl3_rev_t = lvl3_rev_m * months;

        const earn1_t = lvl1_rev_t * SHARE_L1;
        const earn2_t = lvl2_rev_t * SHARE_L2;
        const earn3_t = lvl3_rev_t * SHARE_L3;

        const new_total_t = lvl1_new_t + lvl2_new_t + lvl3_new_t;
        const earn_total = earn1_t + earn2_t + earn3_t;

        // KPIs
        kpiPack.textContent = fmtEUR(pack);
        kpiPeriod.textContent = (LANG==="de")
          ? (months === 1 ? "1 Monat" : months + " Monate")
          : (months === 1 ? "1 month" : months + " months");
        kpiNew.textContent = fmtInt(new_total_t);
        kpiEarn.textContent = fmtEUR(earn_total);

        // table rows
        const rows = [
          {name: t("level1"), nm:lvl1_new_m, nt:lvl1_new_t, rm:lvl1_rev_m, rt:lvl1_rev_t, et:earn1_t},
          {name: t("level2"), nm:lvl2_new_m, nt:lvl2_new_t, rm:lvl2_rev_m, rt:lvl2_rev_t, et:earn2_t},
          {name: t("level3"), nm:lvl3_new_m, nt:lvl3_new_t, rm:lvl3_rev_m, rt:lvl3_rev_t, et:earn3_t},
          {name: t("total"),
            nm:(lvl1_new_m+lvl2_new_m+lvl3_new_m),
            nt:new_total_t,
            rm:(lvl1_rev_m+lvl2_rev_m+lvl3_rev_m),
            rt:(lvl1_rev_t+lvl2_rev_t+lvl3_rev_t),
            et:earn_total
          }
        ];

        tbl.innerHTML = rows.map(r => `
          <tr>
            <td><strong>${escapeHtml(r.name)}</strong></td>
            <td class="right mono">${fmtInt(r.nm)}</td>
            <td class="right mono">${fmtInt(r.nt)}</td>
            <td class="right mono">${fmtEUR(r.rm)}</td>
            <td class="right mono">${fmtEUR(r.rt)}</td>
            <td class="right mono">${fmtEUR(r.et)}</td>
          </tr>
        `).join("");

        saveState();
      }

      function escapeHtml(s){
        return String(s).replace(/[&<>"']/g, c => ({
          "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
        }[c]));
      }

      function saveState(){
        const state = {
          LANG,
          workdays: Number(workdays.value),
          selfPerDay: Number(selfPerDay.value),
          period: String(period.value),
          promoters: Number(promoters.value),
          promotersPerDay: Number(promotersPerDay.value),
          bLead: !!bLead.checked,
          bWeekend: !!bWeekend.checked,
          act1: Number(act1.value),
          prod1: Number(prod1.value),
          act2: Number(act2.value),
          prod2: Number(prod2.value)
        };
        try{ localStorage.setItem(LS_KEY, JSON.stringify(state)); }catch(e){}
      }

      function loadState(){
        try{
          const raw = localStorage.getItem(LS_KEY);
          if(!raw) return;
          const s = JSON.parse(raw);
          if (s && typeof s === "object"){
            if (s.LANG === "de" || s.LANG === "en") LANG = s.LANG;

            if (Number.isFinite(s.workdays)) workdays.value = String(s.workdays);
            if (Number.isFinite(s.selfPerDay)) selfPerDay.value = String(s.selfPerDay);

            if (s.period === "1" || s.period === "3" || s.period === "12") period.value = s.period;

            if (Number.isFinite(s.promoters)) promoters.value = String(s.promoters);
            if (Number.isFinite(s.promotersPerDay)) promotersPerDay.value = String(s.promotersPerDay);

            bLead.checked = !!s.bLead;
            bWeekend.checked = !!s.bWeekend;

            if (Number.isFinite(s.act1)) act1.value = String(s.act1);
            if (Number.isFinite(s.prod1)) prod1.value = String(s.prod1);
            if (Number.isFinite(s.act2)) act2.value = String(s.act2);
            if (Number.isFinite(s.prod2)) prod2.value = String(s.prod2);
          }
        }catch(e){}
      }

      async function copySummary(){
        const months = Number(period.value);
        const pack = packValue();

        const wd = Number(workdays.value);
        const self = Number(selfPerDay.value);

        const prom = Number(promoters.value);
        const promPerDay = Number(promotersPerDay.value);

        const a1 = Number(act1.value)/100;
        const out2 = Number(prod1.value);

        const a2 = Number(act2.value)/100;
        const out3 = Number(prod2.value);

        const lvl1_new_m = (wd * self) + (prom * wd * promPerDay);
        const lvl1_active_m = Math.round(lvl1_new_m * a1);
        const lvl2_new_m = lvl1_active_m * out2;
        const lvl2_active_m = Math.round(lvl2_new_m * a2);
        const lvl3_new_m = lvl2_active_m * out3;

        const lvl1_rev_t = (lvl1_new_m * pack) * months;
        const lvl2_rev_t = (lvl2_new_m * pack) * months;
        const lvl3_rev_t = (lvl3_new_m * pack) * months;

        const earn_total = (lvl1_rev_t*SHARE_L1) + (lvl2_rev_t*SHARE_L2) + (lvl3_rev_t*SHARE_L3);
        const new_total_t = (lvl1_new_m+lvl2_new_m+lvl3_new_m) * months;

        const lines = [];
        lines.push(LANG==="de" ? "Tragfähigkeits-Rechner (3 Ebenen)" : "Sustainability Calculator (3 Levels)");
        lines.push("—");
        lines.push((LANG==="de" ? "Zeitraum: " : "Period: ") + (LANG==="de" ? (months===1?"1 Monat":months+" Monate") : (months===1?"1 month":months+" months")));
        lines.push((LANG==="de" ? "Umsatz pro neuem Mitglied: " : "Revenue per new member: ") + fmtEUR(pack));
        lines.push((LANG==="de" ? "Neue Mitglieder gesamt (Zeitraum): " : "Total new members (period): ") + fmtInt(new_total_t));
        lines.push((LANG==="de" ? "Ursprung-Anteil (Beispiel, Zeitraum): " : "Origin share (example, period): ") + fmtEUR(earn_total));
        lines.push("");
        lines.push((LANG==="de" ? "Eingaben:" : "Inputs:"));
        lines.push((LANG==="de" ? "- Arbeitstage/Monat: " : "- Working days/month: ") + wd);
        lines.push((LANG==="de" ? "- Eigene Abschlüsse/Tag: " : "- Own sign-ups/day: ") + self);
        lines.push((LANG==="de" ? "- Promotoren: " : "- Promoters: ") + prom + " × " + promPerDay + (LANG==="de" ? " Abschlüsse/Tag" : " sign-ups/day"));
        lines.push((LANG==="de" ? "- Aktiv E1→E2: " : "- Active L1→L2: ") + Math.round(a1*100) + "%, " + (LANG==="de" ? "Leistung: " : "Output: ") + out2 + "/Monat");
        lines.push((LANG==="de" ? "- Aktiv E2→E3: " : "- Active L2→L3: ") + Math.round(a2*100) + "%, " + (LANG==="de" ? "Leistung: " : "Output: ") + out3 + "/Monat");
        lines.push((LANG==="de" ? "- Anteil (Beispiel): 20% / 15% / 10% (keine Abrechnung)" : "- Shares (example): 20% / 15% / 10% (no billing)"));

        const text = lines.join("\n");

        try{
          if (navigator.clipboard && navigator.clipboard.writeText){
            await navigator.clipboard.writeText(text);
            btnCopy.title = t("copiedOk");
          }else{
            throw new Error("no clipboard");
          }
        }catch(e){
          btnCopy.title = t("copiedFail");
        }
      }

      function resetAll(){
        LANG = "de";
        workdays.value = "20";
        selfPerDay.value = "1";
        period.value = "1";

        promoters.value = "0";
        promotersPerDay.value = "1";

        bLead.checked = false;
        bWeekend.checked = false;

        act1.value = "30";
        prod1.value = "5";
        act2.value = "20";
        prod2.value = "3";

        try{ localStorage.removeItem(LS_KEY); }catch(e){}
        applyI18N();
      }

      function restoreDefaults(){
        workdays.value = "20";
        selfPerDay.value = "1";
        promoters.value = "0";
        promotersPerDay.value = "1";
        act1.value = "30";
        prod1.value = "5";
        act2.value = "20";
        prod2.value = "3";
        calc();
      }

      // events
      workdays.addEventListener("input", calc);
      selfPerDay.addEventListener("input", calc);
      period.addEventListener("change", calc);

      promoters.addEventListener("input", calc);
      promotersPerDay.addEventListener("input", calc);

      btnOnePromoter.addEventListener("click", ()=>{
        promoters.value = "1";
        calc();
      });

      bLead.addEventListener("change", calc);
      bWeekend.addEventListener("change", calc);

      act1.addEventListener("input", calc);
      prod1.addEventListener("input", calc);
      act2.addEventListener("input", calc);
      prod2.addEventListener("input", calc);

      btnDefaults.addEventListener("click", restoreDefaults);

      btnPrint.addEventListener("click", ()=> window.print());
      btnCopy.addEventListener("click", copySummary);
      btnReset.addEventListener("click", resetAll);

      langDE.addEventListener("click", ()=>{ LANG="de"; saveState(); applyI18N(); });
      langEN.addEventListener("click", ()=>{ LANG="en"; saveState(); applyI18N(); });

      // init
      loadState();
      applyI18N();
    })();
  </script>
</body>
</html>
