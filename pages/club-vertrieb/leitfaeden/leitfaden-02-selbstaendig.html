<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Leitfaden 02 – Selbstständige / Macher</title>
  <meta name="description" content="Telefonleitfaden Selbstständige/Macher: Talk → 2 Lenkfragen (Zeit/Fokus) → Vertrauen/Verlust → 3 Ziele → Fokus/Engpass → Mitgliedschaft. Lokal speicherbar (LocalStorage), DE/EN." />
  <meta name="robots" content="noindex,nofollow" />

  <style>
    :root{
      --bg:#050814;
      --bg2:#020617;

      --panel:rgba(15,23,42,.90);
      --panel2:rgba(15,23,42,.74);

      --txt:#e9eef7;
      --muted:#a9b4c7;

      --gold:#d4af37;
      --gold2:#f2d37a;
      --blue:#5ea8ff;

      --line:rgba(212,175,55,.35);
      --shadow:0 24px 60px rgba(0,0,0,.55);
      --glow:0 0 26px rgba(212,175,55,.22), 0 10px 30px rgba(0,0,0,.55);

      --radius:18px;
      --maxw:1200px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:var(--txt);
      background:
        radial-gradient(900px 520px at 14% 10%, rgba(212,175,55,.18), transparent 62%),
        radial-gradient(760px 520px at 86% 18%, rgba(94,168,255,.16), transparent 60%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg2) 60%, #000 100%);
      overflow-x:hidden;
    }

    .wrap{max-width:var(--maxw); margin:28px auto 60px; padding:0 16px;}
    .topbar{
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      margin:10px 0 16px;
    }
    .brand{
      display:flex; gap:10px; align-items:center;
      padding:10px 12px;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(15,23,42,.88), rgba(15,23,42,.62));
      border-radius:999px;
      box-shadow:var(--glow);
    }
    .brand svg{width:18px; height:18px; flex:none}
    .brand strong{font-weight:800; letter-spacing:.2px}
    .brand span{color:var(--muted); font-size:12px}

    .actions{
      display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end;
    }

    .btn{
      cursor:pointer;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(212,175,55,.14), rgba(15,23,42,.72));
      color:var(--txt);
      padding:10px 12px;
      border-radius:12px;
      box-shadow:0 12px 26px rgba(0,0,0,.35);
      font-weight:700;
      display:inline-flex; gap:8px; align-items:center;
      user-select:none;
    }
    .btn:hover{filter:brightness(1.05)}
    .btn:active{transform:translateY(1px)}
    .btn.secondary{
      background:linear-gradient(180deg, rgba(94,168,255,.12), rgba(15,23,42,.72));
      border-color:rgba(94,168,255,.35);
    }
    .btn.ghost{
      background:rgba(15,23,42,.55);
    }
    .btn svg{width:16px; height:16px}

    header.hero{
      padding:18px 18px 16px;
      border-radius:var(--radius);
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(15,23,42,.90), rgba(15,23,42,.62));
      box-shadow:var(--shadow);
      position:relative;
      overflow:hidden;
    }
    header.hero:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(520px 220px at 14% 10%, rgba(212,175,55,.14), transparent 60%),
        radial-gradient(520px 220px at 88% 18%, rgba(94,168,255,.12), transparent 62%);
      pointer-events:none;
    }
    header.hero > *{position:relative}
    h1{
      margin:0;
      font-size:22px;
      line-height:1.2;
      letter-spacing:.2px;
    }
    .sub{
      margin:6px 0 0;
      color:var(--muted);
      font-size:13px;
      max-width:980px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:14px;
      margin-top:14px;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns: 1fr}
    }

    .card{
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(15,23,42,.90), rgba(15,23,42,.68));
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:14px;
    }
    .card h2{
      margin:0 0 10px;
      font-size:15px;
      letter-spacing:.2px;
      display:flex; align-items:center; gap:8px;
    }
    .card h2 .tag{
      font-size:11px; color:var(--muted);
      border:1px solid rgba(212,175,55,.25);
      padding:2px 8px; border-radius:999px;
      background:rgba(0,0,0,.18);
    }

    .form{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 700px){
      .form{grid-template-columns:1fr}
    }

    label{
      display:block;
      font-size:12px;
      color:var(--muted);
      margin:0 0 6px;
    }

    input[type="text"], select, textarea{
      width:100%;
      border:1px solid rgba(212,175,55,.25);
      background:rgba(0,0,0,.22);
      color:var(--txt);
      border-radius:12px;
      padding:10px 10px;
      outline:none;
    }
    textarea{min-height:96px; resize:vertical}
    input[type="text"]:focus, select:focus, textarea:focus{
      border-color:rgba(212,175,55,.55);
      box-shadow:0 0 0 3px rgba(212,175,55,.10);
    }

    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      margin-top:10px;
    }
    .hint{
      color:var(--muted);
      font-size:12px;
      line-height:1.35;
    }

    .steps{
      display:grid;
      gap:10px;
    }
    .step{
      border:1px solid rgba(212,175,55,.22);
      background:linear-gradient(180deg, rgba(0,0,0,.18), rgba(15,23,42,.35));
      border-radius:16px;
      padding:12px;
      position:relative;
    }
    .stephead{
      display:flex; gap:10px; align-items:flex-start; justify-content:space-between;
      margin-bottom:8px;
    }
    .steptitle{
      font-weight:900;
      font-size:13px;
      letter-spacing:.25px;
      margin:0;
    }
    .stepline{
      color:var(--muted);
      font-size:12px;
      margin:4px 0 0;
    }
    .stepmeta{
      display:flex; gap:8px; align-items:center; flex-wrap:wrap; justify-content:flex-end;
    }
    .pill{
      font-size:11px;
      border:1px solid rgba(94,168,255,.25);
      color:var(--muted);
      padding:2px 8px;
      border-radius:999px;
      background:rgba(94,168,255,.08);
    }
    .pill.done{
      border-color:rgba(212,175,55,.35);
      background:rgba(212,175,55,.10);
      color:var(--gold2);
    }
    .steptext{
      white-space:pre-wrap;
      line-height:1.5;
      font-size:13px;
      color:var(--txt);
      margin:0;
    }

    .miniBtns{
      display:flex; gap:8px; flex-wrap:wrap;
      margin-top:10px;
    }
    .miniBtns .btn{
      padding:8px 10px;
      border-radius:12px;
      font-weight:800;
    }

    .engineBox{
      display:grid;
      gap:10px;
    }
    .engineRow{
      display:grid;
      grid-template-columns: 1fr;
      gap:8px;
    }
    .engineRow .btn{width:100%; justify-content:center}
    .copyOk{
      color:var(--gold2);
      font-size:12px;
      display:none;
      margin-top:8px;
    }

    .objections{
      display:grid;
      gap:10px;
    }
    .objCard{
      border:1px solid rgba(212,175,55,.18);
      background:rgba(0,0,0,.18);
      border-radius:14px;
      padding:10px;
    }
    .objQ{
      margin:0 0 8px;
      font-weight:900;
      font-size:13px;
    }
    .objA{
      margin:0;
      color:var(--muted);
      font-size:12px;
      line-height:1.45;
      white-space:pre-wrap;
    }

    .foot{
      margin-top:14px;
      color:var(--muted);
      font-size:12px;
      line-height:1.4;
      padding:10px 12px;
      border-radius:14px;
      border:1px dashed rgba(212,175,55,.22);
      background:rgba(0,0,0,.16);
    }
    .kbd{
      display:inline-block;
      padding:1px 6px;
      border-radius:8px;
      border:1px solid rgba(212,175,55,.25);
      background:rgba(0,0,0,.25);
      color:var(--gold2);
      font-size:11px;
      font-weight:900;
      letter-spacing:.2px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand" title="FSA Leitfäden – lokal speicherbar">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M12 2l3 7 7 .6-5.3 4.6 1.7 7.1L12 17.8 5.6 21.3l1.7-7.1L2 9.6 9 9l3-7z" stroke="rgba(212,175,55,.9)" stroke-width="1.5"/>
        </svg>
        <div>
          <strong data-i18n="title_short">Leitfaden 02</strong>
          <span data-i18n="badge">Selbstständige / Macher</span>
        </div>
      </div>

      <div class="actions">
        <button class="btn ghost" id="btnBack" type="button" title="Zur Auswahl">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M15 18l-6-6 6-6" stroke="rgba(233,238,247,.9)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span data-i18n="btn_back">Auswahl</span>
        </button>
        <button class="btn secondary" id="btnLang" type="button" title="Sprache umschalten">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M4 6h10M4 18h10M8 6s1 8-4 12M16 18l4-8 4 8M18 14h4" stroke="rgba(94,168,255,.95)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span data-i18n="btn_lang">DE/EN</span>
        </button>
        <button class="btn" id="btnSave" type="button" title="Lokal speichern">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 3h10l3 3v15a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z" stroke="rgba(212,175,55,.9)" stroke-width="1.6"/>
            <path d="M7 3v7h10V3" stroke="rgba(212,175,55,.55)" stroke-width="1.6"/>
            <path d="M8 21v-7h8v7" stroke="rgba(212,175,55,.55)" stroke-width="1.6"/>
          </svg>
          <span data-i18n="btn_save">Speichern</span>
        </button>
        <button class="btn ghost" id="btnReset" type="button" title="Zurücksetzen">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 12a9 9 0 1 1-3-6.7" stroke="rgba(233,238,247,.85)" stroke-width="2" stroke-linecap="round"/>
            <path d="M21 3v6h-6" stroke="rgba(233,238,247,.85)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span data-i18n="btn_reset">Zurücksetzen</span>
        </button>
      </div>
    </div>

    <header class="hero">
      <h1 data-i18n="title">Leitfaden 02 – Selbstständige / Macher</h1>
      <p class="sub" data-i18n="sub">
        Talk → 2 Lenkfragen (Zeit/Fokus) → Vertrauen/Verlust → 3 Ziele → Fokus/Engpass → Mitgliedschaft.
        Ziel: seriöser Erstkontakt, der Rückfragen auslöst (ohne Druck, ohne Versprechen).
      </p>
    </header>

    <div class="grid">
      <!-- LEFT: Steps -->
      <section class="card">
        <h2>
          <span data-i18n="flow_title">12-Minuten-Flow</span>
          <span class="tag" data-i18n="flow_tag">Impuls → Gespräch → Einordnung → Entscheidung → Next Step</span>
        </h2>

        <div class="steps" id="steps"></div>

        <div class="foot" data-i18n="flow_hint">
          Tipp: Macher hören zu, wenn du Zeitverlust, Fehlentscheidungen und Standardisierung ansprichst.
          Rückfragen entstehen, wenn du 1 Wahrheit sagst, kurz pausierst und dann eine Schleusenfrage stellst.
        </div>
      </section>

      <!-- RIGHT: Setup + Engine + Objections -->
      <aside class="card">
        <h2>
          <span data-i18n="setup_title">Setup</span>
          <span class="tag" data-i18n="setup_tag">Lokal</span>
        </h2>

        <div class="form">
          <div>
            <label for="name" data-i18n="lbl_name">Vorname / Name</label>
            <input id="name" type="text" placeholder="z. B. Michael" />
          </div>
          <div>
            <label for="form" data-i18n="lbl_form">Ansprache</label>
            <select id="form">
              <option value="sie" data-i18n="form_sie">SIE</option>
              <option value="du" data-i18n="form_du">DU</option>
            </select>
          </div>

          <div style="grid-column:1/-1">
            <label for="context" data-i18n="lbl_context">Kontext / Beziehung</label>
            <input id="context" type="text" placeholder="z. B. früherer Kontakt, Empfehlung, Netzwerk…" />
          </div>

          <div>
            <label for="focus" data-i18n="lbl_focus">Fokus (3 Ziele)</label>
            <select id="focus">
              <option value="sicherheit" data-i18n="focus_sicherheit">1) Sicherheit: kein Geld mehr verlieren</option>
              <option value="stabilitaet" data-i18n="focus_stabil">2) Stabilität: Perspektive & Ruhe</option>
              <option value="zweite_spur" data-i18n="focus_spur">3) Zweite Spur: zusätzlich verdienen (optional)</option>
            </select>
          </div>

          <div>
            <label for="engpass" data-i18n="lbl_engpass">Engpass</label>
            <select id="engpass">
              <option value="klarheit" data-i18n="engpass_klarheit">Klarheit: Was stimmt / was ist seriös?</option>
              <option value="struktur" data-i18n="engpass_struktur">Struktur: Standard-Ablauf fehlt</option>
              <option value="dranbleiben" data-i18n="engpass_dran">Dranbleiben: Routine/Follow-up fehlt</option>
            </select>
          </div>

          <div style="grid-column:1/-1">
            <label for="notes" data-i18n="lbl_notes">Notizen</label>
            <textarea id="notes" placeholder="Kurznotiz: Lage, Trigger, Einwände, nächste Schritte…"></textarea>
          </div>
        </div>

        <div class="row">
          <div class="hint" id="saveState" data-i18n="save_state">bereit</div>
          <div class="actions" style="gap:8px">
            <button class="btn ghost" id="btnCopyAll" type="button" title="Alle Schritte als Text kopieren">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M9 9h11v12H9z" stroke="rgba(233,238,247,.85)" stroke-width="2"/>
                <path d="M4 3h11v6H4z" stroke="rgba(233,238,247,.55)" stroke-width="2"/>
              </svg>
              <span data-i18n="btn_copy_all">Alles kopieren</span>
            </button>
          </div>
        </div>
        <div class="copyOk" id="copyOk" data-i18n="copy_ok">Kopiert.</div>

        <hr style="border:none;border-top:1px solid rgba(212,175,55,.18); margin:14px 0" />

        <h2>
          <span data-i18n="engine_title">Rückfragen-Engine</span>
          <span class="tag" data-i18n="engine_tag">Wahrheit → Pause → Schleuse</span>
        </h2>

        <div class="engineBox">
          <div class="engineRow">
            <label for="truth" data-i18n="lbl_truth">Wahrheit</label>
            <select id="truth"></select>
          </div>
          <div class="engineRow">
            <label for="sluice" data-i18n="lbl_sluice">Schleusenfrage</label>
            <select id="sluice"></select>
          </div>
          <div class="engineRow">
            <label for="mirror" data-i18n="lbl_mirror">Spiegel-Frage</label>
            <select id="mirror"></select>
          </div>
          <button class="btn secondary" id="btnNextEngine" type="button">
            <span data-i18n="btn_next_engine">Nächste Zeile</span>
          </button>
          <button class="btn" id="btnCopyEngine" type="button">
            <span data-i18n="btn_copy_engine">Engine-Zeile kopieren</span>
          </button>
        </div>

        <hr style="border:none;border-top:1px solid rgba(212,175,55,.18); margin:14px 0" />

        <h2>
          <span data-i18n="obj_title">Einwände</span>
          <span class="tag" data-i18n="obj_tag">Bestätigen → Klärfrage → Einordnung</span>
        </h2>

        <div class="objections" id="objections"></div>

        <div class="foot" data-i18n="local_hint">
          Notizen & Auswahl bleiben nur auf deinem Gerät (LocalStorage). Nichts wird verschickt.
        </div>
      </aside>
    </div>
  </div>

  <script>
    (function(){
      const PAGE_KEY = "fsa_leitfaden_02_selbstaendig";
      const LANG_KEY = "fsa_leitfaeden_lang";

      const I18N = {
        de: {
          title_short: "Leitfaden 02",
          badge: "Selbstständige / Macher",
          btn_back: "Auswahl",
          btn_lang: "DE/EN",
          btn_save: "Speichern",
          btn_reset: "Zurücksetzen",
          title: "Leitfaden 02 – Selbstständige / Macher",
          sub: "Talk → 2 Lenkfragen (Zeit/Fokus) → Vertrauen/Verlust → 3 Ziele → Fokus/Engpass → Mitgliedschaft. Ziel: seriöser Erstkontakt, der Rückfragen auslöst (ohne Druck, ohne Versprechen).",
          flow_title: "12-Minuten-Flow",
          flow_tag: "Impuls → Gespräch → Einordnung → Entscheidung → Next Step",
          flow_hint: "Tipp: Macher hören zu, wenn du Zeitverlust, Fehlentscheidungen und Standardisierung ansprichst. Rückfragen entstehen, wenn du 1 Wahrheit sagst, kurz pausierst und dann eine Schleusenfrage stellst.",
          setup_title: "Setup",
          setup_tag: "Lokal",
          lbl_name: "Vorname / Name",
          lbl_form: "Ansprache",
          form_sie: "SIE",
          form_du: "DU",
          lbl_context: "Kontext / Beziehung",
          lbl_focus: "Fokus (3 Ziele)",
          focus_sicherheit: "1) Sicherheit: kein Geld mehr verlieren",
          focus_stabil: "2) Stabilität: Perspektive & Ruhe",
          focus_spur: "3) Zweite Spur: zusätzlich verdienen (optional)",
          lbl_engpass: "Engpass",
          engpass_klarheit: "Klarheit: Was stimmt / was ist seriös?",
          engpass_struktur: "Struktur: Standard-Ablauf fehlt",
          engpass_dran: "Dranbleiben: Routine/Follow-up fehlt",
          lbl_notes: "Notizen",
          save_state: "bereit",
          btn_copy_all: "Alles kopieren",
          copy_ok: "Kopiert.",
          engine_title: "Rückfragen-Engine",
          engine_tag: "Wahrheit → Pause → Schleuse",
          lbl_truth: "Wahrheit",
          lbl_sluice: "Schleusenfrage",
          lbl_mirror: "Spiegel-Frage",
          btn_next_engine: "Nächste Zeile",
          btn_copy_engine: "Engine-Zeile kopieren",
          obj_title: "Einwände",
          obj_tag: "Bestätigen → Klärfrage → Einordnung",
          local_hint: "Notizen & Auswahl bleiben nur auf deinem Gerät (LocalStorage). Nichts wird verschickt.",
          steps: [
            {
              id:"s1",
              title:"0–2 min · Warm-up (Macher-Talk)",
              line:"Ziel: Lage, Tempo, Stresslevel – ohne Pitch.",
              text: (ctx)=> {
                const n = ctx.nameLine();
                const q1 = ctx.form === "sie"
                  ? "Wie läuft’s gerade bei Ihnen – eher ruhig oder eher voll?"
                  : "Wie läuft’s gerade bei dir – eher ruhig oder eher voll?";
                const q2 = ctx.form === "sie"
                  ? "Was frisst aktuell am meisten Zeit/Energie – Kunden, Prozesse, Papierkram oder Unruhe/Unsicherheit?"
                  : "Was frisst aktuell am meisten Zeit/Energie – Kunden, Prozesse, Papierkram oder Unruhe/Unsicherheit?";
                const add = ctx.context ? ("Kontext: " + ctx.context + "\n\n") : "";
                return add + n + "\n" + q1 + "\n" + q2;
              }
            },
            {
              id:"s2",
              title:"2–5 min · 2 Lenkfragen (Zeit/Fokus/Standard)",
              line:"Ziel: Engpass erkennen: Klarheit, Struktur oder Dranbleiben.",
              text: (ctx)=> {
                const q1 = ctx.form === "sie"
                  ? "Wenn Sie ehrlich sind: Wo verlieren Sie gerade am meisten – Geld, Zeit oder Nerven?"
                  : "Wenn du ehrlich bist: Wo verlierst du gerade am meisten – Geld, Zeit oder Nerven?";
                const q2 = ctx.form === "sie"
                  ? "Was wäre für Sie am wertvollsten: mehr Klarheit (was stimmt), mehr Struktur (Standard-Ablauf) oder besseres Dranbleiben (Routine/Follow-up)?"
                  : "Was wäre für dich am wertvollsten: mehr Klarheit (was stimmt), mehr Struktur (Standard-Ablauf) oder besseres Dranbleiben (Routine/Follow-up)?";
                const q3 = ctx.form === "sie"
                  ? "Haben Sie aktuell eher zu viel Input/Optionen – oder zu wenig sauberen Prozess?"
                  : "Hast du aktuell eher zu viel Input/Optionen – oder zu wenig sauberen Prozess?";
                return q1 + "\n" + q2 + "\n" + q3;
              }
            },
            {
              id:"s3",
              title:"5–7 min · Vertrauen/Verlust (Lehrgeld sauber ansprechen)",
              line:"Ziel: Schutzmotiv aktivieren (ohne Drama).",
              text: (ctx)=> {
                const lead = ctx.form === "sie"
                  ? "Ich frage das, weil viele Macher schon Lehrgeld gezahlt haben – nicht weil sie dumm sind, sondern weil Standards fehlten."
                  : "Ich frag das, weil viele Macher schon Lehrgeld gezahlt haben – nicht weil sie dumm sind, sondern weil Standards fehlten.";
                const q = ctx.form === "sie"
                  ? "Gab es schon mal ein Projekt/Entscheidung/Abschluss, wo Sie im Nachhinein sagen: da hätte ich früher Stopp sagen müssen?"
                  : "Gab’s schon mal ein Projekt/Entscheidung/Abschluss, wo du im Nachhinein sagst: da hätte ich früher Stopp sagen müssen?";
                const follow = ctx.form === "sie"
                  ? "Was war der Grund: zu schnell vertraut, zu wenig geprüft, oder zu wenig Struktur?"
                  : "Was war der Grund: zu schnell vertraut, zu wenig geprüft, oder zu wenig Struktur?";
                return lead + "\n" + q + "\n" + follow;
              }
            },
            {
              id:"s4",
              title:"7–9 min · 3-Punkt-Zielbild (Sicherheit / Stabilität / zweite Spur)",
              line:"Ziel: Nutzenrahmen setzen, ohne Produktliste.",
              text: (ctx)=> {
                const n = ctx.nameShort();
                const intro = ctx.form === "sie"
                  ? ("Pass auf" + n + ". Ich sehe drei Bereiche, die man sauber abdecken muss, wenn man nicht wieder Lehrgeld zahlen will:")
                  : ("Pass auf" + n + ". Ich sehe drei Bereiche, die man sauber abdecken muss, wenn man nicht wieder Lehrgeld zahlen will:");
                const p1 = "1) Sicherheit: keine unnötigen Verluste mehr – durch klare Stopps und Regeln.";
                const p2 = ctx.form === "sie"
                  ? "2) Stabilität: Perspektive & Ruhe – weil Entscheidungen nicht mehr aus Stress getroffen werden."
                  : "2) Stabilität: Perspektive & Ruhe – weil Entscheidungen nicht mehr aus Stress getroffen werden.";
                const p3 = "3) Zweite Spur (optional): zusätzlich verdienen – aber erst, wenn 1+2 stehen.";
                const close = ctx.form === "sie"
                  ? "Und das Ganze nicht als Hype – sondern als Standard, der wiederholbar ist."
                  : "Und das Ganze nicht als Hype – sondern als Standard, der wiederholbar ist.";
                return intro + "\n\n" + p1 + "\n" + p2 + "\n" + p3 + "\n\n" + close;
              }
            },
            {
              id:"s5",
              title:"9–12 min · Fokus → Mitgliedschaft (Entscheidung, kein Druck)",
              line:"Ziel: klare Einordnung + ruhiger Close.",
              text: (ctx)=> {
                const n = ctx.nameShort();
                const q1 = ctx.form === "sie"
                  ? ("Wenn Sie wählen müssten" + n + ": Wollen Sie zuerst Sicherheit, Stabilität oder zweite Spur?")
                  : ("Wenn du wählen müsstest" + n + ": Willst du zuerst Sicherheit, Stabilität oder zweite Spur?");
                const q2 = ctx.form === "sie"
                  ? "Und was ist der Engpass: Klarheit, Struktur oder Dranbleiben?"
                  : "Und was ist der Engpass: Klarheit, Struktur oder Dranbleiben?";
                const solve = ctx.form === "sie"
                  ? "Genau dafür ist die Mitgliedschaft gedacht: als Rahmen mit Standards, damit du weniger falsch machst und sauber dranbleibst."
                  : "Genau dafür ist die Mitgliedschaft gedacht: als Rahmen mit Standards, damit du weniger falsch machst und sauber dranbleibst.";
                const close = ctx.form === "sie"
                  ? "Wollen Sie, dass ich Sie als Mitglied einplane – ja oder nein?"
                  : "Willst du, dass ich dich als Mitglied einplane – ja oder nein?";
                const soft = ctx.form === "sie"
                  ? "Wenn noch kein Ja: Was fehlt – mehr Klarheit, mehr Vertrauen oder eine konkrete Frage?"
                  : "Wenn noch kein Ja: Was fehlt – mehr Klarheit, mehr Vertrauen oder eine konkrete Frage?";
                return q1 + "\n" + q2 + "\n\n" + solve + "\n\n" + close + "\n" + soft;
              }
            }
          ],
          engine_truths: [
            "Viele zahlen Lehrgeld nicht wegen schlechter Absicht – sondern weil Standards fehlen.",
            "Tempo ist im Business fast immer ein Warnsignal.",
            "Zu viele Optionen ohne Rahmen führt zu teuren Fehlentscheidungen.",
            "Nicht mehr Input schützt – sondern klare Regeln, Stopps und ein Standard-Ablauf.",
            "Wenn du keine Routine hast, gewinnt der Alltag – und du brichst ab."
          ],
          engine_sluices: [
            "Kennst du das aus deinem Umfeld?",
            "Wo hast du zuletzt Zeit oder Geld verbrannt?",
            "Woran würdest du Seriosität erkennen, bevor du entscheidest?",
            "Was ist aktuell gefährlicher: falsches Vertrauen oder fehlende Struktur?",
            "Soll ich dir in einem Satz sagen, wie der Rahmen funktioniert?"
          ],
          engine_mirrors: [
            "Was genau ist damals passiert?",
            "Was hat dich daran am meisten geärgert?",
            "Was hättest du gebraucht, um nicht reinzulaufen?",
            "Was müsste passieren, damit du wieder offen bist?",
            "Was ist dir wichtiger: Risiko runter oder schneller Start?"
          ],
          objections: [
            {
              q:"„Ich will nichts verkauft bekommen.“",
              a:"Bestätigen: „Versteh ich.“\nKlärfrage: „Was genau triggert dich – Tempo, Versprechen, Druck?“\nEinordnung: „Genau deshalb: Rahmen/Standards. Du behältst die Kontrolle.“"
            },
            {
              q:"„Ich habe keine Zeit.“",
              a:"Bestätigen: „Fair.“\nKlärfrage: „Was ist realistisch – 10 Minuten pro Woche oder 30?“\nEinordnung: „Dann starten wir klein. Standard spart später Zeit.“"
            },
            {
              q:"„Was kostet das?“",
              a:"Bestätigen: „Gute Frage.“\nKlärfrage: „Bevor Zahl: passt der Nutzen (Sicherheit/Struktur/Dranbleiben) zu dir?“\nEinordnung: „Wenn ja, klären wir es transparent. Ich will nur vermeiden, dass du isoliert nach Preis entscheidest.“"
            },
            {
              q:"„Ich muss erst nachdenken.“",
              a:"Bestätigen: „Sehr gut.“\nKlärfrage: „Was brauchst du, um entscheiden zu können?“\nEinordnung: „Wenn die Passung stimmt, ist der nächste Schritt klar. Wenn nicht, ist es ein sauberes Nein.“"
            }
          ]
        },

        en: {
          title_short: "Guide 02",
          badge: "Self-employed / Doers",
          btn_back: "Select",
          btn_lang: "DE/EN",
          btn_save: "Save",
          btn_reset: "Reset",
          title: "Guide 02 – Self-employed / Doers",
          sub: "Talk → 2 steering questions (time/focus) → trust/loss → 3 goals → focus/bottleneck → membership. Goal: a serious first call that triggers questions (no pressure, no promises).",
          flow_title: "12-minute flow",
          flow_tag: "Impulse → Conversation → Sorting → Decision → Next step",
          flow_hint: "Tip: Doers listen when you talk about time loss, costly mistakes and standardization. Questions arise when you state one truth, pause briefly, then ask a gateway question.",
          setup_title: "Setup",
          setup_tag: "Local",
          lbl_name: "First name / name",
          lbl_form: "Address",
          form_sie: "FORMAL",
          form_du: "INFORMAL",
          lbl_context: "Context / relation",
          lbl_focus: "Focus (3 goals)",
          focus_sicherheit: "1) Safety: stop losing money",
          focus_stabil: "2) Stability: perspective & calm",
          focus_spur: "3) Second track: extra income (optional)",
          lbl_engpass: "Bottleneck",
          engpass_klarheit: "Clarity: what's true / what's serious?",
          engpass_struktur: "Structure: missing standard flow",
          engpass_dran: "Follow-through: routine/follow-up missing",
          lbl_notes: "Notes",
          save_state: "ready",
          btn_copy_all: "Copy all",
          copy_ok: "Copied.",
          engine_title: "Question engine",
          engine_tag: "Truth → pause → gateway",
          lbl_truth: "Truth",
          lbl_sluice: "Gateway question",
          lbl_mirror: "Mirror question",
          btn_next_engine: "Next line",
          btn_copy_engine: "Copy engine line",
          obj_title: "Objections",
          obj_tag: "Confirm → clarify → sort",
          local_hint: "Notes and selections stay on your device (LocalStorage). Nothing is sent.",
          steps: [
            {
              id:"s1",
              title:"0–2 min · Warm-up (doer talk)",
              line:"Goal: situation, tempo, stress level – no pitch.",
              text: (ctx)=> {
                const n = ctx.nameLine();
                const q1 = ctx.form === "sie"
                  ? "How is it going right now — calm or packed?"
                  : "How is it going right now — calm or packed?";
                const q2 = ctx.form === "sie"
                  ? "What drains most time/energy — customers, processes, paperwork, or uncertainty?"
                  : "What drains most time/energy — customers, processes, paperwork, or uncertainty?";
                const add = ctx.context ? ("Context: " + ctx.context + "\n\n") : "";
                return add + n + "\n" + q1 + "\n" + q2;
              }
            },
            {
              id:"s2",
              title:"2–5 min · 2 steering questions (time/focus/standard)",
              line:"Goal: find the bottleneck: clarity, structure, or follow-through.",
              text: (ctx)=> {
                const q1 = ctx.form === "sie"
                  ? "Honestly: where do you lose the most right now — money, time, or nerves?"
                  : "Honestly: where do you lose the most right now — money, time, or nerves?";
                const q2 = ctx.form === "sie"
                  ? "What would help most: clarity (what’s true), structure (standard flow), or follow-through (routine/follow-up)?"
                  : "What would help most: clarity (what’s true), structure (standard flow), or follow-through (routine/follow-up)?";
                const q3 = ctx.form === "sie"
                  ? "Do you have too much input/options — or too little clean process?"
                  : "Too much input/options — or too little clean process?";
                return q1 + "\n" + q2 + "\n" + q3;
              }
            },
            {
              id:"s3",
              title:"5–7 min · Trust/loss (address tuition cleanly)",
              line:"Goal: activate protection motive (no drama).",
              text: (ctx)=> {
                const lead = "I ask because many doers paid tuition — not because they’re stupid, but because standards were missing.";
                const q = ctx.form === "sie"
                  ? "Have you had a project/decision/contract where you later thought: I should have said stop earlier?"
                  : "Have you had a project/decision/contract where you later thought: I should have said stop earlier?";
                const follow = "What was it: trusted too fast, checked too little, or lacked structure?";
                return lead + "\n" + q + "\n" + follow;
              }
            },
            {
              id:"s4",
              title:"7–9 min · 3-goal picture (safety / stability / second track)",
              line:"Goal: frame value without a product list.",
              text: (ctx)=> {
                const n = ctx.nameShort();
                const intro = "Here’s the point" + n + ": three areas you need covered if you want to stop paying tuition:";
                const p1 = "1) Safety: stop unnecessary losses — with clear stops and rules.";
                const p2 = "2) Stability: perspective & calm — decisions aren’t made under stress.";
                const p3 = "3) Second track (optional): extra income — only after 1+2 are solid.";
                const close = "No hype — just a repeatable standard.";
                return intro + "\n\n" + p1 + "\n" + p2 + "\n" + p3 + "\n\n" + close;
              }
            },
            {
              id:"s5",
              title:"9–12 min · Focus → membership (decision, no pressure)",
              line:"Goal: clear sorting + calm close.",
              text: (ctx)=> {
                const n = ctx.nameShort();
                const q1 = "If you had to choose" + n + ": safety, stability, or a second track first?";
                const q2 = "And what’s the bottleneck: clarity, structure, or follow-through?";
                const solve = "That’s what the membership is for: a framework with standards so you make fewer wrong moves and stay consistent.";
                const close = "Should I plan you in as a member — yes or no?";
                const soft = "If not yet: what’s missing — clarity, trust, or one concrete question?";
                return q1 + "\n" + q2 + "\n\n" + solve + "\n\n" + close + "\n" + soft;
              }
            }
          ],
          engine_truths: [
            "People pay tuition not from bad intent — but because standards are missing.",
            "Speed is almost always a warning sign.",
            "Too many options without a framework leads to costly mistakes.",
            "Protection is not more input — it’s clear rules, stops, and a standard flow.",
            "Without routine, daily life wins — and you drop it."
          ],
          engine_sluices: [
            "Do you see this in your environment?",
            "Where did you burn time or money recently?",
            "How would you recognize seriousness before deciding?",
            "What is riskier right now: wrong trust or missing structure?",
            "Want me to explain the framework in one sentence?"
          ],
          engine_mirrors: [
            "What exactly happened?",
            "What annoyed you the most?",
            "What would you have needed to avoid it?",
            "What would need to happen for you to be open again?",
            "What matters more: reducing risk or starting fast?"
          ],
          objections: [
            {
              q:"“I don’t want to be sold to.”",
              a:"Confirm: “I understand.”\nClarify: “What triggers you — speed, promises, pressure?”\nSort: “That’s why: framework/standards. You keep control.”"
            },
            {
              q:"“I don’t have time.”",
              a:"Confirm: “Fair.”\nClarify: “What’s realistic — 10 minutes a week or 30?”\nSort: “Then we start small. Standards save time later.”"
            },
            {
              q:"“What does it cost?”",
              a:"Confirm: “Good question.”\nClarify: “Before numbers: does the benefit (safety/structure/follow-through) fit you?”\nSort: “If yes, we’ll be transparent. I just avoid price-only decisions.”"
            },
            {
              q:"“I need to think.”",
              a:"Confirm: “Good.”\nClarify: “What do you need to decide?”\nSort: “If the fit is right, next step is clear. If not, it’s a clean no.”"
            }
          ]
        }
      };

      function $(id){ return document.getElementById(id); }

      const state = {
        lang: "de",
        name: "",
        form: "sie",
        context: "",
        focus: "sicherheit",
        engpass: "klarheit",
        notes: "",
        done: { s1:false, s2:false, s3:false, s4:false, s5:false },
        engineIdx: 0
      };

      const ctx = {
        get lang(){ return state.lang; },
        get form(){ return state.form; },
        get context(){ return (state.context||"").trim(); },
        nameShort(){
          const n = (state.name||"").trim();
          return n ? (", " + n) : "";
        },
        nameLine(){
          const n = (state.name||"").trim();
          const s = state.form === "sie"
            ? "Ich will nicht, dass Sie Geld verlieren – deshalb rufe ich Sie an."
            : "Ich will nicht, dass du Geld verlierst – deshalb rufe ich dich an.";
          if(!n) return s;
          return (state.form === "sie")
            ? ("Herr/Frau " + n + ", " + s)
            : (n + ", " + s);
        }
      };

      function applyI18n(){
        const dict = I18N[state.lang];
        document.documentElement.lang = state.lang === "de" ? "de" : "en";
        document.querySelectorAll("[data-i18n]").forEach(el=>{
          const k = el.getAttribute("data-i18n");
          if(dict[k] != null) el.textContent = dict[k];
        });
        buildEngineSelects();
        buildSteps();
        buildObjections();
      }

      function load(){
        const lang = localStorage.getItem(LANG_KEY);
        if(lang === "de" || lang === "en") state.lang = lang;

        const raw = localStorage.getItem(PAGE_KEY);
        if(raw){
          try{ Object.assign(state, JSON.parse(raw) || {}); }catch(e){}
        }

        if(state.lang !== "de" && state.lang !== "en") state.lang = "de";
        if(state.form !== "sie" && state.form !== "du") state.form = "sie";
        if(!state.done) state.done = { s1:false, s2:false, s3:false, s4:false, s5:false };
        if(typeof state.engineIdx !== "number") state.engineIdx = 0;

        $("name").value = state.name || "";
        $("form").value = state.form || "sie";
        $("context").value = state.context || "";
        $("focus").value = state.focus || "sicherheit";
        $("engpass").value = state.engpass || "klarheit";
        $("notes").value = state.notes || "";

        applyI18n();
        $("saveState").textContent = I18N[state.lang].save_state;
      }

      function save(){
        state.name = $("name").value;
        state.form = $("form").value;
        state.context = $("context").value;
        state.focus = $("focus").value;
        state.engpass = $("engpass").value;
        state.notes = $("notes").value;

        localStorage.setItem(PAGE_KEY, JSON.stringify(state));
        localStorage.setItem(LANG_KEY, state.lang);
        $("saveState").textContent = I18N[state.lang].save_state;
        flashCopied($("saveState"), true);
      }

      function reset(){
        localStorage.removeItem(PAGE_KEY);
        state.name = "";
        state.form = "sie";
        state.context = "";
        state.focus = "sicherheit";
        state.engpass = "klarheit";
        state.notes = "";
        state.done = { s1:false, s2:false, s3:false, s4:false, s5:false };
        state.engineIdx = 0;

        $("name").value = "";
        $("form").value = "sie";
        $("context").value = "";
        $("focus").value = "sicherheit";
        $("engpass").value = "klarheit";
        $("notes").value = "";

        applyI18n();
        $("saveState").textContent = I18N[state.lang].save_state;
      }

      function flashCopied(el, subtle){
        const ok = $("copyOk");
        ok.style.display = "block";
        clearTimeout(flashCopied._t);
        flashCopied._t = setTimeout(()=> ok.style.display="none", 1100);
        if(el && subtle){
          el.style.color = "var(--gold2)";
          clearTimeout(flashCopied._t2);
          flashCopied._t2 = setTimeout(()=> el.style.color="", 800);
        }
      }

      async function copyText(text){
        try{
          await navigator.clipboard.writeText(text);
          flashCopied();
        }catch(e){
          const ta = document.createElement("textarea");
          ta.value = text;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
          flashCopied();
        }
      }

      function tokenReplace(s){
        const name = (state.name||"").trim();
        const n = name ? name : (state.lang === "de" ? "…" : "…");
        return String(s).replaceAll("{VORNAME}", n);
      }

      function svgCopy(){
        return `<svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M9 9h11v12H9z" stroke="rgba(233,238,247,.85)" stroke-width="2"/>
          <path d="M4 3h11v6H4z" stroke="rgba(233,238,247,.55)" stroke-width="2"/>
        </svg>`;
      }
      function svgCheck(){
        return `<svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M20 6L9 17l-5-5" stroke="rgba(212,175,55,.9)" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>`;
      }

      function buildSteps(){
        const dict = I18N[state.lang];
        const host = $("steps");
        host.innerHTML = "";

        dict.steps.forEach(step=>{
          const div = document.createElement("div");
          div.className = "step";
          const done = !!state.done[step.id];

          const h = document.createElement("div");
          h.className = "stephead";

          const left = document.createElement("div");
          const t = document.createElement("p");
          t.className = "steptitle";
          t.textContent = step.title;
          const l = document.createElement("p");
          l.className = "stepline";
          l.textContent = step.line;
          left.appendChild(t);
          left.appendChild(l);

          const meta = document.createElement("div");
          meta.className = "stepmeta";
          const pill = document.createElement("span");
          pill.className = "pill" + (done ? " done" : "");
          pill.textContent = done ? (state.lang==="de" ? "gesagt" : "said") : (state.lang==="de" ? "offen" : "open");
          meta.appendChild(pill);

          h.appendChild(left);
          h.appendChild(meta);

          const p = document.createElement("pre");
          p.className = "steptext";
          p.textContent = tokenReplace(step.text(ctx));

          const btns = document.createElement("div");
          btns.className = "miniBtns";

          const bCopy = document.createElement("button");
          bCopy.type = "button";
          bCopy.className = "btn ghost";
          bCopy.innerHTML = svgCopy() + `<span>${state.lang==="de" ? "Text kopieren" : "Copy text"}</span>`;
          bCopy.addEventListener("click", ()=> copyText(p.textContent));

          const bDone = document.createElement("button");
          bDone.type = "button";
          bDone.className = "btn";
          bDone.innerHTML = svgCheck() + `<span>${state.lang==="de" ? (done ? "Als offen" : "Als gesagt") : (done ? "Mark open" : "Mark said")}</span>`;
          bDone.addEventListener("click", ()=>{
            state.done[step.id] = !state.done[step.id];
            save();
            buildSteps();
          });

          btns.appendChild(bCopy);
          btns.appendChild(bDone);

          div.appendChild(h);
          div.appendChild(p);
          div.appendChild(btns);

          host.appendChild(div);
        });
      }

      function buildEngineSelects(){
        const dict = I18N[state.lang];
        const truth = $("truth");
        const sluice = $("sluice");
        const mirror = $("mirror");

        function fill(sel, arr){
          const cur = sel.value;
          sel.innerHTML = "";
          arr.forEach((txt, idx)=>{
            const o = document.createElement("option");
            o.value = String(idx);
            o.textContent = txt;
            sel.appendChild(o);
          });
          if(cur && Number(cur) < arr.length) sel.value = cur;
        }

        fill(truth, dict.engine_truths);
        fill(sluice, dict.engine_sluices);
        fill(mirror, dict.engine_mirrors);

        const max = Math.min(dict.engine_truths.length, dict.engine_sluices.length, dict.engine_mirrors.length);
        if(max > 0){
          state.engineIdx = ((state.engineIdx % max) + max) % max;
          truth.value = String(state.engineIdx);
          sluice.value = String(state.engineIdx);
          mirror.value = String(state.engineIdx);
        }
      }

      function nextEngine(){
        const dict = I18N[state.lang];
        const max = Math.min(dict.engine_truths.length, dict.engine_sluices.length, dict.engine_mirrors.length);
        if(!max) return;

        state.engineIdx = (state.engineIdx + 1) % max;
        $("truth").value = String(state.engineIdx);
        $("sluice").value = String(state.engineIdx);
        $("mirror").value = String(state.engineIdx);
        save();
      }

      function copyEngineLine(){
        const dict = I18N[state.lang];
        const ti = Number($("truth").value||0);
        const si = Number($("sluice").value||0);
        const mi = Number($("mirror").value||0);

        const t = dict.engine_truths[ti] || "";
        const s = dict.engine_sluices[si] || "";
        const m = dict.engine_mirrors[mi] || "";

        const line = [
          ctx.nameLine(),
          t,
          "…",
          s,
          m ? ("(" + m + ")") : ""
        ].filter(Boolean).join("\n");

        copyText(tokenReplace(line));
      }

      function buildObjections(){
        const dict = I18N[state.lang];
        const host = $("objections");
        host.innerHTML = "";

        dict.objections.forEach(obj=>{
          const div = document.createElement("div");
          div.className = "objCard";

          const q = document.createElement("p");
          q.className = "objQ";
          q.textContent = obj.q;

          const a = document.createElement("p");
          a.className = "objA";
          a.textContent = tokenReplace(obj.a);

          const btn = document.createElement("button");
          btn.type = "button";
          btn.className = "btn ghost";
          btn.style.width = "100%";
          btn.style.justifyContent = "center";
          btn.innerHTML = svgCopy() + `<span>${state.lang==="de" ? "Antwort kopieren" : "Copy answer"}</span>`;
          btn.addEventListener("click", ()=> copyText(a.textContent));

          div.appendChild(q);
          div.appendChild(a);
          div.appendChild(btn);
          host.appendChild(div);
        });
      }

      function copyAll(){
        const dict = I18N[state.lang];
        const parts = [];
        parts.push(dict.title);
        parts.push("—");
        parts.push("Name: " + ((state.name||"").trim() || "—"));
        parts.push("Form: " + (state.form === "sie" ? (state.lang==="de"?"SIE":"FORMAL") : (state.lang==="de"?"DU":"INFORMAL")));
        if((state.context||"").trim()) parts.push((state.lang==="de" ? "Kontext: " : "Context: ") + (state.context||"").trim());
        parts.push((state.lang==="de" ? "Fokus: " : "Focus: ") + $("focus").selectedOptions[0].textContent);
        parts.push((state.lang==="de" ? "Engpass: " : "Bottleneck: ") + $("engpass").selectedOptions[0].textContent);
        parts.push("—");

        dict.steps.forEach(step=>{
          parts.push(step.title);
          parts.push(tokenReplace(step.text(ctx)));
          parts.push("");
        });

        if((state.notes||"").trim()){
          parts.push(state.lang==="de" ? "Notizen:" : "Notes:");
          parts.push((state.notes||"").trim());
        }

        copyText(parts.join("\n"));
      }

      // Wire events
      $("btnBack").addEventListener("click", ()=>{
        window.location.href = "./index.html" + (window.location.search || "");
      });

      $("btnLang").addEventListener("click", ()=>{
        state.lang = (state.lang === "de") ? "en" : "de";
        localStorage.setItem(LANG_KEY, state.lang);
        applyI18n();
        save();
      });

      $("btnSave").addEventListener("click", save);
      $("btnReset").addEventListener("click", ()=>{
        if(confirm(state.lang==="de" ? "Alles auf dieser Seite zurücksetzen?" : "Reset everything on this page?")){
          reset();
        }
      });

      ["name","form","context","focus","engpass","notes"].forEach(id=>{
        $(id).addEventListener("input", ()=>{
          state.name = $("name").value;
          state.form = $("form").value;
          state.context = $("context").value;
          state.focus = $("focus").value;
          state.engpass = $("engpass").value;
          state.notes = $("notes").value;
          buildSteps();
          $("saveState").textContent = I18N[state.lang].save_state;
        });
        $(id).addEventListener("change", ()=>{
          state.name = $("name").value;
          state.form = $("form").value;
          state.context = $("context").value;
          state.focus = $("focus").value;
          state.engpass = $("engpass").value;
          state.notes = $("notes").value;
          buildSteps();
          $("saveState").textContent = I18N[state.lang].save_state;
        });
      });

      $("btnNextEngine").addEventListener("click", nextEngine);
      $("btnCopyEngine").addEventListener("click", copyEngineLine);
      $("btnCopyAll").addEventListener("click", copyAll);

      // Init
      load();
    })();
  </script>
</body>
</html>
