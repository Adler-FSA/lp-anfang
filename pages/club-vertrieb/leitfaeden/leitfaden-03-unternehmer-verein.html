<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Leitfaden 03 – Unternehmer / Verein</title>
  <meta name="description" content="Telefonleitfaden: Professioneller Einstieg → Risiko/Prozess/Rollen → Vertrauens-/Fehler-Frame → 3 Ziele → Fokus/Engpass → Mitgliedschaft. LocalStorage, DE/EN." />
  <meta name="robots" content="noindex,nofollow" />

  <style>
    :root{
      --bg:#050814;
      --bg2:#020617;
      --panel:rgba(15,23,42,.90);
      --panel2:rgba(15,23,42,.74);
      --txt:#e9eef7;
      --muted:#a9b4c7;
      --gold:#d4af37;
      --gold2:#f2d37a;
      --blue:#5ea8ff;
      --line:rgba(212,175,55,.35);
      --shadow:0 24px 60px rgba(0,0,0,.55);
      --glow:0 0 26px rgba(212,175,55,.22), 0 10px 30px rgba(0,0,0,.55);
      --radius:18px;
      --maxw:1280px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--txt);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background:
        radial-gradient(980px 560px at 16% 10%, rgba(212,175,55,.18), transparent 60%),
        radial-gradient(980px 560px at 84% 16%, rgba(94,168,255,.16), transparent 62%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      overflow-x:hidden;
    }
    a{color:inherit; text-decoration:none}
    .wrap{max-width:var(--maxw); margin:0 auto; padding:18px 16px 40px;}
    .top{
      display:flex; align-items:flex-start; justify-content:space-between; gap:14px; flex-wrap:wrap;
      margin-bottom:12px;
    }
    .leftHead{display:flex; gap:12px; align-items:flex-start}
    .logo{
      width:46px;height:46px;border-radius:14px;
      background:rgba(15,23,42,.55);
      border:1px solid var(--line);
      box-shadow:var(--glow);
      display:grid;place-items:center;
      flex:0 0 auto;
    }
    .logo svg{width:28px;height:28px}
    h1{margin:0; font-size:18px; letter-spacing:.2px}
    .sub{margin:6px 0 0; color:var(--muted); font-size:13px; line-height:1.35}
    .actions{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    .btn{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(15,23,42,.62);
      box-shadow:0 10px 24px rgba(0,0,0,.35);
      color:var(--txt);
      cursor:pointer;
      user-select:none;
      font-size:13px;
    }
    .btn:hover{border-color:rgba(242,211,122,.55)}
    .btn svg{width:16px;height:16px}
    .grid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:14px;
      align-items:start;
    }
    .panel{
      border-radius:var(--radius);
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(15,23,42,.88), rgba(15,23,42,.70));
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .panel .hd{
      padding:14px 14px 10px;
      border-bottom:1px solid rgba(212,175,55,.18);
      display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    .panel .hd h2{
      margin:0; font-size:14px; letter-spacing:.2px;
      display:flex; align-items:center; gap:10px;
    }
    .panel .bd{padding:14px}
    .setup{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap:10px;
    }
    label{display:block; font-size:12px; color:var(--muted); margin:0 0 6px}
    input[type="text"], textarea, select{
      width:100%;
      padding:11px 12px;
      border-radius:14px;
      border:1px solid rgba(212,175,55,.28);
      background:rgba(2,6,23,.35);
      color:var(--txt);
      outline:none;
      font-size:13px;
    }
    textarea{min-height:92px; resize:vertical}
    select{cursor:pointer}
    .col-4{grid-column:span 4}
    .col-6{grid-column:span 6}
    .col-8{grid-column:span 8}
    .col-12{grid-column:span 12}
    .toggle{
      display:flex; gap:8px; align-items:center; flex-wrap:wrap;
      padding:6px;
      border-radius:14px;
      border:1px solid rgba(212,175,55,.28);
      background:rgba(2,6,23,.30);
    }
    .tbtn{
      border:1px solid rgba(212,175,55,.22);
      background:transparent;
      color:var(--muted);
      padding:8px 10px;
      border-radius:12px;
      cursor:pointer;
      font-size:12px;
      display:inline-flex; gap:8px; align-items:center;
      user-select:none;
    }
    .tbtn.active{
      color:var(--txt);
      border-color:rgba(242,211,122,.65);
      background:rgba(212,175,55,.08);
    }
    .rowBtns{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(94,168,255,.22);
      background:rgba(2,6,23,.28);
      color:var(--muted);
      font-size:12px;
    }
    .badge b{color:var(--txt)}
    .steps{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
    }
    .step{
      border-radius:16px;
      border:1px solid rgba(212,175,55,.24);
      background:rgba(2,6,23,.22);
      overflow:hidden;
    }
    .step .shd{
      padding:12px 12px 10px;
      border-bottom:1px solid rgba(212,175,55,.16);
      display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    .step .shd h3{
      margin:0;
      font-size:13px;
      display:flex; align-items:center; gap:10px;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;background:rgba(242,211,122,.7);
      box-shadow:0 0 14px rgba(212,175,55,.35);
      flex:0 0 auto;
    }
    .step .sbd{padding:12px}
    .script{
      white-space:pre-wrap;
      font-size:13px;
      line-height:1.5;
      color:var(--txt);
    }
    .tools{
      display:flex; gap:8px; flex-wrap:wrap; align-items:center; justify-content:flex-end;
    }
    .miniBtn{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px;
      border-radius:12px;
      border:1px solid rgba(212,175,55,.22);
      background:rgba(15,23,42,.50);
      color:var(--txt);
      cursor:pointer;
      font-size:12px;
      user-select:none;
    }
    .miniBtn:hover{border-color:rgba(242,211,122,.55)}
    .miniBtn svg{width:15px;height:15px}
    .check{
      display:inline-flex; align-items:center; gap:8px;
      font-size:12px; color:var(--muted);
      padding:8px 10px;
      border-radius:12px;
      border:1px solid rgba(94,168,255,.20);
      background:rgba(2,6,23,.22);
    }
    .check.on{color:var(--txt); border-color:rgba(94,168,255,.55); background:rgba(94,168,255,.08)}
    .engineGrid{display:grid; gap:10px;}
    .divider{height:1px; background:rgba(212,175,55,.16); margin:12px 0;}
    .nextLine{
      padding:12px;
      border-radius:16px;
      border:1px dashed rgba(242,211,122,.35);
      background:rgba(15,23,42,.45);
    }
    .nextLine .script{color:var(--txt)}
    .footHint{margin-top:10px; color:var(--muted); font-size:12px; line-height:1.45}

    @media (max-width:1080px){
      .grid{grid-template-columns:1fr}
      .col-4,.col-6,.col-8{grid-column:span 12}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="leftHead">
        <div class="logo" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M12 2.5l7.8 3.2v6.6c0 5.1-3.3 9.5-7.8 9.7-4.5-.2-7.8-4.6-7.8-9.7V5.7L12 2.5z" stroke="rgba(242,211,122,.95)" stroke-width="1.5"/>
            <path d="M7.2 12.2c2.6-3 6.9-3 9.6 0" stroke="rgba(94,168,255,.85)" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </div>
        <div>
          <h1 data-i18n="title">Leitfaden 03 – Unternehmer / Verein</h1>
          <p class="sub" data-i18n="sub">Dein Stil: Profi-Einstieg → Risiko/Prozess/Rollen → Vertrauens-/Fehler-Frame → 3 Ziele → Fokus/Engpass → Mitgliedschaft.</p>
        </div>
      </div>
      <div class="actions">
        <a class="btn" href="./index.html">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M10 19l-7-7 7-7" stroke="rgba(242,211,122,.9)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M3 12h18" stroke="rgba(94,168,255,.85)" stroke-width="1.6" stroke-linecap="round"/>
          </svg>
          <span data-i18n="btn_back">Auswahl</span>
        </a>
        <button class="btn" id="toggleLangBtn" type="button" title="DE/EN">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M4 6h16M4 18h16" stroke="rgba(242,211,122,.9)" stroke-width="1.6" stroke-linecap="round"/>
            <path d="M7 6c0 6 3 12 5 12s5-6 5-12" stroke="rgba(94,168,255,.8)" stroke-width="1.3" stroke-linecap="round"/>
          </svg>
          <span data-i18n="btn_lang">DE/EN</span>
        </button>
        <button class="btn" id="resetBtn" type="button">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M6 7h12M9 7V5.5c0-.6.4-1 1-1h4c.6 0 1 .4 1 1V7" stroke="rgba(242,211,122,.9)" stroke-width="1.4" stroke-linecap="round"/>
            <path d="M8 7l.7 14h6.6L16 7" stroke="rgba(212,175,55,.8)" stroke-width="1.4" stroke-linecap="round"/>
          </svg>
          <span data-i18n="btn_reset">Zurücksetzen</span>
        </button>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT -->
      <div class="panel">
        <div class="hd">
          <h2>
            <span class="badge"><b data-i18n="setup_title">Setup</b> · <span id="statusTxt" data-i18n="status_ready">bereit</span></span>
          </h2>
          <div class="rowBtns">
            <span class="badge"><b data-i18n="lang_label">Sprache</b>: <span id="langVal">DE</span></span>
            <span class="badge"><b data-i18n="save_label">Speicher</b>: <span data-i18n="save_local">lokal</span></span>
          </div>
        </div>
        <div class="bd">
          <div class="setup">
            <div class="col-4">
              <label for="vorname" data-i18n="lbl_name">Vorname / Name</label>
              <input id="vorname" type="text" placeholder="z.B. Max / Frau Müller" />
            </div>

            <div class="col-4">
              <label data-i18n="lbl_form">Ansprache</label>
              <div class="toggle" role="group" aria-label="Ansprache">
                <button class="tbtn active" id="tDu" type="button"><span data-i18n="form_du">DU</span></button>
                <button class="tbtn" id="tSie" type="button"><span data-i18n="form_sie">SIE</span></button>
              </div>
            </div>

            <div class="col-4">
              <label for="kontext" data-i18n="lbl_context">Kontext / Rolle</label>
              <input id="kontext" type="text" placeholder="z.B. Geschäftsführung / Vorstand / Verein / Empfehlung" />
            </div>

            <div class="col-6">
              <label for="fokus" data-i18n="lbl_focus">Fokus (3 Ziele)</label>
              <select id="fokus">
                <option value="sicherheit" data-i18n="focus_sicherheit">1) Sicherheit: kein Geld mehr verlieren</option>
                <option value="stabilitaet" data-i18n="focus_stabil">2) Stabilität: Standards & Ruhe</option>
                <option value="zweite_spur" data-i18n="focus_spur">3) Zweite Spur: Wachstum/Partner (optional)</option>
              </select>
            </div>

            <div class="col-6">
              <label for="engpass" data-i18n="lbl_bottleneck">Engpass</label>
              <select id="engpass">
                <option value="klarheit" data-i18n="engpass_klarheit">Klarheit: Was ist seriös / was ist Risiko?</option>
                <option value="struktur" data-i18n="engpass_struktur">Struktur: Prozess, Rollen, Verantwortungen</option>
                <option value="dranbleiben" data-i18n="engpass_dran">Dranbleiben: Umsetzung & Nachhalten</option>
              </select>
            </div>

            <div class="col-12">
              <label for="notizen" data-i18n="lbl_notes">Notizen (bleibt nur auf deinem Gerät)</label>
              <textarea id="notizen" placeholder="Kurz: Lage, Trigger, Entscheider, Einwände, nächste Schritte"></textarea>
            </div>
          </div>

          <div class="divider"></div>

          <div class="steps" id="steps"></div>

          <p class="footHint" data-i18n="foot_hint">
            Tipp: Du gibst erst Details, wenn der Rahmen akzeptiert ist. Erst Fit – dann Inhalt.
          </p>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="panel">
        <div class="hd">
          <h2 data-i18n="engine_title">Rückfragen-Engine</h2>
          <div class="rowBtns">
            <button class="miniBtn" id="nextBtn" type="button">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M5 12h12" stroke="rgba(242,211,122,.9)" stroke-width="1.6" stroke-linecap="round"/>
                <path d="M13 6l6 6-6 6" stroke="rgba(94,168,255,.85)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span data-i18n="btn_next">Nächste Zeile</span>
            </button>
            <button class="miniBtn" id="copyNextBtn" type="button">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M9 9h10v10H9V9z" stroke="rgba(242,211,122,.9)" stroke-width="1.4"/>
                <path d="M5 15H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1" stroke="rgba(94,168,255,.85)" stroke-width="1.4" stroke-linecap="round"/>
              </svg>
              <span data-i18n="btn_copy">Kopieren</span>
            </button>
          </div>
        </div>
        <div class="bd">
          <div class="engineGrid">
            <div>
              <label for="truth" data-i18n="lbl_truth">Wahrheit (1 Satz)</label>
              <select id="truth"></select>
            </div>
            <div>
              <label for="sluice" data-i18n="lbl_sluice">Schleusenfrage</label>
              <select id="sluice"></select>
            </div>
            <div>
              <label for="mirror" data-i18n="lbl_mirror">Spiegel-Frage</label>
              <select id="mirror"></select>
            </div>

            <div class="nextLine" id="nextLineBox">
              <div class="script" id="nextLine"></div>
            </div>

            <div class="divider"></div>

            <h2 style="margin:0 0 8px; font-size:14px" data-i18n="obj_title">Einwände (ruhig sortieren)</h2>
            <div>
              <label for="objection" data-i18n="lbl_objection">Einwand</label>
              <select id="objection"></select>
            </div>
            <div class="nextLine">
              <div class="script" id="objAnswer"></div>
            </div>

            <p class="footHint" data-i18n="obj_hint">
              Prinzip: Anerkennen → Klärfrage → Rahmen. Kein Pitch-Wrestling.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
(function(){
  const PAGE_KEY = "fsa_leitfaden_03_unternehmer";
  const LANG_KEY = "fsa_leitfaden_lang";

  const I18N = {
    de:{
      title:"Leitfaden 03 – Unternehmer / Verein",
      sub:"Dein Stil: Profi-Einstieg → Risiko/Prozess/Rollen → Vertrauens-/Fehler-Frame → 3 Ziele → Fokus/Engpass → Mitgliedschaft.",
      btn_back:"Auswahl",
      btn_lang:"DE/EN",
      btn_reset:"Zurücksetzen",
      setup_title:"Setup",
      status_ready:"bereit",
      lang_label:"Sprache",
      save_label:"Speicher",
      save_local:"lokal",
      lbl_name:"Vorname / Name",
      lbl_form:"Ansprache",
      form_du:"DU",
      form_sie:"SIE",
      lbl_context:"Kontext / Rolle",
      lbl_focus:"Fokus (3 Ziele)",
      focus_sicherheit:"1) Sicherheit: kein Geld mehr verlieren",
      focus_stabil:"2) Stabilität: Standards & Ruhe",
      focus_spur:"3) Zweite Spur: Wachstum/Partner (optional)",
      lbl_bottleneck:"Engpass",
      engpass_klarheit:"Klarheit: Was ist seriös / was ist Risiko?",
      engpass_struktur:"Struktur: Prozess, Rollen, Verantwortungen",
      engpass_dran:"Dranbleiben: Umsetzung & Nachhalten",
      lbl_notes:"Notizen (bleibt nur auf deinem Gerät)",
      foot_hint:"Tipp: Du gibst erst Details, wenn der Rahmen akzeptiert ist. Erst Fit – dann Inhalt.",
      engine_title:"Rückfragen-Engine",
      btn_next:"Nächste Zeile",
      btn_copy:"Kopieren",
      lbl_truth:"Wahrheit (1 Satz)",
      lbl_sluice:"Schleusenfrage",
      lbl_mirror:"Spiegel-Frage",
      obj_title:"Einwände (ruhig sortieren)",
      lbl_objection:"Einwand",
      obj_hint:"Prinzip: Anerkennen → Klärfrage → Rahmen. Kein Pitch-Wrestling.",
      step1:"0–2 min · Profi-Warm-up",
      step2:"2–5 min · Kontext & Entscheider",
      step3:"5–7 min · Risiko/Prozess/Fehler",
      step4:"7–9 min · 3-Punkt-Rahmen",
      step5:"9–12 min · Fokus → Mitgliedschaft",
      btn_step_copy:"Text kopieren",
      btn_step_done:"Als gesagt",
      done_on:"gesagt",
      done_off:"offen",
      focusLabel:{sicherheit:"Sicherheit", stabilitaet:"Stabilität", zweite_spur:"Zweite Spur"},
      engLabel:{klarheit:"Klarheit", struktur:"Struktur", dranbleiben:"Dranbleiben"},
      copied:"Kopiert."
    },
    en:{
      title:"Guide 03 – Business / Association",
      sub:"Your style: professional entry → risk/process/roles → trust/mistake frame → 3 goals → focus/bottleneck → membership.",
      btn_back:"Back",
      btn_lang:"DE/EN",
      btn_reset:"Reset",
      setup_title:"Setup",
      status_ready:"ready",
      lang_label:"Language",
      save_label:"Storage",
      save_local:"local",
      lbl_name:"First name / Name",
      lbl_form:"Form",
      form_du:"YOU (informal)",
      form_sie:"YOU (formal)",
      lbl_context:"Context / role",
      lbl_focus:"Focus (3 goals)",
      focus_sicherheit:"1) Safety: stop losing money",
      focus_stabil:"2) Stability: standards & calm",
      focus_spur:"3) Second stream: growth/partners (optional)",
      lbl_bottleneck:"Bottleneck",
      engpass_klarheit:"Clarity: what's legit / what's risk?",
      engpass_struktur:"Structure: process, roles, responsibilities",
      engpass_dran:"Consistency: execution & follow-through",
      lbl_notes:"Notes (stored on your device)",
      foot_hint:"Tip: details only after the frame is accepted. Fit first – content second.",
      engine_title:"Question Engine",
      btn_next:"Next line",
      btn_copy:"Copy",
      lbl_truth:"Truth (1 sentence)",
      lbl_sluice:"Sluice question",
      lbl_mirror:"Mirror question",
      obj_title:"Objections (sort calmly)",
      lbl_objection:"Objection",
      obj_hint:"Principle: acknowledge → clarify → frame. No pitch wrestling.",
      step1:"0–2 min · Professional warm-up",
      step2:"2–5 min · Context & decision path",
      step3:"5–7 min · Risk/process/mistakes",
      step4:"7–9 min · 3-goal frame",
      step5:"9–12 min · Focus → membership",
      btn_step_copy:"Copy text",
      btn_step_done:"Mark as said",
      done_on:"said",
      done_off:"open",
      focusLabel:{sicherheit:"Safety", stabilitaet:"Stability", zweite_spur:"Second stream"},
      engLabel:{klarheit:"Clarity", struktur:"Structure", dranbleiben:"Consistency"},
      copied:"Copied."
    }
  };

  const LIB = {
    de:{
      truths:[
        "In Unternehmen verliert man selten am Produkt – man verliert am Prozess.",
        "Tempo ohne Standards ist kein Fortschritt, sondern Risiko.",
        "Das größte Risiko ist nicht der Markt – sondern fehlende Verantwortlichkeit.",
        "Wer ohne Prüfschritte startet, zahlt später immer doppelt: Zeit und Geld.",
        "Entscheidungen werden sauber, wenn Rollen und Kriterien klar sind.",
        "Seriösität erkennt man an Ruhe, Dokumentation und Stopp-Punkten."
      ],
      sluices:[
        "Wie wird bei Ihnen entschieden – wer ist am Ende der Entscheider?",
        "Was wäre bei Ihnen ein No-Go: Druck, Intransparenz oder fehlende Dokumente?",
        "Welche Rolle ist kritisch: Finanzen, Recht, IT, Vorstand?",
        "Wollen Sie, dass ich Ihnen den Rahmen in 30 Sekunden gebe – ohne Details?",
        "Was ist für Sie wichtiger: Fehler vermeiden oder schneller umsetzen?",
        "Woran würden Sie erkennen: ‚Das ist sauber aufgesetzt‘?"
      ],
      mirrors:[
        "Was ist heute der größte Unsicherheitsfaktor?",
        "Wo sehen Sie die größte Schnittstelle, an der Fehler passieren?",
        "Was müsste gegeben sein, damit Sie überhaupt weitergehen?",
        "Welche Information fehlt Ihnen gerade am meisten?",
        "Was wäre ein sauberer nächster Schritt – ohne Verpflichtung?",
        "Was wäre ein klarer Stopp-Punkt, falls es nicht passt?"
      ],
      objections:[
        {k:"ob1", v:"Schicken Sie mir erst mal Unterlagen."},
        {k:"ob2", v:"Wir haben dafür keine Zeit."},
        {k:"ob3", v:"Wer steckt dahinter / ist das seriös?"},
        {k:"ob4", v:"Wir haben schon Berater / Prozesse."},
        {k:"ob5", v:"Was kostet das?"}
      ]
    },
    en:{
      truths:[
        "In business you rarely lose on the product—you lose on process.",
        "Speed without standards isn't progress; it's risk.",
        "The biggest risk isn't the market—it's unclear responsibility.",
        "If you start without checkpoints, you'll pay twice: time and money.",
        "Decisions get clean when roles and criteria are clear.",
        "Legitimacy shows in calm, documentation, and stop points."
      ],
      sluices:[
        "How do you decide internally—who is the final decision maker?",
        "What is a no-go for you: pressure, opacity, or missing documents?",
        "Which function is critical: finance, legal, IT, board?",
        "Want me to outline the frame in 30 seconds—no details?",
        "What matters more: avoiding mistakes or moving faster?",
        "How would you recognize: 'this is set up cleanly'?"
      ],
      mirrors:[
        "What's the biggest uncertainty right now?",
        "Where is the critical interface where mistakes happen?",
        "What would need to be true for you to continue at all?",
        "Which piece of information is missing most?",
        "What would be a clean next step—without commitment?",
        "What's a clear stop point if it doesn't fit?"
      ],
      objections:[
        {k:"ob1", v:"Send me information first."},
        {k:"ob2", v:"We don't have time."},
        {k:"ob3", v:"Who is behind it / is it legit?"},
        {k:"ob4", v:"We already have advisors / processes."},
        {k:"ob5", v:"What does it cost?"}
      ]
    }
  };

  function lsGet(){ try{ return JSON.parse(localStorage.getItem(PAGE_KEY)||"null"); }catch(e){ return null; } }
  function lsSet(obj){ try{ localStorage.setItem(PAGE_KEY, JSON.stringify(obj)); }catch(e){} }
  function nowTs(){ return Date.now(); }

  function langGet(){
    const v = (localStorage.getItem(LANG_KEY)||"de").toLowerCase();
    return v==="en" ? "en" : "de";
  }
  function langSet(v){ localStorage.setItem(LANG_KEY, v); }

  function pronouns(form){
    if(form==="sie"){
      return {
        form:"sie",
        you:"Sie",
        youObj:"Ihnen",
        your:"Ihr",
        greeting:(name)=> name ? `Guten Tag ${name},` : "Guten Tag,"
      };
    }
    return {
      form:"du",
      you:"du",
      youObj:"dir",
      your:"dein",
      greeting:(name)=> name ? `Hey ${name},` : "Hey,"
    };
  }

  function safeName(raw){ return (raw||"").trim(); }

  function buildScripts(state, lang){
    const dict = I18N[lang];
    const p = pronouns(state.form);
    const name = safeName(state.vorname);
    const ctx = (state.kontext||"").trim();
    const focus = state.fokus || "sicherheit";
    const eng = state.engpass || "klarheit";

    const fokusLabel = {de: dict.focusLabel[focus], en: I18N.en.focusLabel[focus]};
    const engpassLabel = {de: dict.engLabel[eng], en: I18N.en.engLabel[eng]};

    const lead = (lang==="de")
      ? `${p.greeting(name)} ${ctx ? `ich ruf kurz an – ${ctx}. ` : ""}Haben ${p.you} gerade 2 Minuten für eine saubere Einordnung?`
      : `${p.greeting(name)} ${ctx ? `quick call – ${ctx}. ` : ""}Do you have 2 minutes for a clean framing?`;

    const warm2 = (lang==="de")
      ? "Ich halte es kurz: Ich will nur prüfen, ob das für Sie/bei Ihnen überhaupt Sinn macht – ohne Pitch."
      : "I'll keep it short: I only want to check fit—no pitch.";

    const decide = (lang==="de")
      ? `Damit ich ${p.you} nichts Falsches erzähle: Wie läuft bei Ihnen der Entscheidungsweg – wer ist am Ende Entscheider?`
      : `So I don't assume wrong: how does your decision path work—who's the final decision maker?`;

    const scope = (lang==="de")
      ? "Und eher Firma oder Verein – und welche Rolle haben Sie gerade (GF/Vorstand/IT/Finanzen)?"
      : "And is it business or association—and what's your role (CEO/board/IT/finance)?";

    const risk = (lang==="de")
      ? `Ich sehe es ständig: Es scheitert selten am Produkt – sondern am Prozess, an Rollen und an fehlenden Stopp-Punkten.`
      : `I see it all the time: it rarely fails on the product—it's process, roles, and missing stop points.`;

    const riskQ = (lang==="de")
      ? `Gab es bei Ihnen oder im Umfeld schon mal ein Thema, wo später rauskam: „Hätten wir früher prüfen müssen“?`
      : `Have you seen cases where later it turned out: "we should've checked earlier"?`;

    const frame = (lang==="de")
      ? `Mein Rahmen ist simpel: seriös ist, was Ruhe hat, Dokumente hat und klare Stopps.\nWenn das fehlt, ist Tempo ein Warnsignal.`
      : `My frame is simple: legit equals calm, documentation, and clear stop points.\nIf that's missing, speed is a red flag.`;

    const goals = (lang==="de")
      ? `Für mich gibt es drei Ziele, die jede Organisation sauber abdecken sollte – egal ob man etwas startet oder nicht:\n\n1) Sicherheit: Fehler und Verluste vermeiden\n2) Stabilität: Standards & klare Verantwortungen\n3) Zweite Spur: optional Wachstum/Partner – aber nur auf sauberem Fundament\n\nDie meisten springen direkt zu Punkt 3 – und verlieren unterwegs 1 und 2.`
      : `For me there are three goals every organization should cover—whether you start something or not:\n\n1) Safety: avoid mistakes and losses\n2) Stability: standards & clear responsibilities\n3) Second stream: optional growth/partners—only on a clean foundation\n\nMost jump straight to #3 and lose #1 and #2 on the way.`;

    const focusQ = (lang==="de")
      ? `Wenn Sie es priorisieren müssten: Was ist aktuell wichtiger – Sicherheit, Stabilität oder zweite Spur?`
      : `If you had to prioritize: what's more important right now—safety, stability, or a second stream?`;

    const engQ = (lang==="de")
      ? `Und der Engpass ist eher: Klarheit, Struktur – oder Dranbleiben/Umsetzung?`
      : `And the bottleneck is more: clarity, structure, or execution/follow-through?`;

    const membership = (lang==="de")
      ? `Dann sage ich es klar: Genau dafür gibt es bei uns die Mitgliedschaft.\nNicht als „Produkt“, sondern als Rahmen: Standards, Rollen, Prüfschritte und Begleitung – damit es sauber bleibt.\n\nSoll ich Ihnen den Rahmen freischalten – ja oder nein?`
      : `Then clearly: that's exactly what our membership is for.\nNot as a “product”, but as a frame: standards, roles, checkpoints, and guidance—so it stays clean.\n\nDo you want me to unlock the frame—yes or no?`;

    const scripts = [
      {id:"s1", title:dict.step1, lines:[lead, warm2]},
      {id:"s2", title:dict.step2, lines:[decide, scope]},
      {id:"s3", title:dict.step3, lines:[risk, riskQ, frame]},
      {id:"s4", title:dict.step4, lines:[goals]},
      {id:"s5", title:dict.step5, lines:[focusQ, engQ, membership]}
    ];

    return {scripts, fokusLabel, engpassLabel};
  }

  function buildNextLine(state, lang){
    const name = safeName(state.vorname);
    const lib = LIB[lang];
    const t = lib.truths[state.truthIdx % lib.truths.length];
    const q = lib.sluices[state.sluiceIdx % lib.sluices.length];
    const m = lib.mirrors[state.mirrorIdx % lib.mirrors.length];

    if(lang==="de"){
      return `„Ich will nur prüfen, ob das bei Ihnen sauber passt – ohne Pitch.“\n${t}\n\n${name?name+"," : ""} ${q}\n\n(Spiegel, wenn kurz geantwortet wird): ${m}`;
    }
    return `“I only want to check fit—no pitch.”\n${t}\n\n${q}\n\n(If their answer is short): ${m}`;
  }

  function objectionAnswer(state, lang, key){
    function A(de,en){ return (lang==="de"?de:en); }

    if(key==="ob1"){
      return A(
        "Anerkennen: Klar.\nKlärfrage: Welche Unterlagen meinen Sie genau – Ablauf/Standards oder Konditionen?\nRahmen: Ich schicke nichts „ins Blaue“. Erst 2 Minuten Fit, dann gezielt das Richtige.",
        "Acknowledge: Sure.\nClarify: Which info exactly—process/standards or terms?\nFrame: I don't send generic docs. First 2 minutes fit, then the right piece."
      );
    }
    if(key==="ob2"){
      return A(
        "Anerkennen: Versteh ich.\nKlärfrage: Was ist realistischer – 2 Minuten jetzt oder ein kurzer Slot (10 Minuten) später?\nRahmen: Ich will nur vermeiden, dass Zeit durch Fehlstart verloren geht.",
        "Acknowledge: I get it.\nClarify: what's realistic—2 minutes now or a short slot (10 min) later?\nFrame: I only want to prevent time loss through a wrong start."
      );
    }
    if(key==="ob3"){
      return A(
        "Anerkennen: Absolut berechtigt.\nKlärfrage: Was wäre für Sie ein Seriositäts-Beleg – Referenzen, Dokumentation, klare Stopps?\nRahmen: Seriös ist: Ruhe, Transparenz, Prüfpfade. Wenn das fehlt, ist es ein Nein.",
        "Acknowledge: Fair.\nClarify: what would prove legitimacy—references, documentation, clear stop points?\nFrame: Legit means calm, transparency, checkpoints. If missing, it's a no."
      );
    }
    if(key==="ob4"){
      return A(
        "Anerkennen: Sehr gut.\nKlärfrage: Wo passieren trotzdem typischerweise Fehler – Schnittstellen, Verantwortungen oder Tempo?\nRahmen: Ich ersetze nichts. Ich gebe nur einen Rahmen, der Fehler reduziert.",
        "Acknowledge: Good.\nClarify: where do mistakes still happen—interfaces, responsibility, or speed?\nFrame: I replace nothing. I provide a frame that reduces mistakes."
      );
    }
    return A(
      "Anerkennen: Fair.\nKlärfrage: Vorher noch wichtiger: Passt der Rahmen grundsätzlich – ja oder nein?\nRahmen: Wenn es passt, klären wir Konditionen sauber. Ich will keine Bauchentscheidung.",
      "Acknowledge: Fair.\nClarify: more important first—does the frame fit at all, yes or no?\nFrame: If it fits, we clarify terms cleanly. No gut decisions."
    );
  }

  const els = {
    langVal: document.getElementById("langVal"),
    toggleLangBtn: document.getElementById("toggleLangBtn"),
    resetBtn: document.getElementById("resetBtn"),
    statusTxt: document.getElementById("statusTxt"),
    vorname: document.getElementById("vorname"),
    kontext: document.getElementById("kontext"),
    notizen: document.getElementById("notizen"),
    fokus: document.getElementById("fokus"),
    engpass: document.getElementById("engpass"),
    tDu: document.getElementById("tDu"),
    tSie: document.getElementById("tSie"),
    steps: document.getElementById("steps"),
    truth: document.getElementById("truth"),
    sluice: document.getElementById("sluice"),
    mirror: document.getElementById("mirror"),
    nextBtn: document.getElementById("nextBtn"),
    nextLine: document.getElementById("nextLine"),
    copyNextBtn: document.getElementById("copyNextBtn"),
    objection: document.getElementById("objection"),
    objAnswer: document.getElementById("objAnswer"),
  };

  function applyI18n(lang){
    const dict = I18N[lang];
    document.documentElement.lang = (lang==="en" ? "en" : "de");
    els.langVal.textContent = (lang==="en" ? "EN" : "DE");

    document.querySelectorAll("[data-i18n]").forEach(el=>{
      const k = el.getAttribute("data-i18n");
      if(dict[k]) el.textContent = dict[k];
    });

    els.truth.innerHTML = "";
    els.sluice.innerHTML = "";
    els.mirror.innerHTML = "";
    LIB[lang].truths.forEach((t,i)=>{
      const o = document.createElement("option");
      o.value = String(i);
      o.textContent = t;
      els.truth.appendChild(o);
    });
    LIB[lang].sluices.forEach((t,i)=>{
      const o = document.createElement("option");
      o.value = String(i);
      o.textContent = t;
      els.sluice.appendChild(o);
    });
    LIB[lang].mirrors.forEach((t,i)=>{
      const o = document.createElement("option");
      o.value = String(i);
      o.textContent = t;
      els.mirror.appendChild(o);
    });

    els.objection.innerHTML = "";
    LIB[lang].objections.forEach((obj)=>{
      const o = document.createElement("option");
      o.value = obj.k;
      o.textContent = obj.v;
      els.objection.appendChild(o);
    });
  }

  function readState(){
    const saved = lsGet() || {};
    const lang = langGet();
    return {
      lang,
      form: saved.form || "sie",
      vorname: saved.vorname || "",
      kontext: saved.kontext || "",
      notizen: saved.notizen || "",
      fokus: saved.fokus || "sicherheit",
      engpass: saved.engpass || "klarheit",
      truthIdx: (typeof saved.truthIdx==="number" ? saved.truthIdx : 0),
      sluiceIdx: (typeof saved.sluiceIdx==="number" ? saved.sluiceIdx : 0),
      mirrorIdx: (typeof saved.mirrorIdx==="number" ? saved.mirrorIdx : 0),
      objectionKey: saved.objectionKey || "ob1",
      doneMap: saved.doneMap || {}
    };
  }

  function writeState(state, extra){
    const merged = Object.assign({}, state, extra || {});
    merged.updatedAt = nowTs();
    merged.lastUsed = nowTs();

    const bundle = buildScripts(merged, merged.lang);
    merged.fokusLabel = bundle.fokusLabel;
    merged.engpassLabel = bundle.engpassLabel;

    lsSet(merged);
    return merged;
  }

  function setForm(state, form){
    state.form = form;
    els.tDu.classList.toggle("active", form==="du");
    els.tSie.classList.toggle("active", form==="sie");
  }

  function render(state){
    applyI18n(state.lang);

    els.vorname.value = state.vorname;
    els.kontext.value = state.kontext;
    els.notizen.value = state.notizen;
    els.fokus.value = state.fokus;
    els.engpass.value = state.engpass;

    setForm(state, state.form);

    els.truth.value = String(state.truthIdx % LIB[state.lang].truths.length);
    els.sluice.value = String(state.sluiceIdx % LIB[state.lang].sluices.length);
    els.mirror.value = String(state.mirrorIdx % LIB[state.lang].mirrors.length);
    els.objection.value = state.objectionKey;

    const dict = I18N[state.lang];
    const bundle = buildScripts(state, state.lang);

    els.steps.innerHTML = "";
    bundle.scripts.forEach(s=>{
      const done = !!state.doneMap[s.id];
      const card = document.createElement("div");
      card.className = "step";
      card.innerHTML = `
        <div class="shd">
          <h3><span class="dot"></span>${s.title}</h3>
          <div class="tools">
            <button class="miniBtn" type="button" data-act="copy" data-id="${s.id}">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M9 9h10v10H9V9z" stroke="rgba(242,211,122,.9)" stroke-width="1.4"/>
                <path d="M5 15H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1" stroke="rgba(94,168,255,.85)" stroke-width="1.4" stroke-linecap="round"/>
              </svg>
              ${dict.btn_step_copy}
            </button>
            <button class="check ${done?"on":""}" type="button" data-act="done" data-id="${s.id}">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" style="width:16px;height:16px">
                <path d="M6 12.5l3.2 3.2L18 7.8" stroke="rgba(94,168,255,.9)" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              ${done ? dict.done_on : dict.done_off}
            </button>
          </div>
        </div>
        <div class="sbd">
          <div class="script" id="script_${s.id}">${s.lines.join("\n\n")}</div>
        </div>
      `;
      els.steps.appendChild(card);
    });

    els.nextLine.textContent = buildNextLine(state, state.lang);
    els.objAnswer.textContent = objectionAnswer(state, state.lang, state.objectionKey);
    els.statusTxt.textContent = dict.status_ready;
  }

  async function copyText(text){
    try{
      await navigator.clipboard.writeText(text);
      return true;
    }catch(e){
      try{
        const ta = document.createElement("textarea");
        ta.value = text;
        ta.style.position="fixed";
        ta.style.left="-1000px";
        document.body.appendChild(ta);
        ta.focus(); ta.select();
        document.execCommand("copy");
        document.body.removeChild(ta);
        return true;
      }catch(e2){
        return false;
      }
    }
  }

  let state = readState();
  applyI18n(state.lang);
  render(state);

  els.toggleLangBtn.addEventListener("click", ()=>{
    const next = (langGet()==="en" ? "de" : "en");
    langSet(next);
    state.lang = next;
    state = writeState(state);
    render(state);
  });

  els.resetBtn.addEventListener("click", ()=>{
    const lang = langGet();
    const msg = (lang==="en" ? "Reset this guide page (local data)?" : "Diese Leitfaden-Seite zurücksetzen (lokale Daten)?");
    if(!confirm(msg)) return;
    try{ localStorage.removeItem(PAGE_KEY); }catch(e){}
    state = readState();
    render(state);
  });

  function persistAndRender(patch){
    state = Object.assign(state, patch || {});
    state = writeState(state);
    render(state);
  }

  els.vorname.addEventListener("input", ()=>persistAndRender({vorname: els.vorname.value}));
  els.kontext.addEventListener("input", ()=>persistAndRender({kontext: els.kontext.value}));
  els.notizen.addEventListener("input", ()=>persistAndRender({notizen: els.notizen.value}));
  els.fokus.addEventListener("change", ()=>persistAndRender({fokus: els.fokus.value}));
  els.engpass.addEventListener("change", ()=>persistAndRender({engpass: els.engpass.value}));

  els.tDu.addEventListener("click", ()=>persistAndRender({form:"du"}));
  els.tSie.addEventListener("click", ()=>persistAndRender({form:"sie"}));

  els.truth.addEventListener("change", ()=>persistAndRender({truthIdx: parseInt(els.truth.value,10)||0}));
  els.sluice.addEventListener("change", ()=>persistAndRender({sluiceIdx: parseInt(els.sluice.value,10)||0}));
  els.mirror.addEventListener("change", ()=>persistAndRender({mirrorIdx: parseInt(els.mirror.value,10)||0}));

  els.objection.addEventListener("change", ()=>persistAndRender({objectionKey: els.objection.value}));

  els.nextBtn.addEventListener("click", ()=>{
    persistAndRender({
      truthIdx: state.truthIdx + 1,
      sluiceIdx: state.sluiceIdx + 1,
      mirrorIdx: state.mirrorIdx + 1
    });
  });

  els.copyNextBtn.addEventListener("click", async ()=>{
    const ok = await copyText(els.nextLine.textContent || "");
    if(ok){
      const dict = I18N[state.lang];
      els.statusTxt.textContent = dict.copied;
      setTimeout(()=>{ els.statusTxt.textContent = dict.status_ready; }, 900);
    }
  });

  els.steps.addEventListener("click", async (ev)=>{
    const btn = ev.target.closest("button");
    if(!btn) return;
    const act = btn.getAttribute("data-act");
    const id = btn.getAttribute("data-id");
    if(!act || !id) return;

    if(act==="copy"){
      const el = document.getElementById("script_"+id);
      const ok = await copyText((el && el.textContent) ? el.textContent.trim() : "");
      if(ok){
        const dict = I18N[state.lang];
        els.statusTxt.textContent = dict.copied;
        setTimeout(()=>{ els.statusTxt.textContent = dict.status_ready; }, 900);
      }
      return;
    }
    if(act==="done"){
      const doneMap = Object.assign({}, state.doneMap);
      doneMap[id] = !doneMap[id];
      persistAndRender({doneMap});
      return;
    }
  });

})();
</script>
</body>
</html>
