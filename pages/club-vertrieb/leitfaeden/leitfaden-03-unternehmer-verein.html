<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Leitfaden 03 – Unternehmer / Verein</title>
  <meta name="description" content="Telefonleitfaden Unternehmer/Verein: Talk → 2 Lenkfragen → Vertrauen/Verlust → 3 Ziele → Fokus → Mitgliedschaft. Lokal speicherbar (LocalStorage), DE/EN." />
  <meta name="robots" content="noindex,nofollow" />

  <style>
    :root{
      --bg:#050814;
      --bg2:#020617;

      --panel:rgba(15,23,42,.90);
      --panel2:rgba(15,23,42,.74);

      --txt:#e9eef7;
      --muted:#a9b4c7;

      --gold:#d4af37;
      --gold2:#f2d37a;
      --blue:#5ea8ff;

      --line:rgba(212,175,55,.35);
      --shadow:0 24px 60px rgba(0,0,0,.55);
      --glow:0 0 26px rgba(212,175,55,.22), 0 10px 30px rgba(0,0,0,.55);

      --radius:18px;
      --maxw:1200px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:var(--txt);
      background:
        radial-gradient(900px 520px at 14% 10%, rgba(212,175,55,.18), transparent 62%),
        radial-gradient(760px 520px at 86% 18%, rgba(94,168,255,.16), transparent 60%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg2) 60%, #000 100%);
      overflow-x:hidden;
    }

    .wrap{max-width:var(--maxw); margin:28px auto 60px; padding:0 16px;}
    .topbar{
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      margin:10px 0 16px;
    }
    .brand{
      display:flex; gap:10px; align-items:center;
      padding:10px 12px;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(15,23,42,.88), rgba(15,23,42,.62));
      border-radius:999px;
      box-shadow:var(--glow);
    }
    .brand svg{width:18px; height:18px; flex:none}
    .brand strong{font-weight:800; letter-spacing:.2px}
    .brand span{color:var(--muted); font-size:12px}

    .actions{
      display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end;
    }

    .btn{
      cursor:pointer;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(212,175,55,.14), rgba(15,23,42,.72));
      color:var(--txt);
      padding:10px 12px;
      border-radius:12px;
      box-shadow:0 12px 26px rgba(0,0,0,.35);
      font-weight:700;
      display:inline-flex; gap:8px; align-items:center;
      user-select:none;
    }
    .btn:hover{filter:brightness(1.05)}
    .btn:active{transform:translateY(1px)}
    .btn.secondary{
      background:linear-gradient(180deg, rgba(94,168,255,.12), rgba(15,23,42,.72));
      border-color:rgba(94,168,255,.35);
    }
    .btn.ghost{
      background:rgba(15,23,42,.55);
    }
    .btn svg{width:16px; height:16px}

    header.hero{
      padding:18px 18px 16px;
      border-radius:var(--radius);
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(15,23,42,.90), rgba(15,23,42,.62));
      box-shadow:var(--shadow);
      position:relative;
      overflow:hidden;
    }
    header.hero:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(520px 220px at 14% 10%, rgba(212,175,55,.14), transparent 60%),
        radial-gradient(520px 220px at 88% 18%, rgba(94,168,255,.12), transparent 62%);
      pointer-events:none;
    }
    header.hero > *{position:relative}
    h1{
      margin:0;
      font-size:22px;
      line-height:1.2;
      letter-spacing:.2px;
    }
    .sub{
      margin:6px 0 0;
      color:var(--muted);
      font-size:13px;
      max-width:980px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:14px;
      margin-top:14px;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns: 1fr}
    }

    .card{
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(15,23,42,.90), rgba(15,23,42,.68));
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:14px;
    }
    .card h2{
      margin:0 0 10px;
      font-size:15px;
      letter-spacing:.2px;
      display:flex; align-items:center; gap:8px;
    }
    .card h2 .tag{
      font-size:11px; color:var(--muted);
      border:1px solid rgba(212,175,55,.25);
      padding:2px 8px; border-radius:999px;
      background:rgba(0,0,0,.18);
    }

    .form{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 700px){
      .form{grid-template-columns:1fr}
    }

    label{
      display:block;
      font-size:12px;
      color:var(--muted);
      margin:0 0 6px;
    }

    input[type="text"], select, textarea{
      width:100%;
      border:1px solid rgba(212,175,55,.25);
      background:rgba(0,0,0,.22);
      color:var(--txt);
      border-radius:12px;
      padding:10px 10px;
      outline:none;
    }
    textarea{min-height:96px; resize:vertical}
    input[type="text"]:focus, select:focus, textarea:focus{
      border-color:rgba(212,175,55,.55);
      box-shadow:0 0 0 3px rgba(212,175,55,.10);
    }

    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      margin-top:10px;
    }
    .hint{
      color:var(--muted);
      font-size:12px;
      line-height:1.35;
    }

    .steps{
      display:grid;
      gap:10px;
    }
    .step{
      border:1px solid rgba(212,175,55,.22);
      background:linear-gradient(180deg, rgba(0,0,0,.18), rgba(15,23,42,.35));
      border-radius:16px;
      padding:12px;
      position:relative;
    }
    .stephead{
      display:flex; gap:10px; align-items:flex-start; justify-content:space-between;
      margin-bottom:8px;
    }
    .steptitle{
      font-weight:900;
      font-size:13px;
      letter-spacing:.25px;
      margin:0;
    }
    .stepline{
      color:var(--muted);
      font-size:12px;
      margin:4px 0 0;
    }
    .stepmeta{
      display:flex; gap:8px; align-items:center; flex-wrap:wrap; justify-content:flex-end;
    }
    .pill{
      font-size:11px;
      border:1px solid rgba(94,168,255,.25);
      color:var(--muted);
      padding:2px 8px;
      border-radius:999px;
      background:rgba(94,168,255,.08);
    }
    .pill.done{
      border-color:rgba(212,175,55,.35);
      background:rgba(212,175,55,.10);
      color:var(--gold2);
    }
    .steptext{
      white-space:pre-wrap;
      line-height:1.5;
      font-size:13px;
      color:var(--txt);
      margin:0;
    }

    .miniBtns{
      display:flex; gap:8px; flex-wrap:wrap;
      margin-top:10px;
    }
    .miniBtns .btn{
      padding:8px 10px;
      border-radius:12px;
      font-weight:800;
    }

    .engineBox{
      display:grid;
      gap:10px;
    }
    .engineRow{
      display:grid;
      grid-template-columns: 1fr;
      gap:8px;
    }
    .engineRow .btn{width:100%; justify-content:center}
    .copyOk{
      color:var(--gold2);
      font-size:12px;
      display:none;
      margin-top:8px;
    }

    .objections{
      display:grid;
      gap:10px;
    }
    .objCard{
      border:1px solid rgba(212,175,55,.18);
      background:rgba(0,0,0,.18);
      border-radius:14px;
      padding:10px;
    }
    .objQ{
      margin:0 0 8px;
      font-weight:900;
      font-size:13px;
    }
    .objA{
      margin:0;
      color:var(--muted);
      font-size:12px;
      line-height:1.45;
      white-space:pre-wrap;
    }

    .foot{
      margin-top:14px;
      color:var(--muted);
      font-size:12px;
      line-height:1.4;
      padding:10px 12px;
      border-radius:14px;
      border:1px dashed rgba(212,175,55,.22);
      background:rgba(0,0,0,.16);
    }
    .kbd{
      display:inline-block;
      padding:1px 6px;
      border-radius:8px;
      border:1px solid rgba(212,175,55,.25);
      background:rgba(0,0,0,.25);
      color:var(--gold2);
      font-size:11px;
      font-weight:900;
      letter-spacing:.2px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand" title="FSA Leitfäden – lokal speicherbar">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M12 2l3 7 7 .6-5.3 4.6 1.7 7.1L12 17.8 5.6 21.3l1.7-7.1L2 9.6 9 9l3-7z" stroke="rgba(212,175,55,.9)" stroke-width="1.5"/>
        </svg>
        <div>
          <strong data-i18n="title_short">Leitfaden 03</strong>
          <span data-i18n="badge">Unternehmer / Verein</span>
        </div>
      </div>

      <div class="actions">
        <button class="btn ghost" id="btnBack" type="button" title="Zur Auswahl">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M15 18l-6-6 6-6" stroke="rgba(233,238,247,.9)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span data-i18n="btn_back">Auswahl</span>
        </button>
        <button class="btn secondary" id="btnLang" type="button" title="Sprache umschalten">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M4 6h10M4 18h10M8 6s1 8-4 12M16 18l4-8 4 8M18 14h4" stroke="rgba(94,168,255,.95)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span data-i18n="btn_lang">DE/EN</span>
        </button>
        <button class="btn" id="btnSave" type="button" title="Lokal speichern">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 3h10l3 3v15a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z" stroke="rgba(212,175,55,.9)" stroke-width="1.6"/>
            <path d="M7 3v7h10V3" stroke="rgba(212,175,55,.55)" stroke-width="1.6"/>
            <path d="M8 21v-7h8v7" stroke="rgba(212,175,55,.55)" stroke-width="1.6"/>
          </svg>
          <span data-i18n="btn_save">Speichern</span>
        </button>
        <button class="btn ghost" id="btnReset" type="button" title="Zurücksetzen">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 12a9 9 0 1 1-3-6.7" stroke="rgba(233,238,247,.85)" stroke-width="2" stroke-linecap="round"/>
            <path d="M21 3v6h-6" stroke="rgba(233,238,247,.85)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span data-i18n="btn_reset">Zurücksetzen</span>
        </button>
      </div>
    </div>

    <header class="hero">
      <h1 data-i18n="title">Leitfaden 03 – Unternehmer / Verein</h1>
      <p class="sub" data-i18n="sub">
        Talk → 2 Lenkfragen (Business) → Vertrauen/Verlust → 3 Ziele → Fokus/Engpass → Mitgliedschaft.
        Ziel: seriöser Erstkontakt, der Rückfragen auslöst (ohne Druck, ohne Versprechen).
      </p>
    </header>

    <div class="grid">
      <!-- LEFT: Steps -->
      <section class="card">
        <h2>
          <span data-i18n="flow_title">12-Minuten-Flow</span>
          <span class="tag" data-i18n="flow_tag">Impuls → Gespräch → Einordnung → Entscheidung → Next Step</span>
        </h2>

        <div class="steps" id="steps"></div>

        <div class="foot" data-i18n="flow_hint">
          Tipp: Bei Unternehmern/Vereinen wirkt es am besten, wenn du auf <span class="kbd">Risiko</span>, <span class="kbd">Verantwortung</span> und <span class="kbd">Prozess</span> gehst
          (statt Emotion oder „Chancen“). Rückfragen entstehen, wenn du 1 Wahrheit sagst, kurz pausierst und dann eine Schleusenfrage stellst.
        </div>
      </section>

      <!-- RIGHT: Setup + Engine + Objections -->
      <aside class="card">
        <h2>
          <span data-i18n="setup_title">Setup</span>
          <span class="tag" data-i18n="setup_tag">Lokal</span>
        </h2>

        <div class="form">
          <div>
            <label for="name" data-i18n="lbl_name">Vorname / Name</label>
            <input id="name" type="text" placeholder="z. B. Michael" />
          </div>
          <div>
            <label for="form" data-i18n="lbl_form">Ansprache</label>
            <select id="form">
              <option value="sie" data-i18n="form_sie">SIE</option>
              <option value="du" data-i18n="form_du">DU</option>
            </select>
          </div>

          <div style="grid-column:1/-1">
            <label for="context" data-i18n="lbl_context">Kontext / Beziehung</label>
            <input id="context" type="text" placeholder="z. B. Empfehlung, Netzwerk, Verein, früherer Kontakt…" />
          </div>

          <div>
            <label for="focus" data-i18n="lbl_focus">Fokus (3 Ziele)</label>
            <select id="focus">
              <option value="sicherheit" data-i18n="focus_sicherheit">1) Sicherheit: kein Geld mehr verlieren</option>
              <option value="stabilitaet" data-i18n="focus_stabil">2) Stabilität: Perspektive & Ruhe</option>
              <option value="zweite_spur" data-i18n="focus_spur">3) Zweite Spur: zusätzlich verdienen (optional)</option>
            </select>
          </div>

          <div>
            <label for="engpass" data-i18n="lbl_engpass">Engpass</label>
            <select id="engpass">
              <option value="klarheit" data-i18n="engpass_klarheit">Klarheit: Was stimmt / was ist seriös?</option>
              <option value="struktur" data-i18n="engpass_struktur">Struktur: Standard/Prozess fehlt</option>
              <option value="dranbleiben" data-i18n="engpass_dran">Dranbleiben: Routine/Follow-up fehlt</option>
            </select>
          </div>

          <div style="grid-column:1/-1">
            <label for="notes" data-i18n="lbl_notes">Notizen</label>
            <textarea id="notes" placeholder="Kurznotiz: Lage, Trigger, Einwände, nächste Schritte…"></textarea>
          </div>
        </div>

        <div class="row">
          <div class="hint" id="saveState" data-i18n="save_state">bereit</div>
          <div class="actions" style="gap:8px">
            <button class="btn ghost" id="btnCopyAll" type="button" title="Alle Schritte als Text kopieren">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M9 9h11v12H9z" stroke="rgba(233,238,247,.85)" stroke-width="2"/>
                <path d="M4 3h11v6H4z" stroke="rgba(233,238,247,.55)" stroke-width="2"/>
              </svg>
              <span data-i18n="btn_copy_all">Alles kopieren</span>
            </button>
          </div>
        </div>
        <div class="copyOk" id="copyOk" data-i18n="copy_ok">Kopiert.</div>

        <hr style="border:none;border-top:1px solid rgba(212,175,55,.18); margin:14px 0" />

        <h2>
          <span data-i18n="engine_title">Rückfragen-Engine</span>
          <span class="tag" data-i18n="engine_tag">Wahrheit → Pause → Schleuse</span>
        </h2>

        <div class="engineBox">
          <div class="engineRow">
            <label for="truth" data-i18n="lbl_truth">Wahrheit</label>
            <select id="truth"></select>
          </div>
          <div class="engineRow">
            <label for="sluice" data-i18n="lbl_sluice">Schleusenfrage</label>
            <select id="sluice"></select>
          </div>
          <div class="engineRow">
            <label for="mirror" data-i18n="lbl_mirror">Spiegel-Frage</label>
            <select id="mirror"></select>
          </div>
          <button class="btn secondary" id="btnNextEngine" type="button">
            <span data-i18n="btn_next_engine">Nächste Zeile</span>
          </button>
          <button class="btn" id="btnCopyEngine" type="button">
            <span data-i18n="btn_copy_engine">Engine-Zeile kopieren</span>
          </button>
        </div>

        <hr style="border:none;border-top:1px solid rgba(212,175,55,.18); margin:14px 0" />

        <h2>
          <span data-i18n="obj_title">Einwände</span>
          <span class="tag" data-i18n="obj_tag">Bestätigen → Klärfrage → Einordnung</span>
        </h2>

        <div class="objections" id="objections"></div>

        <div class="foot" data-i18n="local_hint">
          Notizen & Auswahl bleiben nur auf deinem Gerät (LocalStorage). Nichts wird verschickt.
        </div>
      </aside>
    </div>
  </div>

  <script>
    (function(){
      const PAGE_KEY = "fsa_leitfaden_03_unternehmer_verein";
      const LANG_KEY = "fsa_leitfaeden_lang";

      const I18N = {
        de: {
          title_short: "Leitfaden 03",
          badge: "Unternehmer / Verein",
          btn_back: "Auswahl",
          btn_lang: "DE/EN",
          btn_save: "Speichern",
          btn_reset: "Zurücksetzen",
          title: "Leitfaden 03 – Unternehmer / Verein",
          sub: "Talk → 2 Lenkfragen (Business) → Vertrauen/Verlust → 3 Ziele → Fokus/Engpass → Mitgliedschaft. Ziel: seriöser Erstkontakt, der Rückfragen auslöst (ohne Druck, ohne Versprechen).",
          flow_title: "12-Minuten-Flow",
          flow_tag: "Impuls → Gespräch → Einordnung → Entscheidung → Next Step",
          flow_hint: "Tipp: Bei Unternehmern/Vereinen wirkt es am besten, wenn du auf Risiko, Verantwortung und Prozess gehst (statt Emotion oder „Chancen“). Rückfragen entstehen, wenn du 1 Wahrheit sagst, kurz pausierst und dann eine Schleusenfrage stellst.",
          setup_title: "Setup",
          setup_tag: "Lokal",
          lbl_name: "Vorname / Name",
          lbl_form: "Ansprache",
          form_sie: "SIE",
          form_du: "DU",
          lbl_context: "Kontext / Beziehung",
          lbl_focus: "Fokus (3 Ziele)",
          focus_sicherheit: "1) Sicherheit: kein Geld mehr verlieren",
          focus_stabil: "2) Stabilität: Perspektive & Ruhe",
          focus_spur: "3) Zweite Spur: zusätzlich verdienen (optional)",
          lbl_engpass: "Engpass",
          engpass_klarheit: "Klarheit: Was stimmt / was ist seriös?",
          engpass_struktur: "Struktur: Standard/Prozess fehlt",
          engpass_dran: "Dranbleiben: Routine/Follow-up fehlt",
          lbl_notes: "Notizen",
          save_state: "bereit",
          btn_copy_all: "Alles kopieren",
          copy_ok: "Kopiert.",
          engine_title: "Rückfragen-Engine",
          engine_tag: "Wahrheit → Pause → Schleuse",
          lbl_truth: "Wahrheit",
          lbl_sluice: "Schleusenfrage",
          lbl_mirror: "Spiegel-Frage",
          btn_next_engine: "Nächste Zeile",
          btn_copy_engine: "Engine-Zeile kopieren",
          obj_title: "Einwände",
          obj_tag: "Bestätigen → Klärfrage → Einordnung",
          local_hint: "Notizen & Auswahl bleiben nur auf deinem Gerät (LocalStorage). Nichts wird verschickt.",
          steps: [
            {
              id:"s1",
              title:"0–2 min · Warm-up (seriös, menschlich)",
              line:"Ziel: Kontakt, Tonlage, Lage – ohne Pitch.",
              text: (ctx)=> {
                const n = ctx.nameLine();
                const q = ctx.form === "sie"
                  ? "Wie geht es Ihnen gerade – ganz grundsätzlich?"
                  : "Wie geht’s dir gerade – ganz grundsätzlich?";
                const q2 = ctx.form === "sie"
                  ? "Wenn Sie auf die letzten Monate schauen: läuft es eher ruhig – oder eher anspruchsvoll?"
                  : "Wenn du auf die letzten Monate schaust: läuft’s eher ruhig – oder eher anstrengend?";
                const add = ctx.context ? ("Kontext: " + ctx.context + "\n\n") : "";
                return add + n + "\n" + q + "\n" + q2;
              }
            },
            {
              id:"s2",
              title:"2–5 min · 2 Lenkfragen (Business-Diagnose)",
              line:"Ziel: Druck / Stabilität / Risiko sauber verstehen.",
              text: (ctx)=> {
                const q1 = ctx.form === "sie"
                  ? "Wie läuft es finanziell im Unternehmen/Haushalt – ist das stabil oder gibt es gerade Druck?"
                  : "Wie läuft’s finanziell – ist das stabil oder ist da gerade Druck?";
                const q2 = ctx.form === "sie"
                  ? "Und operativ: Welche Baustelle kostet aktuell am meisten Energie – Umsatz, Kosten, Personal, Zeit oder Unsicherheit?"
                  : "Und im Alltag/Job: Was kostet dich gerade am meisten Energie – Zeit, Druck, Unsicherheit oder Umwege?";
                const q3 = ctx.form === "sie"
                  ? "Wenn Sie eins nennen müssten: Was ist aktuell Ihr größtes Risiko – Fehlentscheidung, fehlende Struktur oder fehlender Überblick?"
                  : "Wenn du eins nennen müsstest: Was ist dein größtes Risiko – Fehlentscheidung, fehlende Struktur oder fehlender Überblick?";
                return q1 + "\n" + q2 + "\n" + q3;
              }
            },
            {
              id:"s3",
              title:"5–7 min · Vertrauen/Verlust (Trigger, aber professionell)",
              line:"Ziel: Schutzmotiv aktivieren, ohne Drama.",
              text: (ctx)=> {
                const lead = ctx.form === "sie"
                  ? "Ich frage das nicht aus Neugier, sondern weil ich es ständig sehe:"
                  : "Ich frag das nicht aus Neugier, sondern weil ich’s ständig sehe:";
                const q = ctx.form === "sie"
                  ? "Hatten Sie schon Entscheidungen/Abschlüsse/Investments, bei denen im Nachhinein klar war: das war teuer – finanziell oder zeitlich?"
                  : "Hattest du schon Entscheidungen/Abschlüsse/Investments, wo du später gemerkt hast: das war teuer – finanziell oder zeitlich?";
                const follow = ctx.form === "sie"
                  ? "Was war rückblickend der Hauptgrund: zu viel Tempo, zu wenig Prüfung oder fehlender Rahmen/Standard?"
                  : "Was war rückblickend der Hauptgrund: zu viel Tempo, zu wenig Prüfung oder fehlender Rahmen/Standard?";
                return lead + "\n" + q + "\n" + follow;
              }
            },
            {
              id:"s4",
              title:"7–9 min · 3-Punkt-Zielbild (Sicherheit / Stabilität / zweite Spur)",
              line:"Ziel: Nutzenrahmen setzen, ohne Produktliste.",
              text: (ctx)=> {
                const n = ctx.nameShort();
                const intro = ctx.form === "sie"
                  ? ("Pass auf" + n + ". Für mich gibt es drei Dinge, die jede Organisation/Person sauber abdecken sollte – egal, was man später macht:")
                  : ("Pass auf" + n + ". Für mich gibt es drei Dinge, die jeder sauber abdecken sollte – egal, was man später macht:");
                const p1 = ctx.form === "sie"
                  ? "1) Sicherheit: keine unnötigen Verluste mehr – durch klare Stopps, Prüfung und Regeln."
                  : "1) Sicherheit: keine unnötigen Verluste mehr – durch klare Stopps, Prüfung und Regeln.";
                const p2 = ctx.form === "sie"
                  ? "2) Stabilität: Planbarkeit & Ruhe – weil Entscheidungen nicht mehr aus Stress getroffen werden."
                  : "2) Stabilität: Perspektive & Ruhe – weil Entscheidungen nicht mehr aus Stress getroffen werden.";
                const p3 = ctx.form === "sie"
                  ? "3) Zweite Spur (optional): zusätzliche Einnahmen/Resilienz – aber erst, wenn Punkt 1+2 sauber stehen."
                  : "3) Zweite Spur (optional): zusätzlich verdienen – aber erst, wenn Punkt 1+2 sauber stehen.";
                const close = ctx.form === "sie"
                  ? "Die meisten haben davon eins – aber nicht alle drei. Und genau da entsteht später Lehrgeld."
                  : "Die meisten haben davon eins – aber nicht alle drei. Und genau da entsteht später Lehrgeld.";
                return intro + "\n\n" + p1 + "\n" + p2 + "\n" + p3 + "\n\n" + close;
              }
            },
            {
              id:"s5",
              title:"9–12 min · Fokus/Engpass → Mitgliedschaft (Entscheidung, kein Druck)",
              line:"Ziel: Einordnung + klarer Close, ohne zu pushen.",
              text: (ctx)=> {
                const n = ctx.nameShort();
                const q1 = ctx.form === "sie"
                  ? ("Wenn Sie ehrlich sind" + n + ": Was ist bei Ihnen gerade am wichtigsten – Sicherheit, Stabilität oder zweite Spur?")
                  : ("Wenn du ehrlich bist" + n + ": Was ist bei dir gerade am wichtigsten – Sicherheit, Stabilität oder zweite Spur?");
                const q2 = ctx.form === "sie"
                  ? "Und was ist der Engpass: fehlende Klarheit, fehlende Struktur oder fehlendes Dranbleiben/Follow-up?"
                  : "Und was ist der Engpass: fehlende Klarheit, fehlende Struktur oder fehlendes Dranbleiben/Follow-up?";
                const solve = ctx.form === "sie"
                  ? "Genau dafür gibt es bei uns die Mitgliedschaft: nicht als ‚Kauf‘, sondern als Handlungsrahmen mit Standards, damit Fehlentscheidungen seltener werden."
                  : "Genau dafür gibt es bei uns die Mitgliedschaft: nicht als ‚Kauf‘, sondern als Handlungsrahmen mit Standards, damit Fehlentscheidungen seltener werden.";
                const close = ctx.form === "sie"
                  ? "Wollen Sie, dass ich Sie als Mitglied einplane – ja oder nein?"
                  : "Willst du, dass ich dich als Mitglied einplane – ja oder nein?";
                const soft = ctx.form === "sie"
                  ? "Wenn Sie noch nicht sicher sind: Was fehlt für ein klares Ja – mehr Überblick, mehr Vertrauen oder eine konkrete Frage?"
                  : "Wenn du noch nicht sicher bist: Was fehlt für ein klares Ja – mehr Überblick, mehr Vertrauen oder eine konkrete Frage?";
                return q1 + "\n" + q2 + "\n\n" + solve + "\n\n" + close + "\n" + soft;
              }
            }
          ],
          engine_truths: [
            "Die meisten Verluste passieren nicht durch das Thema – sondern durch fehlende Standards und zu frühes Vertrauen.",
            "Tempo ist in Business-Entscheidungen fast immer ein Warnsignal.",
            "Wenn Verantwortlichkeiten unklar sind, wird jede Entscheidung zum Bauchgefühl – und das ist teuer.",
            "Nicht mehr Wissen schützt – sondern klare Stopps, klare Rollen und ein sauberer Prozess.",
            "Viele zahlen Lehrgeld, weil sie zu spät ‚Stopp‘ sagen und zu früh ‚Ja‘."
          ],
          engine_sluices: [
            "Haben Sie sowas im Umfeld oder im Unternehmen schon erlebt?",
            "Was war rückblickend der teuerste Fehler: Tempo, fehlende Prüfung oder fehlender Rahmen?",
            "Woran würden Sie Seriosität erkennen – bevor Sie entscheiden?",
            "Was ist aktuell gefährlicher: falsches Vertrauen oder fehlende Struktur?",
            "Wollen Sie, dass ich Ihnen in einem Satz sage, wie der Rahmen funktioniert?"
          ],
          engine_mirrors: [
            "Was genau ist damals passiert?",
            "Was hat Sie daran am meisten geärgert?",
            "Was hätten Sie damals gebraucht, um nicht reinzulaufen?",
            "Was müsste passieren, damit Sie wieder offen sind?",
            "Was ist für Sie wichtiger: Risiko reduzieren oder schneller Start?"
          ],
          objections: [
            {
              q:"„Ich will nichts verkauft bekommen.“",
              a:"Bestätigen: „Verstehe ich.“\nKlärfrage: „Was genau triggert Sie bei sowas – Tempo, Versprechen, Druck?“\nEinordnung: „Genau deshalb arbeiten wir mit Rahmen/Standards. Sie behalten jederzeit die Kontrolle.“"
            },
            {
              q:"„Ich habe dafür keine Zeit.“",
              a:"Bestätigen: „Fair.“\nKlärfrage: „Was wäre realistisch – 10 Minuten pro Woche oder eher 30?“\nEinordnung: „Dann starten wir klein. Ein sauberer Rahmen spart später Zeit und Umwege.“"
            },
            {
              q:"„Ich muss erst nachdenken.“",
              a:"Bestätigen: „Sehr gut.“\nKlärfrage: „Was brauchen Sie konkret, um entscheiden zu können?“\nEinordnung: „Wenn die Passung stimmt, ist der nächste Schritt klar. Wenn nicht, ist es ein sauberes Nein.“"
            },
            {
              q:"„Was kostet das?“",
              a:"Bestätigen: „Gute Frage.“\nKlärfrage: „Bevor wir über Zahl sprechen: passt der Nutzen – Sicherheit/Stabilität/Prozess – überhaupt zu Ihnen?“\nEinordnung: „Wenn das grundsätzlich passt, klären wir Konditionen transparent. Ich will nur vermeiden, dass Sie isoliert nach Preis entscheiden.“"
            }
          ]
        },

        en: {
          title_short: "Guide 03",
          badge: "Business / Association",
          btn_back: "Select",
          btn_lang: "DE/EN",
          btn_save: "Save",
          btn_reset: "Reset",
          title: "Guide 03 – Business / Association",
          sub: "Talk → 2 steering questions (business) → trust/loss → 3 goals → focus/bottleneck → membership. Goal: a serious first call that triggers questions (no pressure, no promises).",
          flow_title: "12-minute flow",
          flow_tag: "Impulse → Conversation → Sorting → Decision → Next step",
          flow_hint: "Tip: With business/associations, focus on risk, responsibility and process (not hype). Questions arise when you state one truth, pause briefly, then ask a gateway question.",
          setup_title: "Setup",
          setup_tag: "Local",
          lbl_name: "First name / name",
          lbl_form: "Address",
          form_sie: "FORMAL",
          form_du: "INFORMAL",
          lbl_context: "Context / relation",
          lbl_focus: "Focus (3 goals)",
          focus_sicherheit: "1) Safety: stop losing money",
          focus_stabil: "2) Stability: perspective & calm",
          focus_spur: "3) Second track: extra income (optional)",
          lbl_engpass: "Bottleneck",
          engpass_klarheit: "Clarity: what's true / what's serious?",
          engpass_struktur: "Structure: missing standard/process",
          engpass_dran: "Follow-through: routine/follow-up missing",
          lbl_notes: "Notes",
          save_state: "ready",
          btn_copy_all: "Copy all",
          copy_ok: "Copied.",
          engine_title: "Question engine",
          engine_tag: "Truth → pause → gateway",
          lbl_truth: "Truth",
          lbl_sluice: "Gateway question",
          lbl_mirror: "Mirror question",
          btn_next_engine: "Next line",
          btn_copy_engine: "Copy engine line",
          obj_title: "Objections",
          obj_tag: "Confirm → clarify → sort",
          local_hint: "Notes and selections stay on your device (LocalStorage). Nothing is sent.",
          steps: [
            {
              id:"s1",
              title:"0–2 min · Warm-up (serious, human)",
              line:"Goal: connection, tone, situation – no pitch.",
              text: (ctx)=> {
                const n = ctx.nameLine();
                const q = ctx.form === "sie"
                  ? "How are you doing at the moment – in general?"
                  : "How are you doing – in general?";
                const q2 = ctx.form === "sie"
                  ? "Looking at the last months: has it been calm – or rather demanding?"
                  : "Looking at the last months: calm – or rather demanding?";
                const add = ctx.context ? ("Context: " + ctx.context + "\n\n") : "";
                return add + n + "\n" + q + "\n" + q2;
              }
            },
            {
              id:"s2",
              title:"2–5 min · 2 steering questions (business diagnosis)",
              line:"Goal: understand pressure / stability / risk clearly.",
              text: (ctx)=> {
                const q1 = ctx.form === "sie"
                  ? "Financially: is it stable right now, or is there pressure?"
                  : "Financially: stable right now, or pressure?";
                const q2 = ctx.form === "sie"
                  ? "Operationally: what drains the most energy – revenue, costs, people, time, or uncertainty?"
                  : "Operationally: what drains the most – time, pressure, uncertainty, or detours?";
                const q3 = ctx.form === "sie"
                  ? "If you had to name one: what’s the biggest risk right now – wrong decisions, missing structure, or missing oversight?"
                  : "If you had to name one: biggest risk – wrong decisions, missing structure, or missing oversight?";
                return q1 + "\n" + q2 + "\n" + q3;
              }
            },
            {
              id:"s3",
              title:"5–7 min · Trust/loss (trigger, professional)",
              line:"Goal: activate protection motive without drama.",
              text: (ctx)=> {
                const lead = ctx.form === "sie"
                  ? "I’m not asking out of curiosity – I see this constantly:"
                  : "I’m not asking out of curiosity – I see this constantly:";
                const q = ctx.form === "sie"
                  ? "Have you had decisions/contracts/investments where it became clear afterwards: this was costly – financially or in time?"
                  : "Have you had decisions/contracts/investments where you later felt: this was costly – financially or in time?";
                const follow = ctx.form === "sie"
                  ? "Looking back: was it speed, lack of checking, or missing standards/process?"
                  : "Looking back: was it speed, lack of checking, or missing standards/process?";
                return lead + "\n" + q + "\n" + follow;
              }
            },
            {
              id:"s4",
              title:"7–9 min · 3-goal picture (safety / stability / second track)",
              line:"Goal: frame value without a product list.",
              text: (ctx)=> {
                const n = ctx.nameShort();
                const intro = ctx.form === "sie"
                  ? ("Here’s the point" + n + ". I believe there are three areas every person/organization should cover – regardless of what they do later:")
                  : ("Here’s the point" + n + ". I believe there are three areas everyone should cover – regardless of what they do later:");
                const p1 = "1) Safety: stop unnecessary losses – with clear stops, checks and rules.";
                const p2 = "2) Stability: predictability & calm – decisions are not made under stress.";
                const p3 = "3) Second track (optional): extra income/resilience – but only after 1+2 are solid.";
                const close = "Most people have one of these – not all three. That’s where costly mistakes happen.";
                return intro + "\n\n" + p1 + "\n" + p2 + "\n" + p3 + "\n\n" + close;
              }
            },
            {
              id:"s5",
              title:"9–12 min · Focus/bottleneck → membership (decision, no pressure)",
              line:"Goal: sort + clear close without pushing.",
              text: (ctx)=> {
                const n = ctx.nameShort();
                const q1 = ctx.form === "sie"
                  ? ("Honestly" + n + ": what matters most right now – safety, stability, or a second track?")
                  : ("Honestly" + n + ": what matters most right now – safety, stability, or a second track?");
                const q2 = "And what’s the bottleneck: clarity, structure, or follow-through?";
                const solve = "That’s exactly what our membership is for: not a ‘buy’, but a framework with standards so costly mistakes become less likely.";
                const close = ctx.form === "sie"
                  ? "Should I plan you in as a member – yes or no?"
                  : "Should I plan you in as a member – yes or no?";
                const soft = "If you’re not sure: what’s missing for a clear yes – overview, trust, or one concrete question?";
                return q1 + "\n" + q2 + "\n\n" + solve + "\n\n" + close + "\n" + soft;
              }
            }
          ],
          engine_truths: [
            "Most losses come from missing standards and trusting too early.",
            "Speed is almost always a warning sign in decisions.",
            "If responsibilities are unclear, decisions become gut-feel — and that gets expensive.",
            "Protection is not more knowledge — it’s clear stops, clear roles and a clean process.",
            "People pay tuition because they say ‘yes’ too early and ‘stop’ too late."
          ],
          engine_sluices: [
            "Have you seen this pattern before — personally or in your environment?",
            "Looking back: what was the most expensive mistake — speed, lack of checking, or missing framework?",
            "How would you recognize seriousness before deciding?",
            "What is riskier right now: wrong trust or missing structure?",
            "Want me to explain the framework in one sentence?"
          ],
          engine_mirrors: [
            "What exactly happened?",
            "What annoyed you the most about it?",
            "What would you have needed back then to avoid it?",
            "What would need to happen for you to be open again?",
            "What matters more: reducing risk or starting fast?"
          ],
          objections: [
            {
              q:"“I don’t want to be sold to.”",
              a:"Confirm: “I understand.”\nClarify: “What triggers you — speed, promises, pressure?”\nSort: “That’s why we work with a framework/standards. You keep control at all times.”"
            },
            {
              q:"“I don’t have time.”",
              a:"Confirm: “Fair.”\nClarify: “What’s realistic — 10 minutes a week or 30?”\nSort: “Then we start small. A clean framework saves time and detours later.”"
            },
            {
              q:"“I need to think.”",
              a:"Confirm: “Good.”\nClarify: “What do you need to decide?”\nSort: “If the fit is right, the next step is clear. If not, it’s a clean no.”"
            },
            {
              q:"“What does it cost?”",
              a:"Confirm: “Good question.”\nClarify: “Before numbers: does the benefit — safety/stability/process — fit you?”\nSort: “If yes, we clarify terms transparently. I just want to avoid price-only decisions.”"
            }
          ]
        }
      };

      function $(id){ return document.getElementById(id); }

      const state = {
        lang: "de",
        name: "",
        form: "sie",
        context: "",
        focus: "sicherheit",
        engpass: "klarheit",
        notes: "",
        done: { s1:false, s2:false, s3:false, s4:false, s5:false },
        engineIdx: 0
      };

      const ctx = {
        get lang(){ return state.lang; },
        get form(){ return state.form; },
        get context(){ return (state.context||"").trim(); },
        nameShort(){
          const n = (state.name||"").trim();
          return n ? (", " + n) : "";
        },
        nameLine(){
          const n = (state.name||"").trim();
          const s = state.form === "sie"
            ? "Ich will nicht, dass Sie Geld verlieren – deshalb rufe ich Sie an."
            : "Ich will nicht, dass du Geld verlierst – deshalb rufe ich dich an.";
          if(!n) return s;
          return (state.form === "sie")
            ? ("Herr/Frau " + n + ", " + s)
            : (n + ", " + s);
        }
      };

      function applyI18n(){
        const dict = I18N[state.lang];
        document.documentElement.lang = state.lang === "de" ? "de" : "en";
        document.querySelectorAll("[data-i18n]").forEach(el=>{
          const k = el.getAttribute("data-i18n");
          if(dict[k] != null) el.textContent = dict[k];
        });
        buildEngineSelects();
        buildSteps();
        buildObjections();
      }

      function load(){
        const lang = localStorage.getItem(LANG_KEY);
        if(lang === "de" || lang === "en") state.lang = lang;

        const raw = localStorage.getItem(PAGE_KEY);
        if(raw){
          try{ Object.assign(state, JSON.parse(raw) || {}); }catch(e){}
        }

        if(state.lang !== "de" && state.lang !== "en") state.lang = "de";
        if(state.form !== "sie" && state.form !== "du") state.form = "sie";
        if(!state.done) state.done = { s1:false, s2:false, s3:false, s4:false, s5:false };
        if(typeof state.engineIdx !== "number") state.engineIdx = 0;

        $("name").value = state.name || "";
        $("form").value = state.form || "sie";
        $("context").value = state.context || "";
        $("focus").value = state.focus || "sicherheit";
        $("engpass").value = state.engpass || "klarheit";
        $("notes").value = state.notes || "";

        applyI18n();
        $("saveState").textContent = I18N[state.lang].save_state;
      }

      function save(){
        state.name = $("name").value;
        state.form = $("form").value;
        state.context = $("context").value;
        state.focus = $("focus").value;
        state.engpass = $("engpass").value;
        state.notes = $("notes").value;

        localStorage.setItem(PAGE_KEY, JSON.stringify(state));
        localStorage.setItem(LANG_KEY, state.lang);
        $("saveState").textContent = I18N[state.lang].save_state;
        flashCopied($("saveState"), true);
      }

      function reset(){
        localStorage.removeItem(PAGE_KEY);
        state.name = "";
        state.form = "sie";
        state.context = "";
        state.focus = "sicherheit";
        state.engpass = "klarheit";
        state.notes = "";
        state.done = { s1:false, s2:false, s3:false, s4:false, s5:false };
        state.engineIdx = 0;

        $("name").value = "";
        $("form").value = "sie";
        $("context").value = "";
        $("focus").value = "sicherheit";
        $("engpass").value = "klarheit";
        $("notes").value = "";

        applyI18n();
        $("saveState").textContent = I18N[state.lang].save_state;
      }

      function flashCopied(el, subtle){
        const ok = $("copyOk");
        ok.style.display = "block";
        clearTimeout(flashCopied._t);
        flashCopied._t = setTimeout(()=> ok.style.display="none", 1100);
        if(el && subtle){
          el.style.color = "var(--gold2)";
          clearTimeout(flashCopied._t2);
          flashCopied._t2 = setTimeout(()=> el.style.color="", 800);
        }
      }

      async function copyText(text){
        try{
          await navigator.clipboard.writeText(text);
          flashCopied();
        }catch(e){
          const ta = document.createElement("textarea");
          ta.value = text;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
          flashCopied();
        }
      }

      function tokenReplace(s){
        const name = (state.name||"").trim();
        const n = name ? name : (state.lang === "de" ? "…" : "…");
        return String(s).replaceAll("{VORNAME}", n);
      }

      function svgCopy(){
        return `<svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M9 9h11v12H9z" stroke="rgba(233,238,247,.85)" stroke-width="2"/>
          <path d="M4 3h11v6H4z" stroke="rgba(233,238,247,.55)" stroke-width="2"/>
        </svg>`;
      }
      function svgCheck(){
        return `<svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M20 6L9 17l-5-5" stroke="rgba(212,175,55,.9)" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>`;
      }

      function buildSteps(){
        const dict = I18N[state.lang];
        const host = $("steps");
        host.innerHTML = "";

        dict.steps.forEach(step=>{
          const div = document.createElement("div");
          div.className = "step";
          const done = !!state.done[step.id];

          const h = document.createElement("div");
          h.className = "stephead";

          const left = document.createElement("div");
          const t = document.createElement("p");
          t.className = "steptitle";
          t.textContent = step.title;
          const l = document.createElement("p");
          l.className = "stepline";
          l.textContent = step.line;
          left.appendChild(t);
          left.appendChild(l);

          const meta = document.createElement("div");
          meta.className = "stepmeta";
          const pill = document.createElement("span");
          pill.className = "pill" + (done ? " done" : "");
          pill.textContent = done ? (state.lang==="de" ? "gesagt" : "said") : (state.lang==="de" ? "offen" : "open");
          meta.appendChild(pill);

          h.appendChild(left);
          h.appendChild(meta);

          const p = document.createElement("pre");
          p.className = "steptext";
          p.textContent = tokenReplace(step.text(ctx));

          const btns = document.createElement("div");
          btns.className = "miniBtns";

          const bCopy = document.createElement("button");
          bCopy.type = "button";
          bCopy.className = "btn ghost";
          bCopy.innerHTML = svgCopy() + `<span>${state.lang==="de" ? "Text kopieren" : "Copy text"}</span>`;
          bCopy.addEventListener("click", ()=> copyText(p.textContent));

          const bDone = document.createElement("button");
          bDone.type = "button";
          bDone.className = "btn";
          bDone.innerHTML = svgCheck() + `<span>${state.lang==="de" ? (done ? "Als offen" : "Als gesagt") : (done ? "Mark open" : "Mark said")}</span>`;
          bDone.addEventListener("click", ()=>{
            state.done[step.id] = !state.done[step.id];
            save();
            buildSteps();
          });

          btns.appendChild(bCopy);
          btns.appendChild(bDone);

          div.appendChild(h);
          div.appendChild(p);
          div.appendChild(btns);

          host.appendChild(div);
        });
      }

      function buildEngineSelects(){
        const dict = I18N[state.lang];
        const truth = $("truth");
        const sluice = $("sluice");
        const mirror = $("mirror");

        function fill(sel, arr){
          const cur = sel.value;
          sel.innerHTML = "";
          arr.forEach((txt, idx)=>{
            const o = document.createElement("option");
            o.value = String(idx);
            o.textContent = txt;
            sel.appendChild(o);
          });
          if(cur && Number(cur) < arr.length) sel.value = cur;
        }

        fill(truth, dict.engine_truths);
        fill(sluice, dict.engine_sluices);
        fill(mirror, dict.engine_mirrors);

        const max = Math.min(dict.engine_truths.length, dict.engine_sluices.length, dict.engine_mirrors.length);
        if(max > 0){
          state.engineIdx = ((state.engineIdx % max) + max) % max;
          truth.value = String(state.engineIdx);
          sluice.value = String(state.engineIdx);
          mirror.value = String(state.engineIdx);
        }
      }

      function nextEngine(){
        const dict = I18N[state.lang];
        const max = Math.min(dict.engine_truths.length, dict.engine_sluices.length, dict.engine_mirrors.length);
        if(!max) return;

        state.engineIdx = (state.engineIdx + 1) % max;
        $("truth").value = String(state.engineIdx);
        $("sluice").value = String(state.engineIdx);
        $("mirror").value = String(state.engineIdx);
        save();
      }

      function copyEngineLine(){
        const dict = I18N[state.lang];
        const ti = Number($("truth").value||0);
        const si = Number($("sluice").value||0);
        const mi = Number($("mirror").value||0);

        const t = dict.engine_truths[ti] || "";
        const s = dict.engine_sluices[si] || "";
        const m = dict.engine_mirrors[mi] || "";

        const line = [
          ctx.nameLine(),
          t,
          "…",
          s,
          m ? ("(" + m + ")") : ""
        ].filter(Boolean).join("\n");

        copyText(tokenReplace(line));
      }

      function buildObjections(){
        const dict = I18N[state.lang];
        const host = $("objections");
        host.innerHTML = "";

        dict.objections.forEach(obj=>{
          const div = document.createElement("div");
          div.className = "objCard";

          const q = document.createElement("p");
          q.className = "objQ";
          q.textContent = obj.q;

          const a = document.createElement("p");
          a.className = "objA";
          a.textContent = tokenReplace(obj.a);

          const btn = document.createElement("button");
          btn.type = "button";
          btn.className = "btn ghost";
          btn.style.width = "100%";
          btn.style.justifyContent = "center";
          btn.innerHTML = svgCopy() + `<span>${state.lang==="de" ? "Antwort kopieren" : "Copy answer"}</span>`;
          btn.addEventListener("click", ()=> copyText(a.textContent));

          div.appendChild(q);
          div.appendChild(a);
          div.appendChild(btn);
          host.appendChild(div);
        });
      }

      function copyAll(){
        const dict = I18N[state.lang];
        const parts = [];
        parts.push(dict.title);
        parts.push("—");
        parts.push("Name: " + ((state.name||"").trim() || "—"));
        parts.push("Form: " + (state.form === "sie" ? (state.lang==="de"?"SIE":"FORMAL") : (state.lang==="de"?"DU":"INFORMAL")));
        if((state.context||"").trim()) parts.push((state.lang==="de" ? "Kontext: " : "Context: ") + (state.context||"").trim());
        parts.push((state.lang==="de" ? "Fokus: " : "Focus: ") + $("focus").selectedOptions[0].textContent);
        parts.push((state.lang==="de" ? "Engpass: " : "Bottleneck: ") + $("engpass").selectedOptions[0].textContent);
        parts.push("—");

        dict.steps.forEach(step=>{
          parts.push(step.title);
          parts.push(tokenReplace(step.text(ctx)));
          parts.push("");
        });

        if((state.notes||"").trim()){
          parts.push(state.lang==="de" ? "Notizen:" : "Notes:");
          parts.push((state.notes||"").trim());
        }

        copyText(parts.join("\n"));
      }

      // Wire events
      $("btnBack").addEventListener("click", ()=>{
        window.location.href = "./index.html" + (window.location.search || "");
      });

      $("btnLang").addEventListener("click", ()=>{
        state.lang = (state.lang === "de") ? "en" : "de";
        localStorage.setItem(LANG_KEY, state.lang);
        applyI18n();
        save();
      });

      $("btnSave").addEventListener("click", save);
      $("btnReset").addEventListener("click", ()=>{
        if(confirm(state.lang==="de" ? "Alles auf dieser Seite zurücksetzen?" : "Reset everything on this page?")){
          reset();
        }
      });

      ["name","form","context","focus","engpass","notes"].forEach(id=>{
        $(id).addEventListener("input", ()=>{
          state.name = $("name").value;
          state.form = $("form").value;
          state.context = $("context").value;
          state.focus = $("focus").value;
          state.engpass = $("engpass").value;
          state.notes = $("notes").value;
          buildSteps();
          $("saveState").textContent = I18N[state.lang].save_state;
        });
        $(id).addEventListener("change", ()=>{
          state.name = $("name").value;
          state.form = $("form").value;
          state.context = $("context").value;
          state.focus = $("focus").value;
          state.engpass = $("engpass").value;
          state.notes = $("notes").value;
          buildSteps();
          $("saveState").textContent = I18N[state.lang].save_state;
        });
      });

      $("btnNextEngine").addEventListener("click", nextEngine);
      $("btnCopyEngine").addEventListener("click", copyEngineLine);
      $("btnCopyAll").addEventListener("click", copyAll);

      // Init
      load();
    })();
  </script>
</body>
</html>
