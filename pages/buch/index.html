<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Die Rückeroberung der eigenen Souveränität – Buch</title>
  <meta name="description" content="Buchübersicht: Cover, Inhaltsverzeichnis, Kapitel 1–22 (inkl. Bonus) – als anklickbare Galerie." />

  <style>
    :root{
      --bg:#050814;
      --bg2:#020617;
      --panel:rgba(15,23,42,.90);
      --panel2:rgba(15,23,42,.78);
      --text:#e9edf3;
      --muted:#9aa6b2;
      --gold:#d4af37;
      --gold2:#f1d070;
      --shadow:0 26px 55px rgba(0,0,0,.55);
      --glow:0 0 26px rgba(212,175,55,.18), 0 12px 32px rgba(0,0,0,.55);
      --radius:18px;
      --maxw:1200px;
    }

    html,body{
      height:100%;
      margin:0;
      background: radial-gradient(1200px 700px at 20% 10%, rgba(30,64,175,.25), transparent 60%),
                  radial-gradient(900px 500px at 80% 20%, rgba(212,175,55,.10), transparent 55%),
                  linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
    }

    .wrap{
      max-width:var(--maxw);
      margin:0 auto;
      padding:26px 16px 42px;
    }

    .hero{
      background: linear-gradient(135deg, rgba(15,23,42,.85), rgba(2,6,23,.55));
      border:1px solid rgba(255,255,255,.08);
      border-radius:22px;
      box-shadow: var(--shadow);
      padding:22px 18px;
    }

    h1{
      margin:0 0 6px 0;
      font-size: clamp(26px, 3.6vw, 44px);
      letter-spacing:.2px;
    }
    .sub{
      margin:0;
      color:var(--muted);
      font-size: 14px;
      line-height: 1.5;
    }

    .section{
      margin-top:18px;
      background: linear-gradient(135deg, rgba(15,23,42,.78), rgba(2,6,23,.40));
      border:1px solid rgba(255,255,255,.07);
      border-radius:22px;
      box-shadow: 0 18px 44px rgba(0,0,0,.45);
      overflow:hidden;
    }

    .section-head{
      padding:14px 16px;
      border-bottom:1px solid rgba(255,255,255,.07);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .section-title{
      margin:0;
      font-size:16px;
      letter-spacing:.2px;
      color: var(--gold2);
      font-weight: 700;
    }

    .grid{
      padding:16px;
      display:grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap:14px;
    }

    @media (max-width: 1100px){
      .grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }
    @media (max-width: 820px){
      .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
    @media (max-width: 520px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      display:block;
      text-decoration:none;
      color:inherit;
      background: rgba(2,6,23,.35);
      border:1px solid rgba(255,255,255,.08);
      border-radius:18px;
      overflow:hidden;
      box-shadow: 0 18px 42px rgba(0,0,0,.40);
      transition: transform .15s ease, border-color .15s ease, box-shadow .15s ease;
      cursor:pointer;
      position:relative;
    }
    .card:hover{
      transform: translateY(-2px);
      border-color: rgba(212,175,55,.28);
      box-shadow: 0 0 0 1px rgba(212,175,55,.12), 0 26px 60px rgba(0,0,0,.55);
    }

    .imgbox{
      position:relative;
      border-bottom:1px solid rgba(255,255,255,.07);
      background: rgba(0,0,0,.18);
      aspect-ratio: 3 / 4;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:10px;
    }
    .imgbox img{
      width:100%;
      height:100%;
      object-fit: contain;
      border-radius:12px;
      background: rgba(255,255,255,.02);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
    }

    .badge{
      position:absolute;
      top:10px;
      left:10px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      font-weight:700;
      background: rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.10);
      color: var(--gold2);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      max-width: calc(100% - 20px);
      overflow:hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .badge .locksvg{
      width:14px;
      height:14px;
      display:none;
      flex:0 0 auto;
      opacity:.95;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.35));
    }

    .card.is-locked .badge{
      border-color: rgba(212,175,55,.18);
    }
    .card.is-locked .badge .locksvg{
      display:inline-block;
    }

    .meta{
      padding:12px 12px 14px;
      min-height: 70px;
    }
    .meta h3{
      margin:0 0 6px 0;
      font-size:14px;
      line-height:1.25;
    }
    .meta p{
      margin:0;
      font-size:12px;
      color:var(--muted);
      line-height:1.35;
    }

    /* Zugang / Passwortblock */
    .access{
      padding:16px;
      display:flex;
      gap:14px;
      flex-wrap:wrap;
      align-items:flex-start;
      justify-content:space-between;
    }
    .access-left{
      flex: 1 1 420px;
      min-width: 280px;
    }
    .access-title{
      margin:0 0 6px 0;
      color: var(--gold2);
      font-weight: 900;
      letter-spacing:.2px;
      font-size: 15px;
    }
    .access-sub{
      margin:0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.55;
    }
    .access-right{
      flex: 0 0 420px;
      max-width: 100%;
      min-width: 280px;
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.08);
      border-radius:16px;
      padding:12px;
      box-shadow: 0 14px 34px rgba(0,0,0,.30);
    }
    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .input{
      flex: 1 1 220px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.25);
      color: var(--text);
      border-radius:12px;
      padding:10px 12px;
      font-weight:700;
      outline:none;
    }
    .btn{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.28);
      color: var(--text);
      border-radius:12px;
      padding:10px 12px;
      font-weight:900;
      letter-spacing:.2px;
      cursor:pointer;
      transition: transform .15s ease, border-color .15s ease, box-shadow .15s ease;
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
      user-select:none;
    }
    .btn:hover{
      transform: translateY(-1px);
      border-color: rgba(212,175,55,.35);
      box-shadow: 0 0 0 1px rgba(212,175,55,.12), 0 18px 40px rgba(0,0,0,.45);
      color: var(--gold2);
    }
    .status{
      margin-top:10px;
      font-size:12px;
      color: var(--muted);
      line-height: 1.45;
    }
    .status strong{
      color: var(--gold2);
    }

    /* Lightbox */
    .lb{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.72);
      z-index:9999;
      padding:16px;
    }
    .lb.open{ display:flex; }
    .lb-inner{
      width:min(980px, 100%);
      max-height: min(92vh, 100%);
      background: rgba(2,6,23,.85);
      border:1px solid rgba(255,255,255,.10);
      border-radius:18px;
      box-shadow: 0 32px 80px rgba(0,0,0,.65);
      overflow:hidden;
    }
    .lb-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:10px 12px;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .lb-title{
      font-size:13px;
      color: var(--muted);
      overflow:hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .lb-close{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.35);
      color: var(--text);
      border-radius:12px;
      padding:8px 10px;
      font-weight:700;
      cursor:pointer;
    }
    .lb-body{
      padding:12px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.10);
    }
    .lb-body img{
      width:100%;
      height:auto;
      max-height: 78vh;
      object-fit: contain;
      border-radius:12px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
    }

    /* Passwort-Modal */
    .pw{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.72);
      z-index:10000;
      padding:16px;
    }
    .pw.open{ display:flex; }
    .pw-card{
      width:min(640px, 100%);
      background: rgba(2,6,23,.92);
      border:1px solid rgba(255,255,255,.10);
      border-radius:18px;
      box-shadow: 0 32px 80px rgba(0,0,0,.65);
      overflow:hidden;
    }
    .pw-head{
      padding:12px 14px;
      border-bottom:1px solid rgba(255,255,255,.08);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .pw-title{
      margin:0;
      font-size:14px;
      color: var(--gold2);
      font-weight:900;
      letter-spacing:.2px;
    }
    .pw-body{
      padding:14px;
    }
    .pw-hint{
      margin:0 0 10px 0;
      color: var(--muted);
      font-size:13px;
      line-height:1.55;
    }
    .pw-err{
      margin-top:10px;
      color:#ffb4b4;
      font-size:12px;
      display:none;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="hero">
      <h1>Die Rückeroberung der eigenen Souveränität</h1>
      <p class="sub">Buchübersicht: Cover, Inhaltsverzeichnis, Kapitel 1–22 (inkl. Bonus) – als anklickbare Galerie.</p>
    </div>

    <div class="section" id="sec-start">
      <div class="section-head">
        <h2 class="section-title">Buchstart</h2>
      </div>
      <div class="grid" id="grid-start"></div>
    </div>

    <!-- Passwort / Zugang (zwischen Buchstart und Kapiteln) -->
    <div class="section" id="sec-access">
      <div class="section-head">
        <h2 class="section-title">Zugang zum Buchinhalt</h2>
      </div>
      <div class="access">
        <div class="access-left">
          <div class="access-title">Kapitel freischalten</div>
          <p class="access-sub">
            Der Buchstart ist frei (Leseprobe/Vorwort). Ab Kapitel 1 ist der Zugriff gesperrt, bis das Passwort eingegeben wurde.
            Nach einmaliger Eingabe sind alle Kapitel bis zum Buchende direkt freigeschaltet.
          </p>
        </div>

        <div class="access-right">
          <div class="row">
            <input class="input" id="bookPw" type="password" placeholder="Passwort eingeben…" autocomplete="current-password" />
            <button class="btn" id="btnUnlock" type="button">Freischalten</button>
            <button class="btn" id="btnLock" type="button" style="display:none;">Sperren</button>
          </div>
          <div class="status" id="accessStatus">
            Status: <strong>Gesperrt</strong>
          </div>
        </div>
      </div>
    </div>

    <div class="section" id="sec-chapters">
      <div class="section-head">
        <h2 class="section-title">Kapitel 1–18</h2>
      </div>
      <div class="grid" id="grid-chapters"></div>
    </div>

    <div class="section" id="sec-bonus">
      <div class="section-head">
        <h2 class="section-title">Bonus 19–22</h2>
      </div>
      <div class="grid" id="grid-bonus"></div>
    </div>

    <div class="section" id="sec-end">
      <div class="section-head">
        <h2 class="section-title">Buchende</h2>
      </div>
      <div class="grid" id="grid-end"></div>
    </div>
  </div>

  <!-- Lightbox -->
  <div class="lb" id="lb" aria-hidden="true">
    <div class="lb-inner" role="dialog" aria-modal="true" aria-label="Bildvorschau">
      <div class="lb-top">
        <div class="lb-title" id="lbTitle">Vorschau</div>
        <button class="lb-close" id="lbClose" type="button">Schließen</button>
      </div>
      <div class="lb-body">
        <img id="lbImg" alt="Vorschau" />
      </div>
    </div>
  </div>

  <!-- Passwort-Modal (wenn gesperrtes Kapitel angeklickt wird) -->
  <div class="pw" id="pwModal" aria-hidden="true">
    <div class="pw-card" role="dialog" aria-modal="true" aria-label="Passwort erforderlich">
      <div class="pw-head">
        <p class="pw-title">Passwort erforderlich</p>
        <button class="lb-close" id="pwClose" type="button">Schließen</button>
      </div>
      <div class="pw-body">
        <p class="pw-hint">Dieses Kapitel ist gesperrt. Bitte Passwort eingeben, um den Buchinhalt freizuschalten.</p>
        <div class="row">
          <input class="input" id="pwModalInput" type="password" placeholder="Passwort eingeben…" autocomplete="current-password" />
          <button class="btn" id="pwModalUnlock" type="button">Freischalten</button>
        </div>
        <div class="pw-err" id="pwErr">Passwort falsch.</div>
      </div>
    </div>
  </div>

  <script>
    // Basis-Pfade (relativ zu: /lp-anfang/pages/buch/index.html)
    const IMG_BASE = "../../library/buch/images/";
    const PAGE_BASE = "./";

    // Passwort (Bezahlschranke später)
    const BOOK_PASSWORD = "FSA-BUCH-2026";
    const ACCESS_KEY = "fsa_book_access";

    // Lightbox
    const lb = document.getElementById("lb");
    const lbImg = document.getElementById("lbImg");
    const lbTitle = document.getElementById("lbTitle");
    const lbClose = document.getElementById("lbClose");

    function openLB(title, imgFile){
      lbTitle.textContent = title;
      lbImg.src = IMG_BASE + imgFile;
      lb.classList.add("open");
      lb.setAttribute("aria-hidden", "false");
    }
    function closeLB(){
      lb.classList.remove("open");
      lb.setAttribute("aria-hidden", "true");
      lbImg.src = "";
    }
    lbClose.addEventListener("click", closeLB);
    lb.addEventListener("click", (e) => { if(e.target === lb) closeLB(); });
    document.addEventListener("keydown", (e) => { if(e.key === "Escape") { closeLB(); closePWModal(); } });

    // Access UI
    const bookPw = document.getElementById("bookPw");
    const btnUnlock = document.getElementById("btnUnlock");
    const btnLock = document.getElementById("btnLock");
    const accessStatus = document.getElementById("accessStatus");

    function isUnlocked(){
      return localStorage.getItem(ACCESS_KEY) === "1";
    }
    function setUnlocked(val){
      localStorage.setItem(ACCESS_KEY, val ? "1" : "0");
      updateAccessUI();
      updateLockedBadges();
    }
    function updateAccessUI(){
      const ok = isUnlocked();
      accessStatus.innerHTML = ok ? 'Status: <strong>Freigeschaltet</strong>' : 'Status: <strong>Gesperrt</strong>';
      btnLock.style.display = ok ? "inline-flex" : "none";
    }

    btnUnlock.addEventListener("click", () => {
      const val = (bookPw.value || "").trim();
      if(val && val === BOOK_PASSWORD){
        setUnlocked(true);
        bookPw.value = "";
      }else{
        setUnlocked(false);
      }
    });

    btnLock.addEventListener("click", () => {
      setUnlocked(false);
    });

    bookPw.addEventListener("keydown", (e) => {
      if(e.key === "Enter") btnUnlock.click();
    });

    // Passwort-Modal (bei Klick auf gesperrte Inhalte)
    const pwModal = document.getElementById("pwModal");
    const pwClose = document.getElementById("pwClose");
    const pwModalInput = document.getElementById("pwModalInput");
    const pwModalUnlock = document.getElementById("pwModalUnlock");
    const pwErr = document.getElementById("pwErr");

    let pendingHref = null;   // wohin nach Unlock navigieren
    let pendingImg = null;    // oder Lightbox-Bild öffnen
    let pendingTitle = null;

    function openPWModal(){
      pwErr.style.display = "none";
      pwModal.classList.add("open");
      pwModal.setAttribute("aria-hidden","false");
      pwModalInput.value = "";
      setTimeout(() => pwModalInput.focus(), 40);
    }
    function closePWModal(){
      pwModal.classList.remove("open");
      pwModal.setAttribute("aria-hidden","true");
      pwModalInput.value = "";
      pwErr.style.display = "none";
      pendingHref = null;
      pendingImg = null;
      pendingTitle = null;
    }
    pwClose.addEventListener("click", closePWModal);
    pwModal.addEventListener("click", (e) => { if(e.target === pwModal) closePWModal(); });

    function doUnlockFromModal(){
      const val = (pwModalInput.value || "").trim();
      if(val && val === BOOK_PASSWORD){
        setUnlocked(true);
        closePWModal();

        // nach Freischaltung: Aktion fortsetzen
        if(pendingHref){
          window.location.href = pendingHref;
        }else if(pendingImg){
          openLB(pendingTitle || "Vorschau", pendingImg);
        }
      }else{
        pwErr.style.display = "block";
      }
    }
    pwModalUnlock.addEventListener("click", doUnlockFromModal);
    pwModalInput.addEventListener("keydown", (e) => {
      if(e.key === "Enter") doUnlockFromModal();
    });

    function makeLockSVG(){
      const svg = document.createElementNS("http://www.w3.org/2000/svg","svg");
      svg.setAttribute("class","locksvg");
      svg.setAttribute("viewBox","0 0 24 24");
      svg.setAttribute("aria-hidden","true");
      const p = document.createElementNS("http://www.w3.org/2000/svg","path");
      p.setAttribute("fill","currentColor");
      p.setAttribute("d","M17 9h-1V7a4 4 0 0 0-8 0v2H7a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2Zm-7-2a2 2 0 0 1 4 0v2h-4V7Zm7 12H7v-8h10v8Z");
      svg.appendChild(p);
      return svg;
    }

    function makeCard(item){
      const el = document.createElement(item.type === "page" ? "a" : "div");
      el.className = "card";

      // Lock state
      if(item.locked){
        el.classList.add("is-locked");
      }

      if(item.type === "page"){
        el.href = item.href;

        el.addEventListener("click", (e) => {
          if(item.locked && !isUnlocked()){
            e.preventDefault();
            pendingHref = item.href;
            openPWModal();
          }
        });

      } else {
        el.addEventListener("click", () => {
          if(item.locked && !isUnlocked()){
            pendingImg = item.img;
            pendingTitle = item.title;
            openPWModal();
            return;
          }
          openLB(item.title, item.img);
        });
      }

      const imgbox = document.createElement("div");
      imgbox.className = "imgbox";

      const badge = document.createElement("div");
      badge.className = "badge";
      badge.textContent = item.badge || "";

      // lock icon in badge (only visible when locked)
      badge.appendChild(makeLockSVG());

      const img = document.createElement("img");
      img.src = IMG_BASE + item.img;
      img.alt = item.alt || item.title;
      img.loading = "lazy";
      img.decoding = "async";

      imgbox.appendChild(badge);
      imgbox.appendChild(img);

      const meta = document.createElement("div");
      meta.className = "meta";

      const h3 = document.createElement("h3");
      h3.textContent = item.title;

      const p = document.createElement("p");
      p.textContent = item.sub || "";

      meta.appendChild(h3);
      meta.appendChild(p);

      el.appendChild(imgbox);
      el.appendChild(meta);

      return el;
    }

    function render(gridId, items){
      const grid = document.getElementById(gridId);
      grid.innerHTML = "";
      items.forEach(it => grid.appendChild(makeCard(it)));
    }

    function updateLockedBadges(){
      // wenn freigeschaltet: locked class entfernen (optisch), sonst wieder setzen
      const unlocked = isUnlocked();
      document.querySelectorAll(".card").forEach(card => {
        if(card.dataset.locked === "1"){
          card.classList.toggle("is-locked", !unlocked);
        }
      });
    }

    // Buchstart (frei)
    const startItems = [
      { type:"image", badge:"Buch", title:"Buch – Cover (Front)", sub:"", img:"buch-cover-front-de.jpg", locked:false },
      { type:"image", badge:"Buch", title:"Buch – Inhaltsverzeichnis", sub:"", img:"buch-inhaltsverzeichnis-de.jpg", locked:false },
      { type:"image", badge:"Buch", title:"Buch – Vorwort (Seite 1)", sub:"", img:"buch-vorwort-01-de.jpg", locked:false },
      { type:"image", badge:"Buch", title:"Buch – Vorwort (Seite 2)", sub:"", img:"buch-vorwort-02-de.jpg", locked:false }
    ];

    // Ab Kapitel 1: gesperrt bis Passwort
    const chapterItems = [
      { type:"page", badge:"Kapitel 01", title:"Kapitel 1: Der unsichtbare Vertrag", img:"kapitel-01-der-unsichtbare-vertrag-de.jpg", href: PAGE_BASE+"kapitel-01-der-unsichtbare-vertrag.html", locked:true },
      { type:"page", badge:"Kapitel 02", title:"Kapitel 2: Abhängigkeit als Design", img:"kapitel-02-abhaengigkeit-als-design-de.jpg", href: PAGE_BASE+"kapitel-02-abhaengigkeit-als-design.html", locked:true },
      { type:"page", badge:"Kapitel 03", title:"Kapitel 3: Fremdbestimmung – die leise Form der Kontrolle", img:"kapitel-03-fremdbestimmung-die-leise-form-der-kontrolle-de.jpg", href: PAGE_BASE+"kapitel-03-fremdbestimmung-die-leise-form-der-kontrolle.html", locked:true },
      { type:"page", badge:"Kapitel 04", title:"Kapitel 4: Zensur, Framing und die schmale Debatte", img:"kapitel-04-zensur-framing-und-die-schmale-debatte-de.jpg", href: PAGE_BASE+"kapitel-04-zensur-framing-und-die-schmale-debatte.html", locked:true },
      { type:"page", badge:"Kapitel 05", title:"Kapitel 5: Die unsichtbaren Schalter", img:"kapitel-05-die-unsichtbaren-schalter-de.jpg", href: PAGE_BASE+"kapitel-05-die-unsichtbaren-schalter.html", locked:true },
      { type:"page", badge:"Kapitel 06", title:"Kapitel 6: Souveränität ist nicht Egoismus", img:"kapitel-06-souveraenitaet-ist-nicht-egoismus-de.jpg", href: PAGE_BASE+"kapitel-06-souveraenitaet-ist-nicht-egoismus.html", locked:true },
      { type:"page", badge:"Kapitel 07", title:"Kapitel 7: Freiheit braucht Eigentum", img:"kapitel-07-freiheit-braucht-eigentum-de.jpg", href: PAGE_BASE+"kapitel-07-freiheit-braucht-eigentum.html", locked:true },
      { type:"page", badge:"Kapitel 08", title:"Kapitel 8: Korruption und Ausbeutung sind oft Nebenprodukte von Monopolen", img:"kapitel-08-korruption-und-ausbeutung-sind-oft-nebenprodukte-von-monopolen-de.jpg", href: PAGE_BASE+"kapitel-08-korruption-und-ausbeutung-sind-oft-nebenprodukte-von-monopolen.html", locked:true },
      { type:"page", badge:"Kapitel 09", title:"Kapitel 9: Der Hebel", img:"kapitel-09-der-hebel-de.jpg", href: PAGE_BASE+"kapitel-09-der-hebel.html", locked:true },
      { type:"page", badge:"Kapitel 10", title:"Kapitel 10: Dezentralität als Anti-Willkür", img:"kapitel-10-dezentralitaet-als-anti-willkuer-de.jpg", href: PAGE_BASE+"kapitel-10-dezentralitaet-als-anti-willkuer.html", locked:true },
      { type:"page", badge:"Kapitel 11", title:"Kapitel 11: Peer-to-Peer ist eine Kultur", img:"kapitel-11-peer-to-peer-ist-eine-kultur-de.jpg", href: PAGE_BASE+"kapitel-11-peer-to-peer-ist-eine-kultur.html", locked:true },
      { type:"page", badge:"Kapitel 12", title:"Kapitel 12: Vertrauen neu denken", img:"kapitel-12-vertrauen-neu-denken-de.jpg", href: PAGE_BASE+"kapitel-12-vertrauen-neu-denken.html", locked:true },
      { type:"page", badge:"Kapitel 13", title:"Kapitel 13: Risiken, Schattenseiten und Gegenargumente", img:"kapitel-13-risiken-schattenseiten-und-gegenargumente-de.jpg", href: PAGE_BASE+"kapitel-13-risiken-schattenseiten-und-gegenargumente.html", locked:true },
      { type:"page", badge:"Kapitel 14", title:"Kapitel 14: Das Souveränitäts-Protokoll", img:"kapitel-14-das-souveraenitaets-protokoll-de.jpg", href: PAGE_BASE+"kapitel-14-das-souveraenitaets-protokoll.html", locked:true },
      { type:"page", badge:"Kapitel 15", title:"Kapitel 15: Das finanzielle Fundament", img:"kapitel-15-das-finanzielle-fundament-de.jpg", href: PAGE_BASE+"kapitel-15-das-finanzielle-fundament.html", locked:true },
      { type:"page", badge:"Kapitel 16", title:"Kapitel 16: Digitale Selbstverteidigung", img:"kapitel-16-digitale-selbstverteidigung-de.jpg", href: PAGE_BASE+"kapitel-16-digitale-selbstverteidigung.html", locked:true },
      { type:"page", badge:"Kapitel 17", title:"Kapitel 17: Lokale Resilienz", img:"kapitel-17-lokale-resilienz-de.jpg", href: PAGE_BASE+"kapitel-17-lokale-resilienz.html", locked:true },
      { type:"page", badge:"Kapitel 18", title:"Kapitel 18: Die Zukunft wird direkter", img:"kapitel-18-die-zukunft-wird-direkter-de.jpg", href: PAGE_BASE+"kapitel-18-die-zukunft-wird-direkter.html", locked:true },
      { type:"image", badge:"Trenner", title:"Buch – Trenner (Bonus)", img:"buch-trenner-bonus-de.jpg", locked:true }
    ];

    // Bonus 19–22 (Bonus 1–4) -> jetzt einheitlich
    const bonusItems = [
      { type:"page", badge:"Bonus 1", title:"Kapitel 19 (Bonus 1): Unterwanderung – wenn Demokratie zur Fassade wird", img:"kapitel-19-bonus-unterwanderung-wenn-demokratie-zur-fassade-wird-de.jpg", href: PAGE_BASE+"kapitel-19-bonus-unterwanderung-wenn-demokratie-zur-fassade-wird.html", locked:true },
      { type:"page", badge:"Bonus 2", title:"Kapitel 20 (Bonus 2): Rechtsrahmen hinterfragen – Völkerrecht, Menschenrechte, Handelsrecht und die Schattenzone der Zuständigkeiten", img:"kapitel-20-bonus-rechtsrahmen-hinterfragen-voelkerrecht-menschenrechte-handelsrecht-und-die-schattenzone-der-zustaendigkeiten-de.jpg", href: PAGE_BASE+"kapitel-20-bonus-rechtsrahmen-hinterfragen-schattenzone-der-zustaendigkeiten.html", locked:true },
      { type:"page", badge:"Bonus 3", title:"Kapitel 21 (Bonus 3): Die Rückeroberung der Kontrolle", img:"kapitel-21-die-rueckeroberung-der-kontrolle-de.jpg", href: PAGE_BASE+"kapitel-21-die-rueckeroberung-der-kontrolle.html", locked:true },
      { type:"page", badge:"Bonus 4", title:"Kapitel 22 (Bonus 4): Der unsichtbare Druck – Es allen recht machen wollen", img:"kapitel-22-der-unsichtbare-druck-es-allen-recht-machen-wollen-de.jpg", href: PAGE_BASE+"kapitel-22-der-unsichtbare-druck-es-allen-recht-machen-wollen.html", locked:true }
    ];

    // Buchende (gesperrt)
    const endItems = [
      { type:"image", badge:"Buch", title:"Buch – Cover (Back)", sub:"", img:"buch-cover-back-de.jpg", locked:true }
    ];

    // Render
    render("grid-start", startItems);
    render("grid-chapters", chapterItems);
    render("grid-bonus", bonusItems);
    render("grid-end", endItems);

    // Mark locked cards for UI toggling
    document.querySelectorAll(".card").forEach((card, idx) => {
      // wir setzen das Flag anhand der Arrays (sicher)
      // (Quick: wenn card aktuell is-locked hatte, dann dataset.locked=1)
      if(card.classList.contains("is-locked")) card.dataset.locked = "1";
    });

    // Initial UI
    updateAccessUI();
    updateLockedBadges();

    // Beim Laden: wenn schon freigeschaltet, Button "Sperren" zeigen
    if(isUnlocked()){
      btnLock.style.display = "inline-flex";
    }
  </script>
</body>
</html>
