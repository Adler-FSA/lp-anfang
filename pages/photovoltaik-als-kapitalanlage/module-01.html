<!doctype html>
<!--
  FSA • Premium Kurs (Workbook)
  Kurs: Photovoltaik als Kapitalanlage
  Modul 01: Der Markt und das Energiesystem

  GitHub-Pfad: lp-anfang/pages/photovoltaik-als-kapitalanlage/module-01.html
  Commit-Message: photovoltaik-als-kapitalanlage – Modul 01 (Markt & Energiesystem) Premium (DE/EN), einfache Eingaben, Glossar-Boxen, Markt-SVG, Print, LocalStorage
  Testlink (nocache): https://adler-fsa.github.io/lp-anfang/pages/photovoltaik-als-kapitalanlage/module-01.html?nocache=__TS__
-->
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modul 01 – Markt & Energiesystem • Photovoltaik als Kapitalanlage</title>
  <meta name="description" content="Modul 01 (DE/EN): Markt und Energiesystem verstehen. Premium Workbook mit Glossar-Boxen, Markt-SVG, einfachen Eingaben, Print und LocalStorage." />
  <meta name="robots" content="index,follow" />

  <style>
    :root{
      --bg:#ffffff;
      --ink:#0f1114;
      --muted:#47505f;

      --line: rgba(15,17,20,.12);
      --line2: rgba(15,17,20,.18);

      --gold:#c8a63a;
      --gold2:#e0c466;

      --accent:#0b7d5c;
      --accent2:#1aa57a;

      --danger:#c52646;
      --dangerSoft: rgba(197,38,70,.12);

      --shadow: 0 14px 34px rgba(0,0,0,.10);
      --shadow2: 0 26px 70px rgba(0,0,0,.12);

      --radius:18px;
      --max: 1140px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 720px at 10% 8%, rgba(200,166,58,.18), transparent 58%),
        radial-gradient(1050px 720px at 88% 14%, rgba(11,125,92,.14), transparent 58%),
        radial-gradient(920px 640px at 52% 96%, rgba(197,38,70,.10), transparent 60%),
        linear-gradient(180deg, #ffffff 0%, #fbfbfc 45%, #ffffff 100%);
      overflow-x:hidden;
    }

    .spark{
      position:fixed;
      inset:-30vh -30vw auto -30vw;
      height:60vh;
      pointer-events:none;
      z-index:0;
      filter: blur(18px);
      opacity:.55;
      background:
        radial-gradient(closest-side at 18% 35%, rgba(200,166,58,.30), transparent 65%),
        radial-gradient(closest-side at 68% 28%, rgba(11,125,92,.24), transparent 65%),
        radial-gradient(closest-side at 48% 85%, rgba(197,38,70,.16), transparent 70%);
      transform: translate3d(0,0,0);
      animation: floaty 10s ease-in-out infinite;
    }
    @keyframes floaty{
      0%{ transform: translate3d(0px, 0px, 0px) scale(1); }
      50%{ transform: translate3d(12px, 10px, 0px) scale(1.02); }
      100%{ transform: translate3d(0px, 0px, 0px) scale(1); }
    }
    @media (prefers-reduced-motion: reduce){
      .spark{ animation:none; }
      .lift:hover{ transform:none !important; }
    }

    .wrap{
      position:relative;
      z-index:1;
      max-width:var(--max);
      margin:0 auto;
      padding: 22px 18px 84px;
    }

    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-bottom:14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      padding: 10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.78));
      border-radius: 999px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .brand:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 180px at 12% 30%, rgba(200,166,58,.16), transparent 64%),
        radial-gradient(520px 180px at 84% 20%, rgba(11,125,92,.12), transparent 64%);
      pointer-events:none;
    }
    .brand > *{ position:relative; }
    .brand svg{ width:22px; height:22px; flex:0 0 auto; }
    .brand .t1{ font-weight:1000; letter-spacing:.2px; line-height:1.1; }
    .brand .t2{ font-size:12px; color:var(--muted); margin-top:2px; line-height:1.1; }

    .premiumTag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      margin-top:6px;
      font-size:11px;
      font-weight:1000;
      letter-spacing:.35px;
      padding: 4px 8px;
      border-radius: 999px;
      border:1px solid rgba(200,166,58,.35);
      background: rgba(200,166,58,.10);
      color: rgba(15,17,20,.86);
      width: fit-content;
    }
    .premiumTag .dot{
      width:8px; height:8px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 10px rgba(200,166,58,.35);
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .lang{
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.72));
      border-radius: 12px;
      box-shadow: var(--shadow);
    }
    .lang label{
      font-size:12px;
      color:var(--muted);
      font-weight:900;
    }
    .lang select{
      background: rgba(255,255,255,.92);
      border:1px solid rgba(15,17,20,.18);
      color: var(--ink);
      border-radius:10px;
      padding:8px 10px;
      font-weight:1000;
      outline:none;
    }

    .btn{
      appearance:none;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.76));
      color:var(--ink);
      padding:10px 12px;
      border-radius: 12px;
      font-weight:1000;
      cursor:pointer;
      box-shadow: var(--shadow);
      display:inline-flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      user-select:none;
      transition: transform .10s ease, border-color .14s ease, box-shadow .14s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(200,166,58,.45); box-shadow: var(--shadow2); }
    .btn:active{ transform: translateY(0px); }
    .btn .dot{
      width:10px; height:10px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 12px rgba(200,166,58,.45);
    }
    .btn.secondary .dot{
      background: linear-gradient(180deg, var(--accent2), var(--accent));
      box-shadow: 0 0 12px rgba(11,125,92,.38);
    }
    .btn.danger .dot{
      background: linear-gradient(180deg, rgba(197,38,70,.9), rgba(197,38,70,1));
      box-shadow: 0 0 12px rgba(197,38,70,.30);
    }

    .hero{
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 18px 18px 16px;
      margin-bottom: 14px;
      position:relative;
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.82));
    }
    .hero:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(840px 280px at 14% 16%, rgba(200,166,58,.20), transparent 65%),
        radial-gradient(740px 260px at 86% 18%, rgba(11,125,92,.14), transparent 65%),
        radial-gradient(720px 260px at 40% 98%, rgba(197,38,70,.10), transparent 70%);
      pointer-events:none;
    }
    .hero:after{
      content:"";
      position:absolute;
      inset:0;
      border-radius: var(--radius);
      pointer-events:none;
      background: linear-gradient(90deg, rgba(200,166,58,.22), transparent 18%, transparent 82%, rgba(200,166,58,.18));
      mix-blend-mode: multiply;
      opacity:.45;
    }
    .hero > *{ position:relative; }

    h1{
      margin:0 0 10px;
      font-size: 28px;
      letter-spacing:.2px;
      line-height:1.2;
    }
    .sub{
      margin:0;
      color: var(--muted);
      line-height:1.7;
      font-size:14.8px;
      max-width: 98ch;
    }

    .card{
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px 16px 14px;
      margin-top: 12px;
      position:relative;
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.84));
    }
    .card:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(620px 180px at 16% 8%, rgba(200,166,58,.12), transparent 65%),
        radial-gradient(620px 180px at 84% 12%, rgba(11,125,92,.10), transparent 65%);
      pointer-events:none;
      opacity:.75;
    }
    .card > *{ position:relative; }

    .card h2{
      margin:0 0 10px;
      font-size:16px;
      letter-spacing:.2px;
    }
    .card p{
      margin:0 0 10px;
      color: var(--muted);
      font-size:14.2px;
      line-height:1.78;
    }

    .notice{
      border:1px solid rgba(200,166,58,.38);
      background: rgba(200,166,58,.10);
      border-radius: 14px;
      padding: 12px 12px;
      color: rgba(15,17,20,.92);
      line-height:1.75;
      font-size:13.6px;
      margin-top:12px;
      position:relative;
      overflow:hidden;
    }
    .notice:before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(520px 160px at 18% 50%, rgba(200,166,58,.18), transparent 70%);
      pointer-events:none;
    }
    .notice > *{ position:relative; }
    .notice strong{ color: #7a5c00; }

    .divider{
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(15,17,20,.16), transparent);
      margin:14px 0 4px;
    }

    /* Glossar (aufklappbar) */
    .glossWrap{ margin-top:10px; }
    details.gloss{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
      padding: 10px 12px;
      margin: 10px 0;
      overflow:hidden;
    }
    details.gloss[open]{
      border-color: rgba(11,125,92,.22);
      box-shadow: 0 18px 40px rgba(0,0,0,.08);
    }
    details.gloss summary{
      cursor:pointer;
      list-style:none;
      font-weight:1000;
      color: rgba(15,17,20,.92);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      outline:none;
    }
    details.gloss summary::-webkit-details-marker{ display:none; }
    .glossBadge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:11px;
      font-weight:1000;
      padding: 4px 8px;
      border-radius:999px;
      border:1px solid rgba(200,166,58,.30);
      background: rgba(200,166,58,.10);
      color: rgba(15,17,20,.82);
      flex:0 0 auto;
    }
    .glossBadge .dot{
      width:8px; height:8px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 10px rgba(200,166,58,.28);
    }
    .glossBody{
      margin-top:10px;
      color: var(--muted);
      line-height:1.75;
      font-size: 13.8px;
    }

    /* Inputs */
    .form{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:10px;
    }
    .field{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
      padding: 12px 12px;
    }
    .field .lbl{
      font-weight:1000;
      font-size:13px;
      margin-bottom:6px;
      color: rgba(15,17,20,.92);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .hint{
      font-weight:900;
      font-size:12px;
      color: rgba(71,80,95,.92);
      background: rgba(11,125,92,.08);
      border:1px solid rgba(11,125,92,.18);
      border-radius: 999px;
      padding: 4px 8px;
    }
    input[type="text"], input[type="number"], textarea, select{
      width:100%;
      border:1px solid rgba(15,17,20,.18);
      border-radius: 12px;
      padding: 10px 10px;
      font: inherit;
      background: rgba(255,255,255,.96);
      color: var(--ink);
      outline:none;
    }
    textarea{ min-height: 100px; resize: vertical; line-height:1.6; }
    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .row > .field{ flex:1 1 280px; }

    .chips{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:8px;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      border:1px solid rgba(15,17,20,.12);
      background: rgba(255,255,255,.72);
      border-radius: 999px;
      padding: 8px 10px;
      box-shadow: 0 10px 20px rgba(0,0,0,.05);
    }
    .chip input{ width:18px; height:18px; }
    .chip span{
      font-weight:900;
      font-size:13px;
      color: rgba(15,17,20,.90);
    }

    /* Market SVG box */
    .viz{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 16px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 12px 30px rgba(0,0,0,.06);
      padding: 12px 12px;
      margin-top: 10px;
      overflow:hidden;
    }
    .vizTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .vizTop .title{
      font-weight:1100;
      color: rgba(15,17,20,.94);
    }
    .vizTop .note{
      font-size:12px;
      font-weight:900;
      color: rgba(71,80,95,.92);
      background: rgba(200,166,58,.10);
      border:1px solid rgba(200,166,58,.22);
      border-radius: 999px;
      padding: 4px 8px;
      width: fit-content;
    }
    .viz svg{ width:100%; height:auto; display:block; }

    .footer{
      margin-top: 16px;
      color: rgba(71,80,95,.85);
      font-size: 12px;
      line-height:1.6;
      text-align:center;
    }

    /* Print */
    @media print{
      body{ background:#fff !important; color:#000 !important; }
      .spark, .topbar, .actions, .lang, .btn, .footer{ display:none !important; }
      .wrap{ max-width: 820px; padding: 0; }
      .hero, .card, .field, .viz, details.gloss{
        box-shadow:none !important;
        background:#fff !important;
        border:1px solid #bbb !important;
        color:#000 !important;
      }
      .sub, .card p, .glossBody{ color:#111 !important; }
      .notice{ border:1px solid #999 !important; background:#f7f2df !important; color:#000 !important; }
      a{ color:#000 !important; text-decoration:none !important; }
      details.gloss{ break-inside: avoid; }
      .vizTop .note{ border:1px solid #bbb !important; background:#f2f2f2 !important; color:#000 !important; }
      .hint{ border:1px solid #bbb !important; background:#f2f2f2 !important; color:#000 !important; }
    }
  </style>
</head>

<body>
  <div class="spark" aria-hidden="true"></div>

  <div class="wrap">
    <div class="topbar">
      <div class="brand" aria-label="Kurs">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <defs>
            <linearGradient id="gSunM1" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#c8a63a"/>
              <stop offset="1" stop-color="#e0c466"/>
            </linearGradient>
          </defs>
          <circle cx="12" cy="12" r="5.2" fill="url(#gSunM1)"></circle>
          <g fill="none" stroke="rgba(15,17,20,.75)" stroke-width="1.2" stroke-linecap="round">
            <path d="M12 2.2v2.2M12 19.6v2.2M2.2 12h2.2M19.6 12h2.2"/>
            <path d="M4.6 4.6l1.55 1.55M17.85 17.85l1.55 1.55M19.4 4.6l-1.55 1.55M6.15 17.85L4.6 19.4"/>
          </g>
        </svg>
        <div>
          <div class="t1" data-i18n="brand_title">Premium Kurs</div>
          <div class="t2" data-i18n="brand_sub">Photovoltaik als Kapitalanlage</div>
          <div class="premiumTag" aria-hidden="true">
            <span class="dot"></span>
            <span data-i18n="premium_tag">Modul 01 • Hauptkurs</span>
          </div>
        </div>
      </div>

      <div class="actions">
        <a class="btn" id="toIndex" href="index.html" data-nocache="1" title="Index">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_index">Index</span>
        </a>

        <div class="lang" title="Sprache / Language">
          <label for="langSel" data-i18n="lang_label">Sprache</label>
          <select id="langSel" aria-label="Sprache wählen">
            <option value="de">DE</option>
            <option value="en">EN</option>
          </select>
        </div>

        <button class="btn secondary" id="printBtn" type="button" title="Drucken / Print">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_print">Drucken</span>
        </button>

        <button class="btn danger" id="resetBtn" type="button" title="Projektakte leeren">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_reset">Projektakte leeren</span>
        </button>
      </div>
    </div>

    <div class="hero">
      <h1 data-i18n="h1">Modul 01 – Der Markt und das Energiesystem</h1>
      <p class="sub" data-i18n="sub">
        Dieses Modul gibt dir den Überblick: Was passiert im Markt, wie „funktioniert“ Strom als Produkt – und warum Photovoltaik-Angebote immer in dieses Gesamtsystem eingebettet sind.
        Du musst kein Technik-Profi sein. Ziel ist: die richtigen Fragen stellen können.
      </p>
    </div>

    <div class="card">
      <h2 data-i18n="sec1_title">1) Vogelperspektive: Warum dieses Modul wichtig ist</h2>

      <p data-i18n="sec1_p1">
        Viele Angebote wirken einfach: „Anlage kaufen – Rendite kommt.“ In der Realität hängt die Qualität eines Projekts aber daran,
        ob Markt, Netz, Preislogik und Regeln verstanden werden. Wenn du diese Grundlogik kennst, erkennst du schneller,
        ob dir jemand seriös erklärt – oder nur verkauft.
      </p>

      <p data-i18n="sec1_p2">
        Wichtig: Du sollst hier nichts planen. Du sollst lernen, worauf du im Gespräch achten musst – und welche Begriffe du dir erklären lassen musst,
        damit du nicht im Blindflug unterschreibst.
      </p>

      <div class="notice">
        <strong data-i18n="notice_title">Wichtiger Hinweis:</strong>
        <span data-i18n="notice_text">Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieses Modul ist Bildung: Überblick, Verständnis, Fragenkatalog.</span>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec2_title">2) Markt-Logik in einfachen Worten</h2>

      <p data-i18n="sec2_p1">
        Strom ist kein „normales“ Produkt. Er muss genau dann verfügbar sein, wenn er gebraucht wird.
        Deshalb spielen <b data-i18n="term_supply">Angebot</b> und <b data-i18n="term_demand">Nachfrage</b> (zu jeder Stunde) eine größere Rolle als bei vielen anderen Märkten.
      </p>

      <p data-i18n="sec2_p2">
        Photovoltaik speist vor allem dann stark ein, wenn die Sonne scheint. Das ist gut – aber es bedeutet auch:
        Wenn sehr viele gleichzeitig einspeisen, kann der Marktpreis sinken oder das Netz muss steuern.
        Das ist der Grund, warum seriöse Anbieter nicht nur „Rendite“ versprechen, sondern erklären, wie ein Projekt mit solchen Situationen umgeht.
      </p>

      <p data-i18n="sec2_p3">
        Für dich als Einsteiger gilt: Immer nach dem „Warum“ fragen.
        Wenn dir jemand Begriffe nennt, die du nicht einordnen kannst, ist das kein Problem – aber du brauchst eine verständliche Erklärung.
      </p>

      <div class="glossWrap">
        <details class="gloss">
          <summary>
            <span data-i18n="g1_t">Begriff: Angebot & Nachfrage (im Strommarkt)</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g1_b">
            Im Strommarkt zählt nicht nur „wie viel“ produziert wird, sondern „wann“. Wenn zur gleichen Zeit sehr viel Strom da ist (z. B. mittags bei Sonne),
            kann der Preis sinken. Wenn wenig da ist (z. B. abends), steigt der Wert. Darum sind Ertragsprognosen, Preisannahmen und Netzregeln so wichtig.
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g2_t">Begriff: Einspeisung</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g2_b">
            Einspeisung bedeutet: Strom, den du nicht selbst nutzt, fließt ins öffentliche Netz. Je nach Modell bekommst du dafür eine Vergütung oder einen Marktpreis.
            Entscheidend ist: Welche Regel gilt in deinem Projekt – und welche Nachweise gibt es dafür?
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g3_t">Begriff: Abregelung (Curtailment)</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g3_b">
            Abregelung heißt: Die Anlage darf zeitweise weniger produzieren, weil Netz oder Regeln es verlangen. Das kann Ertrag mindern.
            Eine seriöse Kalkulation erklärt, ob und wie so etwas berücksichtigt wird (ohne Drama, aber transparent).
          </div>
        </details>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec3_title">3) Die große Systemkarte (einfaches Bild)</h2>
      <p data-i18n="sec3_p1">
        Dieses Bild ist eine vereinfachte Orientierung. Es zeigt die Stationen, über die im Gespräch typischerweise gesprochen wird.
        Du musst nichts davon „auswendig“ können – aber du sollst erkennen, an welcher Stelle eine Aussage hingehört.
      </p>

      <div class="viz">
        <div class="vizTop">
          <div class="title" data-i18n="viz1_title">Orientierung: PV im Energiesystem (Illustration)</div>
          <div class="note" data-i18n="viz_note">Beispielhafte Darstellung (keine Echt-Daten)</div>
        </div>

        <!-- Inline SVG: Systemkarte -->
        <svg viewBox="0 0 1200 360" role="img" aria-label="PV Systemkarte">
          <defs>
            <linearGradient id="gGoldBox" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="rgba(200,166,58,.35)"/>
              <stop offset="1" stop-color="rgba(200,166,58,.10)"/>
            </linearGradient>
            <linearGradient id="gAccBox" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="rgba(11,125,92,.22)"/>
              <stop offset="1" stop-color="rgba(11,125,92,.08)"/>
            </linearGradient>
            <filter id="shadowSvg" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="10" stdDeviation="10" flood-color="rgba(0,0,0,.10)" />
            </filter>
          </defs>

          <!-- background -->
          <rect x="20" y="24" width="1160" height="312" rx="18" fill="rgba(255,255,255,.92)" stroke="rgba(15,17,20,.14)" filter="url(#shadowSvg)"/>

          <!-- boxes -->
          <rect x="70" y="80" width="240" height="120" rx="16" fill="url(#gGoldBox)" stroke="rgba(200,166,58,.35)"/>
          <rect x="360" y="80" width="240" height="120" rx="16" fill="rgba(15,17,20,.05)" stroke="rgba(15,17,20,.18)"/>
          <rect x="650" y="80" width="240" height="120" rx="16" fill="url(#gAccBox)" stroke="rgba(11,125,92,.28)"/>
          <rect x="940" y="80" width="200" height="120" rx="16" fill="rgba(197,38,70,.08)" stroke="rgba(197,38,70,.22)"/>

          <!-- arrows -->
          <path d="M310 140H360" stroke="rgba(15,17,20,.45)" stroke-width="4" stroke-linecap="round"/>
          <path d="M600 140H650" stroke="rgba(15,17,20,.45)" stroke-width="4" stroke-linecap="round"/>
          <path d="M890 140H940" stroke="rgba(15,17,20,.45)" stroke-width="4" stroke-linecap="round"/>
          <path d="M350 140l-18-10v20z" fill="rgba(15,17,20,.45)"/>
          <path d="M640 140l-18-10v20z" fill="rgba(15,17,20,.45)"/>
          <path d="M930 140l-18-10v20z" fill="rgba(15,17,20,.45)"/>

          <!-- titles -->
          <text x="92" y="112" font-size="18" font-weight="900" fill="rgba(15,17,20,.92)">PV-Anlage</text>
          <text x="92" y="138" font-size="13.5" font-weight="700" fill="rgba(71,80,95,.92)">Erzeugt Strom</text>
          <text x="92" y="160" font-size="13.5" font-weight="700" fill="rgba(71,80,95,.92)">Prognose / Ertrag</text>

          <text x="382" y="112" font-size="18" font-weight="900" fill="rgba(15,17,20,.92)">Haus / Betrieb</text>
          <text x="382" y="138" font-size="13.5" font-weight="700" fill="rgba(71,80,95,.92)">Eigenverbrauch</text>
          <text x="382" y="160" font-size="13.5" font-weight="700" fill="rgba(71,80,95,.92)">Ersparnis-Logik</text>

          <text x="672" y="112" font-size="18" font-weight="900" fill="rgba(15,17,20,.92)">Netz</text>
          <text x="672" y="138" font-size="13.5" font-weight="700" fill="rgba(71,80,95,.92)">Einspeisung</text>
          <text x="672" y="160" font-size="13.5" font-weight="700" fill="rgba(71,80,95,.92)">Regeln / Prozesse</text>

          <text x="962" y="112" font-size="18" font-weight="900" fill="rgba(15,17,20,.92)">Geldfluss</text>
          <text x="962" y="138" font-size="13.5" font-weight="700" fill="rgba(71,80,95,.92)">Vergütung</text>
          <text x="962" y="160" font-size="13.5" font-weight="700" fill="rgba(71,80,95,.92)">Kosten / Rendite</text>

          <!-- bottom legend -->
          <text x="70" y="248" font-size="14" font-weight="900" fill="rgba(15,17,20,.92)">Merksatz:</text>
          <text x="160" y="248" font-size="14" font-weight="700" fill="rgba(71,80,95,.95)">
            Du investierst nicht nur in Module – du investierst in ein System aus Markt, Netz, Regeln und Zahlen.
          </text>

          <text x="70" y="278" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">
            Gesprächsfrage:
          </text>
          <text x="178" y="278" font-size="12.8" font-weight="700" fill="rgba(71,80,95,.92)">
            „Wovon hängt Ertrag ab – und welche Annahmen stecken in Ihrer Rechnung?“
          </text>
        </svg>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec4_title">4) Gesprächs-Check: Die wichtigsten Fragen (einfach, laien-tauglich)</h2>
      <p data-i18n="sec4_p1">
        Diese Fragen sind dein Schutz. Du musst die Antworten nicht „wissen“ – du musst sie bekommen. Wenn jemand ausweicht, wird es riskant.
        Trage hier die Antworten ein (oder schreibe auf, was dir unklar blieb).
      </p>

      <div class="form" id="form">
        <div class="field">
          <div class="lbl">
            <span data-i18n="f_goal_lbl">Worum geht es bei mir gerade?</span>
            <span class="hint" data-i18n="f_goal_hint">Ein Satz reicht</span>
          </div>
          <input type="text" id="goal" placeholder="z. B. Ich möchte verstehen, ob dieses Angebot seriös ist." />
        </div>

        <div class="row">
          <div class="field">
            <div class="lbl">
              <span data-i18n="f_model_lbl">Welches Modell wird mir angeboten?</span>
              <span class="hint" data-i18n="f_model_hint">einfach auswählen</span>
            </div>
            <select id="model">
              <option value="" data-i18n="opt_select">Bitte wählen …</option>
              <option value="own_roof" data-i18n="opt_own_roof">Eigene Anlage auf dem eigenen Dach</option>
              <option value="operator" data-i18n="opt_operator">Betreiber-/Pachtmodell (jemand anders betreibt)</option>
              <option value="participation" data-i18n="opt_participation">Beteiligung / Investment in eine Anlage</option>
              <option value="unknown" data-i18n="opt_unknown">Unklar / muss erklärt werden</option>
            </select>
          </div>

          <div class="field">
            <div class="lbl">
              <span data-i18n="f_region_lbl">Region/Ort (für Nachfragen im Gespräch)</span>
              <span class="hint" data-i18n="f_region_hint">frei</span>
            </div>
            <input type="text" id="region" placeholder="z. B. Rhein-Main / PLZ / Bundesland" />
          </div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f_q1_lbl">1) Was ist die Ertrags-Logik – und wovon hängt sie ab?</span>
            <span class="hint" data-i18n="f_hint_note">Antwort notieren</span>
          </div>
          <textarea id="q1" placeholder="z. B. Ertrag hängt ab von Standort, Ausrichtung, Verschattung, technischen Annahmen, Regeln/Abregelung …"></textarea>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f_q2_lbl">2) Welche Marktannahme steckt drin (Preis/Vergütung) – und ist das begründet?</span>
            <span class="hint" data-i18n="f_hint_note">kurz</span>
          </div>
          <textarea id="q2" placeholder="z. B. Welche Vergütung? Fix? Variabel? Welche Quellen?"></textarea>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f_q3_lbl">3) Was muss vor Baubeginn geklärt sein (Netz, Antrag, Freigabe)?</span>
            <span class="hint" data-i18n="f_hint_note">wichtig</span>
          </div>
          <textarea id="q3" placeholder="z. B. Wer stellt was? Welche Unterlagen? Welche Bestätigung?"></textarea>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f_q4_lbl">4) Wo kann die Rechnung „kippen“ (Risiken), und wie wird damit umgegangen?</span>
            <span class="hint" data-i18n="f_hint_note">Stichworte</span>
          </div>
          <textarea id="q4" placeholder="z. B. geringerer Ertrag, höhere Kosten, Ausfall, Reparatur, Verzögerung, Regeländerung …"></textarea>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f_notes_lbl">Eigene Notizen (was wirkt unklar / widersprüchlich?)</span>
            <span class="hint" data-i18n="f_notes_hint">frei</span>
          </div>
          <textarea id="notes" placeholder="Schreibe alles rein, was du im Gespräch nachfragen willst."></textarea>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f_sources_lbl">Quellen / Links / Dokumente (die du bekommen hast)</span>
            <span class="hint" data-i18n="f_sources_hint">z. B. PDF-Angebot, Website, Screenshot</span>
          </div>
          <textarea id="sources" placeholder="Liste hier alles auf, was du hast: Namen, Links, Dateinamen, Aussagen."></textarea>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f_feel_lbl">Bauchgefühl-Check (kein Beweis – nur Signal)</span>
            <span class="hint" data-i18n="f_feel_hint">anklicken</span>
          </div>
          <div class="chips">
            <label class="chip"><input type="checkbox" id="feel1" /> <span data-i18n="feel1">Wirkt transparent</span></label>
            <label class="chip"><input type="checkbox" id="feel2" /> <span data-i18n="feel2">Zu schön um wahr zu sein</span></label>
            <label class="chip"><input type="checkbox" id="feel3" /> <span data-i18n="feel3">Druck / Eile im Gespräch</span></label>
            <label class="chip"><input type="checkbox" id="feel4" /> <span data-i18n="feel4">Unklare Begriffe / Ausweichen</span></label>
          </div>
        </div>
      </div>

      <div class="glossWrap">
        <details class="gloss">
          <summary>
            <span data-i18n="g4_t">Warum „Bauchgefühl“ überhaupt?</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g4_b">
            Bauchgefühl ersetzt keine Fakten – aber es ist ein Frühwarnsystem. Wenn gleichzeitig Druck gemacht wird, Dinge unklar bleiben und keine Dokumente kommen,
            ist das ein Signal: Tempo rausnehmen, Fragen schriftlich stellen, Nachweise verlangen.
          </div>
        </details>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec5_title">5) Mini-Tool: Dein persönlicher Gesprächsrahmen (damit du nicht überrollt wirst)</h2>
      <p data-i18n="sec5_p1">
        Ein Profi-Gespräch ist oft schnell, viele Zahlen, viele Begriffe. Dieses Mini-Tool hilft dir, deinen Rahmen klar zu halten:
        Wieviel Zeit, welches Ziel, welche Grenze. Trage nur einfache Eckpunkte ein.
      </p>

      <div class="row">
        <div class="field">
          <div class="lbl">
            <span data-i18n="t_time_lbl">Mein Zeitrahmen</span>
            <span class="hint" data-i18n="t_time_hint">z. B. 6–18 Monate</span>
          </div>
          <input type="text" id="timeframe" placeholder="z. B. Ich entscheide nicht sofort – ich sammle erst Infos." />
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="t_budget_lbl">Mein Budget-Rahmen (frei)</span>
            <span class="hint" data-i18n="t_budget_hint">optional</span>
          </div>
          <input type="text" id="budget" placeholder="z. B. Ich prüfe Angebote bis X € / oder: noch offen." />
        </div>
      </div>

      <div class="field">
        <div class="lbl">
          <span data-i18n="t_rule_lbl">Meine Gesprächs-Regel (1 Satz)</span>
          <span class="hint" data-i18n="t_rule_hint">stark</span>
        </div>
        <input type="text" id="myrule" placeholder="z. B. Ich unterschreibe nichts im Termin. Ich nehme alles mit und prüfe." />
      </div>

      <div class="notice">
        <strong data-i18n="sec5_notice_t">Merksatz:</strong>
        <span data-i18n="sec5_notice_b">Seriöse Anbieter halten Prüfung aus. Wer dich hetzt, hilft dir nicht – er hilft sich.</span>
      </div>
    </div>

    <div class="footer" data-i18n="footer">
      Modul 01 – Premium Workbook. Eingaben werden lokal gespeichert und sind druckbar.
    </div>
  </div>

  <script>
    (function(){
      const LS_KEY_LANG = "fsa_pvka_lang";
      const LS_KEY_DATA = "fsa_pvka_project";
      const MOD_KEY = "module01_market";

      const langSel = document.getElementById("langSel");
      const printBtn = document.getElementById("printBtn");
      const resetBtn = document.getElementById("resetBtn");

      const toIndex = document.getElementById("toIndex");

      const ids = [
        "goal","model","region","q1","q2","q3","q4","notes","sources",
        "feel1","feel2","feel3","feel4",
        "timeframe","budget","myrule"
      ];

      const i18n = {
        de: {
          brand_title: "Premium Kurs",
          brand_sub: "Photovoltaik als Kapitalanlage",
          premium_tag: "Modul 01 • Hauptkurs",

          btn_index: "Index",
          lang_label: "Sprache",
          btn_print: "Drucken",
          btn_reset: "Projektakte leeren",

          h1: "Modul 01 – Der Markt und das Energiesystem",
          sub: "Dieses Modul gibt dir den Überblick: Was passiert im Markt, wie „funktioniert“ Strom als Produkt – und warum Photovoltaik-Angebote immer in dieses Gesamtsystem eingebettet sind. Du musst kein Technik-Profi sein. Ziel ist: die richtigen Fragen stellen können.",

          notice_title: "Wichtiger Hinweis:",
          notice_text: "Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieses Modul ist Bildung: Überblick, Verständnis, Fragenkatalog.",

          sec1_title: "1) Vogelperspektive: Warum dieses Modul wichtig ist",
          sec1_p1: "Viele Angebote wirken einfach: „Anlage kaufen – Rendite kommt.“ In der Realität hängt die Qualität eines Projekts aber daran, ob Markt, Netz, Preislogik und Regeln verstanden werden. Wenn du diese Grundlogik kennst, erkennst du schneller, ob dir jemand seriös erklärt – oder nur verkauft.",
          sec1_p2: "Wichtig: Du sollst hier nichts planen. Du sollst lernen, worauf du im Gespräch achten musst – und welche Begriffe du dir erklären lassen musst, damit du nicht im Blindflug unterschreibst.",

          sec2_title: "2) Markt-Logik in einfachen Worten",
          sec2_p1: "Strom ist kein „normales“ Produkt. Er muss genau dann verfügbar sein, wenn er gebraucht wird. Deshalb spielen Angebot und Nachfrage (zu jeder Stunde) eine größere Rolle als bei vielen anderen Märkten.",
          sec2_p2: "Photovoltaik speist vor allem dann stark ein, wenn die Sonne scheint. Das ist gut – aber es bedeutet auch: Wenn sehr viele gleichzeitig einspeisen, kann der Marktpreis sinken oder das Netz muss steuern. Das ist der Grund, warum seriöse Anbieter nicht nur „Rendite“ versprechen, sondern erklären, wie ein Projekt mit solchen Situationen umgeht.",
          sec2_p3: "Für dich als Einsteiger gilt: Immer nach dem „Warum“ fragen. Wenn dir jemand Begriffe nennt, die du nicht einordnen kannst, ist das kein Problem – aber du brauchst eine verständliche Erklärung.",

          term_supply: "Angebot",
          term_demand: "Nachfrage",

          g_badge: "Glossar",
          g1_t: "Begriff: Angebot & Nachfrage (im Strommarkt)",
          g1_b: "Im Strommarkt zählt nicht nur „wie viel“ produziert wird, sondern „wann“. Wenn zur gleichen Zeit sehr viel Strom da ist (z. B. mittags bei Sonne), kann der Preis sinken. Wenn wenig da ist (z. B. abends), steigt der Wert. Darum sind Ertragsprognosen, Preisannahmen und Netzregeln so wichtig.",
          g2_t: "Begriff: Einspeisung",
          g2_b: "Einspeisung bedeutet: Strom, den du nicht selbst nutzt, fließt ins öffentliche Netz. Je nach Modell bekommst du dafür eine Vergütung oder einen Marktpreis. Entscheidend ist: Welche Regel gilt in deinem Projekt – und welche Nachweise gibt es dafür?",
          g3_t: "Begriff: Abregelung (Curtailment)",
          g3_b: "Abregelung heißt: Die Anlage darf zeitweise weniger produzieren, weil Netz oder Regeln es verlangen. Das kann Ertrag mindern. Eine seriöse Kalkulation erklärt, ob und wie so etwas berücksichtigt wird (ohne Drama, aber transparent).",
          g4_t: "Warum „Bauchgefühl“ überhaupt?",
          g4_b: "Bauchgefühl ersetzt keine Fakten – aber es ist ein Frühwarnsystem. Wenn gleichzeitig Druck gemacht wird, Dinge unklar bleiben und keine Dokumente kommen, ist das ein Signal: Tempo rausnehmen, Fragen schriftlich stellen, Nachweise verlangen.",

          sec3_title: "3) Die große Systemkarte (einfaches Bild)",
          sec3_p1: "Dieses Bild ist eine vereinfachte Orientierung. Es zeigt die Stationen, über die im Gespräch typischerweise gesprochen wird. Du musst nichts davon „auswendig“ können – aber du sollst erkennen, an welcher Stelle eine Aussage hingehört.",
          viz1_title: "Orientierung: PV im Energiesystem (Illustration)",
          viz_note: "Beispielhafte Darstellung (keine Echt-Daten)",

          sec4_title: "4) Gesprächs-Check: Die wichtigsten Fragen (einfach, laien-tauglich)",
          sec4_p1: "Diese Fragen sind dein Schutz. Du musst die Antworten nicht „wissen“ – du musst sie bekommen. Wenn jemand ausweicht, wird es riskant. Trage hier die Antworten ein (oder schreibe auf, was dir unklar blieb).",

          f_goal_lbl: "Worum geht es bei mir gerade?",
          f_goal_hint: "Ein Satz reicht",
          f_model_lbl: "Welches Modell wird mir angeboten?",
          f_model_hint: "einfach auswählen",
          f_region_lbl: "Region/Ort (für Nachfragen im Gespräch)",
          f_region_hint: "frei",
          opt_select: "Bitte wählen …",
          opt_own_roof: "Eigene Anlage auf dem eigenen Dach",
          opt_operator: "Betreiber-/Pachtmodell (jemand anders betreibt)",
          opt_participation: "Beteiligung / Investment in eine Anlage",
          opt_unknown: "Unklar / muss erklärt werden",

          f_hint_note: "Antwort notieren",
          f_q1_lbl: "1) Was ist die Ertrags-Logik – und wovon hängt sie ab?",
          f_q2_lbl: "2) Welche Marktannahme steckt drin (Preis/Vergütung) – und ist das begründet?",
          f_q3_lbl: "3) Was muss vor Baubeginn geklärt sein (Netz, Antrag, Freigabe)?",
          f_q4_lbl: "4) Wo kann die Rechnung „kippen“ (Risiken), und wie wird damit umgegangen?",
          f_notes_lbl: "Eigene Notizen (was wirkt unklar / widersprüchlich?)",
          f_notes_hint: "frei",
          f_sources_lbl: "Quellen / Links / Dokumente (die du bekommen hast)",
          f_sources_hint: "z. B. PDF-Angebot, Website, Screenshot",

          f_feel_lbl: "Bauchgefühl-Check (kein Beweis – nur Signal)",
          f_feel_hint: "anklicken",
          feel1: "Wirkt transparent",
          feel2: "Zu schön um wahr zu sein",
          feel3: "Druck / Eile im Gespräch",
          feel4: "Unklare Begriffe / Ausweichen",

          sec5_title: "5) Mini-Tool: Dein persönlicher Gesprächsrahmen (damit du nicht überrollt wirst)",
          sec5_p1: "Ein Profi-Gespräch ist oft schnell, viele Zahlen, viele Begriffe. Dieses Mini-Tool hilft dir, deinen Rahmen klar zu halten: Wieviel Zeit, welches Ziel, welche Grenze. Trage nur einfache Eckpunkte ein.",
          t_time_lbl: "Mein Zeitrahmen",
          t_time_hint: "z. B. 6–18 Monate",
          t_budget_lbl: "Mein Budget-Rahmen (frei)",
          t_budget_hint: "optional",
          t_rule_lbl: "Meine Gesprächs-Regel (1 Satz)",
          t_rule_hint: "stark",
          sec5_notice_t: "Merksatz:",
          sec5_notice_b: "Seriöse Anbieter halten Prüfung aus. Wer dich hetzt, hilft dir nicht – er hilft sich.",

          footer: "Modul 01 – Premium Workbook. Eingaben werden lokal gespeichert und sind druckbar."
        },

        en: {
          brand_title: "Premium course",
          brand_sub: "Photovoltaics as a capital investment",
          premium_tag: "Module 01 • Main course",

          btn_index: "Index",
          lang_label: "Language",
          btn_print: "Print",
          btn_reset: "Clear project file",

          h1: "Module 01 – The market and the energy system",
          sub: "This module gives you the overview: what’s happening in the market, how electricity works as a product, and why PV offers are always embedded in a bigger system. You don’t need to be a technical expert. The goal is: ask the right questions.",

          notice_title: "Important notice:",
          notice_text: "No investment advice, no tax or legal advice. This module is education: overview, understanding, and a question framework.",

          sec1_title: "1) Bird’s-eye view: why this module matters",
          sec1_p1: "Many offers look simple: “buy a system – returns will come.” In reality, the quality of a project depends on whether market logic, the grid, pricing assumptions, and rules are understood. If you know the basics, you can spot whether someone is explaining responsibly — or just selling.",
          sec1_p2: "Important: you are not planning a system here. You are learning what to watch for in conversations — and which terms must be explained clearly so you don’t sign blindly.",

          sec2_title: "2) Market logic in plain words",
          sec2_p1: "Electricity is not a “normal” product. It must be available exactly when it is needed. That is why supply and demand (hour by hour) matter more than in many other markets.",
          sec2_p2: "PV feeds most when the sun shines. That’s good — but it also means: if many feed in at the same time, market prices can drop or the grid must manage the situation. That’s why serious providers don’t just promise “returns” — they explain how the project behaves in these situations.",
          sec2_p3: "For beginners: always ask “why.” If someone uses terms you cannot place, that’s not a problem — but you need a clear explanation.",

          term_supply: "Supply",
          term_demand: "Demand",

          g_badge: "Glossary",
          g1_t: "Term: Supply & demand (in electricity markets)",
          g1_b: "In electricity markets it’s not only “how much” is produced, but “when.” If a lot of power is available at the same time (e.g., sunny noon), prices can fall. If little is available (e.g., evenings), value increases. That’s why yield forecasts, price assumptions, and grid rules matter.",
          g2_t: "Term: Feed-in",
          g2_b: "Feed-in means: electricity you don’t use yourself flows into the public grid. Depending on the model you receive a tariff or a market price. Key point: which rule applies in your project — and what evidence supports it?",
          g3_t: "Term: Curtailment",
          g3_b: "Curtailment means: the system is temporarily allowed to produce less because the grid or rules require it. That can reduce yield. A serious calculation explains if and how this is considered — transparently.",
          g4_t: "Why include “gut feeling” at all?",
          g4_b: "Gut feeling is not proof — but it is an early warning. If there is pressure, unclear answers, and missing documents, it’s a signal: slow down, ask in writing, demand evidence.",

          sec3_title: "3) The system map (simple picture)",
          sec3_p1: "This picture is a simplified orientation. It shows the typical stations that are discussed. You don’t need to memorize it — you should be able to place statements in the right area.",

          viz1_title: "Orientation: PV in the energy system (illustration)",
          viz_note: "Illustration (no real data)",

          sec4_title: "4) Conversation check: the key questions (beginner-friendly)",
          sec4_p1: "These questions protect you. You don’t need to “know” the answers — you need to get them. If someone avoids them, risk increases. Write down answers (or what stayed unclear).",

          f_goal_lbl: "What is my situation right now?",
          f_goal_hint: "One sentence is enough",
          f_model_lbl: "Which model is being offered?",
          f_model_hint: "choose simply",
          f_region_lbl: "Region/location (for questions in the meeting)",
          f_region_hint: "free",
          opt_select: "Please choose …",
          opt_own_roof: "Own system on your own roof",
          opt_operator: "Operator/lease model (someone else operates)",
          opt_participation: "Participation / investment in a system",
          opt_unknown: "Unclear / must be explained",

          f_hint_note: "write it down",
          f_q1_lbl: "1) What is the yield logic — and what does it depend on?",
          f_q2_lbl: "2) Which market assumption is used (price/tariff) — and is it justified?",
          f_q3_lbl: "3) What must be clarified before construction (grid, application, approval)?",
          f_q4_lbl: "4) Where can the calculation “break” (risks) — and how is this handled?",
          f_notes_lbl: "Your notes (what feels unclear / contradictory?)",
          f_notes_hint: "free",
          f_sources_lbl: "Sources / links / documents you received",
          f_sources_hint: "e.g., PDF quote, website, screenshot",

          f_feel_lbl: "Gut-feeling check (not proof — just a signal)",
          f_feel_hint: "tick boxes",
          feel1: "Feels transparent",
          feel2: "Too good to be true",
          feel3: "Pressure / urgency",
          feel4: "Unclear terms / dodging",

          sec5_title: "5) Mini tool: your personal conversation frame",
          sec5_p1: "Professional calls can be fast: many numbers, many terms. This mini tool helps you keep your frame: time, goal, boundary. Fill in only simple points.",
          t_time_lbl: "My time frame",
          t_time_hint: "e.g., 6–18 months",
          t_budget_lbl: "My budget frame (free)",
          t_budget_hint: "optional",
          t_rule_lbl: "My meeting rule (one sentence)",
          t_rule_hint: "strong",
          sec5_notice_t: "Key line:",
          sec5_notice_b: "Serious providers can handle review. If you are rushed, it’s not for your benefit.",

          footer: "Module 01 – Premium workbook. Inputs are stored locally and printable."
        }
      };

      function setTextOrBreaks(el, txt){
        const s = String(txt);
        if(s.includes("\n")){
          el.innerHTML = s
            .replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")
            .replaceAll("\n","<br>");
        }else{
          el.textContent = txt;
        }
      }

      function loadLang(){
        const saved = localStorage.getItem(LS_KEY_LANG);
        return saved === "en" ? "en" : "de";
      }
      function saveLang(lang){
        localStorage.setItem(LS_KEY_LANG, lang);
      }

      function loadAll(){
        try{
          const raw = localStorage.getItem(LS_KEY_DATA);
          return raw ? JSON.parse(raw) : {};
        }catch(e){
          return {};
        }
      }
      function saveAll(obj){
        localStorage.setItem(LS_KEY_DATA, JSON.stringify(obj));
      }

      function getModuleData(all){
        return (all && all[MOD_KEY] && typeof all[MOD_KEY] === "object") ? all[MOD_KEY] : {};
      }

      function readField(id){
        const el = document.getElementById(id);
        if(!el) return null;
        if(el.type === "checkbox") return !!el.checked;
        return String(el.value || "");
      }

      function writeField(id, val){
        const el = document.getElementById(id);
        if(!el) return;
        if(el.type === "checkbox"){
          el.checked = !!val;
        }else{
          el.value = (val === undefined || val === null) ? "" : String(val);
        }
      }

      function bindAutosave(){
        const handler = () => {
          const all = loadAll();
          const cur = getModuleData(all);

          ids.forEach(id => { cur[id] = readField(id); });

          all[MOD_KEY] = cur;
          saveAll(all);
        };

        ids.forEach(id => {
          const el = document.getElementById(id);
          if(!el) return;
          el.addEventListener("input", handler);
          el.addEventListener("change", handler);
        });
      }

      function hydrate(){
        const all = loadAll();
        const cur = getModuleData(all);
        ids.forEach(id => writeField(id, cur[id]));
      }

      function applyI18n(lang){
        document.documentElement.lang = lang;
        document.querySelectorAll("[data-i18n]").forEach(el => {
          const key = el.getAttribute("data-i18n");
          const val = i18n[lang] && i18n[lang][key] !== undefined ? i18n[lang][key] : null;
          if(val === null) return;
          setTextOrBreaks(el, val);
        });
      }

      function applyNocacheLinks(){
        const ts = Date.now();
        document.querySelectorAll('a[data-nocache="1"]').forEach(link => {
          const href = link.getAttribute("href") || "";
          if(!href) return;
          const url = new URL(href, location.href);
          url.searchParams.set("nocache", String(ts));
          link.setAttribute("href", url.pathname.split("/").pop() + "?" + url.searchParams.toString());
        });
      }

      // Init language
      const lang = loadLang();
      langSel.value = lang;
      applyI18n(lang);

      langSel.addEventListener("change", () => {
        const l = langSel.value === "en" ? "en" : "de";
        saveLang(l);
        applyI18n(l);
      });

      // Init data
      hydrate();
      bindAutosave();

      // Buttons
      printBtn.addEventListener("click", () => window.print());

      resetBtn.addEventListener("click", () => {
        const ok = confirm((langSel.value==="en")
          ? "Clear all saved project inputs for this course?"
          : "Alle gespeicherten Eingaben für diesen Kurs wirklich löschen?"
        );
        if(!ok) return;
        localStorage.removeItem(LS_KEY_DATA);
        alert((langSel.value==="en") ? "Project file cleared." : "Projektakte wurde geleert.");
        location.reload();
      });

      applyNocacheLinks();
    })();
  </script>
<!-- PATCH: Modul-Navigation (Prev / Index / Next) -->
<style>
  .modNav{
    margin-top: 14px;
    border:1px solid rgba(15,17,20,.12);
    border-radius: 16px;
    background: rgba(255,255,255,.72);
    box-shadow: 0 14px 34px rgba(0,0,0,.08);
    padding: 12px 12px;
    position:relative;
    overflow:hidden;
  }
  .modNav:before{
    content:"";
    position:absolute;
    inset:-2px;
    background:
      radial-gradient(620px 180px at 16% 8%, rgba(200,166,58,.12), transparent 65%),
      radial-gradient(620px 180px at 84% 12%, rgba(11,125,92,.10), transparent 65%);
    pointer-events:none;
    opacity:.75;
  }
  .modNav > *{ position:relative; }

  .modNavTop{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    flex-wrap:wrap;
    margin-bottom:10px;
  }
  .modNavTitle{
    font-weight:1100;
    font-size:13px;
    color: rgba(15,17,20,.92);
  }
  .modNavHint{
    font-size:12px;
    font-weight:900;
    color: rgba(71,80,95,.92);
    background: rgba(200,166,58,.10);
    border:1px solid rgba(200,166,58,.22);
    border-radius: 999px;
    padding: 4px 8px;
    width: fit-content;
  }

  .modNavBtns{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    align-items:center;
  }

  .modNavBtn{
    display:inline-flex;
    align-items:center;
    gap:10px;
    text-decoration:none;
    font-weight:1100;
    border-radius: 12px;
    padding: 11px 14px;
    border:1px solid rgba(15,17,20,.12);
    background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.76));
    color: rgba(15,17,20,.92);
    box-shadow: 0 14px 30px rgba(0,0,0,.06);
    transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
    white-space:nowrap;
  }
  .modNavBtn:hover{
    transform: translateY(-1px);
    box-shadow: 0 18px 38px rgba(0,0,0,.10);
    border-color: rgba(11,125,92,.28);
  }

  .modNavBtn.primary{
    color:#fff;
    border:1px solid rgba(11,125,92,.22);
    background: linear-gradient(180deg, rgba(26,165,122,1), rgba(11,125,92,1));
    box-shadow: 0 14px 30px rgba(11,125,92,.18);
  }
  .modNavBtn.primary:hover{
    box-shadow: 0 18px 38px rgba(11,125,92,.22);
  }

  .modNavBtn svg{ width:16px; height:16px; flex:0 0 auto; opacity:.95; }
  .modNavBtn.disabled{
    opacity:.45;
    pointer-events:none;
    filter: grayscale(1);
  }

  @media print{
    .modNav{ display:none !important; }
  }
</style>

<nav class="modNav" id="modNav" aria-label="Modul Navigation" style="display:none">
  <div class="modNavTop">
    <div class="modNavTitle" data-i18n="nav_title">Navigation</div>
    <div class="modNavHint" data-i18n="nav_hint">Weiter zum nächsten Modul</div>
  </div>

  <div class="modNavBtns">
    <a class="modNavBtn" id="navPrev" href="#" data-nocache="1">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M15 6l-6 6 6 6" fill="none" stroke="rgba(15,17,20,.85)" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span data-i18n="nav_prev">Vorheriges Modul</span>
    </a>

    <a class="modNavBtn" id="navIndex" href="index.html" data-nocache="1">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M4 10.5l8-6 8 6V20a1 1 0 0 1-1 1h-4v-6H9v6H5a1 1 0 0 1-1-1v-9.5z"
              fill="rgba(200,166,58,.18)" stroke="rgba(15,17,20,.55)" stroke-width="1.4" stroke-linejoin="round"/>
      </svg>
      <span data-i18n="nav_index">Index</span>
    </a>

    <a class="modNavBtn primary" id="navNext" href="#" data-nocache="1">
      <span data-i18n="nav_next">Nächstes Modul</span>
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M9 6l6 6-6 6" fill="none" stroke="rgba(255,255,255,.95)" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </a>
  </div>
</nav>

<script>
  (function(){
    // i18n keys ergänzen, falls dein Modul bereits i18n nutzt:
    // (Wir überschreiben nichts – nur fallback, wenn Keys fehlen.)
    const fallback = {
      de: { nav_title:"Navigation", nav_hint:"Weiter zum nächsten Modul", nav_prev:"Vorheriges Modul", nav_index:"Index", nav_next:"Nächstes Modul" },
      en: { nav_title:"Navigation", nav_hint:"Continue to the next module", nav_prev:"Previous module", nav_index:"Index", nav_next:"Next module" }
    };

    // Sprache aus bestehender Seite ableiten (html lang oder select#langSel, wenn vorhanden)
    function getLang(){
      const sel = document.getElementById("langSel");
      if(sel && (sel.value==="en" || sel.value==="de")) return sel.value;
      const l = (document.documentElement.lang || "de").toLowerCase();
      return l.startsWith("en") ? "en" : "de";
    }

    // Modulnummer aus Dateiname: module-01.html ... module-12.html
    const file = (location.pathname.split("/").pop() || "").toLowerCase();
    const m = file.match(/^module-(\d{2})\.html$/);
    if(!m) return; // nur auf Modul-Seiten aktiv

    const num = parseInt(m[1], 10);
    if(!Number.isFinite(num)) return;

    const nav = document.getElementById("modNav");
    const prev = document.getElementById("navPrev");
    const next = document.getElementById("navNext");
    const idx  = document.getElementById("navIndex");

    function withNoCache(href){
      const ts = Date.now();
      const url = new URL(href, location.href);
      url.searchParams.set("nocache", String(ts));
      return url.pathname.split("/").pop() + "?" + url.searchParams.toString();
    }

    function pad2(n){ return String(n).padStart(2,"0"); }

    // Links setzen
    idx.href = withNoCache("index.html");

    if(num > 1){
      prev.href = withNoCache("module-" + pad2(num-1) + ".html");
      prev.classList.remove("disabled");
    }else{
      prev.href = "#";
      prev.classList.add("disabled");
    }

    if(num < 12){
      next.href = withNoCache("module-" + pad2(num+1) + ".html");
      next.classList.remove("disabled");
    }else{
      next.href = "#";
      next.classList.add("disabled");
    }

    // i18n minimal anwenden (nur diese Nav-Keys, ohne dein System zu stören)
    function applyNavI18n(){
      const lang = getLang();
      document.querySelectorAll("#modNav [data-i18n]").forEach(el => {
        const k = el.getAttribute("data-i18n");
        if(!k) return;
        // wenn deine Seite das schon setzt, lassen wir es; sonst fallback:
        const current = (el.textContent || "").trim();
        if(current) return;
        el.textContent = (fallback[lang] && fallback[lang][k]) ? fallback[lang][k] : (fallback.de[k] || "");
      });
    }

    // sichtbar machen
    nav.style.display = "";
    applyNavI18n();

    // falls dein Modul per Sprachumschalter live wechselt
    const langSel = document.getElementById("langSel");
    if(langSel){
      langSel.addEventListener("change", () => {
        // Texte nur setzen, wenn leer – also kein Überschreiben
        applyNavI18n();
      });
    }
  })();
</script>
<!-- /PATCH: Modul-Navigation --></body>
</html>
