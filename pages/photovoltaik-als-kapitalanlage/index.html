<!doctype html>
<!--
  FSA • Kurs (Standalone)
  Titel: Photovoltaik als Kapitalanlage – Chancen, Risiken, Kalkulation
  GitHub-Pfad: lp-anfang/pages/photovoltaik-als-kapitalanlage/index.html

  Hinweis:
  - Standalone: KEIN Zurück-Button in die Akademie.
  - DE/EN via data-i18n.
  - Print-optimiert: Druckbutton + @media print.

  Commit-Message: photovoltaik-als-kapitalanlage – standalone Index (DE/EN), Modul-Navigation, Print + Projektakte Reset
  Testlink (nocache): https://adler-fsa.github.io/lp-anfang/pages/photovoltaik-als-kapitalanlage/index.html?nocache=__TS__
-->
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Photovoltaik als Kapitalanlage – Chancen, Risiken, Kalkulation</title>
  <meta name="description" content="Kurs (DE/EN): Photovoltaik als Kapitalanlage – Chancen, Risiken, Kalkulation. Standalone Workbook mit Modulen, Printfunktion und Projektakte." />
  <meta name="robots" content="index,follow" />
  <style>
    :root{
      --bg:#0b0b10;
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.085);
      --line: rgba(255,255,255,.14);
      --text:#f2f2f2;
      --muted: rgba(242,242,242,.74);
      --gold:#d4af37;
      --gold2:#ffdd7a;
      --accent:#00a36c;
      --danger:#ff5a7a;
      --ok:#53e29b;
      --shadow: 0 10px 30px rgba(0,0,0,.45);
      --radius:18px;
      --max: 1100px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 18% 12%, rgba(212,175,55,.16), transparent 55%),
        radial-gradient(1000px 700px at 82% 22%, rgba(0,163,108,.14), transparent 58%),
        radial-gradient(900px 600px at 52% 92%, rgba(255,90,122,.10), transparent 55%),
        linear-gradient(180deg, #07070b 0%, #0b0b10 30%, #08080d 100%);
      overflow-x:hidden;
    }

    .wrap{
      max-width:var(--max);
      margin:0 auto;
      padding: 28px 18px 64px;
    }

    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-bottom:18px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      padding: 10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      border-radius: 999px;
      box-shadow: var(--shadow);
    }

    .brand svg{ width:22px; height:22px; }
    .brand .t1{
      font-weight:800;
      letter-spacing:.2px;
      line-height:1.1;
    }
    .brand .t2{
      font-size:12px;
      color:var(--muted);
      margin-top:2px;
      line-height:1.1;
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .btn{
      appearance:none;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      color:var(--text);
      padding:10px 12px;
      border-radius: 12px;
      font-weight:700;
      cursor:pointer;
      box-shadow: var(--shadow);
      display:inline-flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      user-select:none;
      transition: transform .08s ease, border-color .12s ease, background .12s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(212,175,55,.55); }
    .btn:active{ transform: translateY(0px); }

    .btn .dot{
      width:10px; height:10px; border-radius:50%;
      background: var(--gold);
      box-shadow: 0 0 12px rgba(212,175,55,.55);
    }

    .btn.secondary .dot{ background: var(--accent); box-shadow: 0 0 12px rgba(0,163,108,.55); }
    .btn.danger .dot{ background: var(--danger); box-shadow: 0 0 12px rgba(255,90,122,.55); }

    .lang{
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.045);
      border-radius: 12px;
      box-shadow: var(--shadow);
    }
    .lang label{
      font-size:12px;
      color:var(--muted);
      font-weight:700;
    }
    .lang select{
      background: rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.18);
      color: var(--text);
      border-radius:10px;
      padding:8px 10px;
      font-weight:800;
      outline:none;
    }

    .hero{
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px 18px 16px;
      margin-bottom: 14px;
      position:relative;
      overflow:hidden;
    }
    .hero:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(600px 220px at 12% 18%, rgba(212,175,55,.18), transparent 65%),
        radial-gradient(520px 220px at 80% 22%, rgba(0,163,108,.14), transparent 65%);
      pointer-events:none;
    }
    .hero > *{ position:relative; }

    h1{
      margin:0 0 8px;
      font-size: 26px;
      letter-spacing:.2px;
      line-height:1.2;
    }
    .sub{
      margin:0 0 12px;
      color: var(--muted);
      line-height:1.45;
      font-size:14px;
      max-width: 95ch;
    }

    .notice{
      border:1px solid rgba(212,175,55,.35);
      background: rgba(212,175,55,.08);
      border-radius: 14px;
      padding: 12px 12px;
      color: rgba(255,255,255,.92);
      line-height:1.45;
      font-size:13px;
    }
    .notice strong{ color: var(--gold2); }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
      margin-top: 14px;
    }
    @media (min-width: 920px){
      .grid{ grid-template-columns: 1fr 1fr; }
    }

    .card{
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.065), rgba(255,255,255,.04));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px 14px 12px;
      overflow:hidden;
    }
    .card h2{
      margin:0 0 8px;
      font-size:16px;
      letter-spacing:.2px;
    }
    .card p{
      margin:0 0 10px;
      color: var(--muted);
      font-size:13px;
      line-height:1.45;
    }

    .modules{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      margin-top: 10px;
    }
    @media (min-width: 760px){
      .modules{ grid-template-columns: 1fr 1fr; }
    }

    .m{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.20);
      border-radius: 14px;
      padding: 12px 12px;
      display:flex;
      flex-direction:column;
      gap:6px;
      min-height: 108px;
    }
    .m .k{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight:900;
      font-size:12px;
      letter-spacing:.3px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(212,175,55,.35);
      background: rgba(212,175,55,.08);
      color: rgba(255,255,255,.92);
      width: fit-content;
    }
    .pill .s{
      width:10px; height:10px; border-radius:50%;
      background: var(--gold);
      box-shadow: 0 0 12px rgba(212,175,55,.45);
    }
    .m a{
      margin-top:auto;
      display:inline-flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      font-weight:900;
      color: var(--text);
      border:1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.035));
      padding: 10px 12px;
      border-radius: 12px;
      box-shadow: 0 10px 26px rgba(0,0,0,.25);
      transition: transform .08s ease, border-color .12s ease;
      width: fit-content;
    }
    .m a:hover{ transform: translateY(-1px); border-color: rgba(0,163,108,.55); }
    .m a .arr{
      width:14px; height:14px;
      display:inline-block;
    }

    .footer{
      margin-top: 16px;
      color: rgba(242,242,242,.62);
      font-size: 12px;
      line-height:1.5;
      text-align:center;
    }

    /* Print */
    @media print{
      body{ background:#fff !important; color:#000 !important; }
      .topbar, .actions, .lang, .btn, .footer{ display:none !important; }
      .wrap{ max-width: 820px; padding: 0; }
      .hero, .card, .m{
        box-shadow:none !important;
        background:#fff !important;
        border:1px solid #bbb !important;
        color:#000 !important;
      }
      .sub, .card p{ color:#111 !important; }
      .notice{ border:1px solid #999 !important; background:#f7f2df !important; color:#000 !important; }
      a{ color:#000 !important; text-decoration:none !important; }
      .pill{ border:1px solid #999 !important; background:#f2f2f2 !important; color:#000 !important; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="topbar">
      <div class="brand" aria-label="Kurs">
        <!-- Inline-SVG -->
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <defs>
            <linearGradient id="gSun" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#d4af37"/>
              <stop offset="1" stop-color="#ffdd7a"/>
            </linearGradient>
          </defs>
          <circle cx="12" cy="12" r="5.2" fill="url(#gSun)"></circle>
          <g fill="none" stroke="rgba(255,255,255,.85)" stroke-width="1.2" stroke-linecap="round">
            <path d="M12 2.2v2.2M12 19.6v2.2M2.2 12h2.2M19.6 12h2.2"/>
            <path d="M4.6 4.6l1.55 1.55M17.85 17.85l1.55 1.55M19.4 4.6l-1.55 1.55M6.15 17.85L4.6 19.4"/>
          </g>
        </svg>
        <div>
          <div class="t1" data-i18n="brand_title">Standalone Kurs</div>
          <div class="t2" data-i18n="brand_sub">Photovoltaik als Kapitalanlage</div>
        </div>
      </div>

      <div class="actions">
        <div class="lang" title="Sprache / Language">
          <label for="langSel" data-i18n="lang_label">Sprache</label>
          <select id="langSel" aria-label="Sprache wählen">
            <option value="de">DE</option>
            <option value="en">EN</option>
          </select>
        </div>

        <button class="btn secondary" id="printBtn" type="button" title="Drucken / Print">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_print">Drucken</span>
        </button>

        <button class="btn danger" id="resetBtn" type="button" title="Projektakte leeren">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_reset">Projektakte leeren</span>
        </button>
      </div>
    </div>

    <div class="hero">
      <h1 data-i18n="h1">Photovoltaik als Kapitalanlage</h1>
      <p class="sub" data-i18n="sub">
        Workbook-Kurs (DE/EN) zur finanziellen Bildung: Du lernst, Projekte strukturiert zu prüfen, Unterlagen einzuordnen und dich auf Gespräche mit Profis vorzubereiten.
        Alle Eingaben sind ausdruckbar als Projektakte.
      </p>

      <div class="notice">
        <strong data-i18n="notice_title">Wichtiger Hinweis:</strong>
        <span data-i18n="notice_text">
          Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieser Kurs dient ausschließlich der Befähigung: Fragen stellen, Dokumente prüfen, Zahlen verstehen und Risiken erkennen.
        </span>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h2 data-i18n="card1_title">So nutzt du den Kurs</h2>
        <p data-i18n="card1_text">
          Die Module sind wie ein strukturiertes Gespräch aufgebaut. Du trägst Antworten in Felder ein, bewertest Nachweise und erzeugst daraus deine Projektakte.
          Du kannst jedes Modul einzeln drucken oder später die gesamte Akte ausdrucken.
        </p>
      </div>

      <div class="card">
        <h2 data-i18n="card2_title">Projektakte (lokal)</h2>
        <p data-i18n="card2_text">
          Eingaben werden lokal im Browser gespeichert (LocalStorage). Es werden keine externen Dienste genutzt. Mit „Projektakte leeren“ kannst du alles sofort zurücksetzen.
        </p>
      </div>
    </div>

    <div class="card" style="margin-top:12px;">
      <h2 data-i18n="mods_title">Module</h2>
      <p data-i18n="mods_text">
        Start mit Modul 1. Spätere Zusatzmodule für Grafiken, Tabellen, Beispielkalkulationen und Renditeszenarien werden hier ebenfalls verlinkt.
      </p>

      <div class="modules" id="modules">
        <!-- Module links (placeholders; pages will be created in next Bausteine) -->
      </div>
    </div>

    <div class="footer" data-i18n="footer">
      Standalone Kursseite. Kein Zurück-Link. Inhalte sind für Ausbildungszwecke und Gesprächsvorbereitung gedacht.
    </div>

  </div>

  <script>
    (function(){
      const LS_KEY_LANG = "fsa_pvka_lang";
      const LS_KEY_DATA = "fsa_pvka_project";
      const langSel = document.getElementById("langSel");
      const printBtn = document.getElementById("printBtn");
      const resetBtn = document.getElementById("resetBtn");
      const modulesEl = document.getElementById("modules");

      const i18n = {
        de: {
          brand_title: "Standalone Kurs",
          brand_sub: "Photovoltaik als Kapitalanlage",
          lang_label: "Sprache",
          btn_print: "Drucken",
          btn_reset: "Projektakte leeren",
          h1: "Photovoltaik als Kapitalanlage",
          sub: "Workbook-Kurs (DE/EN) zur finanziellen Bildung: Du lernst, Projekte strukturiert zu prüfen, Unterlagen einzuordnen und dich auf Gespräche mit Profis vorzubereiten. Alle Eingaben sind ausdruckbar als Projektakte.",
          notice_title: "Wichtiger Hinweis:",
          notice_text: "Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieser Kurs dient ausschließlich der Befähigung: Fragen stellen, Dokumente prüfen, Zahlen verstehen und Risiken erkennen.",
          card1_title: "So nutzt du den Kurs",
          card1_text: "Die Module sind wie ein strukturiertes Gespräch aufgebaut. Du trägst Antworten in Felder ein, bewertest Nachweise und erzeugst daraus deine Projektakte. Du kannst jedes Modul einzeln drucken oder später die gesamte Akte ausdrucken.",
          card2_title: "Projektakte (lokal)",
          card2_text: "Eingaben werden lokal im Browser gespeichert (LocalStorage). Es werden keine externen Dienste genutzt. Mit „Projektakte leeren“ kannst du alles sofort zurücksetzen.",
          mods_title: "Module",
          mods_text: "Start mit Modul 1. Spätere Zusatzmodule für Grafiken, Tabellen, Beispielkalkulationen und Renditeszenarien werden hier ebenfalls verlinkt.",
          footer: "Standalone Kursseite. Kein Zurück-Link. Inhalte sind für Ausbildungszwecke und Gesprächsvorbereitung gedacht.",
          open_module: "Modul öffnen",
          pill_base: "Kernmodul",
          pill_tools: "Werkzeug",
          m1_t: "Modul 1 – Ziel & Profil (Gesprächsvorbereitung)",
          m1_d: "Ziele klären, Rahmen setzen, Vorbereitung für Profi-Gespräche. Eingabefelder als Start der Projektakte.",
          m2_t: "Modul 2 – Anlageklasse verstehen (PV-Logik)",
          m2_d: "Stromfluss, Einnahme/Ersparnis, Lebensdauer, typische Annahmen. Mit erster Übersichtsgrafik.",
          m3_t: "Modul 3 – Regulierung & Netzprozess",
          m3_d: "EEG-Grundlogik, Netzbetreiber, Einspeiseantrag, Inbetriebnahme, Meldungen. Prozessübersicht.",
          m4_t: "Modul 4 – Modellwahl (Dach / Pacht / Beteiligung)",
          m4_d: "Investmentform festlegen, Rollen/Haftung verstehen, Entscheidungsbaum.",
          m5_t: "Modul 5 – Standort & Ertrag (Plausibilität)",
          m5_d: "Ertragsannahmen prüfen, Quellen vergleichen, Verschattung/Ausrichtung dokumentieren.",
          m6_t: "Modul 6 – Verträge & Verantwortlichkeiten",
          m6_d: "Stückliste, Abnahme, Gewährleistung, Service, Versicherung, Monitoring – prüfbar dokumentieren.",
          m7_t: "Modul 7 – Red-Flags & Risiko-Score",
          m7_d: "Red-Flag Tabelle + Punkte-Score + Ampel zur Orientierung (keine Empfehlung).",
          m8_t: "Modul 8 – Kostenstruktur (CAPEX) – Werkzeug",
          m8_d: "Ausdruckbare Kostentabelle: Positionen vollständig sammeln und prüfen.",
          m9_t: "Modul 9 – Laufende Kosten & Rücklagen (OPEX) – Werkzeug",
          m9_d: "Wartung, Versicherung, Monitoring, Rücklagen – jährlich erfassen.",
          m10_t: "Modul 10 – Beispielkalkulation & Renditerahmen – Werkzeug",
          m10_d: "Basisrechnung + Kennzahlen (Cashflow/Amortisation). Tabellen & Diagramm (print).",
          m11_t: "Modul 11 – Szenarioanalyse (Robustheitstest) – Werkzeug",
          m11_d: "Variantenrechnung (z. B. -10% Ertrag) zur Stabilitätsprüfung.",
          m12_t: "Modul 12 – Abschluss: Terminblatt & Fragenkatalog",
          m12_d: "1-Seiten-Zusammenfassung für den Profi-Termin: offene Punkte, Nachweise, nächste Schritte."
        },
        en: {
          brand_title: "Standalone course",
          brand_sub: "PV as a capital investment",
          lang_label: "Language",
          btn_print: "Print",
          btn_reset: "Clear project file",
          h1: "Photovoltaics as a capital investment",
          sub: "Workbook course (DE/EN) for financial education: learn how to assess projects, interpret documents, and prepare for professional meetings. All inputs are printable as your project file.",
          notice_title: "Important notice:",
          notice_text: "No investment advice, no tax or legal advice. This course is strictly educational: ask the right questions, verify documents, understand numbers, and recognize risks.",
          card1_title: "How to use this course",
          card1_text: "Modules are structured like a guided conversation. You enter answers into fields, verify evidence, and create your project file. You can print each module or later print the full file.",
          card2_title: "Project file (local)",
          card2_text: "Inputs are stored locally in your browser (LocalStorage). No external services are used. Use “Clear project file” to reset instantly.",
          mods_title: "Modules",
          mods_text: "Start with Module 1. Additional tool modules for charts, tables, sample calculations, and yield scenarios will be linked here as well.",
          footer: "Standalone course page. No back link. Content is for educational purposes and meeting preparation.",
          open_module: "Open module",
          pill_base: "Core",
          pill_tools: "Tools",
          m1_t: "Module 1 – Goals & profile (meeting prep)",
          m1_d: "Clarify goals, set boundaries, start your printable project file.",
          m2_t: "Module 2 – Understand PV as an asset class",
          m2_d: "Energy flow, savings/revenue logic, lifespan, key assumptions. Includes first overview chart.",
          m3_t: "Module 3 – Regulation & grid process",
          m3_d: "EEG basics, grid operator role, feed-in process, commissioning, registrations. Process overview.",
          m4_t: "Module 4 – Choose the investment model",
          m4_d: "Roof / lease / direct ownership / participation. Roles and responsibilities. Decision tree.",
          m5_t: "Module 5 – Site & yield plausibility",
          m5_d: "Check yield assumptions, compare sources, document shading/orientation.",
          m6_t: "Module 6 – Contracts & responsibilities",
          m6_d: "Bill of materials, acceptance, warranties, service, insurance, monitoring—document and verify.",
          m7_t: "Module 7 – Red flags & risk score",
          m7_d: "Red-flag table + scoring + traffic-light orientation (no recommendation).",
          m8_t: "Module 8 – Cost structure (CAPEX) – tool",
          m8_d: "Printable cost table to capture and verify all one-time positions.",
          m9_t: "Module 9 – Operating costs & reserves (OPEX) – tool",
          m9_d: "Maintenance, insurance, monitoring, reserves—record annually.",
          m10_t: "Module 10 – Sample calculation & yield framework – tool",
          m10_d: "Base calculation + key metrics (cashflow/payback). Tables & chart (print).",
          m11_t: "Module 11 – Scenario analysis (robustness test) – tool",
          m11_d: "Variant calculations (e.g., -10% yield) to test stability.",
          m12_t: "Module 12 – Final: meeting sheet & question list",
          m12_d: "One-page summary for professional meetings: open items, evidence, next steps."
        }
      };

      const modules = [
        { id:"01", type:"base", href:"module-01.html", tKey:"m1_t", dKey:"m1_d" },
        { id:"02", type:"base", href:"module-02.html", tKey:"m2_t", dKey:"m2_d" },
        { id:"03", type:"base", href:"module-03.html", tKey:"m3_t", dKey:"m3_d" },
        { id:"04", type:"base", href:"module-04.html", tKey:"m4_t", dKey:"m4_d" },
        { id:"05", type:"base", href:"module-05.html", tKey:"m5_t", dKey:"m5_d" },
        { id:"06", type:"base", href:"module-06.html", tKey:"m6_t", dKey:"m6_d" },
        { id:"07", type:"base", href:"module-07.html", tKey:"m7_t", dKey:"m7_d" },
        { id:"08", type:"tools", href:"module-08.html", tKey:"m8_t", dKey:"m8_d" },
        { id:"09", type:"tools", href:"module-09.html", tKey:"m9_t", dKey:"m9_d" },
        { id:"10", type:"tools", href:"module-10.html", tKey:"m10_t", dKey:"m10_d" },
        { id:"11", type:"tools", href:"module-11.html", tKey:"m11_t", dKey:"m11_d" },
        { id:"12", type:"base", href:"module-12.html", tKey:"m12_t", dKey:"m12_d" }
      ];

      function renderModules(lang){
        modulesEl.innerHTML = "";
        modules.forEach(m => {
          const div = document.createElement("div");
          div.className = "m";

          const k = document.createElement("div");
          k.className = "k";

          const pill = document.createElement("div");
          pill.className = "pill";
          pill.innerHTML = '<span class="s" aria-hidden="true"></span>' + (m.type==="tools" ? i18n[lang].pill_tools : i18n[lang].pill_base);

          k.appendChild(pill);

          const title = document.createElement("div");
          title.style.fontWeight = "900";
          title.style.fontSize = "13px";
          title.style.color = "rgba(255,255,255,.94)";
          title.textContent = i18n[lang][m.tKey];

          const desc = document.createElement("div");
          desc.style.color = "rgba(242,242,242,.72)";
          desc.style.fontSize = "12.5px";
          desc.style.lineHeight = "1.45";
          desc.textContent = i18n[lang][m.dKey];

          const a = document.createElement("a");
          a.href = m.href;
          a.setAttribute("data-nocache", "1");
          a.innerHTML = `
            <span>${i18n[lang].open_module}</span>
            <svg class="arr" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M9 6l6 6-6 6" fill="none" stroke="rgba(255,255,255,.85)" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          `;

          div.appendChild(k);
          div.appendChild(title);
          div.appendChild(desc);
          div.appendChild(a);

          modulesEl.appendChild(div);
        });

        // append nocache to module links automatically
        const ts = Date.now();
        document.querySelectorAll('a[data-nocache="1"]').forEach(link => {
          const url = new URL(link.getAttribute("href"), location.href);
          url.searchParams.set("nocache", String(ts));
          link.setAttribute("href", url.pathname.split("/").pop() + "?" + url.searchParams.toString());
        });
      }

      function applyI18n(lang){
        document.documentElement.lang = lang;
        document.querySelectorAll("[data-i18n]").forEach(el => {
          const key = el.getAttribute("data-i18n");
          const txt = (i18n[lang] && i18n[lang][key]) ? i18n[lang][key] : null;
          if(txt !== null) el.textContent = txt;
        });
        renderModules(lang);
      }

      function loadLang(){
        const saved = localStorage.getItem(LS_KEY_LANG);
        return saved === "en" ? "en" : "de";
      }
      function saveLang(lang){
        localStorage.setItem(LS_KEY_LANG, lang);
      }

      // Buttons
      printBtn.addEventListener("click", () => window.print());

      resetBtn.addEventListener("click", () => {
        const ok = confirm((langSel.value==="en")
          ? "Clear all saved project inputs for this course?"
          : "Alle gespeicherten Eingaben für diesen Kurs wirklich löschen?"
        );
        if(!ok) return;
        localStorage.removeItem(LS_KEY_DATA);
        alert((langSel.value==="en") ? "Project file cleared." : "Projektakte wurde geleert.");
      });

      // Language init
      const lang = loadLang();
      langSel.value = lang;
      applyI18n(lang);

      langSel.addEventListener("change", () => {
        const l = langSel.value === "en" ? "en" : "de";
        saveLang(l);
        applyI18n(l);
      });

    })();
  </script>
</body>
</html>
