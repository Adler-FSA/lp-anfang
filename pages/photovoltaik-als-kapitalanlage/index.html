<!doctype html>
<!--
  FSA • Premium Kurs (Workbook)
  Kurs: Photovoltaik als Kapitalanlage
  Seite: Index

  GitHub-Pfad: lp-anfang/pages/photovoltaik-als-kapitalanlage/index.html
  Commit-Message: photovoltaik-als-kapitalanlage – Index Text final (DE/EN) im Modul-Design, Print/Reset, Modulverdrahtung
  Testlink (nocache): https://adler-fsa.github.io/lp-anfang/pages/photovoltaik-als-kapitalanlage/index.html?nocache=__TS__
-->
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Photovoltaik als Kapitalanlage – Index • Hauptkurs</title>
  <meta name="description" content="Index (DE/EN): Photovoltaik als Kapitalanlage – Hauptkurs zur Einordnung, Risikobewertung und Gesprächsführung. Print + LocalStorage." />
  <meta name="robots" content="index,follow" />

  <style>
    :root{
      --bg:#ffffff;
      --ink:#111214;
      --muted:#47505f;

      --line: rgba(17,18,20,.12);
      --line2: rgba(17,18,20,.18);

      --gold:#c8a63a;
      --gold2:#e0c466;

      --accent:#0b7d5c;
      --accent2:#1aa57a;

      --danger:#c52646;
      --ok:#167a3d;

      --shadow: 0 14px 34px rgba(0,0,0,.10);
      --shadow2: 0 26px 70px rgba(0,0,0,.12);

      --radius:18px;
      --max: 1140px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 720px at 10% 8%, rgba(200,166,58,.16), transparent 58%),
        radial-gradient(1050px 720px at 88% 14%, rgba(11,125,92,.12), transparent 58%),
        radial-gradient(920px 640px at 52% 96%, rgba(197,38,70,.08), transparent 60%),
        linear-gradient(180deg, #ffffff 0%, #fbfbfc 45%, #ffffff 100%);
      overflow-x:hidden;
    }

    .spark{
      position:fixed;
      inset:-30vh -30vw auto -30vw;
      height:60vh;
      pointer-events:none;
      z-index:0;
      filter: blur(18px);
      opacity:.55;
      background:
        radial-gradient(closest-side at 18% 35%, rgba(200,166,58,.28), transparent 65%),
        radial-gradient(closest-side at 68% 28%, rgba(11,125,92,.22), transparent 65%),
        radial-gradient(closest-side at 48% 85%, rgba(197,38,70,.14), transparent 70%);
      transform: translate3d(0,0,0);
      animation: floaty 10s ease-in-out infinite;
    }
    @keyframes floaty{
      0%{ transform: translate3d(0px, 0px, 0px) scale(1); }
      50%{ transform: translate3d(12px, 10px, 0px) scale(1.02); }
      100%{ transform: translate3d(0px, 0px, 0px) scale(1); }
    }
    @media (prefers-reduced-motion: reduce){
      .spark{ animation:none; }
    }

    .wrap{
      position:relative;
      z-index:1;
      max-width:var(--max);
      margin:0 auto;
      padding: 22px 18px 84px;
    }

    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-bottom:14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      padding: 10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.76));
      border-radius: 999px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .brand:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 180px at 12% 30%, rgba(200,166,58,.14), transparent 64%),
        radial-gradient(520px 180px at 84% 20%, rgba(11,125,92,.10), transparent 64%);
      pointer-events:none;
    }
    .brand > *{ position:relative; }
    .brand svg{ width:22px; height:22px; flex:0 0 auto; }
    .brand .t1{ font-weight:1000; letter-spacing:.2px; line-height:1.1; }
    .brand .t2{ font-size:12px; color:var(--muted); margin-top:2px; line-height:1.1; }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .lang{
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.72));
      border-radius: 12px;
      box-shadow: var(--shadow);
    }
    .lang label{
      font-size:12px;
      color:var(--muted);
      font-weight:900;
    }
    .lang select{
      background: rgba(255,255,255,.92);
      border:1px solid rgba(17,18,20,.18);
      color: var(--ink);
      border-radius:10px;
      padding:8px 10px;
      font-weight:1000;
      outline:none;
    }

    .btn{
      appearance:none;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.76));
      color:var(--ink);
      padding:10px 12px;
      border-radius: 12px;
      font-weight:1000;
      cursor:pointer;
      box-shadow: var(--shadow);
      display:inline-flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      user-select:none;
      transition: transform .10s ease, border-color .14s ease, box-shadow .14s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(200,166,58,.45); box-shadow: var(--shadow2); }
    .btn:active{ transform: translateY(0px); }
    .btn .dot{
      width:10px; height:10px; border-radius:50%;
      background: var(--gold);
      box-shadow: 0 0 12px rgba(200,166,58,.45);
    }
    .btn.secondary .dot{
      background: var(--accent);
      box-shadow: 0 0 12px rgba(11,125,92,.40);
    }
    .btn.danger .dot{
      background: var(--danger);
      box-shadow: 0 0 12px rgba(197,38,70,.35);
    }

    .hero{
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.78));
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 18px 18px 16px;
      margin-bottom: 14px;
      position:relative;
      overflow:hidden;
    }
    .hero:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(760px 260px at 14% 16%, rgba(200,166,58,.16), transparent 65%),
        radial-gradient(680px 240px at 86% 18%, rgba(11,125,92,.12), transparent 65%);
      pointer-events:none;
    }
    .hero > *{ position:relative; }

    h1{
      margin:0 0 10px;
      font-size: 26px;
      letter-spacing:.2px;
      line-height:1.2;
    }
    .sub{
      margin:0;
      color: var(--muted);
      line-height:1.7;
      font-size:14.5px;
      max-width: 98ch;
    }

    .card{
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.80));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px 16px 14px;
      margin-top: 12px;
    }
    .card h2{
      margin:0 0 10px;
      font-size:16px;
      letter-spacing:.2px;
    }
    .card p{
      margin:0 0 10px;
      color: var(--muted);
      font-size:14px;
      line-height:1.75;
    }

    .notice{
      border:1px solid rgba(200,166,58,.35);
      background: rgba(200,166,58,.08);
      border-radius: 14px;
      padding: 12px 12px;
      color: rgba(17,18,20,.92);
      line-height:1.7;
      font-size:13.5px;
      margin-top:12px;
    }
    .notice strong{ color: #7a5c00; }

    .modules{
      margin-top: 12px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    .m{
      border:1px solid rgba(17,18,20,.14);
      background: rgba(255,255,255,.92);
      border-radius: 14px;
      padding: 12px 12px;
      box-shadow: var(--shadow);
      display:flex;
      gap:12px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .m .left{
      min-width: 260px;
      flex: 1 1 520px;
    }
    .m .right{
      flex: 0 0 auto;
      display:flex;
      align-items:center;
      gap:10px;
      padding-top:4px;
    }
    .m .title{
      margin:0 0 6px;
      font-weight:1000;
      font-size:14.5px;
      line-height:1.35;
    }
    .m .desc{
      margin:0;
      color: var(--muted);
      font-size:13.5px;
      line-height:1.65;
    }
    .m a{
      display:inline-flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      font-weight:1000;
      color: var(--ink);
      border:1px solid rgba(17,18,20,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.82));
      padding: 10px 12px;
      border-radius: 12px;
      box-shadow: 0 10px 26px rgba(0,0,0,.08);
      transition: transform .10s ease, border-color .14s ease;
      white-space:nowrap;
    }
    .m a:hover{ transform: translateY(-1px); border-color: rgba(11,125,92,.45); }

    .m .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight:1000;
      font-size:12px;
      letter-spacing:.2px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(11,125,92,.25);
      background: rgba(11,125,92,.08);
      color: rgba(17,18,20,.92);
      width: fit-content;
      margin-bottom:8px;
    }
    .m .badge .s{
      width:10px; height:10px; border-radius:50%;
      background: var(--accent);
      box-shadow: 0 0 10px rgba(11,125,92,.25);
    }

    .footer{
      margin-top: 16px;
      color: rgba(71,80,95,.85);
      font-size: 12px;
      line-height:1.6;
      text-align:center;
    }

    /* Print */
    @media print{
      body{ background:#fff !important; color:#000 !important; }
      .spark, .topbar, .actions, .lang, .btn, .footer{ display:none !important; }
      .wrap{ max-width: 820px; padding: 0; }
      .hero, .card, .m{
        box-shadow:none !important;
        background:#fff !important;
        border:1px solid #bbb !important;
        color:#000 !important;
      }
      .sub, .card p, .m .desc{ color:#111 !important; }
      .notice{ border:1px solid #999 !important; background:#f7f2df !important; color:#000 !important; }
      a{ color:#000 !important; text-decoration:none !important; }
    }
  </style>
</head>

<body>
  <div class="spark" aria-hidden="true"></div>

  <div class="wrap">
    <div class="topbar">
      <div class="brand" aria-label="Kurs">
        <!-- Inline-SVG -->
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <defs>
            <linearGradient id="gSunIdx" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#c8a63a"/>
              <stop offset="1" stop-color="#e0c466"/>
            </linearGradient>
          </defs>
          <circle cx="12" cy="12" r="5.2" fill="url(#gSunIdx)"></circle>
          <g fill="none" stroke="rgba(17,18,20,.75)" stroke-width="1.2" stroke-linecap="round">
            <path d="M12 2.2v2.2M12 19.6v2.2M2.2 12h2.2M19.6 12h2.2"/>
            <path d="M4.6 4.6l1.55 1.55M17.85 17.85l1.55 1.55M19.4 4.6l-1.55 1.55M6.15 17.85L4.6 19.4"/>
          </g>
        </svg>
        <div>
          <div class="t1" data-i18n="brand_title">Premium Kurs</div>
          <div class="t2" data-i18n="brand_sub">Photovoltaik als Kapitalanlage</div>
        </div>
      </div>

      <div class="actions">
        <div class="lang" title="Sprache / Language">
          <label for="langSel" data-i18n="lang_label">Sprache</label>
          <select id="langSel" aria-label="Sprache wählen">
            <option value="de">DE</option>
            <option value="en">EN</option>
          </select>
        </div>

        <button class="btn secondary" id="printBtn" type="button" title="Drucken / Print">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_print">Drucken</span>
        </button>

        <button class="btn danger" id="resetBtn" type="button" title="Projektakte leeren">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_reset">Projektakte leeren</span>
        </button>
      </div>
    </div>

    <div class="hero">
      <h1 data-i18n="h1">INDEX – Photovoltaik als Kapitalanlage</h1>
      <p class="sub" data-i18n="sub">
        Ein Hauptkurs zur finanziellen Einordnung, Risikobewertung und strukturierten Gesprächsführung
      </p>
    </div>

    <div class="card">
      <h2 data-i18n="intro_title">Ein Hauptkurs zur finanziellen Einordnung, Risikobewertung und strukturierten Gesprächsführung</h2>

      <!-- WORTGETREU wie vom User geliefert (DE) -->
      <p data-i18n="p1">
        Photovoltaik wird häufig als sichere und nachhaltige Kapitalanlage beworben. Bilder von Solaranlagen vermitteln Stabilität, Begriffe wie „Sachwert“, „Unabhängigkeit“ und „planbare Rendite“ erzeugen Vertrauen. Doch hinter diesen Versprechen steht ein komplexes Zusammenspiel aus Marktmechanismen, regulatorischen Rahmenbedingungen, technischen Annahmen und wirtschaftlichen Prognosen.
      </p>

      <p data-i18n="p2">
        Dieser Hauptkurs verfolgt ein klares Ziel:<br>
        Er soll Mitglieder befähigen, Angebote strukturiert zu prüfen, Risiken zu erkennen und Gespräche mit Fachleuten souverän zu führen.
      </p>

      <p data-i18n="p3">
        Es geht nicht darum, selbst Anlagen zu planen.<br>
        Es geht darum, zu verstehen, worüber gesprochen wird.
      </p>

      <p data-i18n="p4">
        Photovoltaik ist kein isoliertes Produkt. Sie ist Teil eines Energiesystems, das politisch reguliert, technisch gesteuert und wirtschaftlich dynamisch ist. Wer investiert, investiert in ein System – nicht nur in Module.
      </p>

      <p data-i18n="p5">
        Dieser Kurs führt Schritt für Schritt durch:<br>
        • die Einordnung des Marktes,<br>
        • die wirtschaftliche Logik einer Anlage,<br>
        • unterschiedliche Investitionsmodelle,<br>
        • regulatorische Abläufe,<br>
        • vollständige Kostenbetrachtung,<br>
        • realistische Renditeanalyse,<br>
        • Szenarien und Stresstests,<br>
        • Betrugsschutz durch strukturierte Gesprächsführung,<br>
        • sowie eine persönliche Entscheidungsstruktur.
      </p>

      <p data-i18n="p6">
        Am Ende entsteht eine Projektakte, die als Grundlage für Beratungsgespräche dient.
      </p>

      <p data-i18n="p7">
        Dieser Kurs ersetzt keine Anlageberatung.<br>
        Er vermittelt finanzielle Bildung.
      </p>

      <div class="notice">
        <strong data-i18n="notice_title">Wichtiger Hinweis:</strong>
        <span data-i18n="notice_text">Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieser Kurs dient ausschließlich der Befähigung und Gesprächsvorbereitung.</span>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="structure_title">Kursstruktur</h2>
      <p data-i18n="structure_p1">
        Der Hauptkurs besteht aus zehn Modulen.<br>
        Jedes Modul baut logisch auf dem vorherigen auf.
      </p>

      <div class="modules" id="modules"></div>
    </div>

    <div class="card">
      <h2 data-i18n="akte_title">Projektakte</h2>
      <p data-i18n="akte_p1">
        Während des Kurses werden Eingaben lokal gespeichert.<br>
        Alle Berechnungen und Einschätzungen können ausgedruckt werden.
      </p>
      <p data-i18n="akte_p2">
        Ziel ist nicht schnelle Entscheidung.<br>
        Ziel ist strukturierte Entscheidung.
      </p>
    </div>

    <div class="footer" data-i18n="footer">
      Premium Kursseite. Inhalte sind für Ausbildungszwecke und Gesprächsvorbereitung gedacht.
    </div>
  </div>

  <script>
    (function(){
      const LS_KEY_LANG = "fsa_pvka_lang";
      const LS_KEY_DATA = "fsa_pvka_project";

      const langSel = document.getElementById("langSel");
      const printBtn = document.getElementById("printBtn");
      const resetBtn = document.getElementById("resetBtn");
      const modulesEl = document.getElementById("modules");

      const i18n = {
        de: {
          brand_title: "Premium Kurs",
          brand_sub: "Photovoltaik als Kapitalanlage",
          lang_label: "Sprache",
          btn_print: "Drucken",
          btn_reset: "Projektakte leeren",

          h1: "INDEX – Photovoltaik als Kapitalanlage",
          sub: "Ein Hauptkurs zur finanziellen Einordnung, Risikobewertung und strukturierten Gesprächsführung",

          intro_title: "Ein Hauptkurs zur finanziellen Einordnung, Risikobewertung und strukturierten Gesprächsführung",

          p1: "Photovoltaik wird häufig als sichere und nachhaltige Kapitalanlage beworben. Bilder von Solaranlagen vermitteln Stabilität, Begriffe wie „Sachwert“, „Unabhängigkeit“ und „planbare Rendite“ erzeugen Vertrauen. Doch hinter diesen Versprechen steht ein komplexes Zusammenspiel aus Marktmechanismen, regulatorischen Rahmenbedingungen, technischen Annahmen und wirtschaftlichen Prognosen.",
          p2: "Dieser Hauptkurs verfolgt ein klares Ziel:\nEr soll Mitglieder befähigen, Angebote strukturiert zu prüfen, Risiken zu erkennen und Gespräche mit Fachleuten souverän zu führen.",
          p3: "Es geht nicht darum, selbst Anlagen zu planen.\nEs geht darum, zu verstehen, worüber gesprochen wird.",
          p4: "Photovoltaik ist kein isoliertes Produkt. Sie ist Teil eines Energiesystems, das politisch reguliert, technisch gesteuert und wirtschaftlich dynamisch ist. Wer investiert, investiert in ein System – nicht nur in Module.",
          p5: "Dieser Kurs führt Schritt für Schritt durch:\n• die Einordnung des Marktes,\n• die wirtschaftliche Logik einer Anlage,\n• unterschiedliche Investitionsmodelle,\n• regulatorische Abläufe,\n• vollständige Kostenbetrachtung,\n• realistische Renditeanalyse,\n• Szenarien und Stresstests,\n• Betrugsschutz durch strukturierte Gesprächsführung,\n• sowie eine persönliche Entscheidungsstruktur.",
          p6: "Am Ende entsteht eine Projektakte, die als Grundlage für Beratungsgespräche dient.",
          p7: "Dieser Kurs ersetzt keine Anlageberatung.\nEr vermittelt finanzielle Bildung.",

          notice_title: "Wichtiger Hinweis:",
          notice_text: "Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieser Kurs dient ausschließlich der Befähigung und Gesprächsvorbereitung.",

          structure_title: "Kursstruktur",
          structure_p1: "Der Hauptkurs besteht aus zehn Modulen.\nJedes Modul baut logisch auf dem vorherigen auf.",

          akte_title: "Projektakte",
          akte_p1: "Während des Kurses werden Eingaben lokal gespeichert.\nAlle Berechnungen und Einschätzungen können ausgedruckt werden.",
          akte_p2: "Ziel ist nicht schnelle Entscheidung.\nZiel ist strukturierte Entscheidung.",

          footer: "Premium Kursseite. Inhalte sind für Ausbildungszwecke und Gesprächsvorbereitung gedacht.",

          open_module: "Modul öffnen",
          badge: "Hauptkurs",

          m1_t: "Modul 01 – Der Markt und das Energiesystem",
          m2_t: "Modul 02 – Die wirtschaftliche Logik einer Anlage",
          m3_t: "Modul 03 – Investment-Modelle im Detail",
          m4_t: "Modul 04 – Netzanschluss und regulatorische Abläufe",
          m5_t: "Modul 05 – Transparenz und notwendige Unterlagen",
          m6_t: "Modul 06 – Kostenstruktur und Langfristigkeit",
          m7_t: "Modul 07 – Rendite realistisch verstehen",
          m8_t: "Modul 08 – Szenarien und Stresstest",
          m9_t: "Modul 09 – Betrugsschutz und Gesprächsstruktur",
          m10_t:"Modul 10 – Entscheidungsfindung und Abschluss",

          m1_d: "Einordnung des Marktes, Entwicklung, Wachstum, Systemlogik und Rahmenbedingungen.",
          m2_d: "Wie Ertrag, Eigenverbrauch, Einspeisung, Kosten und Annahmen zusammenwirken.",
          m3_d: "Modelle sauber unterscheiden: eigenes Dach, Betreiberlösung, Beteiligung und Rollenlogik.",
          m4_d: "Warum Netzprozess und Einspeiseantrag entscheidend sind – und wer was liefern muss.",
          m5_d: "Welche Unterlagen notwendig sind, um Angebote belastbar prüfen zu können.",
          m6_d: "Vollständige Kostenbetrachtung über die Laufzeit: CAPEX/OPEX, Rücklagen, Risiken.",
          m7_d: "Rendite verstehen ohne Marketing: Netto, Cashflow, Sensitivität und Plausibilität.",
          m8_d: "Stresstest: Was passiert bei Abweichungen – Ertrag, Kosten, Reparaturen, Annahmen.",
          m9_d: "Schutz durch Struktur: Gesprächsführung, Red Flags, Nachweise, Dokumentenlogik.",
          m10_d:"Abschluss: persönliche Bewertung, nächste Schritte und Projektakte als Terminbasis."
        },

        en: {
          brand_title: "Premium course",
          brand_sub: "Photovoltaics as a capital investment",
          lang_label: "Language",
          btn_print: "Print",
          btn_reset: "Clear project file",

          h1: "INDEX – Photovoltaics as a capital investment",
          sub: "A main course for financial orientation, risk assessment, and structured professional conversations",

          intro_title: "A main course for financial orientation, risk assessment, and structured professional conversations",

          p1: "Photovoltaics is often marketed as a safe and sustainable capital investment. Images of solar systems signal stability; terms like “tangible asset,” “independence,” and “predictable returns” build trust. Yet behind these promises lies a complex interplay of market dynamics, regulatory frameworks, technical assumptions, and economic projections.",
          p2: "This main course has one clear goal:\nTo empower members to review offers in a structured way, recognize risks, and hold professional conversations with confidence.",
          p3: "It is not about planning systems yourself.\nIt is about understanding what is actually being discussed.",
          p4: "Photovoltaics is not an isolated product. It is part of an energy system that is politically regulated, technically controlled, and economically dynamic. When you invest, you invest in a system — not only in modules.",
          p5: "This course walks you step by step through:\n• market orientation,\n• the economic logic of a PV system,\n• different investment models,\n• regulatory processes,\n• full cost perspective,\n• realistic return analysis,\n• scenarios and stress tests,\n• fraud protection through structured conversations,\n• and a personal decision framework.",
          p6: "In the end, you will build a project file that serves as a solid base for professional meetings.",
          p7: "This course does not provide investment advice.\nIt provides financial education.",

          notice_title: "Important notice:",
          notice_text: "No investment advice, no tax or legal advice. This course is strictly educational and for meeting preparation.",

          structure_title: "Course structure",
          structure_p1: "This main course consists of ten modules.\nEach module builds logically on the previous one.",

          akte_title: "Project file",
          akte_p1: "During the course, your inputs are stored locally.\nAll calculations and assessments can be printed.",
          akte_p2: "The goal is not a fast decision.\nThe goal is a structured decision.",

          footer: "Premium course page. Content is for education and meeting preparation.",

          open_module: "Open module",
          badge: "Main course",

          m1_t: "Module 01 – The market and the energy system",
          m2_t: "Module 02 – The economic logic of a PV system",
          m3_t: "Module 03 – Investment models in detail",
          m4_t: "Module 04 – Grid connection and regulatory processes",
          m5_t: "Module 05 – Transparency and required documents",
          m6_t: "Module 06 – Cost structure and long-term view",
          m7_t: "Module 07 – Understanding returns realistically",
          m8_t: "Module 08 – Scenarios and stress test",
          m9_t: "Module 09 – Fraud protection and conversation structure",
          m10_t:"Module 10 – Decision-making and conclusion",

          m1_d: "Market orientation, growth, system logic, and key frameworks.",
          m2_d: "How yield, self-consumption, feed-in, costs, and assumptions work together.",
          m3_d: "Differentiate models: own roof, operator solutions, participation, roles and responsibility.",
          m4_d: "Why grid process and feed-in application matter — and what evidence is required.",
          m5_d: "Which documents are needed to verify offers in a reliable way.",
          m6_d: "Full life-cycle cost view: CAPEX/OPEX, reserves, and practical risk factors.",
          m7_d: "Returns without marketing: net result, cashflow logic, sensitivity, plausibility checks.",
          m8_d: "Stress test: what happens when yield/costs change, repairs occur, assumptions shift.",
          m9_d: "Protection through structure: conversations, red flags, evidence, document logic.",
          m10_d:"Conclusion: personal assessment, next steps, and your project file for meetings."
        }
      };

      const modules = [
        { id:"01", href:"module-01.html", tKey:"m1_t", dKey:"m1_d" },
        { id:"02", href:"module-02.html", tKey:"m2_t", dKey:"m2_d" },
        { id:"03", href:"module-03.html", tKey:"m3_t", dKey:"m3_d" },
        { id:"04", href:"module-04.html", tKey:"m4_t", dKey:"m4_d" },
        { id:"05", href:"module-05.html", tKey:"m5_t", dKey:"m5_d" },
        { id:"06", href:"module-06.html", tKey:"m6_t", dKey:"m6_d" },
        { id:"07", href:"module-07.html", tKey:"m7_t", dKey:"m7_d" },
        { id:"08", href:"module-08.html", tKey:"m8_t", dKey:"m8_d" },
        { id:"09", href:"module-09.html", tKey:"m9_t", dKey:"m9_d" },
        { id:"10", href:"module-10.html", tKey:"m10_t", dKey:"m10_d" }
      ];

      function textWithBreaks(el, txt){
        // preserve line breaks from i18n by converting \n to <br>
        el.innerHTML = String(txt).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("\n","<br>");
      }

      function renderModules(lang){
        modulesEl.innerHTML = "";
        modules.forEach(m => {
          const row = document.createElement("div");
          row.className = "m";

          const left = document.createElement("div");
          left.className = "left";

          const badge = document.createElement("div");
          badge.className = "badge";
          badge.innerHTML = '<span class="s" aria-hidden="true"></span>' + i18n[lang].badge;

          const title = document.createElement("div");
          title.className = "title";
          title.textContent = i18n[lang][m.tKey];

          const desc = document.createElement("p");
          desc.className = "desc";
          desc.textContent = i18n[lang][m.dKey];

          left.appendChild(badge);
          left.appendChild(title);
          left.appendChild(desc);

          const right = document.createElement("div");
          right.className = "right";

          const a = document.createElement("a");
          a.setAttribute("data-nocache", "1");
          a.href = m.href;
          a.textContent = i18n[lang].open_module;

          right.appendChild(a);

          row.appendChild(left);
          row.appendChild(right);

          modulesEl.appendChild(row);
        });

        // append nocache to module links automatically
        const ts = Date.now();
        document.querySelectorAll('a[data-nocache="1"]').forEach(link => {
          const url = new URL(link.getAttribute("href"), location.href);
          url.searchParams.set("nocache", String(ts));
          link.setAttribute("href", url.pathname.split("/").pop() + "?" + url.searchParams.toString());
        });
      }

      function applyI18n(lang){
        document.documentElement.lang = lang;

        document.querySelectorAll("[data-i18n]").forEach(el => {
          const key = el.getAttribute("data-i18n");
          const txt = (i18n[lang] && i18n[lang][key] !== undefined) ? i18n[lang][key] : null;
          if(txt === null) return;

          // paragraphs with deliberate line breaks
          if(["p2","p3","p5","p7","structure_p1","akte_p1","akte_p2"].includes(key)){
            textWithBreaks(el, txt);
          }else{
            el.textContent = txt;
          }
        });

        renderModules(lang);
      }

      function loadLang(){
        const saved = localStorage.getItem(LS_KEY_LANG);
        return saved === "en" ? "en" : "de";
      }
      function saveLang(lang){
        localStorage.setItem(LS_KEY_LANG, lang);
      }

      // Buttons
      printBtn.addEventListener("click", () => window.print());

      resetBtn.addEventListener("click", () => {
        const ok = confirm((langSel.value==="en")
          ? "Clear all saved project inputs for this course?"
          : "Alle gespeicherten Eingaben für diesen Kurs wirklich löschen?"
        );
        if(!ok) return;
        localStorage.removeItem(LS_KEY_DATA);
        alert((langSel.value==="en") ? "Project file cleared." : "Projektakte wurde geleert.");
      });

      // Init language
      const lang = loadLang();
      langSel.value = lang;
      applyI18n(lang);

      langSel.addEventListener("change", () => {
        const l = langSel.value === "en" ? "en" : "de";
        saveLang(l);
        applyI18n(l);
      });
    })();
  </script>
</body>
</html>
