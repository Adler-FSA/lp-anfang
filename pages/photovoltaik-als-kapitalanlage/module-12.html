<!doctype html>
<!--
  FSA • Premium Kurs (Workbook)
  Kurs: Photovoltaik als Kapitalanlage
  Modul 12: Gesetze, Rechte & Pflichten (Auftraggeber & ausführende Firmen)

  GitHub-Pfad: lp-anfang/pages/photovoltaik-als-kapitalanlage/module-12.html
  Commit-Message: photovoltaik-als-kapitalanlage – Modul 12 (Gesetze/Rechte/Pflichten) Premium: Rollen-Klärung (Auswahl), Vertrags-/Abnahme-Check, Mängel/Haftung-Logik, Dokumente, Wow-Rechtekarte, Glossar, Print, LocalStorage (DE/EN)
  Testlink (nocache): https://adler-fsa.github.io/lp-anfang/pages/photovoltaik-als-kapitalanlage/module-12.html?nocache=__TS__
-->
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modul 12 – Gesetze, Rechte & Pflichten • Photovoltaik als Kapitalanlage</title>
  <meta name="description" content="Modul 12 (DE/EN): Rechte & Pflichten im PV-Projekt (Auftraggeber/Firmen). Premium Workbook mit Auswahlfeldern, Vertrags-/Abnahme-Check, Mängel-Logik, Wow-Grafik, Glossar, Print und LocalStorage." />
  <meta name="robots" content="index,follow" />

  <style>
    :root{
      --bg:#ffffff;
      --ink:#0f1114;
      --muted:#47505f;

      --line: rgba(15,17,20,.12);
      --line2: rgba(15,17,20,.18);

      --gold:#c8a63a;
      --gold2:#e0c466;

      --accent:#0b7d5c;
      --accent2:#1aa57a;

      --danger:#c52646;
      --dangerSoft: rgba(197,38,70,.12);

      --shadow: 0 14px 34px rgba(0,0,0,.10);
      --shadow2: 0 26px 70px rgba(0,0,0,.12);

      --radius:18px;
      --max: 1140px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 720px at 10% 8%, rgba(200,166,58,.18), transparent 58%),
        radial-gradient(1050px 720px at 88% 14%, rgba(11,125,92,.14), transparent 58%),
        radial-gradient(920px 640px at 52% 96%, rgba(197,38,70,.10), transparent 60%),
        linear-gradient(180deg, #ffffff 0%, #fbfbfc 45%, #ffffff 100%);
      overflow-x:hidden;
    }

    .spark{
      position:fixed;
      inset:-30vh -30vw auto -30vw;
      height:60vh;
      pointer-events:none;
      z-index:0;
      filter: blur(18px);
      opacity:.55;
      background:
        radial-gradient(closest-side at 18% 35%, rgba(200,166,58,.30), transparent 65%),
        radial-gradient(closest-side at 68% 28%, rgba(11,125,92,.24), transparent 65%),
        radial-gradient(closest-side at 48% 85%, rgba(197,38,70,.16), transparent 70%);
      transform: translate3d(0,0,0);
      animation: floaty 10s ease-in-out infinite;
    }
    @keyframes floaty{
      0%{ transform: translate3d(0px, 0px, 0px) scale(1); }
      50%{ transform: translate3d(12px, 10px, 0px) scale(1.02); }
      100%{ transform: translate3d(0px, 0px, 0px) scale(1); }
    }
    @media (prefers-reduced-motion: reduce){
      .spark{ animation:none; }
      .shine:before{ animation:none !important; }
    }

    .wrap{
      position:relative;
      z-index:1;
      max-width:var(--max);
      margin:0 auto;
      padding: 22px 18px 84px;
    }

    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-bottom:14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      padding: 10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.78));
      border-radius: 999px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .brand:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 180px at 12% 30%, rgba(200,166,58,.16), transparent 64%),
        radial-gradient(520px 180px at 84% 20%, rgba(11,125,92,.12), transparent 64%);
      pointer-events:none;
    }
    .brand > *{ position:relative; }
    .brand svg{ width:22px; height:22px; flex:0 0 auto; }
    .brand .t1{ font-weight:1000; letter-spacing:.2px; line-height:1.1; }
    .brand .t2{ font-size:12px; color:var(--muted); margin-top:2px; line-height:1.1; }

    .premiumTag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      margin-top:6px;
      font-size:11px;
      font-weight:1000;
      letter-spacing:.35px;
      padding: 4px 8px;
      border-radius: 999px;
      border:1px solid rgba(200,166,58,.35);
      background: rgba(200,166,58,.10);
      color: rgba(15,17,20,.86);
      width: fit-content;
    }
    .premiumTag .dot{
      width:8px; height:8px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 10px rgba(200,166,58,.35);
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .lang{
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.72));
      border-radius: 12px;
      box-shadow: var(--shadow);
    }
    .lang label{
      font-size:12px;
      color:var(--muted);
      font-weight:900;
    }
    .lang select{
      background: rgba(255,255,255,.92);
      border:1px solid rgba(15,17,20,.18);
      color: var(--ink);
      border-radius:10px;
      padding:8px 10px;
      font-weight:1000;
      outline:none;
    }

    .btn{
      appearance:none;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.76));
      color:var(--ink);
      padding:10px 12px;
      border-radius: 12px;
      font-weight:1000;
      cursor:pointer;
      box-shadow: var(--shadow);
      display:inline-flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      user-select:none;
      transition: transform .10s ease, border-color .14s ease, box-shadow .14s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(200,166,58,.45); box-shadow: var(--shadow2); }
    .btn:active{ transform: translateY(0px); }
    .btn .dot{
      width:10px; height:10px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 12px rgba(200,166,58,.45);
    }
    .btn.secondary .dot{
      background: linear-gradient(180deg, var(--accent2), var(--accent));
      box-shadow: 0 0 12px rgba(11,125,92,.38);
    }
    .btn.danger .dot{
      background: linear-gradient(180deg, rgba(197,38,70,.9), rgba(197,38,70,1));
      box-shadow: 0 0 12px rgba(197,38,70,.30);
    }

    .hero{
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 18px 18px 16px;
      margin-bottom: 14px;
      position:relative;
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.82));
    }
    .hero:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(840px 280px at 14% 16%, rgba(200,166,58,.20), transparent 65%),
        radial-gradient(740px 260px at 86% 18%, rgba(11,125,92,.14), transparent 65%),
        radial-gradient(720px 260px at 40% 98%, rgba(197,38,70,.10), transparent 70%);
      pointer-events:none;
    }
    .hero:after{
      content:"";
      position:absolute;
      inset:0;
      border-radius: var(--radius);
      pointer-events:none;
      background: linear-gradient(90deg, rgba(200,166,58,.22), transparent 18%, transparent 82%, rgba(200,166,58,.18));
      mix-blend-mode: multiply;
      opacity:.45;
    }
    .hero > *{ position:relative; }

    h1{ margin:0 0 10px; font-size: 28px; letter-spacing:.2px; line-height:1.2; }
    .sub{ margin:0; color: var(--muted); line-height:1.75; font-size:14.8px; max-width: 98ch; }

    .card{
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px 16px 14px;
      margin-top: 12px;
      position:relative;
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.84));
    }
    .card:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(620px 180px at 16% 8%, rgba(200,166,58,.12), transparent 65%),
        radial-gradient(620px 180px at 84% 12%, rgba(11,125,92,.10), transparent 65%);
      pointer-events:none;
      opacity:.75;
    }
    .card > *{ position:relative; }

    .card h2{ margin:0 0 10px; font-size:16px; letter-spacing:.2px; }
    .card p{ margin:0 0 10px; color: var(--muted); font-size:14.2px; line-height:1.85; }

    .notice{
      border:1px solid rgba(200,166,58,.38);
      background: rgba(200,166,58,.10);
      border-radius: 14px;
      padding: 12px 12px;
      color: rgba(15,17,20,.92);
      line-height:1.75;
      font-size:13.6px;
      margin-top:12px;
      position:relative;
      overflow:hidden;
    }
    .notice:before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(520px 160px at 18% 50%, rgba(200,166,58,.18), transparent 70%);
      pointer-events:none;
    }
    .notice > *{ position:relative; }
    .notice strong{ color: #7a5c00; }

    /* Glossar */
    .glossWrap{ margin-top:10px; }
    details.gloss{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
      padding: 10px 12px;
      margin: 10px 0;
      overflow:hidden;
    }
    details.gloss[open]{
      border-color: rgba(11,125,92,.22);
      box-shadow: 0 18px 40px rgba(0,0,0,.08);
    }
    details.gloss summary{
      cursor:pointer;
      list-style:none;
      font-weight:1000;
      color: rgba(15,17,20,.92);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      outline:none;
    }
    details.gloss summary::-webkit-details-marker{ display:none; }
    .glossBadge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:11px;
      font-weight:1000;
      padding: 4px 8px;
      border-radius:999px;
      border:1px solid rgba(200,166,58,.30);
      background: rgba(200,166,58,.10);
      color: rgba(15,17,20,.82);
      flex:0 0 auto;
    }
    .glossBadge .dot{
      width:8px; height:8px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 10px rgba(200,166,58,.28);
    }
    .glossBody{ margin-top:10px; color: var(--muted); line-height:1.85; font-size: 13.8px; }

    /* Auswahl-Felder */
    .form{ display:flex; flex-direction:column; gap:10px; margin-top:10px; }
    .field{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
      padding: 12px 12px;
      position:relative;
      overflow:hidden;
    }
    .field:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 160px at 10% 40%, rgba(200,166,58,.08), transparent 70%),
        radial-gradient(520px 160px at 90% 30%, rgba(11,125,92,.06), transparent 70%);
      pointer-events:none;
      opacity:.9;
    }
    .field > *{ position:relative; }
    .field .lbl{
      font-weight:1000;
      font-size:13px;
      margin-bottom:6px;
      color: rgba(15,17,20,.92);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .hint{
      font-weight:900;
      font-size:12px;
      color: rgba(71,80,95,.92);
      background: rgba(11,125,92,.08);
      border:1px solid rgba(11,125,92,.18);
      border-radius: 999px;
      padding: 4px 8px;
    }
    select{
      width:100%;
      border:1px solid rgba(15,17,20,.18);
      border-radius: 12px;
      padding: 10px 10px;
      font: inherit;
      background: rgba(255,255,255,.96);
      color: var(--ink);
      outline:none;
      font-weight:900;
    }
    .help{ margin-top:8px; color: rgba(71,80,95,.92); font-size:12.8px; line-height:1.65; }

    /* KPI */
    .kpis{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media (min-width: 720px){
      .kpis{ grid-template-columns: 1fr 1fr 1fr 1fr; }
    }
    .kpi{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 12px 26px rgba(0,0,0,.06);
      padding: 12px 12px;
      position:relative;
      overflow:hidden;
      min-height: 82px;
    }
    .kpi:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 160px at 18% 50%, rgba(200,166,58,.10), transparent 70%),
        radial-gradient(520px 160px at 82% 40%, rgba(11,125,92,.08), transparent 70%);
      pointer-events:none;
      opacity:.9;
    }
    .kpi > *{ position:relative; }
    .kpi .t{ font-size:12px; font-weight:1000; color: rgba(71,80,95,.92); }
    .kpi .v{ font-size:18px; font-weight:1100; margin-top:4px; color: rgba(15,17,20,.94); }
    .kpi .s{ font-size:12px; margin-top:2px; color: rgba(71,80,95,.88); line-height:1.35; }

    /* Wow Grafik */
    .viz{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 16px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 14px 34px rgba(0,0,0,.08);
      padding: 12px 12px;
      margin-top: 10px;
      overflow:hidden;
      position:relative;
    }
    .viz.shine:before{
      content:"";
      position:absolute;
      inset:-60% -40%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.55), transparent);
      transform: rotate(18deg);
      opacity:.28;
      animation: sheen 6.5s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes sheen{
      0%{ transform: translateX(-30%) rotate(18deg); opacity:.12; }
      50%{ transform: translateX(18%) rotate(18deg); opacity:.32; }
      100%{ transform: translateX(60%) rotate(18deg); opacity:.12; }
    }
    .vizTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .vizTop .title{ font-weight:1100; color: rgba(15,17,20,.94); }
    .vizTop .note{
      font-size:12px;
      font-weight:900;
      color: rgba(71,80,95,.92);
      background: rgba(200,166,58,.10);
      border:1px solid rgba(200,166,58,.22);
      border-radius: 999px;
      padding: 4px 8px;
      width: fit-content;
    }
    .vizFrame{
      border:1px solid rgba(15,17,20,.10);
      border-radius: 16px;
      background: rgba(255,255,255,.92);
      padding: 10px;
      overflow:hidden;
      box-shadow: inset 0 0 0 1px rgba(200,166,58,.06);
    }
    .viz svg{ width:100%; height:auto; display:block; }

    /* Checklist */
    .checks{ display:flex; flex-direction:column; gap:8px; margin-top:10px; }
    .chk{
      display:flex;
      gap:10px;
      align-items:flex-start;
      border:1px solid rgba(15,17,20,.12);
      background: rgba(255,255,255,.72);
      border-radius: 14px;
      padding: 10px 12px;
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
    }
    .chk input{
      width:18px; height:18px;
      margin-top:2px;
      accent-color: var(--accent);
      flex:0 0 auto;
    }
    .chk .t{ font-weight:1000; color: rgba(15,17,20,.92); line-height:1.4; }
    .chk .d{ margin-top:2px; color: rgba(71,80,95,.92); font-size:12.8px; line-height:1.6; }

    .footer{ margin-top: 16px; color: rgba(71,80,95,.85); font-size: 12px; line-height:1.6; text-align:center; }

    @media print{
      body{ background:#fff !important; color:#000 !important; }
      .spark, .topbar, .actions, .lang, .btn, .footer{ display:none !important; }
      .wrap{ max-width: 820px; padding: 0; }
      .hero, .card, .field, .viz, details.gloss, .chk, .kpi{
        box-shadow:none !important;
        background:#fff !important;
        border:1px solid #bbb !important;
        color:#000 !important;
      }
      .sub, .card p, .glossBody, .help, .chk .d, .kpi .s{ color:#111 !important; }
      .notice{ border:1px solid #999 !important; background:#f7f2df !important; color:#000 !important; }
      details.gloss{ break-inside: avoid; }
      .viz.shine:before{ display:none !important; }
      .hint{ border:1px solid #bbb !important; background:#f2f2f2 !important; color:#000 !important; }
    }
  </style>
</head>

<body>
  <div class="spark" aria-hidden="true"></div>

  <div class="wrap">
    <div class="topbar">
      <div class="brand" aria-label="Kurs">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <defs>
            <linearGradient id="gSunM12" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#c8a63a"/>
              <stop offset="1" stop-color="#e0c466"/>
            </linearGradient>
          </defs>
          <circle cx="12" cy="12" r="5.2" fill="url(#gSunM12)"></circle>
          <g fill="none" stroke="rgba(15,17,20,.75)" stroke-width="1.2" stroke-linecap="round">
            <path d="M12 2.2v2.2M12 19.6v2.2M2.2 12h2.2M19.6 12h2.2"/>
            <path d="M4.6 4.6l1.55 1.55M17.85 17.85l1.55 1.55M19.4 4.6l-1.55 1.55M6.15 17.85L4.6 19.4"/>
          </g>
        </svg>
        <div>
          <div class="t1" data-i18n="brand_title">Premium Kurs</div>
          <div class="t2" data-i18n="brand_sub">Photovoltaik als Kapitalanlage</div>
          <div class="premiumTag" aria-hidden="true">
            <span class="dot"></span>
            <span data-i18n="premium_tag">Modul 12 • Hauptkurs</span>
          </div>
        </div>
      </div>

      <div class="actions">
        <a class="btn" id="toIndex" href="index.html" data-nocache="1" title="Index">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_index">Index</span>
        </a>

        <div class="lang" title="Sprache / Language">
          <label for="langSel" data-i18n="lang_label">Sprache</label>
          <select id="langSel" aria-label="Sprache wählen">
            <option value="de">DE</option>
            <option value="en">EN</option>
          </select>
        </div>

        <button class="btn secondary" id="printBtn" type="button" title="Drucken / Print">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_print">Drucken</span>
        </button>

        <button class="btn danger" id="resetBtn" type="button" title="Projektakte leeren">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_reset">Projektakte leeren</span>
        </button>
      </div>
    </div>

    <div class="hero">
      <h1 data-i18n="h1">Modul 12 – Gesetze, Rechte & Pflichten</h1>
      <p class="sub" data-i18n="sub">
        Dieses Modul schützt dich vor dem größten Fehler: „Ich dachte, das gehört dazu…“.
        Rechte und Pflichten hängen an Vertrag, Abnahme, Dokumentation und Rollen. Ziel: Klarheit zwischen Auftraggeber und ausführender Firma.
      </p>
    </div>

    <div class="card">
      <h2 data-i18n="sec1_title">1) Worum es hier wirklich geht</h2>
      <p data-i18n="sec1_p1">
        Bei PV-Projekten treffen oft mehrere Gewerke, Lieferanten und Dienstleister aufeinander. Ohne saubere Rollenklärung
        (wer ist wofür verantwortlich?) entstehen Lücken. Lücken werden später teuer.
      </p>
      <p data-i18n="sec1_p2">
        Dieses Modul gibt dir keine „Paragrafen-Schlacht“, sondern eine Prüflogik: Vertrag → Leistung → Abnahme → Mängel → Dokumente.
      </p>

      <div class="notice">
        <strong data-i18n="notice_title">Wichtiger Hinweis:</strong>
        <span data-i18n="notice_text">Keine Rechtsberatung. Dieses Modul ist Bildung: Rollenklärung, Vertragslogik, Dokumentation und Gesprächsfragen.</span>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec2_title">2) Glossar: Rechts-/Vertragsbegriffe</h2>
      <div class="glossWrap">
        <details class="gloss">
          <summary>
            <span data-i18n="g1_t">Begriff: Vertragspartner</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g1_b">
            Vertragspartner ist die Person/Firma, mit der du den Vertrag schließt. Nur dort kannst du primär Ansprüche durchsetzen.
            Darum muss klar sein, wer wirklich Vertragspartner ist – nicht nur „wer verkauft“.
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g2_t">Begriff: Abnahme</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g2_b">
            Abnahme bedeutet: Du bestätigst, dass die Leistung im Wesentlichen erbracht ist. Abnahme ist ein Schlüsselpunkt:
            danach ändern sich oft Beweis-/Mängelthemen. Darum muss Abnahme strukturiert passieren (Protokoll!).
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g3_t">Begriff: Mängel & Nachbesserung</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g3_b">
            Ein Mangel ist eine Abweichung von der vereinbarten Leistung. Entscheidend ist: Was ist vereinbart (Leistungsbeschreibung)?
            Und wie wird dokumentiert (Fotos, Protokolle, Messwerte)?
          </div>
        </details>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec3_title">3) Rollen- & Vertragscheck (Auswahlfelder)</h2>
      <p data-i18n="sec3_p1">
        Diese Auswahlfelder bilden deine „Rechte/Pflichten“-Akte: Wer macht was – und was ist schriftlich belegt?
      </p>

      <div class="form">
        <div class="field">
          <div class="lbl">
            <span data-i18n="f1_lbl">Wer ist dein Vertragspartner?</span>
            <span class="hint" data-i18n="hint_role">Rolle</span>
          </div>
          <select data-save="m12_partner">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="one" data-i18n="f1_o1">eine Firma (alles aus einer Hand)</option>
            <option value="multi" data-i18n="f1_o2">mehrere Firmen/Verträge (Gewerke getrennt)</option>
            <option value="unclear" data-i18n="f1_o3">unklar (wer haftet wofür?)</option>
          </select>
          <div class="help" data-i18n="f1_help">Unklarheit hier ist ein Risiko. Vertragspartner entscheidet über Durchsetzung.</div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f2_lbl">Leistungsbeschreibung</span>
            <span class="hint" data-i18n="hint_scope">Leistung</span>
          </div>
          <select data-save="m12_scope">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="clear" data-i18n="f2_o1">klar (was genau geliefert/gebaut wird)</option>
            <option value="soft" data-i18n="f2_o2">weich (viel Marketing, wenig Details)</option>
            <option value="none" data-i18n="f2_o3">fehlt / ist unvollständig</option>
          </select>
          <div class="help" data-i18n="f2_help">Ohne klare Leistung ist Mängelprüfung später schwierig.</div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f3_lbl">Abnahme-Regelung</span>
            <span class="hint" data-i18n="hint_accept">Abnahme</span>
          </div>
          <select data-save="m12_accept">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="protocol" data-i18n="f3_o1">Abnahmeprotokoll vorgesehen</option>
            <option value="informal" data-i18n="f3_o2">informell („läuft doch“)</option>
            <option value="unclear" data-i18n="f3_o3">unklar/nicht geregelt</option>
          </select>
          <div class="help" data-i18n="f3_help">Abnahme = Schlüsselpunkt. Immer Protokoll anstreben.</div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f4_lbl">Mängel/Service-Prozess</span>
            <span class="hint" data-i18n="hint_defect">Mängel</span>
          </div>
          <select data-save="m12_defect">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="clear" data-i18n="f4_o1">klar (Kontakt, Fristen, Nachbesserung)</option>
            <option value="vague" data-i18n="f4_o2">vage („melden Sie sich einfach“)</option>
            <option value="none" data-i18n="f4_o3">nicht geregelt</option>
          </select>
          <div class="help" data-i18n="f4_help">Wenn’s schiefgeht, zählt Prozess + Schriftform.</div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f5_lbl">Dokumentation/Übergabe</span>
            <span class="hint" data-i18n="hint_docs">Dokumente</span>
          </div>
          <select data-save="m12_docs">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="full" data-i18n="f5_o1">vollständig geplant (Unterlagenliste vorhanden)</option>
            <option value="partial" data-i18n="f5_o2">teilweise</option>
            <option value="none" data-i18n="f5_o3">unklar / „kommt später“</option>
          </select>
          <div class="help" data-i18n="f5_help">Ohne Dokumente ist später viel nicht beweisbar.</div>
        </div>
      </div>

      <div class="kpis">
        <div class="kpi">
          <div class="t" data-i18n="k1_t">Rechte-Ampel</div>
          <div class="v" id="kpiLight">–</div>
          <div class="s" data-i18n="k1_s">Vertrag & Prozess</div>
        </div>
        <div class="kpi">
          <div class="t" data-i18n="k2_t">Fokus</div>
          <div class="v" id="kpiFocus">–</div>
          <div class="s" data-i18n="k2_s">wichtigste Lücke</div>
        </div>
        <div class="kpi">
          <div class="t" data-i18n="k3_t">Nächster Schritt</div>
          <div class="v" id="kpiNext">–</div>
          <div class="s" data-i18n="k3_s">konkret</div>
        </div>
        <div class="kpi">
          <div class="t" data-i18n="k4_t">Merksatz</div>
          <div class="v" id="kpiRule">–</div>
          <div class="s" data-i18n="k4_s">fürs Gespräch</div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec4_title">4) Abnahme- & Dokumenten-Check</h2>
      <p data-i18n="sec4_p1">
        Diese Liste ist dein Schutzschild. Du musst sie nicht „juristisch“ verstehen – du nutzt sie, um Ordnung herzustellen.
      </p>

      <div class="checks">
        <label class="chk">
          <input type="checkbox" data-save-check="m12_c1" />
          <span>
            <div class="t" data-i18n="c1_t">Leistungsbeschreibung ist schriftlich und konkret</div>
            <div class="d" data-i18n="c1_d">Was genau wird geliefert? Welche Komponenten? Welche Mengen?</div>
          </span>
        </label>

        <label class="chk">
          <input type="checkbox" data-save-check="m12_c2" />
          <span>
            <div class="t" data-i18n="c2_t">Abnahmeprotokoll wird genutzt</div>
            <div class="d" data-i18n="c2_d">Messwerte/Checkliste/Fotos – damit später Klarheit besteht.</div>
          </span>
        </label>

        <label class="chk">
          <input type="checkbox" data-save-check="m12_c3" />
          <span>
            <div class="t" data-i18n="c3_t">Dokumentenliste ist vollständig</div>
            <div class="d" data-i18n="c3_d">Rechnungen, Datenblätter, Garantie, Schaltpläne, Protokolle, Übergabe.</div>
          </span>
        </label>

        <label class="chk">
          <input type="checkbox" data-save-check="m12_c4" />
          <span>
            <div class="t" data-i18n="c4_t">Service-/Mängelprozess ist schriftlich</div>
            <div class="d" data-i18n="c4_d">Kontakt, Reaktionszeiten, Nachbesserung, Eskalation.</div>
          </span>
        </label>

        <label class="chk">
          <input type="checkbox" data-save-check="m12_c5" />
          <span>
            <div class="t" data-i18n="c5_t">Zahlungsplan passt zur Abnahme</div>
            <div class="d" data-i18n="c5_d">Nicht alles vor Abnahme – sondern gekoppelt an Leistungen.</div>
          </span>
        </label>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec5_title">5) Fragenkatalog: Rechte & Pflichten sauber klären</h2>
      <p data-i18n="sec5_p1">
        Diese Fragen verhindern Interpretationsspielraum. Sie gehören in jedes Gespräch – egal ob Privat oder Gewerbe.
      </p>

      <div class="checks">
        <label class="chk">
          <input type="checkbox" data-save-check="m12_q1" />
          <span>
            <div class="t" data-i18n="q1_t">Wer ist Vertragspartner – und wer übernimmt welche Gewährleistung?</div>
            <div class="d" data-i18n="q1_d">Mehrere Firmen = mehrere Verantwortungen. Klären.</div>
          </span>
        </label>
        <label class="chk">
          <input type="checkbox" data-save-check="m12_q2" />
          <span>
            <div class="t" data-i18n="q2_t">Wie läuft die Abnahme ab – gibt es ein Protokoll?</div>
            <div class="d" data-i18n="q2_d">Abnahme ohne Protokoll ist ein Risiko.</div>
          </span>
        </label>
        <label class="chk">
          <input type="checkbox" data-save-check="m12_q3" />
          <span>
            <div class="t" data-i18n="q3_t">Welche Dokumente bekomme ich spätestens bei Übergabe?</div>
            <div class="d" data-i18n="q3_d">„Kommt später“ ist kein Plan.</div>
          </span>
        </label>
        <label class="chk">
          <input type="checkbox" data-save-check="m12_q4" />
          <span>
            <div class="t" data-i18n="q4_t">Was ist der Prozess bei Mängeln – inkl. Fristen?</div>
            <div class="d" data-i18n="q4_d">Ohne Prozess wird aus jedem Problem ein Streit.</div>
          </span>
        </label>
        <label class="chk">
          <input type="checkbox" data-save-check="m12_q5" />
          <span>
            <div class="t" data-i18n="q5_t">Welche Teile sind Garantie/Hersteller – welche sind Handwerkerleistung?</div>
            <div class="d" data-i18n="q5_d">Damit du weißt, wen du in welchem Fall ansprichst.</div>
          </span>
        </label>
      </div>

      <div class="notice">
        <strong data-i18n="note2_t">Praxis-Regel:</strong>
        <span data-i18n="note2_b">Wenn etwas wichtig ist, muss es schriftlich in Leistung/Prozess/Dokumentation vorkommen.</span>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec6_title">6) Wow-Rechtekarte: Von Vertrag zu Mängel</h2>
      <p data-i18n="sec6_p1">
        Diese Karte ist die Vogelperspektive: Vertrag → Leistung → Abnahme → Dokumente → Mängelprozess.
      </p>

      <div class="viz shine">
        <div class="vizTop">
          <div class="title" data-i18n="viz_title">Rechtekarte (Illustration)</div>
          <div class="note" data-i18n="viz_note">ohne Rechtsberatung</div>
        </div>

        <div class="vizFrame">
          <svg viewBox="0 0 1200 420" role="img" aria-label="Rechtekarte">
            <defs>
              <linearGradient id="bxGold12" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="rgba(200,166,58,.32)"/>
                <stop offset="1" stop-color="rgba(200,166,58,.10)"/>
              </linearGradient>
              <linearGradient id="bxAcc12" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="rgba(11,125,92,.24)"/>
                <stop offset="1" stop-color="rgba(11,125,92,.08)"/>
              </linearGradient>
              <linearGradient id="bxDng12" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="rgba(197,38,70,.22)"/>
                <stop offset="1" stop-color="rgba(197,38,70,.08)"/>
              </linearGradient>
            </defs>

            <rect x="30" y="20" width="1140" height="380" rx="18" fill="rgba(255,255,255,.96)" stroke="rgba(15,17,20,.12)"/>

            <g stroke="rgba(15,17,20,.42)" stroke-width="4" stroke-linecap="round">
              <path d="M260 140H360"/>
              <path d="M520 140H620"/>
              <path d="M780 140H880"/>
              <path d="M260 290H360"/>
              <path d="M520 290H620"/>
              <path d="M780 290H880"/>
            </g>
            <g fill="rgba(15,17,20,.42)">
              <path d="M350 140l-18-10v20z"/>
              <path d="M610 140l-18-10v20z"/>
              <path d="M870 140l-18-10v20z"/>
              <path d="M350 290l-18-10v20z"/>
              <path d="M610 290l-18-10v20z"/>
              <path d="M870 290l-18-10v20z"/>
            </g>

            <rect x="80"  y="90" width="220" height="100" rx="16" fill="url(#bxGold12)" stroke="rgba(200,166,58,.30)"/>
            <rect x="360" y="90" width="220" height="100" rx="16" fill="rgba(15,17,20,.05)" stroke="rgba(15,17,20,.18)"/>
            <rect x="640" y="90" width="220" height="100" rx="16" fill="url(#bxAcc12)" stroke="rgba(11,125,92,.26)"/>
            <rect x="920" y="90" width="200" height="100" rx="16" fill="rgba(15,17,20,.05)" stroke="rgba(15,17,20,.18)"/>

            <rect x="80"  y="240" width="220" height="100" rx="16" fill="rgba(15,17,20,.05)" stroke="rgba(15,17,20,.18)"/>
            <rect x="360" y="240" width="220" height="100" rx="16" fill="url(#bxGold12)" stroke="rgba(200,166,58,.30)"/>
            <rect x="640" y="240" width="220" height="100" rx="16" fill="rgba(15,17,20,.05)" stroke="rgba(15,17,20,.18)"/>
            <rect x="920" y="240" width="200" height="100" rx="16" fill="url(#bxDng12)" stroke="rgba(197,38,70,.22)"/>

            <g font-family="system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif" fill="rgba(15,17,20,.92)">
              <text x="102" y="122" font-size="16" font-weight="1100">1) Vertrag</text>
              <text x="102" y="150" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">Partner + Leistung</text>

              <text x="382" y="122" font-size="16" font-weight="1100">2) Leistung</text>
              <text x="382" y="150" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">Beschreibung</text>

              <text x="662" y="122" font-size="16" font-weight="1100">3) Abnahme</text>
              <text x="662" y="150" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">Protokoll</text>

              <text x="942" y="122" font-size="16" font-weight="1100">4) Dokumente</text>
              <text x="942" y="150" font-size="12.2" font-weight="800" fill="rgba(71,80,95,.92)">Übergabe</text>

              <text x="102" y="272" font-size="16" font-weight="1100">5) Zahlung</text>
              <text x="102" y="300" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">gekoppelt</text>

              <text x="382" y="272" font-size="16" font-weight="1100">6) Service</text>
              <text x="382" y="300" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">Prozess</text>

              <text x="662" y="272" font-size="16" font-weight="1100">7) Mängel</text>
              <text x="662" y="300" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">Nachbesserung</text>

              <text x="942" y="272" font-size="16" font-weight="1100">Risiko</text>
              <text x="942" y="300" font-size="12.2" font-weight="800" fill="rgba(71,80,95,.92)">Unklarheit</text>

              <text x="70" y="372" font-size="13.2" font-weight="1000" fill="rgba(71,80,95,.95)">
                Merksatz: Was nicht vereinbart und dokumentiert ist, wird später schwer durchsetzbar.
              </text>
            </g>
          </svg>
        </div>
      </div>
    </div>

    <div class="footer" data-i18n="footer">
      Premium Workbook – Modul 12. Eingaben werden lokal gespeichert und sind druckbar.
    </div>
  </div>

  <script>
    (function(){
      const LS_KEY_LANG = "fsa_pvka_lang";
      const LS_KEY_DATA = "fsa_pvka_project";

      const langSel  = document.getElementById("langSel");
      const printBtn = document.getElementById("printBtn");
      const resetBtn = document.getElementById("resetBtn");

      const kpiLight = document.getElementById("kpiLight");
      const kpiFocus = document.getElementById("kpiFocus");
      const kpiNext  = document.getElementById("kpiNext");
      const kpiRule  = document.getElementById("kpiRule");

      const i18n = {
        de: {
          brand_title:"Premium Kurs",
          brand_sub:"Photovoltaik als Kapitalanlage",
          premium_tag:"Modul 12 • Hauptkurs",
          btn_index:"Index",
          lang_label:"Sprache",
          btn_print:"Drucken",
          btn_reset:"Projektakte leeren",

          h1:"Modul 12 – Gesetze, Rechte & Pflichten",
          sub:"Dieses Modul schützt dich vor dem größten Fehler: „Ich dachte, das gehört dazu…“. Rechte und Pflichten hängen an Vertrag, Abnahme, Dokumentation und Rollen. Ziel: Klarheit zwischen Auftraggeber und ausführender Firma.",

          sec1_title:"1) Worum es hier wirklich geht",
          sec1_p1:"Bei PV-Projekten treffen oft mehrere Gewerke, Lieferanten und Dienstleister aufeinander. Ohne saubere Rollenklärung (wer ist wofür verantwortlich?) entstehen Lücken. Lücken werden später teuer.",
          sec1_p2:"Dieses Modul gibt dir keine „Paragrafen-Schlacht“, sondern eine Prüflogik: Vertrag → Leistung → Abnahme → Mängel → Dokumente.",

          notice_title:"Wichtiger Hinweis:",
          notice_text:"Keine Rechtsberatung. Dieses Modul ist Bildung: Rollenklärung, Vertragslogik, Dokumentation und Gesprächsfragen.",

          sec2_title:"2) Glossar: Rechts-/Vertragsbegriffe",
          g_badge:"Glossar",
          g1_t:"Begriff: Vertragspartner",
          g1_b:"Vertragspartner ist die Person/Firma, mit der du den Vertrag schließt. Nur dort kannst du primär Ansprüche durchsetzen. Darum muss klar sein, wer wirklich Vertragspartner ist – nicht nur „wer verkauft“.",
          g2_t:"Begriff: Abnahme",
          g2_b:"Abnahme bedeutet: Du bestätigst, dass die Leistung im Wesentlichen erbracht ist. Abnahme ist ein Schlüsselpunkt: danach ändern sich oft Beweis-/Mängelthemen. Darum muss Abnahme strukturiert passieren (Protokoll!).",
          g3_t:"Begriff: Mängel & Nachbesserung",
          g3_b:"Ein Mangel ist eine Abweichung von der vereinbarten Leistung. Entscheidend ist: Was ist vereinbart (Leistungsbeschreibung)? Und wie wird dokumentiert (Fotos, Protokolle, Messwerte)?",

          sec3_title:"3) Rollen- & Vertragscheck (Auswahlfelder)",
          sec3_p1:"Diese Auswahlfelder bilden deine „Rechte/Pflichten“-Akte: Wer macht was – und was ist schriftlich belegt?",

          hint_role:"Rolle",
          hint_scope:"Leistung",
          hint_accept:"Abnahme",
          hint_defect:"Mängel",
          hint_docs:"Dokumente",
          opt_choose:"Bitte wählen…",

          f1_lbl:"Wer ist dein Vertragspartner?",
          f1_o1:"eine Firma (alles aus einer Hand)",
          f1_o2:"mehrere Firmen/Verträge (Gewerke getrennt)",
          f1_o3:"unklar (wer haftet wofür?)",
          f1_help:"Unklarheit hier ist ein Risiko. Vertragspartner entscheidet über Durchsetzung.",

          f2_lbl:"Leistungsbeschreibung",
          f2_o1:"klar (was genau geliefert/gebaut wird)",
          f2_o2:"weich (viel Marketing, wenig Details)",
          f2_o3:"fehlt / ist unvollständig",
          f2_help:"Ohne klare Leistung ist Mängelprüfung später schwierig.",

          f3_lbl:"Abnahme-Regelung",
          f3_o1:"Abnahmeprotokoll vorgesehen",
          f3_o2:"informell („läuft doch“)",
          f3_o3:"unklar/nicht geregelt",
          f3_help:"Abnahme = Schlüsselpunkt. Immer Protokoll anstreben.",

          f4_lbl:"Mängel/Service-Prozess",
          f4_o1:"klar (Kontakt, Fristen, Nachbesserung)",
          f4_o2:"vage („melden Sie sich einfach“)",
          f4_o3:"nicht geregelt",
          f4_help:"Wenn’s schiefgeht, zählt Prozess + Schriftform.",

          f5_lbl:"Dokumentation/Übergabe",
          f5_o1:"vollständig geplant (Unterlagenliste vorhanden)",
          f5_o2:"teilweise",
          f5_o3:"unklar / „kommt später“",
          f5_help:"Ohne Dokumente ist später viel nicht beweisbar.",

          k1_t:"Rechte-Ampel",
          k1_s:"Vertrag & Prozess",
          k2_t:"Fokus",
          k2_s:"wichtigste Lücke",
          k3_t:"Nächster Schritt",
          k3_s:"konkret",
          k4_t:"Merksatz",
          k4_s:"fürs Gespräch",

          sec4_title:"4) Abnahme- & Dokumenten-Check",
          sec4_p1:"Diese Liste ist dein Schutzschild. Du musst sie nicht „juristisch“ verstehen – du nutzt sie, um Ordnung herzustellen.",
          c1_t:"Leistungsbeschreibung ist schriftlich und konkret",
          c1_d:"Was genau wird geliefert? Welche Komponenten? Welche Mengen?",
          c2_t:"Abnahmeprotokoll wird genutzt",
          c2_d:"Messwerte/Checkliste/Fotos – damit später Klarheit besteht.",
          c3_t:"Dokumentenliste ist vollständig",
          c3_d:"Rechnungen, Datenblätter, Garantie, Schaltpläne, Protokolle, Übergabe.",
          c4_t:"Service-/Mängelprozess ist schriftlich",
          c4_d:"Kontakt, Reaktionszeiten, Nachbesserung, Eskalation.",
          c5_t:"Zahlungsplan passt zur Abnahme",
          c5_d:"Nicht alles vor Abnahme – sondern gekoppelt an Leistungen.",

          sec5_title:"5) Fragenkatalog: Rechte & Pflichten sauber klären",
          sec5_p1:"Diese Fragen verhindern Interpretationsspielraum. Sie gehören in jedes Gespräch – egal ob Privat oder Gewerbe.",
          q1_t:"Wer ist Vertragspartner – und wer übernimmt welche Gewährleistung?",
          q1_d:"Mehrere Firmen = mehrere Verantwortungen. Klären.",
          q2_t:"Wie läuft die Abnahme ab – gibt es ein Protokoll?",
          q2_d:"Abnahme ohne Protokoll ist ein Risiko.",
          q3_t:"Welche Dokumente bekomme ich spätestens bei Übergabe?",
          q3_d:"„Kommt später“ ist kein Plan.",
          q4_t:"Was ist der Prozess bei Mängeln – inkl. Fristen?",
          q4_d:"Ohne Prozess wird aus jedem Problem ein Streit.",
          q5_t:"Welche Teile sind Garantie/Hersteller – welche sind Handwerkerleistung?",
          q5_d:"Damit du weißt, wen du in welchem Fall ansprichst.",

          note2_t:"Praxis-Regel:",
          note2_b:"Wenn etwas wichtig ist, muss es schriftlich in Leistung/Prozess/Dokumentation vorkommen.",

          sec6_title:"6) Wow-Rechtekarte: Von Vertrag zu Mängel",
          sec6_p1:"Diese Karte ist die Vogelperspektive: Vertrag → Leistung → Abnahme → Dokumente → Mängelprozess.",
          viz_title:"Rechtekarte (Illustration)",
          viz_note:"ohne Rechtsberatung",

          footer:"Premium Workbook – Modul 12. Eingaben werden lokal gespeichert und sind druckbar.",

          red:"ROT",
          yellow:"GELB",
          green:"GRÜN",
          focus_partner:"Vertragspartner klären",
          focus_scope:"Leistung konkretisieren",
          focus_accept:"Abnahme-Protokoll",
          focus_docs:"Dokumentenliste",
          focus_defect:"Mängelprozess",
          next_partner:"Schriftlich: Wer ist Vertragspartner wofür?",
          next_scope:"Leistungsbeschreibung + Komponentenliste anfordern",
          next_accept:"Abnahmeprotokoll/Checkliste festlegen",
          next_docs:"Übergabeliste schriftlich fixieren",
          next_defect:"Service-/Mängelprozess schriftlich vereinbaren",
          rule:"Was nicht schriftlich vereinbart ist, wird später schwer durchsetzbar."
        },
        en: {
          brand_title:"Premium course",
          brand_sub:"Photovoltaics as a capital investment",
          premium_tag:"Module 12 • Main course",
          btn_index:"Index",
          lang_label:"Language",
          btn_print:"Print",
          btn_reset:"Clear project file",

          h1:"Module 12 – Laws, rights & obligations",
          sub:"This module protects you from the biggest mistake: ‘I assumed that was included…’. Rights and obligations depend on contract, acceptance, documentation and roles. Goal: clarity between client and executing companies.",

          sec1_title:"1) What this is really about",
          sec1_p1:"PV projects often involve multiple trades, suppliers and service providers. Without clean role clarity (who is responsible for what?) gaps appear. Gaps become expensive later.",
          sec1_p2:"No ‘paragraph battle’ here—just a verification logic: contract → scope → acceptance → defects → documents.",

          notice_title:"Important notice:",
          notice_text:"No legal advice. This module is education: role clarity, contract logic, documentation and conversation questions.",

          sec2_title:"2) Glossary: legal/contract terms",
          g_badge:"Glossary",
          g1_t:"Term: contractual partner",
          g1_b:"Your contractual partner is who you sign with. That’s where you primarily enforce claims. So it must be clear who the real partner is—not just who ‘sells’.",
          g2_t:"Term: acceptance",
          g2_b:"Acceptance means confirming the work is essentially delivered. It’s a key point: after acceptance, proof/defect dynamics can change. Therefore use an acceptance protocol.",
          g3_t:"Term: defects & remediation",
          g3_b:"A defect is a deviation from the agreed scope. Key: what was agreed (scope) and how it is documented (photos, protocols, measurements).",

          sec3_title:"3) Role & contract check (selection fields)",
          sec3_p1:"These selection fields create your rights/obligations file: who does what—and what is proven in writing?",

          hint_role:"role",
          hint_scope:"scope",
          hint_accept:"acceptance",
          hint_defect:"defects",
          hint_docs:"documents",
          opt_choose:"Please choose…",

          f1_lbl:"Who is your contractual partner?",
          f1_o1:"one company (all-in-one)",
          f1_o2:"multiple companies/contracts (separate trades)",
          f1_o3:"unclear (who is liable for what?)",
          f1_help:"Uncertainty here is risk. Contract partner determines enforcement.",

          f2_lbl:"Scope description",
          f2_o1:"clear (what exactly is delivered/built)",
          f2_o2:"soft (marketing, few details)",
          f2_o3:"missing/incomplete",
          f2_help:"Without clear scope, defect evaluation becomes hard later.",

          f3_lbl:"Acceptance arrangement",
          f3_o1:"acceptance protocol planned",
          f3_o2:"informal (‘it works’)",
          f3_o3:"unclear/not regulated",
          f3_help:"Acceptance is key. Always aim for a protocol.",

          f4_lbl:"Defect/service process",
          f4_o1:"clear (contacts, deadlines, remediation)",
          f4_o2:"vague (‘just call us’)",
          f4_o3:"not regulated",
          f4_help:"When things go wrong, process + writing matter.",

          f5_lbl:"Documentation/hand-over",
          f5_o1:"fully planned (handover list exists)",
          f5_o2:"partial",
          f5_o3:"unclear / ‘later’",
          f5_help:"Without documents, many things are hard to prove later.",

          k1_t:"Rights light",
          k1_s:"contract & process",
          k2_t:"Focus",
          k2_s:"main gap",
          k3_t:"Next step",
          k3_s:"concrete",
          k4_t:"Rule",
          k4_s:"for the talk",

          sec4_title:"4) Acceptance & document check",
          sec4_p1:"This list is your shield. You don’t need legal language—use it to create order and proof.",
          c1_t:"Scope is written and concrete",
          c1_d:"What exactly is delivered? Which components? Which quantities?",
          c2_t:"Acceptance protocol is used",
          c2_d:"Measurements/checklist/photos—for clarity later.",
          c3_t:"Document list is complete",
          c3_d:"Invoices, datasheets, warranty, wiring diagrams, protocols, handover.",
          c4_t:"Service/defect process is written",
          c4_d:"Contact, response times, remediation, escalation.",
          c5_t:"Payment plan matches acceptance",
          c5_d:"Not all upfront—tie payments to delivered milestones.",

          sec5_title:"5) Question set: clarify rights & obligations",
          sec5_p1:"These questions remove interpretation. They belong in every conversation.",
          q1_t:"Who is the contract partner—and who covers which warranty/obligation?",
          q1_d:"Multiple companies = multiple responsibilities. Clarify.",
          q2_t:"How does acceptance work—is there a protocol?",
          q2_d:"Acceptance without protocol is risk.",
          q3_t:"Which documents do I receive at handover at the latest?",
          q3_d:"‘Later’ is not a plan.",
          q4_t:"What is the defect process—including deadlines?",
          q4_d:"No process = every issue becomes a dispute.",
          q5_t:"Which parts are manufacturer warranty—and which are workmanship?",
          q5_d:"So you know who to contact in which case.",

          note2_t:"Practical rule:",
          note2_b:"If it matters, it must appear in writing in scope/process/documentation.",

          sec6_title:"6) Wow rights map: from contract to defects",
          sec6_p1:"This map is the bird’s-eye view: contract → scope → acceptance → documents → defect process.",
          viz_title:"Rights map (illustration)",
          viz_note:"no legal advice",

          footer:"Premium workbook – Module 12. Inputs are stored locally and printable.",

          red:"RED",
          yellow:"YELLOW",
          green:"GREEN",
          focus_partner:"clarify contract partner",
          focus_scope:"make scope concrete",
          focus_accept:"acceptance protocol",
          focus_docs:"document list",
          focus_defect:"defect process",
          next_partner:"in writing: who is partner for what?",
          next_scope:"request scope + component list",
          next_accept:"set acceptance protocol/checklist",
          next_docs:"fix handover list in writing",
          next_defect:"agree service/defect process in writing",
          rule:"If it’s not agreed in writing, it’s hard to enforce later."
        }
      };

      function getData(){
        try{
          const raw = localStorage.getItem(LS_KEY_DATA);
          const obj = raw ? JSON.parse(raw) : {};
          return (obj && typeof obj === "object") ? obj : {};
        }catch(e){ return {}; }
      }
      function setData(obj){
        localStorage.setItem(LS_KEY_DATA, JSON.stringify(obj));
      }

      function applyI18n(lang){
        document.documentElement.lang = lang;
        document.querySelectorAll("[data-i18n]").forEach(el=>{
          const k = el.getAttribute("data-i18n");
          const txt = (i18n[lang] && i18n[lang][k] !== undefined) ? i18n[lang][k] : null;
          if(txt !== null) el.textContent = txt;
        });
        document.querySelectorAll("option[data-i18n]").forEach(opt=>{
          const k = opt.getAttribute("data-i18n");
          const txt = (i18n[lang] && i18n[lang][k] !== undefined) ? i18n[lang][k] : null;
          if(txt !== null) opt.textContent = txt;
        });
      }

      function loadLang(){
        const saved = localStorage.getItem(LS_KEY_LANG);
        return saved === "en" ? "en" : "de";
      }
      function saveLang(lang){
        localStorage.setItem(LS_KEY_LANG, lang);
      }

      function addNoCache(){
        const ts = Date.now();
        document.querySelectorAll('a[data-nocache="1"]').forEach(link=>{
          const href = link.getAttribute("href") || "";
          const url = new URL(href, location.href);
          url.searchParams.set("nocache", String(ts));
          link.setAttribute("href", url.pathname.split("/").pop() + "?" + url.searchParams.toString());
        });
      }

      function wireFields(){
        const data = getData();

        document.querySelectorAll("select[data-save]").forEach(sel=>{
          const k = sel.getAttribute("data-save");
          if(data[k] !== undefined) sel.value = data[k];
          sel.addEventListener("change", ()=>{
            const d = getData();
            d[k] = sel.value;
            setData(d);
            updateAll();
          });
        });

        document.querySelectorAll("input[type='checkbox'][data-save-check]").forEach(chk=>{
          const k = chk.getAttribute("data-save-check");
          if(data[k] !== undefined) chk.checked = !!data[k];
          chk.addEventListener("change", ()=>{
            const d = getData();
            d[k] = chk.checked;
            setData(d);
            updateAll();
          });
        });
      }

      function compute(){
        const lang = (langSel.value === "en") ? "en" : "de";
        const t = i18n[lang];
        const d = getData();

        let score = 100;

        if(d.m12_partner === "unclear") score -= 28;
        if(d.m12_scope === "soft") score -= 18;
        if(d.m12_scope === "none") score -= 32;
        if(d.m12_accept === "informal") score -= 18;
        if(d.m12_accept === "unclear") score -= 28;
        if(d.m12_defect === "vague") score -= 16;
        if(d.m12_defect === "none") score -= 26;
        if(d.m12_docs === "partial") score -= 16;
        if(d.m12_docs === "none") score -= 26;

        const chkKeys = ["m12_c1","m12_c2","m12_c3","m12_c4","m12_c5"];
        let ok = 0;
        chkKeys.forEach(k=>{ if(d[k]) ok++; });
        score -= (5 - ok) * 7;

        score = Math.max(0, Math.min(100, score));

        let light = t.green;
        if(score < 58) light = t.red;
        else if(score < 80) light = t.yellow;

        // Focus
        let focus = "–";
        if(d.m12_partner === "unclear") focus = t.focus_partner;
        else if(d.m12_scope === "none" || d.m12_scope === "soft") focus = t.focus_scope;
        else if(d.m12_accept === "unclear" || d.m12_accept === "informal") focus = t.focus_accept;
        else if(d.m12_docs === "none" || d.m12_docs === "partial") focus = t.focus_docs;
        else if(d.m12_defect === "none" || d.m12_defect === "vague") focus = t.focus_defect;

        // Next
        let next = t.next_partner;
        if(focus === t.focus_scope) next = t.next_scope;
        if(focus === t.focus_accept) next = t.next_accept;
        if(focus === t.focus_docs) next = t.next_docs;
        if(focus === t.focus_defect) next = t.next_defect;

        return { light, focus, next, rule: t.rule, t };
      }

      function updateAll(){
        const r = compute();
        kpiLight.textContent = r.light;
        kpiFocus.textContent = r.focus;
        kpiNext.textContent  = r.next;
        kpiRule.textContent  = r.rule;
      }

      // Buttons
      printBtn.addEventListener("click", ()=> window.print());
      resetBtn.addEventListener("click", ()=>{
        const lang = langSel.value === "en" ? "en" : "de";
        const ok = confirm(lang === "en"
          ? "Clear all saved project inputs for this course?"
          : "Alle gespeicherten Eingaben für diesen Kurs wirklich löschen?"
        );
        if(!ok) return;
        localStorage.removeItem(LS_KEY_DATA);
        location.reload();
      });

      // Init
      addNoCache();
      const lang = loadLang();
      langSel.value = lang;
      applyI18n(lang);
      wireFields();
      updateAll();

      langSel.addEventListener("change", ()=>{
        const l = langSel.value === "en" ? "en" : "de";
        saveLang(l);
        applyI18n(l);
        updateAll();
      });
    })();
  </script>
</body>
</html>
