<!doctype html>
<!--
  FSA • Premium Kurs (Workbook)
  Kurs: Photovoltaik als Kapitalanlage
  Modul 09: Betrugsschutz und Gesprächsstruktur

  GitHub-Pfad: lp-anfang/pages/photovoltaik-als-kapitalanlage/module-09.html
  Commit-Message: photovoltaik-als-kapitalanlage – Modul 09 Flowchart-Fix: Pfeile sauber (keine Überlappung)
  Testlink (nocache): https://adler-fsa.github.io/lp-anfang/pages/photovoltaik-als-kapitalanlage/module-09.html?nocache=__TS__
-->
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modul 09 – Betrugsschutz & Gesprächsstruktur • Photovoltaik als Kapitalanlage</title>
  <meta name="description" content="Modul 09 (DE/EN): Betrugsschutz durch strukturierte Gesprächsführung. Premium Workbook mit Auswahlfeldern, Gesprächs-Flow, Red-Flags, Nachweis-Liste, Wow-Flowchart, Glossar, Print und LocalStorage." />
  <meta name="robots" content="index,follow" />

  <style>
    :root{
      --bg:#ffffff;
      --ink:#0f1114;
      --muted:#47505f;

      --line: rgba(15,17,20,.12);
      --line2: rgba(15,17,20,.18);

      --gold:#c8a63a;
      --gold2:#e0c466;

      --accent:#0b7d5c;
      --accent2:#1aa57a;

      --danger:#c52646;
      --dangerSoft: rgba(197,38,70,.12);

      --shadow: 0 14px 34px rgba(0,0,0,.10);
      --shadow2: 0 26px 70px rgba(0,0,0,.12);

      --radius:18px;
      --max: 1140px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 720px at 10% 8%, rgba(200,166,58,.18), transparent 58%),
        radial-gradient(1050px 720px at 88% 14%, rgba(11,125,92,.14), transparent 58%),
        radial-gradient(920px 640px at 52% 96%, rgba(197,38,70,.10), transparent 60%),
        linear-gradient(180deg, #ffffff 0%, #fbfbfc 45%, #ffffff 100%);
      overflow-x:hidden;
    }

    .spark{
      position:fixed;
      inset:-30vh -30vw auto -30vw;
      height:60vh;
      pointer-events:none;
      z-index:0;
      filter: blur(18px);
      opacity:.55;
      background:
        radial-gradient(closest-side at 18% 35%, rgba(200,166,58,.30), transparent 65%),
        radial-gradient(closest-side at 68% 28%, rgba(11,125,92,.24), transparent 65%),
        radial-gradient(closest-side at 48% 85%, rgba(197,38,70,.16), transparent 70%);
      transform: translate3d(0,0,0);
      animation: floaty 10s ease-in-out infinite;
    }
    @keyframes floaty{
      0%{ transform: translate3d(0px, 0px, 0px) scale(1); }
      50%{ transform: translate3d(12px, 10px, 0px) scale(1.02); }
      100%{ transform: translate3d(0px, 0px, 0px) scale(1); }
    }
    @media (prefers-reduced-motion: reduce){
      .spark{ animation:none; }
      .shine:before{ animation:none !important; }
    }

    .wrap{
      position:relative;
      z-index:1;
      max-width:var(--max);
      margin:0 auto;
      padding: 22px 18px 84px;
    }

    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-bottom:14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      padding: 10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.78));
      border-radius: 999px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .brand:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 180px at 12% 30%, rgba(200,166,58,.16), transparent 64%),
        radial-gradient(520px 180px at 84% 20%, rgba(11,125,92,.12), transparent 64%);
      pointer-events:none;
    }
    .brand > *{ position:relative; }
    .brand svg{ width:22px; height:22px; flex:0 0 auto; }
    .brand .t1{ font-weight:1000; letter-spacing:.2px; line-height:1.1; }
    .brand .t2{ font-size:12px; color:var(--muted); margin-top:2px; line-height:1.1; }

    .premiumTag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      margin-top:6px;
      font-size:11px;
      font-weight:1000;
      letter-spacing:.35px;
      padding: 4px 8px;
      border-radius: 999px;
      border:1px solid rgba(200,166,58,.35);
      background: rgba(200,166,58,.10);
      color: rgba(15,17,20,.86);
      width: fit-content;
    }
    .premiumTag .dot{
      width:8px; height:8px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 10px rgba(200,166,58,.35);
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .lang{
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.72));
      border-radius: 12px;
      box-shadow: var(--shadow);
    }
    .lang label{
      font-size:12px;
      color:var(--muted);
      font-weight:900;
    }
    .lang select{
      background: rgba(255,255,255,.92);
      border:1px solid rgba(15,17,20,.18);
      color: var(--ink);
      border-radius:10px;
      padding:8px 10px;
      font-weight:1000;
      outline:none;
    }

    .btn{
      appearance:none;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.76));
      color:var(--ink);
      padding:10px 12px;
      border-radius: 12px;
      font-weight:1000;
      cursor:pointer;
      box-shadow: var(--shadow);
      display:inline-flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      user-select:none;
      transition: transform .10s ease, border-color .14s ease, box-shadow .14s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(200,166,58,.45); box-shadow: var(--shadow2); }
    .btn:active{ transform: translateY(0px); }
    .btn .dot{
      width:10px; height:10px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 12px rgba(200,166,58,.45);
    }
    .btn.secondary .dot{
      background: linear-gradient(180deg, var(--accent2), var(--accent));
      box-shadow: 0 0 12px rgba(11,125,92,.38);
    }
    .btn.danger .dot{
      background: linear-gradient(180deg, rgba(197,38,70,.9), rgba(197,38,70,1));
      box-shadow: 0 0 12px rgba(197,38,70,.30);
    }

    .hero{
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 18px 18px 16px;
      margin-bottom: 14px;
      position:relative;
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.82));
    }
    .hero:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(840px 280px at 14% 16%, rgba(200,166,58,.20), transparent 65%),
        radial-gradient(740px 260px at 86% 18%, rgba(11,125,92,.14), transparent 65%),
        radial-gradient(720px 260px at 40% 98%, rgba(197,38,70,.10), transparent 70%);
      pointer-events:none;
    }
    .hero:after{
      content:"";
      position:absolute;
      inset:0;
      border-radius: var(--radius);
      pointer-events:none;
      background: linear-gradient(90deg, rgba(200,166,58,.22), transparent 18%, transparent 82%, rgba(200,166,58,.18));
      mix-blend-mode: multiply;
      opacity:.45;
    }
    .hero > *{ position:relative; }

    h1{ margin:0 0 10px; font-size: 28px; letter-spacing:.2px; line-height:1.2; }
    .sub{ margin:0; color: var(--muted); line-height:1.75; font-size:14.8px; max-width: 98ch; }

    .card{
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px 16px 14px;
      margin-top: 12px;
      position:relative;
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.84));
    }
    .card:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(620px 180px at 16% 8%, rgba(200,166,58,.12), transparent 65%),
        radial-gradient(620px 180px at 84% 12%, rgba(11,125,92,.10), transparent 65%);
      pointer-events:none;
      opacity:.75;
    }
    .card > *{ position:relative; }

    .card h2{ margin:0 0 10px; font-size:16px; letter-spacing:.2px; }
    .card p{ margin:0 0 10px; color: var(--muted); font-size:14.2px; line-height:1.85; }

    .notice{
      border:1px solid rgba(200,166,58,.38);
      background: rgba(200,166,58,.10);
      border-radius: 14px;
      padding: 12px 12px;
      color: rgba(15,17,20,.92);
      line-height:1.75;
      font-size:13.6px;
      margin-top:12px;
      position:relative;
      overflow:hidden;
    }
    .notice:before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(520px 160px at 18% 50%, rgba(200,166,58,.18), transparent 70%);
      pointer-events:none;
    }
    .notice > *{ position:relative; }
    .notice strong{ color: #7a5c00; }

    /* Glossar */
    .glossWrap{ margin-top:10px; }
    details.gloss{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
      padding: 10px 12px;
      margin: 10px 0;
      overflow:hidden;
    }
    details.gloss[open]{
      border-color: rgba(11,125,92,.22);
      box-shadow: 0 18px 40px rgba(0,0,0,.08);
    }
    details.gloss summary{
      cursor:pointer;
      list-style:none;
      font-weight:1000;
      color: rgba(15,17,20,.92);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      outline:none;
    }
    details.gloss summary::-webkit-details-marker{ display:none; }
    .glossBadge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:11px;
      font-weight:1000;
      padding: 4px 8px;
      border-radius:999px;
      border:1px solid rgba(200,166,58,.30);
      background: rgba(200,166,58,.10);
      color: rgba(15,17,20,.82);
      flex:0 0 auto;
    }
    .glossBadge .dot{
      width:8px; height:8px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 10px rgba(200,166,58,.28);
    }
    .glossBody{ margin-top:10px; color: var(--muted); line-height:1.85; font-size: 13.8px; }

    /* Auswahl-Felder */
    .form{ display:flex; flex-direction:column; gap:10px; margin-top:10px; }
    .field{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
      padding: 12px 12px;
      position:relative;
      overflow:hidden;
    }
    .field:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 160px at 10% 40%, rgba(200,166,58,.08), transparent 70%),
        radial-gradient(520px 160px at 90% 30%, rgba(11,125,92,.06), transparent 70%);
      pointer-events:none;
      opacity:.9;
    }
    .field > *{ position:relative; }
    .field .lbl{
      font-weight:1000;
      font-size:13px;
      margin-bottom:6px;
      color: rgba(15,17,20,.92);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .hint{
      font-weight:900;
      font-size:12px;
      color: rgba(71,80,95,.92);
      background: rgba(11,125,92,.08);
      border:1px solid rgba(11,125,92,.18);
      border-radius: 999px;
      padding: 4px 8px;
    }
    select{
      width:100%;
      border:1px solid rgba(15,17,20,.18);
      border-radius: 12px;
      padding: 10px 10px;
      font: inherit;
      background: rgba(255,255,255,.96);
      color: var(--ink);
      outline:none;
      font-weight:900;
    }
    .help{ margin-top:8px; color: rgba(71,80,95,.92); font-size:12.8px; line-height:1.65; }

    /* KPI */
    .kpis{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media (min-width: 720px){
      .kpis{ grid-template-columns: 1fr 1fr 1fr 1fr; }
    }
    .kpi{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 12px 26px rgba(0,0,0,.06);
      padding: 12px 12px;
      position:relative;
      overflow:hidden;
      min-height: 82px;
    }
    .kpi:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 160px at 18% 50%, rgba(200,166,58,.10), transparent 70%),
        radial-gradient(520px 160px at 82% 40%, rgba(11,125,92,.08), transparent 70%);
      pointer-events:none;
      opacity:.9;
    }
    .kpi > *{ position:relative; }
    .kpi .t{ font-size:12px; font-weight:1000; color: rgba(71,80,95,.92); }
    .kpi .v{ font-size:18px; font-weight:1100; margin-top:4px; color: rgba(15,17,20,.94); }
    .kpi .s{ font-size:12px; margin-top:2px; color: rgba(71,80,95,.88); line-height:1.35; }

    /* Wow Flowchart */
    .viz{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 16px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 14px 34px rgba(0,0,0,.08);
      padding: 12px 12px;
      margin-top: 10px;
      overflow:hidden;
      position:relative;
    }
    .viz.shine:before{
      content:"";
      position:absolute;
      inset:-60% -40%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.55), transparent);
      transform: rotate(18deg);
      opacity:.28;
      animation: sheen 6.5s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes sheen{
      0%{ transform: translateX(-30%) rotate(18deg); opacity:.12; }
      50%{ transform: translateX(18%) rotate(18deg); opacity:.32; }
      100%{ transform: translateX(60%) rotate(18deg); opacity:.12; }
    }
    .vizTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .vizTop .title{ font-weight:1100; color: rgba(15,17,20,.94); }
    .vizTop .note{
      font-size:12px;
      font-weight:900;
      color: rgba(71,80,95,.92);
      background: rgba(200,166,58,.10);
      border:1px solid rgba(200,166,58,.22);
      border-radius: 999px;
      padding: 4px 8px;
      width: fit-content;
    }
    .vizFrame{
      border:1px solid rgba(15,17,20,.10);
      border-radius: 16px;
      background: rgba(255,255,255,.92);
      padding: 10px;
      overflow:hidden;
      box-shadow: inset 0 0 0 1px rgba(200,166,58,.06);
    }
    .viz svg{ width:100%; height:auto; display:block; }

    /* Checklist */
    .checks{ display:flex; flex-direction:column; gap:8px; margin-top:10px; }
    .chk{
      display:flex;
      gap:10px;
      align-items:flex-start;
      border:1px solid rgba(15,17,20,.12);
      background: rgba(255,255,255,.72);
      border-radius: 14px;
      padding: 10px 12px;
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
    }
    .chk input{
      width:18px; height:18px;
      margin-top:2px;
      accent-color: var(--accent);
      flex:0 0 auto;
    }
    .chk .t{ font-weight:1000; color: rgba(15,17,20,.92); line-height:1.4; }
    .chk .d{ margin-top:2px; color: rgba(71,80,95,.92); font-size:12.8px; line-height:1.6; }

    .footer{ margin-top: 16px; color: rgba(71,80,95,.85); font-size: 12px; line-height:1.6; text-align:center; }

    @media print{
      body{ background:#fff !important; color:#000 !important; }
      .spark, .topbar, .actions, .lang, .btn, .footer{ display:none !important; }
      .wrap{ max-width: 820px; padding: 0; }
      .hero, .card, .field, .viz, details.gloss, .chk, .kpi{
        box-shadow:none !important;
        background:#fff !important;
        border:1px solid #bbb !important;
        color:#000 !important;
      }
      .sub, .card p, .glossBody, .help, .chk .d, .kpi .s{ color:#111 !important; }
      .notice{ border:1px solid #999 !important; background:#f7f2df !important; color:#000 !important; }
      details.gloss{ break-inside: avoid; }
      .viz.shine:before{ display:none !important; }
      .hint{ border:1px solid #bbb !important; background:#f2f2f2 !important; color:#000 !important; }
    }
  </style>
</head>

<body>
  <div class="spark" aria-hidden="true"></div>

  <div class="wrap">
    <div class="topbar">
      <div class="brand" aria-label="Kurs">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <defs>
            <linearGradient id="gSunM9" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#c8a63a"/>
              <stop offset="1" stop-color="#e0c466"/>
            </linearGradient>
          </defs>
          <circle cx="12" cy="12" r="5.2" fill="url(#gSunM9)"></circle>
          <g fill="none" stroke="rgba(15,17,20,.75)" stroke-width="1.2" stroke-linecap="round">
            <path d="M12 2.2v2.2M12 19.6v2.2M2.2 12h2.2M19.6 12h2.2"/>
            <path d="M4.6 4.6l1.55 1.55M17.85 17.85l1.55 1.55M19.4 4.6l-1.55 1.55M6.15 17.85L4.6 19.4"/>
          </g>
        </svg>
        <div>
          <div class="t1" data-i18n="brand_title">Premium Kurs</div>
          <div class="t2" data-i18n="brand_sub">Photovoltaik als Kapitalanlage</div>
          <div class="premiumTag" aria-hidden="true">
            <span class="dot"></span>
            <span data-i18n="premium_tag">Modul 09 • Hauptkurs</span>
          </div>
        </div>
      </div>

      <div class="actions">
        <a class="btn" id="toIndex" href="index.html" data-nocache="1" title="Index">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_index">Index</span>
        </a>

        <div class="lang" title="Sprache / Language">
          <label for="langSel" data-i18n="lang_label">Sprache</label>
          <select id="langSel" aria-label="Sprache wählen">
            <option value="de">DE</option>
            <option value="en">EN</option>
          </select>
        </div>

        <button class="btn secondary" id="printBtn" type="button" title="Drucken / Print">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_print">Drucken</span>
        </button>

        <button class="btn danger" id="resetBtn" type="button" title="Projektakte leeren">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_reset">Projektakte leeren</span>
        </button>
      </div>
    </div>

    <div class="hero">
      <h1 data-i18n="h1">Modul 09 – Betrugsschutz und Gesprächsstruktur</h1>
      <p class="sub" data-i18n="sub">
        Betrug wird selten durch „Wissen“ verhindert – sondern durch Struktur: klare Fragen, klare Nachweise, klare Grenzen.
        Dieses Modul gibt dir einen Gesprächs-Flow, der dich souverän macht.
      </p>
    </div>

    <div class="card">
      <h2 data-i18n="sec1_title">1) Das Prinzip: Wer sauber ist, freut sich über klare Fragen</h2>
      <p data-i18n="sec1_p1">
        Unser Ziel ist nicht Misstrauen – sondern Klarheit. Seriöse Anbieter erklären gerne, zeigen Unterlagen und benennen Risiken.
        Unklare Anbieter weichen aus, drängen auf Tempo oder machen alles „ganz einfach“.
      </p>
      <p data-i18n="sec1_p2">
        Du musst niemanden „überführen“. Du brauchst nur einen Gesprächsrahmen: Wenn Antworten/Belege fehlen, gehst du nicht weiter.
      </p>

      <div class="notice">
        <strong data-i18n="notice_title">Wichtiger Hinweis:</strong>
        <span data-i18n="notice_text">Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieses Modul ist Bildung: Gesprächsstruktur, Fragen, Nachweise.</span>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec2_title">2) Glossar: typische „Nebelwörter“</h2>
      <div class="glossWrap">
        <details class="gloss">
          <summary>
            <span data-i18n="g1_t">Begriff: „garantierte Rendite“</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g1_b">
            Bei Photovoltaik hängen Ergebnisse an Marktpreisen, Erträgen, Regeln, Kosten und Ausfällen.
            Seriös ist: Szenarien + Risiken + Nachweise. „Garantiert“ ohne harte vertragliche Grundlage ist ein Warnsignal.
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g2_t">Begriff: „Sonderkontingent / heute entscheiden“</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g2_b">
            Zeitdruck verhindert Prüfung. Ein seriöses Projekt lässt Raum für Unterlagen, Rückfragen und Vergleich.
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g3_t">Begriff: „läuft alles automatisch“</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g3_b">
            Nichts läuft „automatisch“ ohne Prozesse: Netzanschluss, Abrechnung, Wartung, Ausfallmanagement, Dokumentation.
            Wer Details vermeidet, liefert dir keine Grundlage für eine Entscheidung.
          </div>
        </details>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec3_title">3) Gesprächs-Setup (Auswahlfelder)</h2>
      <p data-i18n="sec3_p1">
        Wähle aus, wie das Gespräch läuft. Daraus entsteht dein persönlicher Prüffokus.
      </p>

      <div class="form">
        <div class="field">
          <div class="lbl">
            <span data-i18n="f1_lbl">Gesprächsrolle des Gegenübers</span>
            <span class="hint" data-i18n="hint_role">Rolle</span>
          </div>
          <select data-save="m09_role">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="sales" data-i18n="f1_o1">Vertrieb / Vermittler</option>
            <option value="provider" data-i18n="f1_o2">Anbieter / Betreiber (Projektverantwortung)</option>
            <option value="tech" data-i18n="f1_o3">Technik / Planung</option>
            <option value="finance" data-i18n="f1_o4">Finanzierung / Bank / Leasing</option>
          </select>
          <div class="help" data-i18n="f1_help">Merke: Wer Verantwortung trägt, muss auch Unterlagen liefern können.</div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f2_lbl">Wie wird mit Risiken umgegangen?</span>
            <span class="hint" data-i18n="hint_risk">Risiko</span>
          </div>
          <select data-save="m09_riskStyle">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="open" data-i18n="f2_o1">offen (Risiken + Grenzen werden genannt)</option>
            <option value="soft" data-i18n="f2_o2">weichgespült (nur positive Sprache)</option>
            <option value="deny" data-i18n="f2_o3">abgewiegelt („passiert nicht“)</option>
          </select>
          <div class="help" data-i18n="f2_help">Wenn Risiken nicht erklärt werden, fehlt die Entscheidungsbasis.</div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f3_lbl">Tempo-Druck im Gespräch</span>
            <span class="hint" data-i18n="hint_speed">Tempo</span>
          </div>
          <select data-save="m09_speed">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="calm" data-i18n="f3_o1">ruhig (Zeit für Prüfung)</option>
            <option value="push" data-i18n="f3_o2">drängend (schnell unterschreiben)</option>
            <option value="hard" data-i18n="f3_o3">aggressiv (Angst/Scham, „letzte Chance“)</option>
          </select>
          <div class="help" data-i18n="f3_help">Zeitdruck = Prüfstopp. Das ist eine Regel.</div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f4_lbl">Nachweis-Qualität (Unterlagen)</span>
            <span class="hint" data-i18n="hint_docs">Belege</span>
          </div>
          <select data-save="m09_docs">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="full" data-i18n="f4_o1">vollständig (Verträge/Annahmen/Abrechnung klar)</option>
            <option value="partial" data-i18n="f4_o2">teilweise (Marketing-PDF, wenig Details)</option>
            <option value="none" data-i18n="f4_o3">keine (nur mündlich / „kommt später“)</option>
          </select>
          <div class="help" data-i18n="f4_help">Ohne Unterlagen keine Entscheidung. Punkt.</div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f5_lbl">Wie wird die Rendite erklärt?</span>
            <span class="hint" data-i18n="hint_calc">Kalkulation</span>
          </div>
          <select data-save="m09_calc">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="scen" data-i18n="f5_o1">mit Szenarien + Kosten + Annahmen</option>
            <option value="simple" data-i18n="f5_o2">einfach („x% pro Jahr“) ohne Details</option>
            <option value="guar" data-i18n="f5_o3">garantiert / fix ohne Begründung</option>
          </select>
          <div class="help" data-i18n="f5_help">Seriös = Annahmen sichtbar. Nicht seriös = nur Prozentzahl.</div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec4_title">4) Ergebnis: Gesprächs-Ampel + nächster Schritt</h2>
      <p data-i18n="sec4_p1">
        Diese Ampel ist bewusst „hart“. Sie schützt dich vor dem typischen Fehler: weitergehen, obwohl Grundlagen fehlen.
      </p>

      <div class="kpis">
        <div class="kpi">
          <div class="t" data-i18n="k1_t">Ampel</div>
          <div class="v" id="kpiLight">–</div>
          <div class="s" data-i18n="k1_s">Gesamt-Eindruck</div>
        </div>
        <div class="kpi">
          <div class="t" data-i18n="k2_t">Haupt-Risiko</div>
          <div class="v" id="kpiRisk">–</div>
          <div class="s" data-i18n="k2_s">Was stört am meisten?</div>
        </div>
        <div class="kpi">
          <div class="t" data-i18n="k3_t">Pflicht-Stopp?</div>
          <div class="v" id="kpiStop">–</div>
          <div class="s" data-i18n="k3_s">Ist ein Stopp zwingend?</div>
        </div>
        <div class="kpi">
          <div class="t" data-i18n="k4_t">Nächster Schritt</div>
          <div class="v" id="kpiNext">–</div>
          <div class="s" data-i18n="k4_s">Konkrete Aktion</div>
        </div>
      </div>

      <div class="notice">
        <strong data-i18n="rule_t">Regel:</strong>
        <span data-i18n="rule_b">Wenn Unterlagen fehlen oder Zeitdruck kommt: Gespräch beenden und schriftliche Nachweise verlangen.</span>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec5_title">5) Wow-Flowchart: Dein Gespräch als Prüfkette</h2>
      <p data-i18n="sec5_p1">
        Diese Grafik ist dein Spickzettel. Sie zeigt die Reihenfolge, die dich schützt: erst Klarheit, dann Zahlen, dann Entscheidung.
      </p>

      <div class="viz shine">
        <div class="vizTop">
          <div class="title" data-i18n="viz_title">Gesprächs-Flow (Illustration)</div>
          <div class="note" data-i18n="viz_note">ohne Echt-Daten</div>
        </div>

        <div class="vizFrame">
          <svg viewBox="0 0 1200 440" role="img" aria-label="Gesprächs-Flowchart">
            <defs>
              <linearGradient id="bxGold" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="rgba(200,166,58,.32)"/>
                <stop offset="1" stop-color="rgba(200,166,58,.10)"/>
              </linearGradient>
              <linearGradient id="bxAcc" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="rgba(11,125,92,.24)"/>
                <stop offset="1" stop-color="rgba(11,125,92,.08)"/>
              </linearGradient>
              <linearGradient id="bxDng" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="rgba(197,38,70,.22)"/>
                <stop offset="1" stop-color="rgba(197,38,70,.08)"/>
              </linearGradient>
            </defs>

            <rect x="30" y="20" width="1140" height="400" rx="18" fill="rgba(255,255,255,.96)" stroke="rgba(15,17,20,.12)"/>

            <!-- FIX: Pfeile + Pfeilspitzen mit Abstand zur Box-Kante (keine Überlappung) -->
            <g stroke="rgba(15,17,20,.42)" stroke-width="4" stroke-linecap="round" fill="none">
              <!-- oben: 1->2, 2->3, 3->4 (nur Zwischenraum) -->
              <path d="M310 130H330"/>
              <path d="M600 130H620"/>
              <path d="M890 130H910"/>

              <!-- unten: 5->6, 6->Stopp (nur Zwischenraum) -->
              <path d="M600 300H620"/>
              <path d="M890 300H910"/>
            </g>
            <g fill="rgba(15,17,20,.42)">
              <!-- Pfeilspitzen rechts: im Zwischenraum, nicht in den Boxen -->
              <path d="M330 130l-18-10v20z"/>
              <path d="M620 130l-18-10v20z"/>
              <path d="M910 130l-18-10v20z"/>
              <path d="M620 300l-18-10v20z"/>
              <path d="M910 300l-18-10v20z"/>
            </g>

            <rect x="70"  y="80" width="240" height="100" rx="16" fill="url(#bxGold)" stroke="rgba(200,166,58,.30)"/>
            <rect x="360" y="80" width="240" height="100" rx="16" fill="rgba(15,17,20,.05)" stroke="rgba(15,17,20,.18)"/>
            <rect x="650" y="80" width="240" height="100" rx="16" fill="url(#bxAcc)" stroke="rgba(11,125,92,.26)"/>
            <rect x="940" y="80" width="190" height="100" rx="16" fill="rgba(15,17,20,.05)" stroke="rgba(15,17,20,.18)"/>

            <rect x="360" y="250" width="240" height="100" rx="16" fill="rgba(15,17,20,.05)" stroke="rgba(15,17,20,.18)"/>
            <rect x="650" y="250" width="240" height="100" rx="16" fill="url(#bxGold)" stroke="rgba(200,166,58,.30)"/>
            <rect x="940" y="250" width="190" height="100" rx="16" fill="url(#bxDng)" stroke="rgba(197,38,70,.22)"/>

            <g font-family="system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif" fill="rgba(15,17,20,.92)">
              <text x="92" y="112" font-size="16" font-weight="1100">1) Klarheit</text>
              <text x="92" y="140" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">Rolle • Verantwortlich • Ziel</text>

              <text x="382" y="112" font-size="16" font-weight="1100">2) Unterlagen</text>
              <text x="382" y="140" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">Vertrag • Kosten • Abrechnung</text>

              <text x="672" y="112" font-size="16" font-weight="1100">3) Risiken</text>
              <text x="672" y="140" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">Szenarien • Grenzen • Puffer</text>

              <text x="962" y="112" font-size="16" font-weight="1100">4) Zahlen</text>
              <text x="962" y="140" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">nur mit Annahmen</text>

              <text x="382" y="282" font-size="16" font-weight="1100">5) Vergleich</text>
              <text x="382" y="310" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">Alternativen • Angebote</text>

              <text x="672" y="282" font-size="16" font-weight="1100">6) Entscheidung</text>
              <text x="672" y="310" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">erst nach Prüfung</text>

              <text x="962" y="282" font-size="16" font-weight="1100">Stopp</text>
              <text x="962" y="310" font-size="12.8" font-weight="800" fill="rgba(71,80,95,.92)">bei Druck/ohne Beleg</text>

              <text x="70" y="390" font-size="13.2" font-weight="1000" fill="rgba(71,80,95,.95)">
                Merksatz: Erst Struktur – dann Geld. Wer drückt, hat oft etwas zu verstecken.
              </text>
            </g>
          </svg>
        </div>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec6_title">6) Checkliste: Red Flags (bitte ernst nehmen)</h2>
      <p data-i18n="sec6_p1">Haken setzen, wenn du es erlebt hast. Bei mehreren Haken: Stopp & Nachweise verlangen.</p>

      <div class="checks">
        <label class="chk">
          <input type="checkbox" data-save-check="m09_c1" />
          <span>
            <div class="t" data-i18n="c1_t">Zeitdruck („heute“, „nur jetzt“)</div>
            <div class="d" data-i18n="c1_d">Seriös lässt prüfen.</div>
          </span>
        </label>

        <label class="chk">
          <input type="checkbox" data-save-check="m09_c2" />
          <span>
            <div class="t" data-i18n="c2_t">Unterlagen kommen „später“</div>
            <div class="d" data-i18n="c2_d">Ohne Belege keine Entscheidung.</div>
          </span>
        </label>

        <label class="chk">
          <input type="checkbox" data-save-check="m09_c3" />
          <span>
            <div class="t" data-i18n="c3_t">Risiken werden abgewiegelt</div>
            <div class="d" data-i18n="c3_d">„Passiert nie“ ist keine Erklärung.</div>
          </span>
        </label>

        <label class="chk">
          <input type="checkbox" data-save-check="m09_c4" />
          <span>
            <div class="t" data-i18n="c4_t">Nur Prozentzahl, keine Annahmen</div>
            <div class="d" data-i18n="c4_d">Rendite ohne Kosten/Annahmen ist Marketing.</div>
          </span>
        </label>

        <label class="chk">
          <input type="checkbox" data-save-check="m09_c5" />
          <span>
            <div class="t" data-i18n="c5_t">Man darf „nicht vergleichen“</div>
            <div class="d" data-i18n="c5_d">Vergleich ist normal – wenn Qualität stimmt.</div>
          </span>
        </label>
      </div>
    </div>

    <div class="footer" data-i18n="footer">
      Premium Workbook – Modul 09. Eingaben werden lokal gespeichert und sind druckbar.
    </div>
  </div>

  <script>
    (function(){
      const LS_KEY_LANG = "fsa_pvka_lang";
      const LS_KEY_DATA = "fsa_pvka_project";

      const langSel  = document.getElementById("langSel");
      const printBtn = document.getElementById("printBtn");
      const resetBtn = document.getElementById("resetBtn");

      const kpiLight = document.getElementById("kpiLight");
      const kpiRisk  = document.getElementById("kpiRisk");
      const kpiStop  = document.getElementById("kpiStop");
      const kpiNext  = document.getElementById("kpiNext");

      const i18n = {
        de: {
          brand_title:"Premium Kurs",
          brand_sub:"Photovoltaik als Kapitalanlage",
          premium_tag:"Modul 09 • Hauptkurs",
          btn_index:"Index",
          lang_label:"Sprache",
          btn_print:"Drucken",
          btn_reset:"Projektakte leeren",

          h1:"Modul 09 – Betrugsschutz und Gesprächsstruktur",
          sub:"Betrug wird selten durch „Wissen“ verhindert – sondern durch Struktur: klare Fragen, klare Nachweise, klare Grenzen. Dieses Modul gibt dir einen Gesprächs-Flow, der dich souverän macht.",

          sec1_title:"1) Das Prinzip: Wer sauber ist, freut sich über klare Fragen",
          sec1_p1:"Unser Ziel ist nicht Misstrauen – sondern Klarheit. Seriöse Anbieter erklären gerne, zeigen Unterlagen und benennen Risiken. Unklare Anbieter weichen aus, drängen auf Tempo oder machen alles „ganz einfach“.",
          sec1_p2:"Du musst niemanden „überführen“. Du brauchst nur einen Gesprächsrahmen: Wenn Antworten/Belege fehlen, gehst du nicht weiter.",

          notice_title:"Wichtiger Hinweis:",
          notice_text:"Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieses Modul ist Bildung: Gesprächsstruktur, Fragen, Nachweise.",

          sec2_title:"2) Glossar: typische „Nebelwörter“",
          g_badge:"Glossar",
          g1_t:"Begriff: „garantierte Rendite“",
          g1_b:"Bei Photovoltaik hängen Ergebnisse an Marktpreisen, Erträgen, Regeln, Kosten und Ausfällen. Seriös ist: Szenarien + Risiken + Nachweise. „Garantiert“ ohne harte vertragliche Grundlage ist ein Warnsignal.",
          g2_t:"Begriff: „Sonderkontingent / heute entscheiden“",
          g2_b:"Zeitdruck verhindert Prüfung. Ein seriöses Projekt lässt Raum für Unterlagen, Rückfragen und Vergleich.",
          g3_t:"Begriff: „läuft alles automatisch“",
          g3_b:"Nichts läuft „automatisch“ ohne Prozesse: Netzanschluss, Abrechnung, Wartung, Ausfallmanagement, Dokumentation. Wer Details vermeidet, liefert dir keine Grundlage für eine Entscheidung.",

          sec3_title:"3) Gesprächs-Setup (Auswahlfelder)",
          sec3_p1:"Wähle aus, wie das Gespräch läuft. Daraus entsteht dein persönlicher Prüffokus.",

          hint_role:"Rolle",
          hint_risk:"Risiko",
          hint_speed:"Tempo",
          hint_docs:"Belege",
          hint_calc:"Kalkulation",
          opt_choose:"Bitte wählen…",

          f1_lbl:"Gesprächsrolle des Gegenübers",
          f1_o1:"Vertrieb / Vermittler",
          f1_o2:"Anbieter / Betreiber (Projektverantwortung)",
          f1_o3:"Technik / Planung",
          f1_o4:"Finanzierung / Bank / Leasing",
          f1_help:"Merke: Wer Verantwortung trägt, muss auch Unterlagen liefern können.",

          f2_lbl:"Wie wird mit Risiken umgegangen?",
          f2_o1:"offen (Risiken + Grenzen werden genannt)",
          f2_o2:"weichgespült (nur positive Sprache)",
          f2_o3:"abgewiegelt („passiert nicht“)",
          f2_help:"Wenn Risiken nicht erklärt werden, fehlt die Entscheidungsbasis.",

          f3_lbl:"Tempo-Druck im Gespräch",
          f3_o1:"ruhig (Zeit für Prüfung)",
          f3_o2:"drängend (schnell unterschreiben)",
          f3_o3:"aggressiv (Angst/Scham, „letzte Chance“)",
          f3_help:"Zeitdruck = Prüfstopp. Das ist eine Regel.",

          f4_lbl:"Nachweis-Qualität (Unterlagen)",
          f4_o1:"vollständig (Verträge/Annahmen/Abrechnung klar)",
          f4_o2:"teilweise (Marketing-PDF, wenig Details)",
          f4_o3:"keine (nur mündlich / „kommt später“)",
          f4_help:"Ohne Unterlagen keine Entscheidung. Punkt.",

          f5_lbl:"Wie wird die Rendite erklärt?",
          f5_o1:"mit Szenarien + Kosten + Annahmen",
          f5_o2:"einfach („x% pro Jahr“) ohne Details",
          f5_o3:"garantiert / fix ohne Begründung",
          f5_help:"Seriös = Annahmen sichtbar. Nicht seriös = nur Prozentzahl.",

          sec4_title:"4) Ergebnis: Gesprächs-Ampel + nächster Schritt",
          sec4_p1:"Diese Ampel ist bewusst „hart“. Sie schützt dich vor dem typischen Fehler: weitergehen, obwohl Grundlagen fehlen.",
          k1_t:"Ampel",
          k1_s:"Gesamt-Eindruck",
          k2_t:"Haupt-Risiko",
          k2_s:"Was stört am meisten?",
          k3_t:"Pflicht-Stopp?",
          k3_s:"Ist ein Stopp zwingend?",
          k4_t:"Nächster Schritt",
          k4_s:"Konkrete Aktion",

          rule_t:"Regel:",
          rule_b:"Wenn Unterlagen fehlen oder Zeitdruck kommt: Gespräch beenden und schriftliche Nachweise verlangen.",

          sec5_title:"5) Wow-Flowchart: Dein Gespräch als Prüfkette",
          sec5_p1:"Diese Grafik ist dein Spickzettel. Sie zeigt die Reihenfolge, die dich schützt: erst Klarheit, dann Zahlen, dann Entscheidung.",
          viz_title:"Gesprächs-Flow (Illustration)",
          viz_note:"ohne Echt-Daten",

          sec6_title:"6) Checkliste: Red Flags (bitte ernst nehmen)",
          sec6_p1:"Haken setzen, wenn du es erlebt hast. Bei mehreren Haken: Stopp & Nachweise verlangen.",
          c1_t:"Zeitdruck („heute“, „nur jetzt“)",
          c1_d:"Seriös lässt prüfen.",
          c2_t:"Unterlagen kommen „später“",
          c2_d:"Ohne Belege keine Entscheidung.",
          c3_t:"Risiken werden abgewiegelt",
          c3_d:"„Passiert nie“ ist keine Erklärung.",
          c4_t:"Nur Prozentzahl, keine Annahmen",
          c4_d:"Rendite ohne Kosten/Annahmen ist Marketing.",
          c5_t:"Man darf „nicht vergleichen“",
          c5_d:"Vergleich ist normal – wenn Qualität stimmt.",

          footer:"Premium Workbook – Modul 09. Eingaben werden lokal gespeichert und sind druckbar.",

          // KPI dynamic strings
          k_green:"GRÜN",
          k_yellow:"GELB",
          k_red:"ROT",
          k_stop_yes:"JA",
          k_stop_no:"NEIN",
          next_continue:"weiter prüfen (Unterlagen sammeln)",
          next_request_docs:"Unterlagen schriftlich anfordern",
          next_stop:"Stopp – Gespräch beenden / Vergleich starten",
          risk_docs:"Unterlagen",
          risk_speed:"Zeitdruck",
          risk_calc:"Kalkulation",
          risk_risks:"Risikoumgang"
        },

        en: {
          brand_title:"Premium course",
          brand_sub:"Photovoltaics as a capital investment",
          premium_tag:"Module 09 • Main course",
          btn_index:"Index",
          lang_label:"Language",
          btn_print:"Print",
          btn_reset:"Clear project file",

          h1:"Module 09 – Fraud protection and conversation structure",
          sub:"Fraud is rarely prevented by ‘knowledge’—it’s prevented by structure: clear questions, clear evidence, clear boundaries. This module gives you a conversation flow that keeps you sovereign.",

          sec1_title:"1) The principle: clean providers welcome clear questions",
          sec1_p1:"Our goal is not distrust—it’s clarity. Serious providers explain, show documents, and name risks. Unclear providers evade, push speed, or make everything ‘super easy’.",
          sec1_p2:"You don’t need to ‘expose’ anyone. You need a framework: if answers/proof are missing, you do not move on.",

          notice_title:"Important notice:",
          notice_text:"No investment advice, no tax or legal advice. This module is education: conversation structure, questions, proof.",

          sec2_title:"2) Glossary: typical ‘fog words’",
          g_badge:"Glossary",
          g1_t:"Term: ‘guaranteed return’",
          g1_b:"In photovoltaics, results depend on market prices, yield, rules, costs and downtime. Serious offers show scenarios + risks + evidence. ‘Guaranteed’ without hard contractual basis is a warning sign.",
          g2_t:"Term: ‘special allocation / decide today’",
          g2_b:"Time pressure prevents verification. A serious project allows time for documents, questions and comparison.",
          g3_t:"Term: ‘everything runs automatically’",
          g3_b:"Nothing runs ‘automatically’ without processes: grid connection, billing, maintenance, downtime management, documentation. Avoiding details means you have no basis for a decision.",

          sec3_title:"3) Conversation setup (selection fields)",
          sec3_p1:"Select how the conversation behaves. This creates your personal verification focus.",

          hint_role:"role",
          hint_risk:"risk",
          hint_speed:"speed",
          hint_docs:"proof",
          hint_calc:"calculation",
          opt_choose:"Please choose…",

          f1_lbl:"Counterparty role",
          f1_o1:"Sales / intermediary",
          f1_o2:"Provider / operator (project responsibility)",
          f1_o3:"Technical planning",
          f1_o4:"Financing / bank / leasing",
          f1_help:"Remember: whoever carries responsibility must be able to provide documents.",

          f2_lbl:"How are risks handled?",
          f2_o1:"open (risks + limits are stated)",
          f2_o2:"sugar-coated (only positive language)",
          f2_o3:"dismissed (‘won’t happen’)",
          f2_help:"If risks are not explained, there is no decision basis.",

          f3_lbl:"Speed pressure in the conversation",
          f3_o1:"calm (time to verify)",
          f3_o2:"pushing (sign quickly)",
          f3_o3:"aggressive (fear/shame, ‘last chance’)",
          f3_help:"Time pressure = stop. That’s a rule.",

          f4_lbl:"Proof quality (documents)",
          f4_o1:"complete (contracts/assumptions/billing clear)",
          f4_o2:"partial (marketing PDF, little detail)",
          f4_o3:"none (verbal only / ‘later’)",
          f4_help:"No documents = no decision. Period.",

          f5_lbl:"How is return explained?",
          f5_o1:"with scenarios + costs + assumptions",
          f5_o2:"simple (‘x% per year’) without detail",
          f5_o3:"guaranteed / fixed without basis",
          f5_help:"Serious = assumptions visible. Not serious = only a percentage.",

          sec4_title:"4) Result: conversation light + next step",
          sec4_p1:"This light is intentionally strict. It protects you from the common mistake: continuing while basics are missing.",
          k1_t:"Light",
          k1_s:"Overall impression",
          k2_t:"Main risk",
          k2_s:"What is the biggest issue?",
          k3_t:"Mandatory stop?",
          k3_s:"Is stopping required?",
          k4_t:"Next step",
          k4_s:"Concrete action",

          rule_t:"Rule:",
          rule_b:"If documents are missing or time pressure appears: end the conversation and request written proof.",

          sec5_title:"5) Wow flowchart: your conversation as a verification chain",
          sec5_p1:"This graphic is your cheat sheet. It shows the protective order: clarity first, then numbers, then decision.",
          viz_title:"Conversation flow (illustration)",
          viz_note:"no real data",

          sec6_title:"6) Checklist: red flags (take seriously)",
          sec6_p1:"Tick if you experienced it. With multiple ticks: stop & demand proof.",
          c1_t:"Time pressure (‘today’, ‘only now’)",
          c1_d:"Serious providers allow verification.",
          c2_t:"Documents come ‘later’",
          c2_d:"No proof = no decision.",
          c3_t:"Risks are dismissed",
          c3_d:"‘Never happens’ is not an explanation.",
          c4_t:"Only a percentage, no assumptions",
          c4_d:"Return without costs/assumptions is marketing.",
          c5_t:"You are told ‘don’t compare’",
          c5_d:"Comparing is normal—if quality is real.",

          footer:"Premium workbook – Module 09. Inputs are stored locally and printable.",

          k_green:"GREEN",
          k_yellow:"YELLOW",
          k_red:"RED",
          k_stop_yes:"YES",
          k_stop_no:"NO",
          next_continue:"continue verifying (collect documents)",
          next_request_docs:"request documents in writing",
          next_stop:"stop – end conversation / start comparison",
          risk_docs:"documents",
          risk_speed:"time pressure",
          risk_calc:"calculation",
          risk_risks:"risk handling"
        }
      };

      function getData(){
        try{
          const raw = localStorage.getItem(LS_KEY_DATA);
          const obj = raw ? JSON.parse(raw) : {};
          return (obj && typeof obj === "object") ? obj : {};
        }catch(e){ return {}; }
      }
      function setData(obj){
        localStorage.setItem(LS_KEY_DATA, JSON.stringify(obj));
      }

      function applyI18n(lang){
        document.documentElement.lang = lang;
        document.querySelectorAll("[data-i18n]").forEach(el=>{
          const k = el.getAttribute("data-i18n");
          const txt = (i18n[lang] && i18n[lang][k] !== undefined) ? i18n[lang][k] : null;
          if(txt !== null) el.textContent = txt;
        });
        document.querySelectorAll("option[data-i18n]").forEach(opt=>{
          const k = opt.getAttribute("data-i18n");
          const txt = (i18n[lang] && i18n[lang][k] !== undefined) ? i18n[lang][k] : null;
          if(txt !== null) opt.textContent = txt;
        });
      }

      function loadLang(){
        const saved = localStorage.getItem(LS_KEY_LANG);
        return saved === "en" ? "en" : "de";
      }
      function saveLang(lang){
        localStorage.setItem(LS_KEY_LANG, lang);
      }

      function addNoCache(){
        const ts = Date.now();
        document.querySelectorAll('a[data-nocache="1"]').forEach(link=>{
          const href = link.getAttribute("href") || "";
          const url = new URL(href, location.href);
          url.searchParams.set("nocache", String(ts));
          link.setAttribute("href", url.pathname.split("/").pop() + "?" + url.searchParams.toString());
        });
      }

      function wireFields(){
        const data = getData();

        document.querySelectorAll("select[data-save]").forEach(sel=>{
          const k = sel.getAttribute("data-save");
          if(data[k] !== undefined) sel.value = data[k];
          sel.addEventListener("change", ()=>{
            const d = getData();
            d[k] = sel.value;
            setData(d);
            updateAll();
          });
        });

        document.querySelectorAll("input[type='checkbox'][data-save-check]").forEach(chk=>{
          const k = chk.getAttribute("data-save-check");
          if(data[k] !== undefined) chk.checked = !!data[k];
          chk.addEventListener("change", ()=>{
            const d = getData();
            d[k] = chk.checked;
            setData(d);
            updateAll();
          });
        });
      }

      function compute(){
        const lang = (langSel.value === "en") ? "en" : "de";
        const t = i18n[lang];
        const d = getData();

        // score: higher = better
        let score = 100;
        const reasons = [];

        // risk style
        if(d.m09_riskStyle === "soft"){ score -= 18; reasons.push(t.risk_risks); }
        if(d.m09_riskStyle === "deny"){ score -= 32; reasons.push(t.risk_risks); }

        // speed
        if(d.m09_speed === "push"){ score -= 22; reasons.push(t.risk_speed); }
        if(d.m09_speed === "hard"){ score -= 38; reasons.push(t.risk_speed); }

        // documents
        if(d.m09_docs === "partial"){ score -= 18; reasons.push(t.risk_docs); }
        if(d.m09_docs === "none"){ score -= 40; reasons.push(t.risk_docs); }

        // calculation
        if(d.m09_calc === "simple"){ score -= 14; reasons.push(t.risk_calc); }
        if(d.m09_calc === "guar"){ score -= 28; reasons.push(t.risk_calc); }

        // checkbox red flags: each adds penalty
        const flags = ["m09_c1","m09_c2","m09_c3","m09_c4","m09_c5"];
        let flagCount = 0;
        flags.forEach(k=>{ if(d[k]) flagCount++; });
        score -= flagCount * 10;
        if(flagCount >= 2) reasons.push("flags");

        score = Math.max(0, Math.min(100, score));

        // mandatory stop rules:
        const mustStop =
          d.m09_docs === "none" ||
          d.m09_speed === "hard" ||
          d.m09_calc === "guar" ||
          flagCount >= 3;

        // main risk: pick highest priority issue
        let mainRisk = "–";
        if(d.m09_docs === "none" || d.m09_docs === "partial") mainRisk = t.risk_docs;
        else if(d.m09_speed === "hard" || d.m09_speed === "push") mainRisk = t.risk_speed;
        else if(d.m09_calc === "guar" || d.m09_calc === "simple") mainRisk = t.risk_calc;
        else if(d.m09_riskStyle === "deny" || d.m09_riskStyle === "soft") mainRisk = t.risk_risks;

        // light
        let light;
        if(mustStop || score < 55) light = t.k_red;
        else if(score < 78) light = t.k_yellow;
        else light = t.k_green;

        let next;
        if(mustStop || light === t.k_red) next = t.next_stop;
        else if(light === t.k_yellow) next = t.next_request_docs;
        else next = t.next_continue;

        return { score, light, mainRisk, mustStop, next, t };
      }

      function updateAll(){
        const r = compute();
        kpiLight.textContent = r.light;
        kpiRisk.textContent  = r.mainRisk;
        kpiStop.textContent  = r.mustStop ? r.t.k_stop_yes : r.t.k_stop_no;
        kpiNext.textContent  = r.next;
      }

      // Buttons
      printBtn.addEventListener("click", ()=> window.print());
      resetBtn.addEventListener("click", ()=>{
        const lang = langSel.value === "en" ? "en" : "de";
        const ok = confirm(lang === "en"
          ? "Clear all saved project inputs for this course?"
          : "Alle gespeicherten Eingaben für diesen Kurs wirklich löschen?"
        );
        if(!ok) return;
        localStorage.removeItem(LS_KEY_DATA);
        location.reload();
      });

      // Init
      addNoCache();
      const lang = loadLang();
      langSel.value = lang;
      applyI18n(lang);
      wireFields();
      updateAll();

      langSel.addEventListener("change", ()=>{
        const l = langSel.value === "en" ? "en" : "de";
        saveLang(l);
        applyI18n(l);
        updateAll();
      });
    })();
  </script>
<!-- PATCH: Modul-Navigation (Prev / Index / Next) -->
<style>
  .modNav{
    margin-top: 14px;
    border:1px solid rgba(15,17,20,.12);
    border-radius: 16px;
    background: rgba(255,255,255,.72);
    box-shadow: 0 14px 34px rgba(0,0,0,.08);
    padding: 12px 12px;
    position:relative;
    overflow:hidden;
  }
  .modNav:before{
    content:"";
    position:absolute;
    inset:-2px;
    background:
      radial-gradient(620px 180px at 16% 8%, rgba(200,166,58,.12), transparent 65%),
      radial-gradient(620px 180px at 84% 12%, rgba(11,125,92,.10), transparent 65%);
    pointer-events:none;
    opacity:.75;
  }
  .modNav > *{ position:relative; }

  .modNavTop{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    flex-wrap:wrap;
    margin-bottom:10px;
  }
  .modNavTitle{
    font-weight:1100;
    font-size:13px;
    color: rgba(15,17,20,.92);
  }
  .modNavHint{
    font-size:12px;
    font-weight:900;
    color: rgba(71,80,95,.92);
    background: rgba(200,166,58,.10);
    border:1px solid rgba(200,166,58,.22);
    border-radius: 999px;
    padding: 4px 8px;
    width: fit-content;
  }

  .modNavBtns{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    align-items:center;
  }

  .modNavBtn{
    display:inline-flex;
    align-items:center;
    gap:10px;
    text-decoration:none;
    font-weight:1100;
    border-radius: 12px;
    padding: 11px 14px;
    border:1px solid rgba(15,17,20,.12);
    background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.76));
    color: rgba(15,17,20,.92);
    box-shadow: 0 14px 30px rgba(0,0,0,.06);
    transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
    white-space:nowrap;
  }
  .modNavBtn:hover{
    transform: translateY(-1px);
    box-shadow: 0 18px 38px rgba(0,0,0,.10);
    border-color: rgba(11,125,92,.28);
  }

  .modNavBtn.primary{
    color:#fff;
    border:1px solid rgba(11,125,92,.22);
    background: linear-gradient(180deg, rgba(26,165,122,1), rgba(11,125,92,1));
    box-shadow: 0 14px 30px rgba(11,125,92,.18);
  }
  .modNavBtn.primary:hover{
    box-shadow: 0 18px 38px rgba(11,125,92,.22);
  }

  .modNavBtn svg{ width:16px; height:16px; flex:0 0 auto; opacity:.95; }
  .modNavBtn.disabled{
    opacity:.45;
    pointer-events:none;
    filter: grayscale(1);
  }

  @media print{
    .modNav{ display:none !important; }
  }
</style>

<nav class="modNav" id="modNav" aria-label="Modul Navigation" style="display:none">
  <div class="modNavTop">
    <div class="modNavTitle" data-i18n="nav_title">Navigation</div>
    <div class="modNavHint" data-i18n="nav_hint">Weiter zum nächsten Modul</div>
  </div>

  <div class="modNavBtns">
    <a class="modNavBtn" id="navPrev" href="#" data-nocache="1">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M15 6l-6 6 6 6" fill="none" stroke="rgba(15,17,20,.85)" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span data-i18n="nav_prev">Vorheriges Modul</span>
    </a>

    <a class="modNavBtn" id="navIndex" href="index.html" data-nocache="1">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M4 10.5l8-6 8 6V20a1 1 0 0 1-1 1h-4v-6H9v6H5a1 1 0 0 1-1-1v-9.5z"
              fill="rgba(200,166,58,.18)" stroke="rgba(15,17,20,.55)" stroke-width="1.4" stroke-linejoin="round"/>
      </svg>
      <span data-i18n="nav_index">Index</span>
    </a>

    <a class="modNavBtn primary" id="navNext" href="#" data-nocache="1">
      <span data-i18n="nav_next">Nächstes Modul</span>
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M9 6l6 6-6 6" fill="none" stroke="rgba(255,255,255,.95)" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </a>
  </div>
</nav>

<script>
  (function(){
    // i18n keys ergänzen, falls dein Modul bereits i18n nutzt:
    // (Wir überschreiben nichts – nur fallback, wenn Keys fehlen.)
    const fallback = {
      de: { nav_title:"Navigation", nav_hint:"Weiter zum nächsten Modul", nav_prev:"Vorheriges Modul", nav_index:"Index", nav_next:"Nächstes Modul" },
      en: { nav_title:"Navigation", nav_hint:"Continue to the next module", nav_prev:"Previous module", nav_index:"Index", nav_next:"Next module" }
    };

    // Sprache aus bestehender Seite ableiten (html lang oder select#langSel, wenn vorhanden)
    function getLang(){
      const sel = document.getElementById("langSel");
      if(sel && (sel.value==="en" || sel.value==="de")) return sel.value;
      const l = (document.documentElement.lang || "de").toLowerCase();
      return l.startsWith("en") ? "en" : "de";
    }

    // Modulnummer aus Dateiname: module-01.html ... module-12.html
    const file = (location.pathname.split("/").pop() || "").toLowerCase();
    const m = file.match(/^module-(\d{2})\.html$/);
    if(!m) return; // nur auf Modul-Seiten aktiv

    const num = parseInt(m[1], 10);
    if(!Number.isFinite(num)) return;

    const nav = document.getElementById("modNav");
    const prev = document.getElementById("navPrev");
    const next = document.getElementById("navNext");
    const idx  = document.getElementById("navIndex");

    function withNoCache(href){
      const ts = Date.now();
      const url = new URL(href, location.href);
      url.searchParams.set("nocache", String(ts));
      return url.pathname.split("/").pop() + "?" + url.searchParams.toString();
    }

    function pad2(n){ return String(n).padStart(2,"0"); }

    // Links setzen
    idx.href = withNoCache("index.html");

    if(num > 1){
      prev.href = withNoCache("module-" + pad2(num-1) + ".html");
      prev.classList.remove("disabled");
    }else{
      prev.href = "#";
      prev.classList.add("disabled");
    }

    if(num < 12){
      next.href = withNoCache("module-" + pad2(num+1) + ".html");
      next.classList.remove("disabled");
    }else{
      next.href = "#";
      next.classList.add("disabled");
    }

    // i18n minimal anwenden (nur diese Nav-Keys, ohne dein System zu stören)
    function applyNavI18n(){
      const lang = getLang();
      document.querySelectorAll("#modNav [data-i18n]").forEach(el => {
        const k = el.getAttribute("data-i18n");
        if(!k) return;
        // wenn deine Seite das schon setzt, lassen wir es; sonst fallback:
        const current = (el.textContent || "").trim();
        if(current) return;
        el.textContent = (fallback[lang] && fallback[lang][k]) ? fallback[lang][k] : (fallback.de[k] || "");
      });
    }

    // sichtbar machen
    nav.style.display = "";
    applyNavI18n();

    // falls dein Modul per Sprachumschalter live wechselt
    const langSel = document.getElementById("langSel");
    if(langSel){
      langSel.addEventListener("change", () => {
        // Texte nur setzen, wenn leer – also kein Überschreiben
        applyNavI18n();
      });
    }
  })();
</script>
<!-- /PATCH: Modul-Navigation -->
</body>
</html>
