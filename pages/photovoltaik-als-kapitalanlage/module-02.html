<!doctype html>
<!--
  FSA • Premium Kurs (Workbook)
  Kurs: Photovoltaik als Kapitalanlage
  Modul 02: Die wirtschaftliche Logik einer Anlage

  GitHub-Pfad: lp-anfang/pages/photovoltaik-als-kapitalanlage/module-02.html
  Commit-Message: photovoltaik-als-kapitalanlage – Modul 02 (Wirtschaftslogik) Premium (DE/EN), einfache Inputs, Demo-Rechner+SVG-Chart, Glossar-Boxen, Print, LocalStorage
  Testlink (nocache): https://adler-fsa.github.io/lp-anfang/pages/photovoltaik-als-kapitalanlage/module-02.html?nocache=__TS__
-->
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modul 02 – Wirtschaftliche Logik • Photovoltaik als Kapitalanlage</title>
  <meta name="description" content="Modul 02 (DE/EN): Wirtschaftliche Logik einer PV-Anlage verstehen. Premium Workbook mit einfachen Eingaben, Demo-Rechner+SVG-Chart, Glossar-Boxen, Print und LocalStorage." />
  <meta name="robots" content="index,follow" />

  <style>
    :root{
      --bg:#ffffff;
      --ink:#0f1114;
      --muted:#47505f;

      --line: rgba(15,17,20,.12);
      --line2: rgba(15,17,20,.18);

      --gold:#c8a63a;
      --gold2:#e0c466;

      --accent:#0b7d5c;
      --accent2:#1aa57a;

      --danger:#c52646;
      --dangerSoft: rgba(197,38,70,.12);

      --shadow: 0 14px 34px rgba(0,0,0,.10);
      --shadow2: 0 26px 70px rgba(0,0,0,.12);

      --radius:18px;
      --max: 1140px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 720px at 10% 8%, rgba(200,166,58,.18), transparent 58%),
        radial-gradient(1050px 720px at 88% 14%, rgba(11,125,92,.14), transparent 58%),
        radial-gradient(920px 640px at 52% 96%, rgba(197,38,70,.10), transparent 60%),
        linear-gradient(180deg, #ffffff 0%, #fbfbfc 45%, #ffffff 100%);
      overflow-x:hidden;
    }

    .spark{
      position:fixed;
      inset:-30vh -30vw auto -30vw;
      height:60vh;
      pointer-events:none;
      z-index:0;
      filter: blur(18px);
      opacity:.55;
      background:
        radial-gradient(closest-side at 18% 35%, rgba(200,166,58,.30), transparent 65%),
        radial-gradient(closest-side at 68% 28%, rgba(11,125,92,.24), transparent 65%),
        radial-gradient(closest-side at 48% 85%, rgba(197,38,70,.16), transparent 70%);
      transform: translate3d(0,0,0);
      animation: floaty 10s ease-in-out infinite;
    }
    @keyframes floaty{
      0%{ transform: translate3d(0px, 0px, 0px) scale(1); }
      50%{ transform: translate3d(12px, 10px, 0px) scale(1.02); }
      100%{ transform: translate3d(0px, 0px, 0px) scale(1); }
    }
    @media (prefers-reduced-motion: reduce){
      .spark{ animation:none; }
      .lift:hover{ transform:none !important; }
    }

    .wrap{
      position:relative;
      z-index:1;
      max-width:var(--max);
      margin:0 auto;
      padding: 22px 18px 84px;
    }

    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-bottom:14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      padding: 10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.78));
      border-radius: 999px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .brand:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 180px at 12% 30%, rgba(200,166,58,.16), transparent 64%),
        radial-gradient(520px 180px at 84% 20%, rgba(11,125,92,.12), transparent 64%);
      pointer-events:none;
    }
    .brand > *{ position:relative; }
    .brand svg{ width:22px; height:22px; flex:0 0 auto; }
    .brand .t1{ font-weight:1000; letter-spacing:.2px; line-height:1.1; }
    .brand .t2{ font-size:12px; color:var(--muted); margin-top:2px; line-height:1.1; }

    .premiumTag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      margin-top:6px;
      font-size:11px;
      font-weight:1000;
      letter-spacing:.35px;
      padding: 4px 8px;
      border-radius: 999px;
      border:1px solid rgba(200,166,58,.35);
      background: rgba(200,166,58,.10);
      color: rgba(15,17,20,.86);
      width: fit-content;
    }
    .premiumTag .dot{
      width:8px; height:8px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 10px rgba(200,166,58,.35);
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .lang{
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.72));
      border-radius: 12px;
      box-shadow: var(--shadow);
    }
    .lang label{
      font-size:12px;
      color:var(--muted);
      font-weight:900;
    }
    .lang select{
      background: rgba(255,255,255,.92);
      border:1px solid rgba(15,17,20,.18);
      color: var(--ink);
      border-radius:10px;
      padding:8px 10px;
      font-weight:1000;
      outline:none;
    }

    .btn{
      appearance:none;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.76));
      color:var(--ink);
      padding:10px 12px;
      border-radius: 12px;
      font-weight:1000;
      cursor:pointer;
      box-shadow: var(--shadow);
      display:inline-flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      user-select:none;
      transition: transform .10s ease, border-color .14s ease, box-shadow .14s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(200,166,58,.45); box-shadow: var(--shadow2); }
    .btn:active{ transform: translateY(0px); }
    .btn .dot{
      width:10px; height:10px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 12px rgba(200,166,58,.45);
    }
    .btn.secondary .dot{
      background: linear-gradient(180deg, var(--accent2), var(--accent));
      box-shadow: 0 0 12px rgba(11,125,92,.38);
    }
    .btn.danger .dot{
      background: linear-gradient(180deg, rgba(197,38,70,.9), rgba(197,38,70,1));
      box-shadow: 0 0 12px rgba(197,38,70,.30);
    }

    .hero{
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 18px 18px 16px;
      margin-bottom: 14px;
      position:relative;
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.82));
    }
    .hero:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(840px 280px at 14% 16%, rgba(200,166,58,.20), transparent 65%),
        radial-gradient(740px 260px at 86% 18%, rgba(11,125,92,.14), transparent 65%),
        radial-gradient(720px 260px at 40% 98%, rgba(197,38,70,.10), transparent 70%);
      pointer-events:none;
    }
    .hero:after{
      content:"";
      position:absolute;
      inset:0;
      border-radius: var(--radius);
      pointer-events:none;
      background: linear-gradient(90deg, rgba(200,166,58,.22), transparent 18%, transparent 82%, rgba(200,166,58,.18));
      mix-blend-mode: multiply;
      opacity:.45;
    }
    .hero > *{ position:relative; }

    h1{
      margin:0 0 10px;
      font-size: 28px;
      letter-spacing:.2px;
      line-height:1.2;
    }
    .sub{
      margin:0;
      color: var(--muted);
      line-height:1.7;
      font-size:14.8px;
      max-width: 98ch;
    }

    .card{
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px 16px 14px;
      margin-top: 12px;
      position:relative;
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.84));
    }
    .card:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(620px 180px at 16% 8%, rgba(200,166,58,.12), transparent 65%),
        radial-gradient(620px 180px at 84% 12%, rgba(11,125,92,.10), transparent 65%);
      pointer-events:none;
      opacity:.75;
    }
    .card > *{ position:relative; }

    .card h2{
      margin:0 0 10px;
      font-size:16px;
      letter-spacing:.2px;
    }
    .card p{
      margin:0 0 10px;
      color: var(--muted);
      font-size:14.2px;
      line-height:1.78;
    }

    .notice{
      border:1px solid rgba(200,166,58,.38);
      background: rgba(200,166,58,.10);
      border-radius: 14px;
      padding: 12px 12px;
      color: rgba(15,17,20,.92);
      line-height:1.75;
      font-size:13.6px;
      margin-top:12px;
      position:relative;
      overflow:hidden;
    }
    .notice:before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(520px 160px at 18% 50%, rgba(200,166,58,.18), transparent 70%);
      pointer-events:none;
    }
    .notice > *{ position:relative; }
    .notice strong{ color: #7a5c00; }

    .steps{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 16px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 12px 30px rgba(0,0,0,.06);
      padding: 12px 12px;
      margin-top: 10px;
    }
    .step{
      display:flex;
      gap:10px;
      padding: 10px 10px;
      border-radius: 14px;
      border:1px solid rgba(15,17,20,.10);
      background: rgba(255,255,255,.86);
      box-shadow: 0 10px 20px rgba(0,0,0,.04);
      margin: 10px 0;
      align-items:flex-start;
    }
    .stepNum{
      width:34px; height:34px;
      border-radius: 12px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:1000;
      border:1px solid rgba(200,166,58,.32);
      background: rgba(200,166,58,.10);
      color: rgba(15,17,20,.92);
      flex:0 0 auto;
      box-shadow: 0 12px 22px rgba(0,0,0,.06);
    }
    .stepBody .t{
      font-weight:1000;
      color: rgba(15,17,20,.92);
      margin: 0 0 3px;
    }
    .stepBody .d{
      margin:0;
      color: var(--muted);
      line-height:1.72;
      font-size: 13.9px;
    }

    /* Glossar (aufklappbar) */
    .glossWrap{ margin-top:10px; }
    details.gloss{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
      padding: 10px 12px;
      margin: 10px 0;
      overflow:hidden;
    }
    details.gloss[open]{
      border-color: rgba(11,125,92,.22);
      box-shadow: 0 18px 40px rgba(0,0,0,.08);
    }
    details.gloss summary{
      cursor:pointer;
      list-style:none;
      font-weight:1000;
      color: rgba(15,17,20,.92);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      outline:none;
    }
    details.gloss summary::-webkit-details-marker{ display:none; }
    .glossBadge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:11px;
      font-weight:1000;
      padding: 4px 8px;
      border-radius:999px;
      border:1px solid rgba(200,166,58,.30);
      background: rgba(200,166,58,.10);
      color: rgba(15,17,20,.82);
      flex:0 0 auto;
    }
    .glossBadge .dot{
      width:8px; height:8px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 10px rgba(200,166,58,.28);
    }
    .glossBody{
      margin-top:10px;
      color: var(--muted);
      line-height:1.75;
      font-size: 13.8px;
    }

    /* Inputs */
    .form{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:10px;
    }
    .field{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
      padding: 12px 12px;
    }
    .field .lbl{
      font-weight:1000;
      font-size:13px;
      margin-bottom:6px;
      color: rgba(15,17,20,.92);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .hint{
      font-weight:900;
      font-size:12px;
      color: rgba(71,80,95,.92);
      background: rgba(11,125,92,.08);
      border:1px solid rgba(11,125,92,.18);
      border-radius: 999px;
      padding: 4px 8px;
    }
    input[type="text"], input[type="number"], textarea, select{
      width:100%;
      border:1px solid rgba(15,17,20,.18);
      border-radius: 12px;
      padding: 10px 10px;
      font: inherit;
      background: rgba(255,255,255,.96);
      color: var(--ink);
      outline:none;
    }
    textarea{ min-height: 110px; resize: vertical; line-height:1.6; }

    .miniNote{
      margin-top:8px;
      font-size:12.8px;
      color: rgba(71,80,95,.92);
      line-height:1.65;
    }

    /* Tool box */
    .tool{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 16px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 12px 30px rgba(0,0,0,.06);
      padding: 12px 12px;
      margin-top: 10px;
      overflow:hidden;
    }
    .toolTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .toolTop .title{
      font-weight:1100;
      color: rgba(15,17,20,.94);
    }
    .toolTop .tag{
      font-size:12px;
      font-weight:900;
      color: rgba(71,80,95,.92);
      background: rgba(200,166,58,.10);
      border:1px solid rgba(200,166,58,.22);
      border-radius: 999px;
      padding: 4px 8px;
      width: fit-content;
    }

    .toolGrid{
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    .out{
      border:1px solid rgba(15,17,20,.10);
      border-radius: 14px;
      background: rgba(255,255,255,.86);
      box-shadow: 0 10px 20px rgba(0,0,0,.04);
      padding: 12px 12px;
    }
    .outRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:stretch;
      margin-top:10px;
    }
    .kpi{
      flex:1 1 240px;
      border:1px solid rgba(15,17,20,.10);
      border-radius: 14px;
      background: rgba(255,255,255,.90);
      padding: 10px 10px;
      box-shadow: 0 10px 20px rgba(0,0,0,.04);
    }
    .kpi .k{
      font-size:12px;
      font-weight:1000;
      color: rgba(71,80,95,.95);
      margin-bottom:4px;
    }
    .kpi .v{
      font-size:18px;
      font-weight:1100;
      color: rgba(15,17,20,.94);
      letter-spacing:.2px;
    }
    .kpi .s{
      margin-top:3px;
      font-size:12.5px;
      color: rgba(71,80,95,.92);
      line-height:1.5;
    }

    .viz{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 16px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 12px 30px rgba(0,0,0,.06);
      padding: 12px 12px;
      margin-top: 10px;
      overflow:hidden;
    }
    .vizTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .vizTop .title{
      font-weight:1100;
      color: rgba(15,17,20,.94);
    }
    .vizTop .note{
      font-size:12px;
      font-weight:900;
      color: rgba(71,80,95,.92);
      background: rgba(11,125,92,.08);
      border:1px solid rgba(11,125,92,.18);
      border-radius: 999px;
      padding: 4px 8px;
      width: fit-content;
    }
    .viz svg{ width:100%; height:auto; display:block; }

    .footer{
      margin-top: 16px;
      color: rgba(71,80,95,.85);
      font-size: 12px;
      line-height:1.6;
      text-align:center;
    }

    /* Print */
    @media print{
      body{ background:#fff !important; color:#000 !important; }
      .spark, .topbar, .actions, .lang, .btn, .footer{ display:none !important; }
      .wrap{ max-width: 820px; padding: 0; }
      .hero, .card, .field, .tool, .out, .viz, details.gloss, .steps, .step, .kpi{
        box-shadow:none !important;
        background:#fff !important;
        border:1px solid #bbb !important;
        color:#000 !important;
      }
      .sub, .card p, .glossBody, .stepBody .d, .miniNote, .kpi .k, .kpi .s{ color:#111 !important; }
      .notice{ border:1px solid #999 !important; background:#f7f2df !important; color:#000 !important; }
      a{ color:#000 !important; text-decoration:none !important; }
      details.gloss{ break-inside: avoid; }
      .toolTop .tag, .vizTop .note, .hint{ border:1px solid #bbb !important; background:#f2f2f2 !important; color:#000 !important; }
    }
  </style>
</head>

<body>
  <div class="spark" aria-hidden="true"></div>

  <div class="wrap">
    <div class="topbar">
      <div class="brand" aria-label="Kurs">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <defs>
            <linearGradient id="gSunM2" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#c8a63a"/>
              <stop offset="1" stop-color="#e0c466"/>
            </linearGradient>
          </defs>
          <circle cx="12" cy="12" r="5.2" fill="url(#gSunM2)"></circle>
          <g fill="none" stroke="rgba(15,17,20,.75)" stroke-width="1.2" stroke-linecap="round">
            <path d="M12 2.2v2.2M12 19.6v2.2M2.2 12h2.2M19.6 12h2.2"/>
            <path d="M4.6 4.6l1.55 1.55M17.85 17.85l1.55 1.55M19.4 4.6l-1.55 1.55M6.15 17.85L4.6 19.4"/>
          </g>
        </svg>
        <div>
          <div class="t1" data-i18n="brand_title">Premium Kurs</div>
          <div class="t2" data-i18n="brand_sub">Photovoltaik als Kapitalanlage</div>
          <div class="premiumTag" aria-hidden="true">
            <span class="dot"></span>
            <span data-i18n="premium_tag">Modul 02 • Hauptkurs</span>
          </div>
        </div>
      </div>

      <div class="actions">
        <a class="btn" id="toIndex" href="index.html" data-nocache="1" title="Index">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_index">Index</span>
        </a>

        <div class="lang" title="Sprache / Language">
          <label for="langSel" data-i18n="lang_label">Sprache</label>
          <select id="langSel" aria-label="Sprache wählen">
            <option value="de">DE</option>
            <option value="en">EN</option>
          </select>
        </div>

        <button class="btn secondary" id="printBtn" type="button" title="Drucken / Print">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_print">Drucken</span>
        </button>

        <button class="btn danger" id="resetBtn" type="button" title="Projektakte leeren">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_reset">Projektakte leeren</span>
        </button>
      </div>
    </div>

    <div class="hero">
      <h1 data-i18n="h1">Modul 02 – Die wirtschaftliche Logik einer Anlage</h1>
      <p class="sub" data-i18n="sub">
        Dieses Modul erklärt ohne Fachchinesisch, wie bei Photovoltaik „Strom → Geld“ wird. Du lernst die zwei Grundwege (Eigenverbrauch vs. Einspeisung),
        welche Zahlen wirklich zählen – und wie du Renditeversprechen im Gespräch richtig einordnest.
      </p>
    </div>

    <div class="card">
      <h2 data-i18n="sec1_title">1) Warum dieses Modul dich schützt</h2>

      <p data-i18n="sec1_p1">
        Betrug und schlechte Angebote funktionieren oft über „schöne Wörter“ und unklare Rechnungen. Wer die Grundlogik kennt, erkennt schneller:
        Wird hier sauber erklärt – oder soll ich nur unterschreiben?
      </p>

      <p data-i18n="sec1_p2">
        Du musst keine Technik verstehen. Du brauchst nur eine klare Sicht auf die Geldlogik: Welche Annahmen stecken in der Rechnung?
        Welche Belege gibt es? Und was passiert, wenn sich Zahlen anders entwickeln als versprochen?
      </p>

      <div class="notice">
        <strong data-i18n="notice_title">Wichtiger Hinweis:</strong>
        <span data-i18n="notice_text">Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieses Modul ist Bildung: Verständnis, Fragen, Plausibilität.</span>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec2_title">2) Die 4 Schritte: Von kWh zu Geld (ohne Fachsprache)</h2>

      <p data-i18n="sec2_p1">
        Jede PV-Rechnung lässt sich auf vier einfache Schritte zurückführen. Wenn ein Anbieter das nicht verständlich erklären kann,
        ist das ein Warnsignal.
      </p>

      <div class="steps" aria-label="Schrittfolge">
        <div class="step">
          <div class="stepNum">1</div>
          <div class="stepBody">
            <div class="t" data-i18n="s1_t">Ertrag: Wie viel Strom kommt raus?</div>
            <p class="d" data-i18n="s1_d">
              Grundzahl ist die Jahresproduktion in kWh. Seriöse Angebote zeigen: Standort/Annahmen/Belege – nicht nur eine „Zauberzahl“.
            </p>
          </div>
        </div>

        <div class="step">
          <div class="stepNum">2</div>
          <div class="stepBody">
            <div class="t" data-i18n="s2_t">Verteilung: Was wird selbst genutzt, was geht ins Netz?</div>
            <p class="d" data-i18n="s2_d">
              Ein Teil wird im Haus/Betrieb genutzt (Eigenverbrauch = Ersparnis). Der Rest wird eingespeist (Einspeisung = Vergütung/Marktpreis).
            </p>
          </div>
        </div>

        <div class="step">
          <div class="stepNum">3</div>
          <div class="stepBody">
            <div class="t" data-i18n="s3_t">Preislogik: Wofür gibt es Geld – und wofür nicht?</div>
            <p class="d" data-i18n="s3_d">
              Eigenverbrauch spart Stromkosten (abhängig vom Strompreis). Einspeisung bringt Einnahmen (abhängig von Vergütung/Marktmodell).
              Beides sind Annahmen – und genau die müssen im Gespräch sauber erklärt werden.
            </p>
          </div>
        </div>

        <div class="step">
          <div class="stepNum">4</div>
          <div class="stepBody">
            <div class="t" data-i18n="s4_t">Kosten: Einmalig + laufend + Rücklagen</div>
            <p class="d" data-i18n="s4_d">
              Entscheidend ist nicht nur der Kaufpreis. Laufende Kosten, Wartung, Versicherung, Reparaturen und Rücklagen bestimmen,
              ob ein Modell langfristig trägt.
            </p>
          </div>
        </div>
      </div>

      <div class="glossWrap">
        <details class="gloss">
          <summary>
            <span data-i18n="g1_t">Begriff: kWh</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g1_b">
            kWh (Kilowattstunde) ist eine „Mengen-Einheit“ für Strom. Fast jede PV-Rechnung startet damit: Wie viele kWh pro Jahr produziert die Anlage?
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g2_t">Begriff: Eigenverbrauch</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g2_b">
            Eigenverbrauch heißt: Du nutzt den Strom selbst. Der „Geld-Effekt“ ist meist eine Ersparnis, weil du weniger Strom einkaufen musst.
            Wichtig: Ersparnis hängt am Strompreis – und an deinem Verbrauchsprofil.
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g3_t">Begriff: Einspeisung & Vergütung</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g3_b">
            Einspeisung ist Strom, der ins Netz geht. Dafür kann es eine feste Vergütung (z. B. über Regelwerke) oder einen variablen Marktpreis geben.
            Frage im Gespräch: Welche Logik gilt hier konkret – und wie wird sie nachgewiesen?
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g4_t">Begriff: CAPEX / OPEX</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g4_b">
            CAPEX sind einmalige Kosten (Anschaffung/Installation). OPEX sind laufende Kosten (Wartung, Versicherung, Zähler/Monitoring, Rücklagen).
            Viele Rechnungen „vergessen“ OPEX oder setzen sie zu klein an.
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g5_t">Begriff: Amortisation</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g5_b">
            Amortisation meint: Nach wie vielen Jahren hat sich die Investition durch Ersparnis/Einnahmen (abzüglich laufender Kosten) „zurückgezahlt“.
            Das ist ein grober Orientierungspunkt – keine Garantie.
          </div>
        </details>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec3_title">3) Tool: Demo-Rechner (Jahreseffekt & einfache Amortisation)</h2>
      <p data-i18n="sec3_p1">
        Dieses Tool ist bewusst einfach. Es ist kein Finanzprodukt-Rechner, sondern ein Trainingswerkzeug:
        Du siehst, welche Eingaben eine Rendite-Rechnung überhaupt braucht – und wo „Schönrechnungen“ entstehen können.
      </p>

      <div class="tool" role="group" aria-label="Demo Rechner">
        <div class="toolTop">
          <div class="title" data-i18n="tool_title">Demo-Rechnung (vereinfachtes Beispiel)</div>
          <div class="tag" data-i18n="tool_tag">Nur zur Einordnung – keine Empfehlung</div>
        </div>

        <div class="toolGrid">
          <div class="field">
            <div class="lbl">
              <span data-i18n="f_prod">Jahresproduktion (kWh)</span>
              <span class="hint" data-i18n="hint_prod">Zahl aus Angebot/Prognose</span>
            </div>
            <input type="number" inputmode="decimal" id="prod" data-k="m02_prod" min="0" step="100" />
            <div class="miniNote" data-i18n="n_prod">
              Tipp: Wenn nur eine Zahl genannt wird, frage nach „Quelle/Annahmen“ (Standort, Ausrichtung, Verschattung, Degradation).
            </div>
          </div>

          <div class="field">
            <div class="lbl">
              <span data-i18n="f_self">Eigenverbrauch (%)</span>
              <span class="hint" data-i18n="hint_self">Wie viel nutzt du selbst?</span>
            </div>
            <input type="number" inputmode="decimal" id="selfPct" data-k="m02_selfPct" min="0" max="100" step="1" />
            <div class="miniNote" data-i18n="n_self">
              Wichtig: Eigenverbrauch hängt an deinem Alltag/Profil. Ohne Speicher kann der Anteil deutlich anders sein als beworben.
            </div>
          </div>

          <div class="field">
            <div class="lbl">
              <span data-i18n="f_grid">Strompreis (ct/kWh)</span>
              <span class="hint" data-i18n="hint_grid">Für Ersparnis</span>
            </div>
            <input type="number" inputmode="decimal" id="gridCt" data-k="m02_gridCt" min="0" step="0.1" />
          </div>

          <div class="field">
            <div class="lbl">
              <span data-i18n="f_feed">Einspeise-Preis (ct/kWh)</span>
              <span class="hint" data-i18n="hint_feed">Vergütung/Annahme</span>
            </div>
            <input type="number" inputmode="decimal" id="feedCt" data-k="m02_feedCt" min="0" step="0.1" />
            <div class="miniNote" data-i18n="n_feed">
              Frage im Gespräch: Ist das eine feste Vergütung, ein Marktpreis oder eine Mischlogik? Und wo steht das verbindlich?
            </div>
          </div>

          <div class="field">
            <div class="lbl">
              <span data-i18n="f_capex">Einmalige Kosten (EUR)</span>
              <span class="hint" data-i18n="hint_capex">CAPEX</span>
            </div>
            <input type="number" inputmode="decimal" id="capex" data-k="m02_capex" min="0" step="100" />
          </div>

          <div class="field">
            <div class="lbl">
              <span data-i18n="f_opex">Laufende Kosten pro Jahr (EUR)</span>
              <span class="hint" data-i18n="hint_opex">OPEX/Rücklagen</span>
            </div>
            <input type="number" inputmode="decimal" id="opex" data-k="m02_opex" min="0" step="10" />
            <div class="miniNote" data-i18n="n_opex">
              Denk an Wartung/Versicherung/Monitoring/kleine Reparaturen/Rücklage. Wenn ein Angebot „0 EUR“ annimmt: nachfragen.
            </div>
          </div>

          <div class="out" aria-live="polite">
            <div class="toolTop" style="margin:0 0 6px;">
              <div class="title" data-i18n="out_title">Auswertung (vereinfacht)</div>
              <div class="tag" data-i18n="out_tag">Jahreswerte</div>
            </div>

            <div class="outRow">
              <div class="kpi">
                <div class="k" data-i18n="kpi_self_k">Eigenverbrauch (kWh)</div>
                <div class="v" id="oSelfKwh">–</div>
                <div class="s" data-i18n="kpi_self_s">Strom, der im Haus/Betrieb genutzt wird</div>
              </div>
              <div class="kpi">
                <div class="k" data-i18n="kpi_feed_k">Einspeisung (kWh)</div>
                <div class="v" id="oFeedKwh">–</div>
                <div class="s" data-i18n="kpi_feed_s">Strom, der ins Netz geht</div>
              </div>
              <div class="kpi">
                <div class="k" data-i18n="kpi_gross_k">Ersparnis + Einnahmen</div>
                <div class="v" id="oGross">–</div>
                <div class="s" data-i18n="kpi_gross_s">Bevor laufende Kosten abgezogen werden</div>
              </div>
              <div class="kpi">
                <div class="k" data-i18n="kpi_net_k">Netto nach OPEX</div>
                <div class="v" id="oNet">–</div>
                <div class="s" data-i18n="kpi_net_s">Sehr grobe Orientierung (keine Garantie)</div>
              </div>
              <div class="kpi">
                <div class="k" data-i18n="kpi_pb_k">Einfache Amortisation</div>
                <div class="v" id="oPayback">–</div>
                <div class="s" data-i18n="kpi_pb_s">CAPEX ÷ Netto (nur als Trainingswert)</div>
              </div>
            </div>

            <div class="viz" style="margin-top:12px;">
              <div class="vizTop">
                <div class="title" data-i18n="chart_title">Visualisierung: Wo kommt der Effekt her?</div>
                <div class="note" data-i18n="chart_note">Demo-Chart</div>
              </div>

              <svg viewBox="0 0 1200 320" role="img" aria-label="Demo Chart">
                <defs>
                  <linearGradient id="barGold" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0" stop-color="rgba(200,166,58,.55)"/>
                    <stop offset="1" stop-color="rgba(200,166,58,.16)"/>
                  </linearGradient>
                  <linearGradient id="barAcc" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0" stop-color="rgba(11,125,92,.45)"/>
                    <stop offset="1" stop-color="rgba(11,125,92,.14)"/>
                  </linearGradient>
                  <filter id="svgShadow" x="-20%" y="-20%" width="140%" height="140%">
                    <feDropShadow dx="0" dy="10" stdDeviation="10" flood-color="rgba(0,0,0,.10)" />
                  </filter>
                </defs>

                <rect x="20" y="22" width="1160" height="276" rx="18" fill="rgba(255,255,255,.90)" stroke="rgba(15,17,20,.14)" filter="url(#svgShadow)"/>
                <line x1="90" y1="250" x2="1130" y2="250" stroke="rgba(15,17,20,.18)" stroke-width="2"/>
                <line x1="90" y1="90" x2="1130" y2="90" stroke="rgba(15,17,20,.10)" stroke-width="2" stroke-dasharray="8 8"/>

                <!-- Bars (dynamic via JS by height) -->
                <rect id="barSavings" x="220" y="250" width="220" height="0" rx="16" fill="url(#barAcc)" stroke="rgba(11,125,92,.28)"/>
                <rect id="barRevenue"  x="520" y="250" width="220" height="0" rx="16" fill="url(#barGold)" stroke="rgba(200,166,58,.35)"/>
                <rect id="barOpex"     x="820" y="250" width="220" height="0" rx="16" fill="rgba(197,38,70,.10)" stroke="rgba(197,38,70,.22)"/>

                <text x="220" y="285" font-size="13.5" font-weight="900" fill="rgba(15,17,20,.88)">Ersparnis</text>
                <text x="520" y="285" font-size="13.5" font-weight="900" fill="rgba(15,17,20,.88)">Einnahmen</text>
                <text x="820" y="285" font-size="13.5" font-weight="900" fill="rgba(15,17,20,.88)">Laufende Kosten</text>

                <text id="tSavings" x="220" y="78" font-size="14" font-weight="1000" fill="rgba(15,17,20,.92)">–</text>
                <text id="tRevenue"  x="520" y="78" font-size="14" font-weight="1000" fill="rgba(15,17,20,.92)">–</text>
                <text id="tOpex"     x="820" y="78" font-size="14" font-weight="1000" fill="rgba(15,17,20,.92)">–</text>

                <text x="90" y="52" font-size="14" font-weight="1000" fill="rgba(15,17,20,.92)">Jahreswerte (vereinfacht)</text>
                <text id="tScale" x="90" y="74" font-size="12.5" font-weight="800" fill="rgba(71,80,95,.92)">Skala: –</text>
              </svg>

              <div class="miniNote" data-i18n="chart_help">
                Hinweis: Der Chart ist nur eine Visualisierung. Er zeigt dir, dass jede Rechnung auf wenigen Kernannahmen basiert.
              </div>
            </div>
          </div>

          <div class="notice" style="margin-top:12px;">
            <strong data-i18n="tool_warn_t">Merke:</strong>
            <span data-i18n="tool_warn_b">
              Wenn jemand eine Rendite nennt, ohne dir die Eingaben (kWh, Eigenverbrauch, Preise, Kosten) offen zu zeigen, ist das kein seriöses Gespräch.
            </span>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec4_title">4) Gesprächsvorbereitung: Deine Fragen & Notizen</h2>
      <p data-i18n="sec4_p1">
        Nutze diese Felder für deinen Termin. Ziel: klare Nachweise einfordern, Annahmen prüfen, und „blinde Flecken“ sichtbar machen.
      </p>

      <div class="form">
        <div class="field">
          <div class="lbl">
            <span data-i18n="q1_lbl">Welche Jahresproduktion (kWh) wird genannt – und womit wird sie belegt?</span>
            <span class="hint" data-i18n="q_hint">Quelle/Annahmen</span>
          </div>
          <textarea id="q1" data-k="m02_q1" placeholder=""></textarea>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="q2_lbl">Wie wird Eigenverbrauch realistisch hergeleitet (ohne Wunschdenken)?</span>
            <span class="hint" data-i18n="q_hint2">Profil/Alltag</span>
          </div>
          <textarea id="q2" data-k="m02_q2" placeholder=""></textarea>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="q3_lbl">Welche Einspeise-Logik gilt (Vergütung/Marktpreis/Mix) – und wo steht das verbindlich?</span>
            <span class="hint" data-i18n="q_hint3">Vertrag/Nachweis</span>
          </div>
          <textarea id="q3" data-k="m02_q3" placeholder=""></textarea>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="q4_lbl">Welche laufenden Kosten sind enthalten (Wartung, Versicherung, Monitoring, Rücklagen)?</span>
            <span class="hint" data-i18n="q_hint4">OPEX</span>
          </div>
          <textarea id="q4" data-k="m02_q4" placeholder=""></textarea>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="q5_lbl">Welche Aussagen klingen „zu glatt“ oder bleiben unklar?</span>
            <span class="hint" data-i18n="q_hint5">Red Flags</span>
          </div>
          <textarea id="q5" data-k="m02_q5" placeholder=""></textarea>
        </div>
      </div>
    </div>

    <div class="footer" data-i18n="footer">
      Premium-Kurs • Modul 02 • Druckbar • Eingaben werden lokal gespeichert (LocalStorage).
    </div>
  </div>

  <script>
    (function(){
      const LS_KEY_LANG = "fsa_pvka_lang";
      const LS_KEY_DATA = "fsa_pvka_project";

      const langSel = document.getElementById("langSel");
      const printBtn = document.getElementById("printBtn");
      const resetBtn = document.getElementById("resetBtn");
      const toIndex = document.getElementById("toIndex");

      const elProd = document.getElementById("prod");
      const elSelfPct = document.getElementById("selfPct");
      const elGridCt = document.getElementById("gridCt");
      const elFeedCt = document.getElementById("feedCt");
      const elCapex = document.getElementById("capex");
      const elOpex = document.getElementById("opex");

      const oSelfKwh = document.getElementById("oSelfKwh");
      const oFeedKwh = document.getElementById("oFeedKwh");
      const oGross = document.getElementById("oGross");
      const oNet = document.getElementById("oNet");
      const oPayback = document.getElementById("oPayback");

      const barSavings = document.getElementById("barSavings");
      const barRevenue  = document.getElementById("barRevenue");
      const barOpex     = document.getElementById("barOpex");
      const tSavings = document.getElementById("tSavings");
      const tRevenue  = document.getElementById("tRevenue");
      const tOpex     = document.getElementById("tOpex");
      const tScale    = document.getElementById("tScale");

      const i18n = {
        de: {
          brand_title: "Premium Kurs",
          brand_sub: "Photovoltaik als Kapitalanlage",
          premium_tag: "Modul 02 • Hauptkurs",
          btn_index: "Index",
          lang_label: "Sprache",
          btn_print: "Drucken",
          btn_reset: "Projektakte leeren",

          h1: "Modul 02 – Die wirtschaftliche Logik einer Anlage",
          sub: "Dieses Modul erklärt ohne Fachchinesisch, wie bei Photovoltaik „Strom → Geld“ wird. Du lernst die zwei Grundwege (Eigenverbrauch vs. Einspeisung), welche Zahlen wirklich zählen – und wie du Renditeversprechen im Gespräch richtig einordnest.",

          sec1_title: "1) Warum dieses Modul dich schützt",
          sec1_p1: "Betrug und schlechte Angebote funktionieren oft über „schöne Wörter“ und unklare Rechnungen. Wer die Grundlogik kennt, erkennt schneller: Wird hier sauber erklärt – oder soll ich nur unterschreiben?",
          sec1_p2: "Du musst keine Technik verstehen. Du brauchst nur eine klare Sicht auf die Geldlogik: Welche Annahmen stecken in der Rechnung? Welche Belege gibt es? Und was passiert, wenn sich Zahlen anders entwickeln als versprochen?",
          notice_title: "Wichtiger Hinweis:",
          notice_text: "Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieses Modul ist Bildung: Verständnis, Fragen, Plausibilität.",

          sec2_title: "2) Die 4 Schritte: Von kWh zu Geld (ohne Fachsprache)",
          sec2_p1: "Jede PV-Rechnung lässt sich auf vier einfache Schritte zurückführen. Wenn ein Anbieter das nicht verständlich erklären kann, ist das ein Warnsignal.",
          s1_t: "Ertrag: Wie viel Strom kommt raus?",
          s1_d: "Grundzahl ist die Jahresproduktion in kWh. Seriöse Angebote zeigen: Standort/Annahmen/Belege – nicht nur eine „Zauberzahl“.",
          s2_t: "Verteilung: Was wird selbst genutzt, was geht ins Netz?",
          s2_d: "Ein Teil wird im Haus/Betrieb genutzt (Eigenverbrauch = Ersparnis). Der Rest wird eingespeist (Einspeisung = Vergütung/Marktpreis).",
          s3_t: "Preislogik: Wofür gibt es Geld – und wofür nicht?",
          s3_d: "Eigenverbrauch spart Stromkosten (abhängig vom Strompreis). Einspeisung bringt Einnahmen (abhängig von Vergütung/Marktmodell). Beides sind Annahmen – und genau die müssen im Gespräch sauber erklärt werden.",
          s4_t: "Kosten: Einmalig + laufend + Rücklagen",
          s4_d: "Entscheidend ist nicht nur der Kaufpreis. Laufende Kosten, Wartung, Versicherung, Reparaturen und Rücklagen bestimmen, ob ein Modell langfristig trägt.",

          g_badge: "Glossar",
          g1_t: "Begriff: kWh",
          g1_b: "kWh (Kilowattstunde) ist eine „Mengen-Einheit“ für Strom. Fast jede PV-Rechnung startet damit: Wie viele kWh pro Jahr produziert die Anlage?",
          g2_t: "Begriff: Eigenverbrauch",
          g2_b: "Eigenverbrauch heißt: Du nutzt den Strom selbst. Der „Geld-Effekt“ ist meist eine Ersparnis, weil du weniger Strom einkaufen musst. Wichtig: Ersparnis hängt am Strompreis – und an deinem Verbrauchsprofil.",
          g3_t: "Begriff: Einspeisung & Vergütung",
          g3_b: "Einspeisung ist Strom, der ins Netz geht. Dafür kann es eine feste Vergütung oder einen variablen Marktpreis geben. Frage im Gespräch: Welche Logik gilt hier konkret – und wie wird sie nachgewiesen?",
          g4_t: "Begriff: CAPEX / OPEX",
          g4_b: "CAPEX sind einmalige Kosten (Anschaffung/Installation). OPEX sind laufende Kosten (Wartung, Versicherung, Zähler/Monitoring, Rücklagen). Viele Rechnungen „vergessen“ OPEX oder setzen sie zu klein an.",
          g5_t: "Begriff: Amortisation",
          g5_b: "Amortisation meint: Nach wie vielen Jahren hat sich die Investition durch Ersparnis/Einnahmen (abzüglich laufender Kosten) „zurückgezahlt“. Das ist ein grober Orientierungspunkt – keine Garantie.",

          sec3_title: "3) Tool: Demo-Rechner (Jahreseffekt & einfache Amortisation)",
          sec3_p1: "Dieses Tool ist bewusst einfach. Es ist kein Finanzprodukt-Rechner, sondern ein Trainingswerkzeug: Du siehst, welche Eingaben eine Rendite-Rechnung überhaupt braucht – und wo „Schönrechnungen“ entstehen können.",
          tool_title: "Demo-Rechnung (vereinfachtes Beispiel)",
          tool_tag: "Nur zur Einordnung – keine Empfehlung",

          f_prod: "Jahresproduktion (kWh)",
          hint_prod: "Zahl aus Angebot/Prognose",
          n_prod: "Tipp: Wenn nur eine Zahl genannt wird, frage nach „Quelle/Annahmen“ (Standort, Ausrichtung, Verschattung, Degradation).",

          f_self: "Eigenverbrauch (%)",
          hint_self: "Wie viel nutzt du selbst?",
          n_self: "Wichtig: Eigenverbrauch hängt an deinem Alltag/Profil. Ohne Speicher kann der Anteil deutlich anders sein als beworben.",

          f_grid: "Strompreis (ct/kWh)",
          hint_grid: "Für Ersparnis",

          f_feed: "Einspeise-Preis (ct/kWh)",
          hint_feed: "Vergütung/Annahme",
          n_feed: "Frage im Gespräch: Ist das eine feste Vergütung, ein Marktpreis oder eine Mischlogik? Und wo steht das verbindlich?",

          f_capex: "Einmalige Kosten (EUR)",
          hint_capex: "CAPEX",

          f_opex: "Laufende Kosten pro Jahr (EUR)",
          hint_opex: "OPEX/Rücklagen",
          n_opex: "Denk an Wartung/Versicherung/Monitoring/kleine Reparaturen/Rücklage. Wenn ein Angebot „0 EUR“ annimmt: nachfragen.",

          out_title: "Auswertung (vereinfacht)",
          out_tag: "Jahreswerte",

          kpi_self_k: "Eigenverbrauch (kWh)",
          kpi_self_s: "Strom, der im Haus/Betrieb genutzt wird",
          kpi_feed_k: "Einspeisung (kWh)",
          kpi_feed_s: "Strom, der ins Netz geht",
          kpi_gross_k: "Ersparnis + Einnahmen",
          kpi_gross_s: "Bevor laufende Kosten abgezogen werden",
          kpi_net_k: "Netto nach OPEX",
          kpi_net_s: "Sehr grobe Orientierung (keine Garantie)",
          kpi_pb_k: "Einfache Amortisation",
          kpi_pb_s: "CAPEX ÷ Netto (nur als Trainingswert)",

          chart_title: "Visualisierung: Wo kommt der Effekt her?",
          chart_note: "Demo-Chart",
          chart_help: "Hinweis: Der Chart ist nur eine Visualisierung. Er zeigt dir, dass jede Rechnung auf wenigen Kernannahmen basiert.",

          tool_warn_t: "Merke:",
          tool_warn_b: "Wenn jemand eine Rendite nennt, ohne dir die Eingaben (kWh, Eigenverbrauch, Preise, Kosten) offen zu zeigen, ist das kein seriöses Gespräch.",

          sec4_title: "4) Gesprächsvorbereitung: Deine Fragen & Notizen",
          sec4_p1: "Nutze diese Felder für deinen Termin. Ziel: klare Nachweise einfordern, Annahmen prüfen, und „blinde Flecken“ sichtbar machen.",
          q1_lbl: "Welche Jahresproduktion (kWh) wird genannt – und womit wird sie belegt?",
          q2_lbl: "Wie wird Eigenverbrauch realistisch hergeleitet (ohne Wunschdenken)?",
          q3_lbl: "Welche Einspeise-Logik gilt (Vergütung/Marktpreis/Mix) – und wo steht das verbindlich?",
          q4_lbl: "Welche laufenden Kosten sind enthalten (Wartung, Versicherung, Monitoring, Rücklagen)?",
          q5_lbl: "Welche Aussagen klingen „zu glatt“ oder bleiben unklar?",
          q_hint: "Quelle/Annahmen",
          q_hint2: "Profil/Alltag",
          q_hint3: "Vertrag/Nachweis",
          q_hint4: "OPEX",
          q_hint5: "Red Flags",

          footer: "Premium-Kurs • Modul 02 • Druckbar • Eingaben werden lokal gespeichert (LocalStorage).",

          msg_confirm_reset: "Alle gespeicherten Eingaben für diesen Kurs wirklich löschen?",
          msg_done_reset: "Projektakte wurde geleert."
        },
        en: {
          brand_title: "Premium course",
          brand_sub: "Photovoltaics as a capital investment",
          premium_tag: "Module 02 • Main course",
          btn_index: "Index",
          lang_label: "Language",
          btn_print: "Print",
          btn_reset: "Clear project file",

          h1: "Module 02 – The economic logic of a PV system",
          sub: "This module explains—without jargon—how “electricity → money” works in PV. You learn the two core paths (self-consumption vs. feed-in), which numbers truly matter, and how to interpret return claims in real conversations.",

          sec1_title: "1) Why this module protects you",
          sec1_p1: "Fraud and bad offers often rely on “nice words” and unclear calculations. If you know the basic logic, you can spot faster: is this explained properly—or is it just a sales push?",
          sec1_p2: "You don’t need to be technical. You need a clear view of the money logic: which assumptions drive the calculation, what evidence exists, and what happens if numbers develop differently than promised?",
          notice_title: "Important notice:",
          notice_text: "No investment advice, no tax or legal advice. This module is education: understanding, questions, plausibility checks.",

          sec2_title: "2) The 4 steps: From kWh to money (no jargon)",
          sec2_p1: "Every PV calculation can be reduced to four simple steps. If a provider cannot explain this clearly, that’s a warning sign.",
          s1_t: "Yield: how much electricity is produced?",
          s1_d: "Key input is annual production in kWh. Serious offers show location/assumptions/evidence—not just a magic number.",
          s2_t: "Split: what is used on-site vs. fed into the grid?",
          s2_d: "Part is used on-site (self-consumption = savings). The rest is fed into the grid (feed-in = tariff/market price).",
          s3_t: "Price logic: what generates value—and what doesn’t?",
          s3_d: "Self-consumption saves purchased electricity (depends on your electricity price). Feed-in creates revenue (depends on tariff/market model). Both are assumptions—so they must be explained transparently.",
          s4_t: "Costs: upfront + ongoing + reserves",
          s4_d: "It’s not just the purchase price. Ongoing costs, maintenance, insurance, repairs and reserves determine long-term viability.",

          g_badge: "Glossary",
          g1_t: "Term: kWh",
          g1_b: "kWh (kilowatt-hour) is a unit for electricity quantity. Most PV calculations start here: how many kWh per year does the system produce?",
          g2_t: "Term: self-consumption",
          g2_b: "Self-consumption means you use the electricity yourself. The money effect is usually savings because you buy less from the grid. Savings depend on your electricity price and usage profile.",
          g3_t: "Term: feed-in & tariff",
          g3_b: "Feed-in is electricity exported to the grid. It may receive a fixed tariff or a variable market price. Ask: which logic applies here—and what is the binding evidence?",
          g4_t: "Term: CAPEX / OPEX",
          g4_b: "CAPEX are upfront costs (purchase/installation). OPEX are ongoing costs (maintenance, insurance, metering/monitoring, reserves). Many calculations omit OPEX or set it unrealistically low.",
          g5_t: "Term: payback (amortisation)",
          g5_b: "Payback means how many years it takes for savings/revenue (minus ongoing costs) to cover the upfront cost. It’s a rough orientation—not a guarantee.",

          sec3_title: "3) Tool: demo calculator (annual effect & simple payback)",
          sec3_p1: "This tool is intentionally simple. It is not a financial product calculator. It helps you see which inputs a return calculation actually needs—and where “beautified math” can happen.",
          tool_title: "Demo calculation (simplified example)",
          tool_tag: "For orientation only—no recommendation",

          f_prod: "Annual production (kWh)",
          hint_prod: "From offer/projection",
          n_prod: "Tip: If only a single number is given, ask for the source/assumptions (site, orientation, shading, degradation).",

          f_self: "Self-consumption (%)",
          hint_self: "How much you use",
          n_self: "Important: self-consumption depends on your daily profile. Without storage, the share can differ a lot from marketing claims.",

          f_grid: "Electricity price (ct/kWh)",
          hint_grid: "For savings",

          f_feed: "Feed-in price (ct/kWh)",
          hint_feed: "Tariff/assumption",
          n_feed: "Ask: is this a fixed tariff, a market price, or a mixed model—and where is it stated in a binding way?",

          f_capex: "Upfront cost (EUR)",
          hint_capex: "CAPEX",

          f_opex: "Ongoing annual costs (EUR)",
          hint_opex: "OPEX/reserves",
          n_opex: "Think maintenance/insurance/monitoring/small repairs/reserve. If an offer assumes “0 EUR”: ask why.",

          out_title: "Results (simplified)",
          out_tag: "Annual values",

          kpi_self_k: "Self-consumption (kWh)",
          kpi_self_s: "Electricity used on-site",
          kpi_feed_k: "Feed-in (kWh)",
          kpi_feed_s: "Electricity exported to the grid",
          kpi_gross_k: "Savings + revenue",
          kpi_gross_s: "Before ongoing costs are deducted",
          kpi_net_k: "Net after OPEX",
          kpi_net_s: "Very rough orientation (no guarantee)",
          kpi_pb_k: "Simple payback",
          kpi_pb_s: "CAPEX ÷ Net (training metric)",

          chart_title: "Visual: where does the effect come from?",
          chart_note: "Demo chart",
          chart_help: "Note: this chart is only a visual aid. It shows that every calculation depends on a few core assumptions.",

          tool_warn_t: "Remember:",
          tool_warn_b: "If someone states a return without showing the inputs (kWh, self-consumption, prices, costs), it’s not a serious conversation.",

          sec4_title: "4) Meeting prep: your questions & notes",
          sec4_p1: "Use these fields for your meeting. Goal: request evidence, verify assumptions, and make blind spots visible.",
          q1_lbl: "Which annual production (kWh) is stated—and what evidence supports it?",
          q2_lbl: "How is self-consumption derived realistically (no wishful thinking)?",
          q3_lbl: "Which feed-in logic applies (tariff/market/mix)—and where is it binding?",
          q4_lbl: "Which ongoing costs are included (maintenance, insurance, monitoring, reserves)?",
          q5_lbl: "Which statements sound too smooth—or remain unclear?",
          q_hint: "Source/assumptions",
          q_hint2: "Profile/daily use",
          q_hint3: "Contract/evidence",
          q_hint4: "OPEX",
          q_hint5: "Red flags",

          footer: "Premium course • Module 02 • Printable • Inputs are stored locally (LocalStorage).",

          msg_confirm_reset: "Clear all saved inputs for this course?",
          msg_done_reset: "Project file cleared."
        }
      };

      function getLang(){
        const saved = localStorage.getItem(LS_KEY_LANG);
        return (saved === "en") ? "en" : "de";
      }
      function setLang(lang){
        localStorage.setItem(LS_KEY_LANG, lang);
      }

      function loadData(){
        try{
          const raw = localStorage.getItem(LS_KEY_DATA);
          return raw ? JSON.parse(raw) : {};
        }catch(e){
          return {};
        }
      }
      function saveData(obj){
        localStorage.setItem(LS_KEY_DATA, JSON.stringify(obj));
      }

      function fmtInt(n){
        if(!isFinite(n)) return "–";
        return Math.round(n).toLocaleString(getLang()==="en" ? "en-US" : "de-DE");
      }
      function fmtMoney(n){
        if(!isFinite(n)) return "–";
        const lang = getLang();
        const s = n.toLocaleString(lang==="en" ? "en-US" : "de-DE", {minimumFractionDigits:0, maximumFractionDigits:0});
        return (lang==="en") ? ("€ " + s) : (s + " €");
      }
      function fmtYears(n){
        if(!isFinite(n) || n<=0) return "–";
        const lang = getLang();
        const s = n.toLocaleString(lang==="en" ? "en-US" : "de-DE", {minimumFractionDigits:1, maximumFractionDigits:1});
        return (lang==="en") ? (s + " years") : (s + " Jahre");
      }

      function applyI18n(lang){
        document.documentElement.lang = lang;
        document.querySelectorAll("[data-i18n]").forEach(el=>{
          const key = el.getAttribute("data-i18n");
          const txt = (i18n[lang] && i18n[lang][key]) ? i18n[lang][key] : null;
          if(txt !== null) el.textContent = txt;
        });
      }

      function loadIntoFields(){
        const data = loadData();
        // defaults (friendly demo values)
        const defaults = {
          m02_prod: 9000,
          m02_selfPct: 30,
          m02_gridCt: 35,
          m02_feedCt: 8,
          m02_capex: 15000,
          m02_opex: 250,
          m02_q1: "",
          m02_q2: "",
          m02_q3: "",
          m02_q4: "",
          m02_q5: ""
        };

        document.querySelectorAll("[data-k]").forEach(el=>{
          const k = el.getAttribute("data-k");
          const v = (data && k in data) ? data[k] : defaults[k];
          if(v === undefined) return;
          if(el.type === "number") el.value = String(v);
          else el.value = String(v);
        });
      }

      function wireAutosave(){
        document.querySelectorAll("[data-k]").forEach(el=>{
          el.addEventListener("input", ()=>{
            const k = el.getAttribute("data-k");
            const data = loadData();
            let v = el.value;
            if(el.type === "number"){
              v = (v === "" ? "" : Number(v));
            }
            data[k] = v;
            saveData(data);
            compute();
          });
        });
      }

      function compute(){
        const prod = Number(elProd.value || 0);
        const selfPct = Math.max(0, Math.min(100, Number(elSelfPct.value || 0)));
        const gridCt = Number(elGridCt.value || 0);
        const feedCt = Number(elFeedCt.value || 0);
        const capex = Number(elCapex.value || 0);
        const opex = Number(elOpex.value || 0);

        const selfKwh = prod * (selfPct/100);
        const feedKwh = Math.max(0, prod - selfKwh);

        const savings = selfKwh * (gridCt/100);
        const revenue = feedKwh * (feedCt/100);
        const gross = savings + revenue;
        const net = gross - opex;

        oSelfKwh.textContent = fmtInt(selfKwh);
        oFeedKwh.textContent = fmtInt(feedKwh);
        oGross.textContent = fmtMoney(gross);
        oNet.textContent = fmtMoney(net);

        const payback = (net > 0 && capex > 0) ? (capex / net) : 0;
        oPayback.textContent = fmtYears(payback);

        // Chart scaling
        const maxVal = Math.max(1, savings, revenue, opex);
        const chartH = 140; // max bar height
        const baseY = 250;

        function setBar(bar, val){
          const h = Math.max(0, Math.min(chartH, (val/maxVal) * chartH));
          bar.setAttribute("y", String(baseY - h));
          bar.setAttribute("height", String(h));
        }

        setBar(barSavings, savings);
        setBar(barRevenue, revenue);
        setBar(barOpex, opex);

        tSavings.textContent = fmtMoney(savings);
        tRevenue.textContent  = fmtMoney(revenue);
        tOpex.textContent     = fmtMoney(opex);

        const lang = getLang();
        const scaleTxt = (lang === "en")
          ? ("Scale: max ≈ " + fmtMoney(maxVal) + " (annual)")
          : ("Skala: max ≈ " + fmtMoney(maxVal) + " (jährlich)");
        tScale.textContent = scaleTxt;
      }

      // Nocache on index link
      function applyNocache(){
        const ts = Date.now();
        document.querySelectorAll('a[data-nocache="1"]').forEach(link=>{
          const href = link.getAttribute("href");
          if(!href) return;
          const url = new URL(href, location.href);
          url.searchParams.set("nocache", String(ts));
          link.setAttribute("href", url.pathname.split("/").pop() + "?" + url.searchParams.toString());
        });
      }

      // Buttons
      printBtn.addEventListener("click", ()=> window.print());
      resetBtn.addEventListener("click", ()=>{
        const lang = getLang();
        const ok = confirm(i18n[lang].msg_confirm_reset);
        if(!ok) return;
        localStorage.removeItem(LS_KEY_DATA);
        alert(i18n[lang].msg_done_reset);
        loadIntoFields();
        compute();
      });

      // Init
      const lang = getLang();
      langSel.value = lang;
      applyI18n(lang);
      loadIntoFields();
      wireAutosave();
      compute();
      applyNocache();

      langSel.addEventListener("change", ()=>{
        const l = (langSel.value === "en") ? "en" : "de";
        setLang(l);
        applyI18n(l);
        compute();
        applyNocache();
      });

      // Keep selfPct clamped on blur
      elSelfPct.addEventListener("blur", ()=>{
        const v = Math.max(0, Math.min(100, Number(elSelfPct.value || 0)));
        elSelfPct.value = String(v);
        const data = loadData();
        data["m02_selfPct"] = v;
        saveData(data);
        compute();
      });
    })();
  </script>
</body>
</html>
