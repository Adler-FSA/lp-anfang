<!doctype html>
<!--
  FSA • Premium Kurs (Workbook)
  Kurs: Photovoltaik als Kapitalanlage
  Modul 02: Die wirtschaftliche Logik einer Anlage

  GitHub-Pfad: lp-anfang/pages/photovoltaik-als-kapitalanlage/module-02.html
  Commit-Message: photovoltaik-als-kapitalanlage – Modul 02 (Wirtschaftslogik) Premium: Chart-Fix + Wow-Grafik, alle Felder als Auswahl, KPIs/Tool, Glossar, Print, LocalStorage (DE/EN)
  Testlink (nocache): https://adler-fsa.github.io/lp-anfang/pages/photovoltaik-als-kapitalanlage/module-02.html?nocache=__TS__
-->
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modul 02 – Wirtschaftslogik • Photovoltaik als Kapitalanlage</title>
  <meta name="description" content="Modul 02 (DE/EN): Wirtschaftliche Logik einer PV-Anlage – Ersparnis vs. Einnahmen, Kosten, Netto, einfache Amortisation. Premium Workbook mit Auswahlfeldern, Glossar, Wow-Chart, Print und LocalStorage." />
  <meta name="robots" content="index,follow" />

  <style>
    :root{
      --bg:#ffffff;
      --ink:#0f1114;
      --muted:#47505f;

      --line: rgba(15,17,20,.12);
      --line2: rgba(15,17,20,.18);

      --gold:#c8a63a;
      --gold2:#e0c466;

      --accent:#0b7d5c;
      --accent2:#1aa57a;

      --danger:#c52646;
      --dangerSoft: rgba(197,38,70,.12);

      --shadow: 0 14px 34px rgba(0,0,0,.10);
      --shadow2: 0 26px 70px rgba(0,0,0,.12);

      --radius:18px;
      --max: 1140px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 720px at 10% 8%, rgba(200,166,58,.18), transparent 58%),
        radial-gradient(1050px 720px at 88% 14%, rgba(11,125,92,.14), transparent 58%),
        radial-gradient(920px 640px at 52% 96%, rgba(197,38,70,.10), transparent 60%),
        linear-gradient(180deg, #ffffff 0%, #fbfbfc 45%, #ffffff 100%);
      overflow-x:hidden;
    }

    .spark{
      position:fixed;
      inset:-30vh -30vw auto -30vw;
      height:60vh;
      pointer-events:none;
      z-index:0;
      filter: blur(18px);
      opacity:.55;
      background:
        radial-gradient(closest-side at 18% 35%, rgba(200,166,58,.30), transparent 65%),
        radial-gradient(closest-side at 68% 28%, rgba(11,125,92,.24), transparent 65%),
        radial-gradient(closest-side at 48% 85%, rgba(197,38,70,.16), transparent 70%);
      transform: translate3d(0,0,0);
      animation: floaty 10s ease-in-out infinite;
    }
    @keyframes floaty{
      0%{ transform: translate3d(0px, 0px, 0px) scale(1); }
      50%{ transform: translate3d(12px, 10px, 0px) scale(1.02); }
      100%{ transform: translate3d(0px, 0px, 0px) scale(1); }
    }
    @media (prefers-reduced-motion: reduce){
      .spark{ animation:none; }
      .lift:hover{ transform:none !important; }
      .shine:before{ animation:none !important; }
    }

    .wrap{
      position:relative;
      z-index:1;
      max-width:var(--max);
      margin:0 auto;
      padding: 22px 18px 84px;
    }

    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-bottom:14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      padding: 10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.78));
      border-radius: 999px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .brand:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 180px at 12% 30%, rgba(200,166,58,.16), transparent 64%),
        radial-gradient(520px 180px at 84% 20%, rgba(11,125,92,.12), transparent 64%);
      pointer-events:none;
    }
    .brand > *{ position:relative; }
    .brand svg{ width:22px; height:22px; flex:0 0 auto; }
    .brand .t1{ font-weight:1000; letter-spacing:.2px; line-height:1.1; }
    .brand .t2{ font-size:12px; color:var(--muted); margin-top:2px; line-height:1.1; }

    .premiumTag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      margin-top:6px;
      font-size:11px;
      font-weight:1000;
      letter-spacing:.35px;
      padding: 4px 8px;
      border-radius: 999px;
      border:1px solid rgba(200,166,58,.35);
      background: rgba(200,166,58,.10);
      color: rgba(15,17,20,.86);
      width: fit-content;
    }
    .premiumTag .dot{
      width:8px; height:8px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 10px rgba(200,166,58,.35);
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .lang{
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.72));
      border-radius: 12px;
      box-shadow: var(--shadow);
    }
    .lang label{
      font-size:12px;
      color:var(--muted);
      font-weight:900;
    }
    .lang select{
      background: rgba(255,255,255,.92);
      border:1px solid rgba(15,17,20,.18);
      color: var(--ink);
      border-radius:10px;
      padding:8px 10px;
      font-weight:1000;
      outline:none;
    }

    .btn{
      appearance:none;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.76));
      color:var(--ink);
      padding:10px 12px;
      border-radius: 12px;
      font-weight:1000;
      cursor:pointer;
      box-shadow: var(--shadow);
      display:inline-flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      user-select:none;
      transition: transform .10s ease, border-color .14s ease, box-shadow .14s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(200,166,58,.45); box-shadow: var(--shadow2); }
    .btn:active{ transform: translateY(0px); }
    .btn .dot{
      width:10px; height:10px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 12px rgba(200,166,58,.45);
    }
    .btn.secondary .dot{
      background: linear-gradient(180deg, var(--accent2), var(--accent));
      box-shadow: 0 0 12px rgba(11,125,92,.38);
    }
    .btn.danger .dot{
      background: linear-gradient(180deg, rgba(197,38,70,.9), rgba(197,38,70,1));
      box-shadow: 0 0 12px rgba(197,38,70,.30);
    }

    .hero{
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 18px 18px 16px;
      margin-bottom: 14px;
      position:relative;
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.82));
    }
    .hero:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(840px 280px at 14% 16%, rgba(200,166,58,.20), transparent 65%),
        radial-gradient(740px 260px at 86% 18%, rgba(11,125,92,.14), transparent 65%),
        radial-gradient(720px 260px at 40% 98%, rgba(197,38,70,.10), transparent 70%);
      pointer-events:none;
    }
    .hero:after{
      content:"";
      position:absolute;
      inset:0;
      border-radius: var(--radius);
      pointer-events:none;
      background: linear-gradient(90deg, rgba(200,166,58,.22), transparent 18%, transparent 82%, rgba(200,166,58,.18));
      mix-blend-mode: multiply;
      opacity:.45;
    }
    .hero > *{ position:relative; }

    h1{
      margin:0 0 10px;
      font-size: 28px;
      letter-spacing:.2px;
      line-height:1.2;
    }
    .sub{
      margin:0;
      color: var(--muted);
      line-height:1.75;
      font-size:14.8px;
      max-width: 98ch;
    }

    .card{
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px 16px 14px;
      margin-top: 12px;
      position:relative;
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.84));
    }
    .card:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(620px 180px at 16% 8%, rgba(200,166,58,.12), transparent 65%),
        radial-gradient(620px 180px at 84% 12%, rgba(11,125,92,.10), transparent 65%);
      pointer-events:none;
      opacity:.75;
    }
    .card > *{ position:relative; }

    .card h2{
      margin:0 0 10px;
      font-size:16px;
      letter-spacing:.2px;
    }
    .card p{
      margin:0 0 10px;
      color: var(--muted);
      font-size:14.2px;
      line-height:1.8;
    }

    .notice{
      border:1px solid rgba(200,166,58,.38);
      background: rgba(200,166,58,.10);
      border-radius: 14px;
      padding: 12px 12px;
      color: rgba(15,17,20,.92);
      line-height:1.75;
      font-size:13.6px;
      margin-top:12px;
      position:relative;
      overflow:hidden;
    }
    .notice:before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(520px 160px at 18% 50%, rgba(200,166,58,.18), transparent 70%);
      pointer-events:none;
    }
    .notice > *{ position:relative; }
    .notice strong{ color: #7a5c00; }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      font-weight:1000;
      border-radius:999px;
      padding: 5px 10px;
      border:1px solid rgba(15,17,20,.12);
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 20px rgba(0,0,0,.05);
      color: rgba(15,17,20,.86);
    }
    .badge .dot{
      width:8px;height:8px;border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 10px rgba(200,166,58,.30);
    }
    .badge.soft .dot{
      background: linear-gradient(180deg, var(--accent2), var(--accent));
      box-shadow: 0 0 10px rgba(11,125,92,.22);
    }

    /* Glossar */
    .glossWrap{ margin-top:10px; }
    details.gloss{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
      padding: 10px 12px;
      margin: 10px 0;
      overflow:hidden;
    }
    details.gloss[open]{
      border-color: rgba(11,125,92,.22);
      box-shadow: 0 18px 40px rgba(0,0,0,.08);
    }
    details.gloss summary{
      cursor:pointer;
      list-style:none;
      font-weight:1000;
      color: rgba(15,17,20,.92);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      outline:none;
    }
    details.gloss summary::-webkit-details-marker{ display:none; }
    .glossBadge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:11px;
      font-weight:1000;
      padding: 4px 8px;
      border-radius:999px;
      border:1px solid rgba(200,166,58,.30);
      background: rgba(200,166,58,.10);
      color: rgba(15,17,20,.82);
      flex:0 0 auto;
    }
    .glossBadge .dot{
      width:8px; height:8px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 10px rgba(200,166,58,.28);
    }
    .glossBody{
      margin-top:10px;
      color: var(--muted);
      line-height:1.8;
      font-size: 13.8px;
    }

    /* Form (nur Auswahlfelder) */
    .form{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:10px;
    }
    .field{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
      padding: 12px 12px;
      position:relative;
      overflow:hidden;
    }
    .field:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 160px at 10% 40%, rgba(200,166,58,.08), transparent 70%),
        radial-gradient(520px 160px at 90% 30%, rgba(11,125,92,.06), transparent 70%);
      pointer-events:none;
      opacity:.9;
    }
    .field > *{ position:relative; }

    .field .lbl{
      font-weight:1000;
      font-size:13px;
      margin-bottom:6px;
      color: rgba(15,17,20,.92);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .hint{
      font-weight:900;
      font-size:12px;
      color: rgba(71,80,95,.92);
      background: rgba(11,125,92,.08);
      border:1px solid rgba(11,125,92,.18);
      border-radius: 999px;
      padding: 4px 8px;
    }

    select{
      width:100%;
      border:1px solid rgba(15,17,20,.18);
      border-radius: 12px;
      padding: 10px 10px;
      font: inherit;
      background: rgba(255,255,255,.96);
      color: var(--ink);
      outline:none;
      font-weight:900;
    }
    .help{
      margin-top:8px;
      color: rgba(71,80,95,.92);
      font-size:12.8px;
      line-height:1.65;
    }

    /* KPI */
    .kpis{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media (min-width: 720px){
      .kpis{ grid-template-columns: 1fr 1fr 1fr 1fr; }
    }
    .kpi{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 12px 26px rgba(0,0,0,.06);
      padding: 12px 12px;
      position:relative;
      overflow:hidden;
      min-height: 82px;
    }
    .kpi:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 160px at 18% 50%, rgba(200,166,58,.10), transparent 70%),
        radial-gradient(520px 160px at 82% 40%, rgba(11,125,92,.08), transparent 70%);
      pointer-events:none;
      opacity:.9;
    }
    .kpi > *{ position:relative; }
    .kpi .t{ font-size:12px; font-weight:1000; color: rgba(71,80,95,.92); }
    .kpi .v{ font-size:18px; font-weight:1100; margin-top:4px; color: rgba(15,17,20,.94); }
    .kpi .s{ font-size:12px; margin-top:2px; color: rgba(71,80,95,.88); line-height:1.35; }

    /* Wow Chart */
    .viz{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 16px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 14px 34px rgba(0,0,0,.08);
      padding: 12px 12px;
      margin-top: 10px;
      overflow:hidden;
      position:relative;
    }
    .viz.shine:before{
      content:"";
      position:absolute;
      inset:-60% -40%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.55), transparent);
      transform: rotate(18deg);
      opacity:.28;
      animation: sheen 6.5s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes sheen{
      0%{ transform: translateX(-20%) rotate(18deg); opacity:.12; }
      50%{ transform: translateX(28%) rotate(18deg); opacity:.32; }
      100%{ transform: translateX(60%) rotate(18deg); opacity:.12; }
    }

    .vizTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .vizTop .title{
      font-weight:1100;
      color: rgba(15,17,20,.94);
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .vizTop .note{
      font-size:12px;
      font-weight:900;
      color: rgba(71,80,95,.92);
      background: rgba(200,166,58,.10);
      border:1px solid rgba(200,166,58,.22);
      border-radius: 999px;
      padding: 4px 8px;
      width: fit-content;
    }
    .vizFrame{
      border:1px solid rgba(15,17,20,.10);
      border-radius: 16px;
      background: rgba(255,255,255,.92);
      padding: 10px;
      overflow:hidden;
      box-shadow: inset 0 0 0 1px rgba(200,166,58,.06);
    }
    .vizMeta{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:8px;
    }
    .vizMeta .left{
      color: rgba(15,17,20,.92);
      font-weight:1100;
      font-size:13px;
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .vizMeta .scale{
      color: rgba(71,80,95,.92);
      font-weight:900;
      font-size:12px;
    }
    .viz svg{ width:100%; height:auto; display:block; }

    /* Q-Checks (nur Auswahl) */
    .qgrid{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      margin-top:10px;
    }

    .footer{
      margin-top: 16px;
      color: rgba(71,80,95,.85);
      font-size: 12px;
      line-height:1.6;
      text-align:center;
    }

    /* Print */
    @media print{
      body{ background:#fff !important; color:#000 !important; }
      .spark, .topbar, .actions, .lang, .btn, .footer{ display:none !important; }
      .wrap{ max-width: 820px; padding: 0; }
      .hero, .card, .field, .viz, .kpi, details.gloss, .vizFrame{
        box-shadow:none !important;
        background:#fff !important;
        border:1px solid #bbb !important;
        color:#000 !important;
      }
      .sub, .card p, .glossBody, .help, .kpi .t, .kpi .s{ color:#111 !important; }
      .notice{ border:1px solid #999 !important; background:#f7f2df !important; color:#000 !important; }
      a{ color:#000 !important; text-decoration:none !important; }
      details.gloss{ break-inside: avoid; }
      .vizTop .note, .hint, .badge{ border:1px solid #bbb !important; background:#f2f2f2 !important; color:#000 !important; }
      .viz.shine:before{ display:none !important; }
    }
  </style>
</head>

<body>
  <div class="spark" aria-hidden="true"></div>

  <div class="wrap">
    <div class="topbar">
      <div class="brand" aria-label="Kurs">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <defs>
            <linearGradient id="gSunM2" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#c8a63a"/>
              <stop offset="1" stop-color="#e0c466"/>
            </linearGradient>
          </defs>
          <circle cx="12" cy="12" r="5.2" fill="url(#gSunM2)"></circle>
          <g fill="none" stroke="rgba(15,17,20,.75)" stroke-width="1.2" stroke-linecap="round">
            <path d="M12 2.2v2.2M12 19.6v2.2M2.2 12h2.2M19.6 12h2.2"/>
            <path d="M4.6 4.6l1.55 1.55M17.85 17.85l1.55 1.55M19.4 4.6l-1.55 1.55M6.15 17.85L4.6 19.4"/>
          </g>
        </svg>
        <div>
          <div class="t1" data-i18n="brand_title">Premium Kurs</div>
          <div class="t2" data-i18n="brand_sub">Photovoltaik als Kapitalanlage</div>
          <div class="premiumTag" aria-hidden="true">
            <span class="dot"></span>
            <span data-i18n="premium_tag">Modul 02 • Hauptkurs</span>
          </div>
        </div>
      </div>

      <div class="actions">
        <a class="btn" id="toIndex" href="index.html" data-nocache="1" title="Index">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_index">Index</span>
        </a>

        <div class="lang" title="Sprache / Language">
          <label for="langSel" data-i18n="lang_label">Sprache</label>
          <select id="langSel" aria-label="Sprache wählen">
            <option value="de">DE</option>
            <option value="en">EN</option>
          </select>
        </div>

        <button class="btn secondary" id="printBtn" type="button" title="Drucken / Print">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_print">Drucken</span>
        </button>

        <button class="btn danger" id="resetBtn" type="button" title="Projektakte leeren">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_reset">Projektakte leeren</span>
        </button>
      </div>
    </div>

    <div class="hero">
      <h1 data-i18n="h1">Modul 02 – Die wirtschaftliche Logik einer Anlage</h1>
      <p class="sub" data-i18n="sub">
        In diesem Modul verstehst du, woher „Rendite“ überhaupt kommt – ohne Fachchinesisch: Ersparnis (Eigenverbrauch) + Einnahmen (Einspeisung) minus laufende Kosten.
        Du siehst außerdem, welche Zahlen ein Anbieter offenlegen muss, damit eine Rechnung seriös ist.
      </p>
    </div>

    <div class="card">
      <h2 data-i18n="sec1_title">1) Das Grundprinzip (einfach erklärt)</h2>

      <p data-i18n="sec1_p1">
        Bei Photovoltaik gibt es zwei typische Geldquellen: (1) du sparst Stromkosten, wenn du Strom selbst nutzt, und (2) du bekommst Geld für Strom, der ins Netz geht.
        Wenn jemand nur eine Rendite nennt, aber diese zwei Quellen nicht sauber erklärt, ist das ein Warnsignal.
      </p>

      <p data-i18n="sec1_p2">
        Für Einsteiger ist das Wichtigste: Du musst keine Technik können. Du brauchst ein Gefühl dafür, welche Zahlen „hingehören“ – und welche Fragen du stellen musst,
        wenn dir jemand nur mit Hochglanz-Aussagen kommt.
      </p>

      <div class="notice">
        <strong data-i18n="notice_title">Wichtiger Hinweis:</strong>
        <span data-i18n="notice_text">Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieses Modul ist Bildung: Logik verstehen, Zahlen einordnen, Fragen strukturieren.</span>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="secG_title">Kurz-Glossar für dieses Modul</h2>
      <p data-i18n="secG_p1">Wenn ein Begriff im Gespräch fällt, klapp ihn hier kurz auf. Ziel: Laien-tauglich – ohne Wikipedia-Modus.</p>

      <div class="glossWrap">
        <details class="gloss">
          <summary>
            <span data-i18n="g1_t">Begriff: Eigenverbrauch</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g1_b">
            Eigenverbrauch ist der Anteil deines Solarstroms, den du direkt selbst nutzt (Haus oder Betrieb). Dadurch musst du weniger Strom einkaufen – das ist „Ersparnis“.
            Je höher der Eigenverbrauch (bei gleichen Kosten), desto stärker wirkt das in vielen Rechnungen.
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g2_t">Begriff: Einspeisung & Vergütung</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g2_b">
            Einspeisung bedeutet: Strom geht ins öffentliche Netz. Dafür gibt es je nach Modell eine feste Vergütung oder einen Marktpreis. Wichtig ist:
            Welche Logik gilt genau – und wo steht das verbindlich (Vertrag/Regelwerk)?
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g3_t">Begriff: CAPEX / OPEX</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g3_b">
            CAPEX sind einmalige Anschaffungskosten (Kauf/Installation). OPEX sind laufende Kosten pro Jahr (Wartung, Versicherung, Monitoring, Rücklagen).
            Viele Schönrechnungen unterschätzen OPEX oder lassen Rücklagen weg.
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g4_t">Begriff: Amortisation</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g4_b">
            Amortisation heißt: Wie viele Jahre dauert es ungefähr, bis die jährlichen Netto-Effekte die Anfangskosten „eingespielt“ haben.
            Es ist nur eine grobe Orientierung – aber gut, um zu erkennen, ob eine Rechnung realistisch wirkt.
          </div>
        </details>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec2_title">2) Tool: Demo-Rechner (nur zur Einordnung)</h2>
      <p data-i18n="sec2_p1">
        Dieses Tool ist bewusst einfach. Du siehst, welche Eingaben eine Rendite-Rechnung überhaupt braucht – und wo „Schönrechnungen“ entstehen können.
        Alles sind Trainingswerte, keine Empfehlung.
      </p>

      <div class="form" aria-label="Demo-Rechner">

        <div class="field">
          <div class="lbl">
            <span data-i18n="f_prod">Jahresproduktion (kWh)</span>
            <span class="hint" data-i18n="h_offer">Zahl aus Angebot/Prognose</span>
          </div>
          <select id="prodKwh">
            <option value="6000">6.000</option>
            <option value="7500">7.500</option>
            <option value="9000" selected>9.000</option>
            <option value="10500">10.500</option>
            <option value="12000">12.000</option>
            <option value="15000">15.000</option>
            <option value="18000">18.000</option>
            <option value="21000">21.000</option>
          </select>
          <div class="help" data-i18n="f_prod_help">
            Tipp: Wenn nur eine Zahl genannt wird, frage nach Quelle/Annahmen (Standort, Ausrichtung, Verschattung, Degradation).
          </div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f_self">Eigenverbrauch (%)</span>
            <span class="hint" data-i18n="h_self">Wie viel nutzt du selbst?</span>
          </div>
          <select id="selfPct">
            <option value="10">10 %</option>
            <option value="20">20 %</option>
            <option value="30" selected>30 %</option>
            <option value="40">40 %</option>
            <option value="50">50 %</option>
            <option value="60">60 %</option>
            <option value="70">70 %</option>
          </select>
          <div class="help" data-i18n="f_self_help">
            Wichtig: Ohne Speicher kann der Eigenverbrauch deutlich anders sein als beworben. Lass dir erklären, wieso dieser Wert realistisch sein soll.
          </div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f_price">Strompreis (ct/kWh)</span>
            <span class="hint" data-i18n="h_savings">Für Ersparnis</span>
          </div>
          <select id="priceCt">
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="35" selected>35</option>
            <option value="40">40</option>
            <option value="45">45</option>
            <option value="50">50</option>
          </select>
          <div class="help" data-i18n="f_price_help">
            Frage: Welcher Preis wird angenommen – heute, Durchschnitt, oder eine Prognose? Und wie wird das begründet?
          </div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f_feed">Einspeise-Preis / Vergütung (ct/kWh)</span>
            <span class="hint" data-i18n="h_feed">Vergütung/Annahme</span>
          </div>
          <select id="feedCt">
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8" selected>8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="12">12</option>
          </select>
          <div class="help" data-i18n="f_feed_help">
            Frage im Gespräch: Ist das eine feste Vergütung, ein Marktpreis oder eine Mischlogik – und wo steht das verbindlich?
          </div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f_opex">Laufende Kosten (OPEX) pro Jahr (€)</span>
            <span class="hint" data-i18n="h_costs">Wartung/Versicherung/Rücklage</span>
          </div>
          <select id="opexEur">
            <option value="150">150</option>
            <option value="200">200</option>
            <option value="250" selected>250</option>
            <option value="300">300</option>
            <option value="400">400</option>
            <option value="500">500</option>
            <option value="700">700</option>
          </select>
          <div class="help" data-i18n="f_opex_help">
            Tipp: Wenn OPEX „fast nichts“ sein soll, frage nach Versicherungsnachweis, Wartungsvertrag, Monitoring und Rücklagen (z. B. Wechselrichter).
          </div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f_capex">Einmalige Kosten (CAPEX) (€)</span>
            <span class="hint" data-i18n="h_capex">Kauf/Installation</span>
          </div>
          <select id="capexEur">
            <option value="8000">8.000</option>
            <option value="10000">10.000</option>
            <option value="12000" selected>12.000</option>
            <option value="15000">15.000</option>
            <option value="18000">18.000</option>
            <option value="20000">20.000</option>
            <option value="25000">25.000</option>
          </select>
          <div class="help" data-i18n="f_capex_help">
            Hinweis: In echten Angeboten muss CAPEX als Positionenliste nachvollziehbar sein (Modul, Wechselrichter, Montage, Elektrik, Gerüst, Anmeldung, etc.).
          </div>
        </div>

      </div>

      <div class="kpis" aria-label="Kennzahlen">
        <div class="kpi">
          <div class="t" data-i18n="k1_t">Eigenverbrauch (kWh)</div>
          <div class="v" id="k_selfKwh">–</div>
          <div class="s" data-i18n="k1_s">Strom, den du direkt nutzt</div>
        </div>
        <div class="kpi">
          <div class="t" data-i18n="k2_t">Einspeisung (kWh)</div>
          <div class="v" id="k_feedKwh">–</div>
          <div class="s" data-i18n="k2_s">Strom, der ins Netz geht</div>
        </div>
        <div class="kpi">
          <div class="t" data-i18n="k3_t">Ersparnis + Einnahmen</div>
          <div class="v" id="k_gross">–</div>
          <div class="s" data-i18n="k3_s">Bevor laufende Kosten</div>
        </div>
        <div class="kpi">
          <div class="t" data-i18n="k4_t">Netto nach OPEX</div>
          <div class="v" id="k_net">–</div>
          <div class="s" data-i18n="k4_s">Sehr grobe Orientierung</div>
        </div>
      </div>

      <div class="kpi" style="margin-top:10px;">
        <div class="t" data-i18n="k5_t">Einfache Amortisation</div>
        <div class="v" id="k_payback">–</div>
        <div class="s" data-i18n="k5_s">CAPEX ÷ Netto (nur Trainingswert)</div>
      </div>

      <div class="viz shine" aria-label="Visualisierung">
        <div class="vizTop">
          <div class="title">
            <span class="badge soft"><span class="dot" aria-hidden="true"></span><span data-i18n="viz_badge">Demo-Chart</span></span>
            <span data-i18n="viz_title">Visualisierung: Wo kommt der Effekt her?</span>
          </div>
          <div class="note" data-i18n="viz_note">Vereinfacht – nur zur Einordnung</div>
        </div>

        <div class="vizFrame">
          <div class="vizMeta">
            <div class="left" data-i18n="viz_meta_left">Jahreswerte (vereinfacht)</div>
            <div class="scale" id="vizScale">–</div>
          </div>

          <!-- SVG Chart (fix: kein verrutschtes Text-Overlay; Labels getrennt über vizMeta) -->
          <svg viewBox="0 0 980 260" role="img" aria-label="Jahreswerte Chart">
            <defs>
              <linearGradient id="barGreen" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0" stop-color="rgba(26,165,122,.55)"/>
                <stop offset="1" stop-color="rgba(11,125,92,.20)"/>
              </linearGradient>
              <linearGradient id="barGold" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0" stop-color="rgba(224,196,102,.60)"/>
                <stop offset="1" stop-color="rgba(200,166,58,.22)"/>
              </linearGradient>
              <linearGradient id="barRed" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0" stop-color="rgba(197,38,70,.30)"/>
                <stop offset="1" stop-color="rgba(197,38,70,.14)"/>
              </linearGradient>
              <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
                <feDropShadow dx="0" dy="10" stdDeviation="10" flood-color="rgba(0,0,0,.12)"/>
              </filter>
            </defs>

            <!-- grid -->
            <g stroke="rgba(15,17,20,.10)" stroke-width="1">
              <line x1="70" y1="40" x2="940" y2="40"/>
              <line x1="70" y1="90" x2="940" y2="90"/>
              <line x1="70" y1="140" x2="940" y2="140"/>
              <line x1="70" y1="190" x2="940" y2="190"/>
              <line x1="70" y1="240" x2="940" y2="240"/>
            </g>

            <!-- axis base -->
            <line x1="70" y1="240" x2="940" y2="240" stroke="rgba(15,17,20,.22)" stroke-width="2"/>

            <!-- Bars (heights set by JS) -->
            <g filter="url(#softShadow)">
              <rect id="barSavings" x="170" y="240" width="190" height="0" rx="18" fill="url(#barGreen)" stroke="rgba(11,125,92,.18)"/>
              <rect id="barRevenue" x="395" y="240" width="190" height="0" rx="18" fill="url(#barGold)" stroke="rgba(200,166,58,.20)"/>
              <rect id="barOpex" x="620" y="240" width="190" height="0" rx="18" fill="url(#barRed)" stroke="rgba(197,38,70,.18)"/>
            </g>

            <!-- Values (set by JS) -->
            <text id="valSavings" x="265" y="78" text-anchor="middle" font-size="18" font-weight="900" fill="rgba(15,17,20,.92)">–</text>
            <text id="valRevenue" x="490" y="78" text-anchor="middle" font-size="18" font-weight="900" fill="rgba(15,17,20,.92)">–</text>
            <text id="valOpex" x="715" y="78" text-anchor="middle" font-size="18" font-weight="900" fill="rgba(15,17,20,.92)">–</text>

            <!-- labels -->
            <text x="265" y="258" text-anchor="middle" font-size="12.8" font-weight="900" fill="rgba(15,17,20,.80)" data-i18n-svg="lbl_savings">Ersparnis</text>
            <text x="490" y="258" text-anchor="middle" font-size="12.8" font-weight="900" fill="rgba(15,17,20,.80)" data-i18n-svg="lbl_revenue">Einnahmen</text>
            <text x="715" y="258" text-anchor="middle" font-size="12.8" font-weight="900" fill="rgba(15,17,20,.80)" data-i18n-svg="lbl_opex">Laufende Kosten</text>
          </svg>
        </div>

        <div class="help" style="margin-top:10px;" data-i18n="viz_help">
          Hinweis: Der Chart ist nur eine Visualisierung. Er zeigt dir, dass jede Rechnung auf wenigen Kernannahmen basiert – und genau diese Annahmen musst du im Gespräch prüfen.
        </div>

        <div class="notice" style="margin-top:10px;">
          <strong data-i18n="m_note_title">Merke:</strong>
          <span data-i18n="m_note_text">Wenn jemand eine Rendite nennt, ohne dir die Eingaben (kWh, Eigenverbrauch, Preise, Kosten) offen zu zeigen, ist das kein seriöses Gespräch.</span>
        </div>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec3_title">3) Gesprächsvorbereitung: Alles als Auswahl (damit es einfach bleibt)</h2>
      <p data-i18n="sec3_p1">
        Wähle pro Punkt die passende Antwort. Ziel: Du erkennst sofort, ob ein Anbieter transparent ist – oder ausweicht.
      </p>

      <div class="qgrid">
        <div class="field">
          <div class="lbl">
            <span data-i18n="q1">Wird die Jahresproduktion (kWh) mit einer Quelle belegt?</span>
            <span class="hint" data-i18n="q_hint">Nachweis</span>
          </div>
          <select id="qProdProof">
            <option value="yes" selected data-i18n-opt="opt_yes_doc">Ja – Quelle/Report liegt vor</option>
            <option value="partial" data-i18n-opt="opt_partial">Teilweise – nur grob / unklar</option>
            <option value="no" data-i18n-opt="opt_no">Nein – nur Behauptung</option>
            <option value="avoid" data-i18n-opt="opt_avoid">Ausweichend / wechselt Thema</option>
          </select>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="q2">Wird erklärt, wie der Eigenverbrauch zustande kommt?</span>
            <span class="hint" data-i18n="q_hint">Logik</span>
          </div>
          <select id="qSelfLogic">
            <option value="clear" selected data-i18n-opt="opt_clear">Ja – verständlich & plausibel</option>
            <option value="tech" data-i18n-opt="opt_tech">Nur Technik-Wörter, kaum Erklärung</option>
            <option value="no" data-i18n-opt="opt_no">Nein – wird nicht erklärt</option>
            <option value="promise" data-i18n-opt="opt_promise">Klingt nach Versprechen statt Begründung</option>
          </select>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="q3">Sind CAPEX (einmalig) als Positionenliste nachvollziehbar?</span>
            <span class="hint" data-i18n="q_hint">Transparenz</span>
          </div>
          <select id="qCapexList">
            <option value="full" selected data-i18n-opt="opt_full">Ja – detaillierte Liste</option>
            <option value="some" data-i18n-opt="opt_some">Teilweise – einige Positionen fehlen</option>
            <option value="no" data-i18n-opt="opt_no">Nein – nur Gesamtsumme</option>
            <option value="unknown" data-i18n-opt="opt_unknown">Unklar / noch nicht erhalten</option>
          </select>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="q4">Sind OPEX (laufend) realistisch inkl. Rücklagen erklärt?</span>
            <span class="hint" data-i18n="q_hint">Kosten</span>
          </div>
          <select id="qOpexReal">
            <option value="yes" selected data-i18n-opt="opt_yes_expl">Ja – mit Beispielen/Verträgen</option>
            <option value="low" data-i18n-opt="opt_low">Wirkt zu niedrig / kaum begründet</option>
            <option value="no" data-i18n-opt="opt_no">Nein – wird weggelassen</option>
            <option value="unknown" data-i18n-opt="opt_unknown">Unklar / noch offen</option>
          </select>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="q5">Ist der Einspeise-Preis/Vergütung sauber definiert?</span>
            <span class="hint" data-i18n="q_hint">Vergütung</span>
          </div>
          <select id="qFeedDefined">
            <option value="fixed" selected data-i18n-opt="opt_fixed">Ja – fest geregelt (nachweisbar)</option>
            <option value="market" data-i18n-opt="opt_market">Marktpreis – Risiko wird erklärt</option>
            <option value="mix" data-i18n-opt="opt_mix">Mischlogik – verständlich erklärt</option>
            <option value="unclear" data-i18n-opt="opt_unclear">Unklar / klingt geschätzt</option>
          </select>
        </div>
      </div>

      <div class="notice" style="margin-top:12px;">
        <strong data-i18n="sec3_note_t">Mini-Regel:</strong>
        <span data-i18n="sec3_note_b">Wenn mehrere Antworten „Unklar/Nein/Ausweichend“ sind: Nicht entscheiden. Erst Unterlagen holen (Modul 05/06), dann rechnen (Modul 07/08).</span>
      </div>
    </div>

    <div class="footer" data-i18n="footer">
      Premium Workbook • Modul 02. Eingaben werden lokal gespeichert. Druck: oben „Drucken“. Kein Tracking, keine externen Dienste.
    </div>
  </div>

  <script>
    (function(){
      const COURSE = "pvka";
      const MODULE = "m02";
      const LS_KEY_LANG = "fsa_" + COURSE + "_lang";
      const LS_KEY_DATA = "fsa_" + COURSE + "_project";

      const langSel = document.getElementById("langSel");
      const printBtn = document.getElementById("printBtn");
      const resetBtn = document.getElementById("resetBtn");

      const prodKwh = document.getElementById("prodKwh");
      const selfPct = document.getElementById("selfPct");
      const priceCt = document.getElementById("priceCt");
      const feedCt = document.getElementById("feedCt");
      const opexEur = document.getElementById("opexEur");
      const capexEur = document.getElementById("capexEur");

      const qProdProof = document.getElementById("qProdProof");
      const qSelfLogic = document.getElementById("qSelfLogic");
      const qCapexList = document.getElementById("qCapexList");
      const qOpexReal = document.getElementById("qOpexReal");
      const qFeedDefined = document.getElementById("qFeedDefined");

      const k_selfKwh = document.getElementById("k_selfKwh");
      const k_feedKwh = document.getElementById("k_feedKwh");
      const k_gross = document.getElementById("k_gross");
      const k_net = document.getElementById("k_net");
      const k_payback = document.getElementById("k_payback");

      const barSavings = document.getElementById("barSavings");
      const barRevenue = document.getElementById("barRevenue");
      const barOpex = document.getElementById("barOpex");
      const valSavings = document.getElementById("valSavings");
      const valRevenue = document.getElementById("valRevenue");
      const valOpex = document.getElementById("valOpex");
      const vizScale = document.getElementById("vizScale");

      const i18n = {
        de: {
          brand_title: "Premium Kurs",
          brand_sub: "Photovoltaik als Kapitalanlage",
          premium_tag: "Modul 02 • Hauptkurs",
          btn_index: "Index",
          lang_label: "Sprache",
          btn_print: "Drucken",
          btn_reset: "Projektakte leeren",

          h1: "Modul 02 – Die wirtschaftliche Logik einer Anlage",
          sub: "In diesem Modul verstehst du, woher „Rendite“ überhaupt kommt – ohne Fachchinesisch: Ersparnis (Eigenverbrauch) + Einnahmen (Einspeisung) minus laufende Kosten. Du siehst außerdem, welche Zahlen ein Anbieter offenlegen muss, damit eine Rechnung seriös ist.",

          sec1_title: "1) Das Grundprinzip (einfach erklärt)",
          sec1_p1: "Bei Photovoltaik gibt es zwei typische Geldquellen: (1) du sparst Stromkosten, wenn du Strom selbst nutzt, und (2) du bekommst Geld für Strom, der ins Netz geht. Wenn jemand nur eine Rendite nennt, aber diese zwei Quellen nicht sauber erklärt, ist das ein Warnsignal.",
          sec1_p2: "Für Einsteiger ist das Wichtigste: Du musst keine Technik können. Du brauchst ein Gefühl dafür, welche Zahlen „hingehören“ – und welche Fragen du stellen musst, wenn dir jemand nur mit Hochglanz-Aussagen kommt.",

          notice_title: "Wichtiger Hinweis:",
          notice_text: "Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieses Modul ist Bildung: Logik verstehen, Zahlen einordnen, Fragen strukturieren.",

          secG_title: "Kurz-Glossar für dieses Modul",
          secG_p1: "Wenn ein Begriff im Gespräch fällt, klapp ihn hier kurz auf. Ziel: Laien-tauglich – ohne Wikipedia-Modus.",
          g_badge: "Glossar",
          g1_t: "Begriff: Eigenverbrauch",
          g1_b: "Eigenverbrauch ist der Anteil deines Solarstroms, den du direkt selbst nutzt (Haus oder Betrieb). Dadurch musst du weniger Strom einkaufen – das ist „Ersparnis“. Je höher der Eigenverbrauch (bei gleichen Kosten), desto stärker wirkt das in vielen Rechnungen.",
          g2_t: "Begriff: Einspeisung & Vergütung",
          g2_b: "Einspeisung bedeutet: Strom geht ins öffentliche Netz. Dafür gibt es je nach Modell eine feste Vergütung oder einen Marktpreis. Wichtig ist: Welche Logik gilt genau – und wo steht das verbindlich (Vertrag/Regelwerk)?",
          g3_t: "Begriff: CAPEX / OPEX",
          g3_b: "CAPEX sind einmalige Anschaffungskosten (Kauf/Installation). OPEX sind laufende Kosten pro Jahr (Wartung, Versicherung, Monitoring, Rücklagen). Viele Schönrechnungen unterschätzen OPEX oder lassen Rücklagen weg.",
          g4_t: "Begriff: Amortisation",
          g4_b: "Amortisation heißt: Wie viele Jahre dauert es ungefähr, bis die jährlichen Netto-Effekte die Anfangskosten „eingespielt“ haben. Es ist nur eine grobe Orientierung – aber gut, um zu erkennen, ob eine Rechnung realistisch wirkt.",

          sec2_title: "2) Tool: Demo-Rechner (nur zur Einordnung)",
          sec2_p1: "Dieses Tool ist bewusst einfach. Du siehst, welche Eingaben eine Rendite-Rechnung überhaupt braucht – und wo „Schönrechnungen“ entstehen können. Alles sind Trainingswerte, keine Empfehlung.",

          f_prod: "Jahresproduktion (kWh)",
          h_offer: "Zahl aus Angebot/Prognose",
          f_prod_help: "Tipp: Wenn nur eine Zahl genannt wird, frage nach Quelle/Annahmen (Standort, Ausrichtung, Verschattung, Degradation).",
          f_self: "Eigenverbrauch (%)",
          h_self: "Wie viel nutzt du selbst?",
          f_self_help: "Wichtig: Ohne Speicher kann der Eigenverbrauch deutlich anders sein als beworben. Lass dir erklären, wieso dieser Wert realistisch sein soll.",
          f_price: "Strompreis (ct/kWh)",
          h_savings: "Für Ersparnis",
          f_price_help: "Frage: Welcher Preis wird angenommen – heute, Durchschnitt, oder eine Prognose? Und wie wird das begründet?",
          f_feed: "Einspeise-Preis / Vergütung (ct/kWh)",
          h_feed: "Vergütung/Annahme",
          f_feed_help: "Frage im Gespräch: Ist das eine feste Vergütung, ein Marktpreis oder eine Mischlogik – und wo steht das verbindlich?",
          f_opex: "Laufende Kosten (OPEX) pro Jahr (€)",
          h_costs: "Wartung/Versicherung/Rücklage",
          f_opex_help: "Tipp: Wenn OPEX „fast nichts“ sein soll, frage nach Versicherungsnachweis, Wartungsvertrag, Monitoring und Rücklagen (z. B. Wechselrichter).",
          f_capex: "Einmalige Kosten (CAPEX) (€)",
          h_capex: "Kauf/Installation",
          f_capex_help: "Hinweis: In echten Angeboten muss CAPEX als Positionenliste nachvollziehbar sein (Modul, Wechselrichter, Montage, Elektrik, Gerüst, Anmeldung, etc.).",

          k1_t: "Eigenverbrauch (kWh)",
          k1_s: "Strom, den du direkt nutzt",
          k2_t: "Einspeisung (kWh)",
          k2_s: "Strom, der ins Netz geht",
          k3_t: "Ersparnis + Einnahmen",
          k3_s: "Bevor laufende Kosten",
          k4_t: "Netto nach OPEX",
          k4_s: "Sehr grobe Orientierung",
          k5_t: "Einfache Amortisation",
          k5_s: "CAPEX ÷ Netto (nur Trainingswert)",

          viz_badge: "Demo-Chart",
          viz_title: "Visualisierung: Wo kommt der Effekt her?",
          viz_note: "Vereinfacht – nur zur Einordnung",
          viz_meta_left: "Jahreswerte (vereinfacht)",
          viz_help: "Hinweis: Der Chart ist nur eine Visualisierung. Er zeigt dir, dass jede Rechnung auf wenigen Kernannahmen basiert – und genau diese Annahmen musst du im Gespräch prüfen.",
          m_note_title: "Merke:",
          m_note_text: "Wenn jemand eine Rendite nennt, ohne dir die Eingaben (kWh, Eigenverbrauch, Preise, Kosten) offen zu zeigen, ist das kein seriöses Gespräch.",

          lbl_savings: "Ersparnis",
          lbl_revenue: "Einnahmen",
          lbl_opex: "Laufende Kosten",

          sec3_title: "3) Gesprächsvorbereitung: Alles als Auswahl (damit es einfach bleibt)",
          sec3_p1: "Wähle pro Punkt die passende Antwort. Ziel: Du erkennst sofort, ob ein Anbieter transparent ist – oder ausweicht.",
          q_hint: "Nachweis",
          q1: "Wird die Jahresproduktion (kWh) mit einer Quelle belegt?",
          q2: "Wird erklärt, wie der Eigenverbrauch zustande kommt?",
          q3: "Sind CAPEX (einmalig) als Positionenliste nachvollziehbar?",
          q4: "Sind OPEX (laufend) realistisch inkl. Rücklagen erklärt?",
          q5: "Ist der Einspeise-Preis/Vergütung sauber definiert?",
          sec3_note_t: "Mini-Regel:",
          sec3_note_b: "Wenn mehrere Antworten „Unklar/Nein/Ausweichend“ sind: Nicht entscheiden. Erst Unterlagen holen (Modul 05/06), dann rechnen (Modul 07/08).",

          opt_yes_doc: "Ja – Quelle/Report liegt vor",
          opt_partial: "Teilweise – nur grob / unklar",
          opt_no: "Nein – nur Behauptung",
          opt_avoid: "Ausweichend / wechselt Thema",

          opt_clear: "Ja – verständlich & plausibel",
          opt_tech: "Nur Technik-Wörter, kaum Erklärung",
          opt_promise: "Klingt nach Versprechen statt Begründung",

          opt_full: "Ja – detaillierte Liste",
          opt_some: "Teilweise – einige Positionen fehlen",
          opt_unknown: "Unklar / noch nicht erhalten",

          opt_yes_expl: "Ja – mit Beispielen/Verträgen",
          opt_low: "Wirkt zu niedrig / kaum begründet",

          opt_fixed: "Ja – fest geregelt (nachweisbar)",
          opt_market: "Marktpreis – Risiko wird erklärt",
          opt_mix: "Mischlogik – verständlich erklärt",
          opt_unclear: "Unklar / klingt geschätzt",

          footer: "Premium Workbook • Modul 02. Eingaben werden lokal gespeichert. Druck: oben „Drucken“. Kein Tracking, keine externen Dienste."
        },
        en: {
          brand_title: "Premium course",
          brand_sub: "PV as a capital investment",
          premium_tag: "Module 02 • Main course",
          btn_index: "Index",
          lang_label: "Language",
          btn_print: "Print",
          btn_reset: "Clear project file",

          h1: "Module 02 – The economic logic of a PV system",
          sub: "This module explains where “returns” come from—without jargon: savings (self-consumption) + revenues (feed-in) minus ongoing costs. You’ll also learn which numbers a provider must disclose for a calculation to be credible.",

          sec1_title: "1) The core principle (simple)",
          sec1_p1: "PV typically has two money sources: (1) you save power costs when you use your own solar energy, and (2) you earn money for electricity fed into the grid. If someone only quotes a return but cannot explain these two sources, that’s a warning sign.",
          sec1_p2: "For beginners, the key is: you don’t need to be technical. You need to recognize which numbers belong in a serious calculation—and which questions to ask when someone sells glossy promises.",

          notice_title: "Important notice:",
          notice_text: "No investment, tax, or legal advice. This module is education: understand logic, interpret numbers, structure questions.",

          secG_title: "Quick glossary for this module",
          secG_p1: "If a term comes up in a meeting, open it here. Goal: plain-language—no Wikipedia mode.",
          g_badge: "Glossary",
          g1_t: "Term: Self-consumption",
          g1_b: "Self-consumption is the share of your solar power you use directly (home or business). That reduces purchases from the grid—this is “savings”. Higher self-consumption (with similar costs) often increases the perceived benefit.",
          g2_t: "Term: Feed-in & remuneration",
          g2_b: "Feed-in means electricity flows into the public grid. Depending on the model, you receive a fixed tariff or a market price. The key question: what exactly applies—and where is it contractually defined?",
          g3_t: "Term: CAPEX / OPEX",
          g3_b: "CAPEX are one-time acquisition costs (purchase/installation). OPEX are ongoing yearly costs (maintenance, insurance, monitoring, reserves). Many ‘nice’ calculations underestimate OPEX or omit reserves.",
          g4_t: "Term: Payback (amortization)",
          g4_b: "Payback is an approximate number of years until annual net effects ‘cover’ the initial cost. It’s only an orientation—but useful to detect unrealistic promises.",

          sec2_title: "2) Tool: Demo calculator (orientation only)",
          sec2_p1: "This tool is intentionally simple. It shows which inputs a ‘return’ calculation needs—and where overly optimistic assumptions can hide. Training values only, no recommendation.",

          f_prod: "Annual production (kWh)",
          h_offer: "Number from offer/prognosis",
          f_prod_help: "Tip: If only one number is given, ask for source/assumptions (site, orientation, shading, degradation).",
          f_self: "Self-consumption (%)",
          h_self: "How much do you use?",
          f_self_help: "Important: Without storage, self-consumption can differ a lot from marketing claims. Ask why this value is realistic.",
          f_price: "Electricity price (ct/kWh)",
          h_savings: "For savings",
          f_price_help: "Ask: Which price is assumed—today, average, or forecast? What’s the justification?",
          f_feed: "Feed-in price / tariff (ct/kWh)",
          h_feed: "Tariff/assumption",
          f_feed_help: "Ask: fixed tariff, market price, or mixed logic—and where is it defined?",
          f_opex: "Ongoing costs (OPEX) per year (€)",
          h_costs: "Maintenance/insurance/reserves",
          f_opex_help: "Tip: If OPEX is ‘almost nothing’, ask for evidence: insurance, maintenance, monitoring, reserves (e.g., inverter).",
          f_capex: "One-time costs (CAPEX) (€)",
          h_capex: "Purchase/installation",
          f_capex_help: "Note: Real offers should show CAPEX as an itemized list (modules, inverter, mounting, electrical work, scaffolding, registrations, etc.).",

          k1_t: "Self-consumption (kWh)",
          k1_s: "Power used directly",
          k2_t: "Feed-in (kWh)",
          k2_s: "Power sent to grid",
          k3_t: "Savings + revenues",
          k3_s: "Before ongoing costs",
          k4_t: "Net after OPEX",
          k4_s: "Very rough orientation",
          k5_t: "Simple payback",
          k5_s: "CAPEX ÷ Net (training value)",

          viz_badge: "Demo chart",
          viz_title: "Visualization: Where does the effect come from?",
          viz_note: "Simplified—orientation only",
          viz_meta_left: "Annual values (simplified)",
          viz_help: "Note: The chart is only a visualization. It shows that every calculation depends on a few key assumptions—and those assumptions must be checked in a meeting.",
          m_note_title: "Remember:",
          m_note_text: "If someone quotes a return without showing inputs (kWh, self-consumption, prices, costs), it’s not a serious conversation.",

          lbl_savings: "Savings",
          lbl_revenue: "Revenues",
          lbl_opex: "Ongoing costs",

          sec3_title: "3) Meeting prep: all as choices (to keep it easy)",
          sec3_p1: "Pick the best answer for each point. Goal: you quickly spot transparency—or evasiveness.",
          q_hint: "Evidence",
          q1: "Is the annual production (kWh) backed by a source?",
          q2: "Is it explained how self-consumption is derived?",
          q3: "Is CAPEX itemized and traceable?",
          q4: "Is OPEX realistic and explained incl. reserves?",
          q5: "Is the feed-in price/tariff clearly defined?",
          sec3_note_t: "Mini rule:",
          sec3_note_b: "If several answers are ‘unclear/no/evasive’: don’t decide. Get documents first (Module 05/06), then calculate (Module 07/08).",

          opt_yes_doc: "Yes—source/report provided",
          opt_partial: "Partly—rough/unclear",
          opt_no: "No—claim only",
          opt_avoid: "Evasive / changes topic",

          opt_clear: "Yes—clear & plausible",
          opt_tech: "Mostly jargon, little explanation",
          opt_promise: "Sounds like promise, not reasoning",

          opt_full: "Yes—detailed list",
          opt_some: "Partly—some items missing",
          opt_unknown: "Unclear / not received yet",

          opt_yes_expl: "Yes—with examples/contracts",
          opt_low: "Seems too low / weak reasoning",

          opt_fixed: "Yes—fixed & verifiable",
          opt_market: "Market price—risk explained",
          opt_mix: "Mixed logic—explained clearly",
          opt_unclear: "Unclear / sounds estimated",

          footer: "Premium workbook • Module 02. Inputs are stored locally. Print via “Print”. No tracking, no external services."
        }
      };

      function loadData(){
        try{
          return JSON.parse(localStorage.getItem(LS_KEY_DATA) || "{}") || {};
        }catch(e){
          return {};
        }
      }
      function saveData(obj){
        localStorage.setItem(LS_KEY_DATA, JSON.stringify(obj));
      }

      function loadLang(){
        const saved = localStorage.getItem(LS_KEY_LANG);
        return saved === "en" ? "en" : "de";
      }
      function saveLang(lang){
        localStorage.setItem(LS_KEY_LANG, lang);
      }

      function applyI18n(lang){
        document.documentElement.lang = lang;

        document.querySelectorAll("[data-i18n]").forEach(el => {
          const key = el.getAttribute("data-i18n");
          const txt = i18n[lang] && i18n[lang][key] ? i18n[lang][key] : null;
          if(txt !== null) el.textContent = txt;
        });

        // option translations via data-i18n-opt
        document.querySelectorAll("[data-i18n-opt]").forEach(opt => {
          const k = opt.getAttribute("data-i18n-opt");
          if(i18n[lang] && i18n[lang][k]) opt.textContent = i18n[lang][k];
        });

        // svg labels
        document.querySelectorAll("[data-i18n-svg]").forEach(el => {
          const k = el.getAttribute("data-i18n-svg");
          if(i18n[lang] && i18n[lang][k]) el.textContent = i18n[lang][k];
        });
      }

      function fmtInt(n){
        try{ return new Intl.NumberFormat("de-DE").format(Math.round(n)); }
        catch(e){ return String(Math.round(n)); }
      }
      function fmtEur(n, lang){
        const val = Math.round(n);
        try{
          return new Intl.NumberFormat(lang==="en" ? "en-GB" : "de-DE", { style:"currency", currency:"EUR", maximumFractionDigits:0 }).format(val);
        }catch(e){
          return val + " €";
        }
      }
      function fmtYears(n, lang){
        if(!isFinite(n) || n<=0) return (lang==="en") ? "–" : "–";
        const v = Math.round(n*10)/10;
        return (lang==="en") ? (v + " years") : (String(v).replace(".", ",") + " Jahre");
      }

      function recalc(){
        const lang = langSel.value === "en" ? "en" : "de";

        const prod = parseFloat(prodKwh.value || "0");
        const pct = parseFloat(selfPct.value || "0");
        const pCt = parseFloat(priceCt.value || "0");
        const fCt = parseFloat(feedCt.value || "0");
        const opex = parseFloat(opexEur.value || "0");
        const capex = parseFloat(capexEur.value || "0");

        const selfKwh = prod * (pct/100);
        const feedKwh = Math.max(0, prod - selfKwh);

        const savings = selfKwh * (pCt/100);
        const revenue = feedKwh * (fCt/100);
        const gross = savings + revenue;
        const net = gross - opex;

        const payback = (net > 0) ? (capex / net) : Infinity;

        k_selfKwh.textContent = fmtInt(selfKwh);
        k_feedKwh.textContent = fmtInt(feedKwh);
        k_gross.textContent = fmtEur(gross, lang);
        k_net.textContent = fmtEur(net, lang);
        k_payback.textContent = (isFinite(payback) ? fmtYears(payback, lang) : ((lang==="en") ? "n/a" : "n/v"));

        // Chart scale
        const maxVal = Math.max(1, savings, revenue, opex);
        const top = Math.ceil(maxVal / 50) * 50; // clean steps
        vizScale.textContent = (lang==="en")
          ? ("Scale: max ≈ " + fmtEur(top, lang))
          : ("Skala: max ≈ " + fmtEur(top, lang));

        const baseY = 240;
        const chartH = 200; // 40..240
        function bar(rect, val){
          const h = Math.max(0, Math.min(chartH, (val / top) * chartH));
          rect.setAttribute("height", String(h));
          rect.setAttribute("y", String(baseY - h));
        }
        bar(barSavings, savings);
        bar(barRevenue, revenue);
        bar(barOpex, opex);

        valSavings.textContent = fmtEur(savings, lang);
        valRevenue.textContent = fmtEur(revenue, lang);
        valOpex.textContent = fmtEur(opex, lang);

        // keep value texts above bars safely
        function placeValue(txtEl, val){
          const h = Math.max(0, Math.min(chartH, (val / top) * chartH));
          const y = Math.max(62, (baseY - h) - 10); // never collide with meta area
          txtEl.setAttribute("y", String(y));
        }
        placeValue(valSavings, savings);
        placeValue(valRevenue, revenue);
        placeValue(valOpex, opex);

        // save
        const data = loadData();
        data[MODULE] = data[MODULE] || {};
        data[MODULE].tool = {
          prodKwh: prodKwh.value,
          selfPct: selfPct.value,
          priceCt: priceCt.value,
          feedCt: feedCt.value,
          opexEur: opexEur.value,
          capexEur: capexEur.value
        };
        data[MODULE].checks = {
          qProdProof: qProdProof.value,
          qSelfLogic: qSelfLogic.value,
          qCapexList: qCapexList.value,
          qOpexReal: qOpexReal.value,
          qFeedDefined: qFeedDefined.value
        };
        saveData(data);
      }

      function restore(){
        const data = loadData();
        if(data[MODULE] && data[MODULE].tool){
          const t = data[MODULE].tool;
          if(t.prodKwh) prodKwh.value = t.prodKwh;
          if(t.selfPct) selfPct.value = t.selfPct;
          if(t.priceCt) priceCt.value = t.priceCt;
          if(t.feedCt) feedCt.value = t.feedCt;
          if(t.opexEur) opexEur.value = t.opexEur;
          if(t.capexEur) capexEur.value = t.capexEur;
        }
        if(data[MODULE] && data[MODULE].checks){
          const c = data[MODULE].checks;
          if(c.qProdProof) qProdProof.value = c.qProdProof;
          if(c.qSelfLogic) qSelfLogic.value = c.qSelfLogic;
          if(c.qCapexList) qCapexList.value = c.qCapexList;
          if(c.qOpexReal) qOpexReal.value = c.qOpexReal;
          if(c.qFeedDefined) qFeedDefined.value = c.qFeedDefined;
        }
      }

      // Nocache on index link
      (function(){
        const ts = Date.now();
        document.querySelectorAll('a[data-nocache="1"]').forEach(link => {
          const url = new URL(link.getAttribute("href"), location.href);
          url.searchParams.set("nocache", String(ts));
          link.setAttribute("href", url.pathname.split("/").pop() + "?" + url.searchParams.toString());
        });
      })();

      // Buttons
      printBtn.addEventListener("click", () => window.print());
      resetBtn.addEventListener("click", () => {
        const lang = langSel.value === "en" ? "en" : "de";
        const ok = confirm(lang==="en"
          ? "Clear all saved inputs for this course?"
          : "Alle gespeicherten Eingaben für diesen Kurs wirklich löschen?"
        );
        if(!ok) return;
        localStorage.removeItem(LS_KEY_DATA);
        location.reload();
      });

      // Language init
      const lang = loadLang();
      langSel.value = lang;
      applyI18n(lang);

      langSel.addEventListener("change", () => {
        const l = langSel.value === "en" ? "en" : "de";
        saveLang(l);
        applyI18n(l);
        recalc();
      });

      // Restore + listeners
      restore();
      [
        prodKwh, selfPct, priceCt, feedCt, opexEur, capexEur,
        qProdProof, qSelfLogic, qCapexList, qOpexReal, qFeedDefined
      ].forEach(el => el.addEventListener("change", recalc));

      recalc();
    })();
  </script>
</body>
</html>
