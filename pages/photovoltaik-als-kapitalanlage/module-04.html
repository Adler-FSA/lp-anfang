<!doctype html>
<!--
  FSA • Premium Kurs (Workbook)
  Kurs: Photovoltaik als Kapitalanlage
  Modul 04: Netzanschluss & regulatorische Abläufe

  GitHub-Pfad: lp-anfang/pages/photovoltaik-als-kapitalanlage/module-04.html
  Commit-Message: photovoltaik-als-kapitalanlage – Modul 04 Grafik-Fix: Pfeile sauber (keine Überlappung)
  Testlink (nocache): https://adler-fsa.github.io/lp-anfang/pages/photovoltaik-als-kapitalanlage/module-04.html?nocache=__TS__
-->
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modul 04 – Netzanschluss & Regulierung • Photovoltaik als Kapitalanlage</title>
  <meta name="description" content="Modul 04 (DE/EN): Netzanschluss & regulatorische Abläufe verstehen (Einspeiseantrag, Inbetriebnahme, Meldungen). Premium Workbook mit Auswahlfeldern, Fragenkatalog, Prozess-Wow-Grafik, Glossar, Print und LocalStorage." />
  <meta name="robots" content="index,follow" />

  <style>
    :root{
      --bg:#ffffff;
      --ink:#0f1114;
      --muted:#47505f;

      --line: rgba(15,17,20,.12);
      --line2: rgba(15,17,20,.18);

      --gold:#c8a63a;
      --gold2:#e0c466;

      --accent:#0b7d5c;
      --accent2:#1aa57a;

      --danger:#c52646;
      --dangerSoft: rgba(197,38,70,.12);

      --shadow: 0 14px 34px rgba(0,0,0,.10);
      --shadow2: 0 26px 70px rgba(0,0,0,.12);

      --radius:18px;
      --max: 1140px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 720px at 10% 8%, rgba(200,166,58,.18), transparent 58%),
        radial-gradient(1050px 720px at 88% 14%, rgba(11,125,92,.14), transparent 58%),
        radial-gradient(920px 640px at 52% 96%, rgba(197,38,70,.10), transparent 60%),
        linear-gradient(180deg, #ffffff 0%, #fbfbfc 45%, #ffffff 100%);
      overflow-x:hidden;
    }

    .spark{
      position:fixed;
      inset:-30vh -30vw auto -30vw;
      height:60vh;
      pointer-events:none;
      z-index:0;
      filter: blur(18px);
      opacity:.55;
      background:
        radial-gradient(closest-side at 18% 35%, rgba(200,166,58,.30), transparent 65%),
        radial-gradient(closest-side at 68% 28%, rgba(11,125,92,.24), transparent 65%),
        radial-gradient(closest-side at 48% 85%, rgba(197,38,70,.16), transparent 70%);
      transform: translate3d(0,0,0);
      animation: floaty 10s ease-in-out infinite;
    }
    @keyframes floaty{
      0%{ transform: translate3d(0px, 0px, 0px) scale(1); }
      50%{ transform: translate3d(12px, 10px, 0px) scale(1.02); }
      100%{ transform: translate3d(0px, 0px, 0px) scale(1); }
    }
    @media (prefers-reduced-motion: reduce){
      .spark{ animation:none; }
      .shine:before{ animation:none !important; }
    }

    .wrap{
      position:relative;
      z-index:1;
      max-width:var(--max);
      margin:0 auto;
      padding: 22px 18px 84px;
    }

    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-bottom:14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      padding: 10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.78));
      border-radius: 999px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .brand:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 180px at 12% 30%, rgba(200,166,58,.16), transparent 64%),
        radial-gradient(520px 180px at 84% 20%, rgba(11,125,92,.12), transparent 64%);
      pointer-events:none;
    }
    .brand > *{ position:relative; }
    .brand svg{ width:22px; height:22px; flex:0 0 auto; }
    .brand .t1{ font-weight:1000; letter-spacing:.2px; line-height:1.1; }
    .brand .t2{ font-size:12px; color:var(--muted); margin-top:2px; line-height:1.1; }

    .premiumTag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      margin-top:6px;
      font-size:11px;
      font-weight:1000;
      letter-spacing:.35px;
      padding: 4px 8px;
      border-radius: 999px;
      border:1px solid rgba(200,166,58,.35);
      background: rgba(200,166,58,.10);
      color: rgba(15,17,20,.86);
      width: fit-content;
    }
    .premiumTag .dot{
      width:8px; height:8px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 10px rgba(200,166,58,.35);
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .lang{
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.72));
      border-radius: 12px;
      box-shadow: var(--shadow);
    }
    .lang label{
      font-size:12px;
      color:var(--muted);
      font-weight:900;
    }
    .lang select{
      background: rgba(255,255,255,.92);
      border:1px solid rgba(15,17,20,.18);
      color: var(--ink);
      border-radius:10px;
      padding:8px 10px;
      font-weight:1000;
      outline:none;
    }

    .btn{
      appearance:none;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.76));
      color:var(--ink);
      padding:10px 12px;
      border-radius: 12px;
      font-weight:1000;
      cursor:pointer;
      box-shadow: var(--shadow);
      display:inline-flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      user-select:none;
      transition: transform .10s ease, border-color .14s ease, box-shadow .14s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(200,166,58,.45); box-shadow: var(--shadow2); }
    .btn:active{ transform: translateY(0px); }
    .btn .dot{
      width:10px; height:10px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 12px rgba(200,166,58,.45);
    }
    .btn.secondary .dot{
      background: linear-gradient(180deg, var(--accent2), var(--accent));
      box-shadow: 0 0 12px rgba(11,125,92,.38);
    }
    .btn.danger .dot{
      background: linear-gradient(180deg, rgba(197,38,70,.9), rgba(197,38,70,1));
      box-shadow: 0 0 12px rgba(197,38,70,.30);
    }

    .hero{
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 18px 18px 16px;
      margin-bottom: 14px;
      position:relative;
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.82));
    }
    .hero:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(840px 280px at 14% 16%, rgba(200,166,58,.20), transparent 65%),
        radial-gradient(740px 260px at 86% 18%, rgba(11,125,92,.14), transparent 65%),
        radial-gradient(720px 260px at 40% 98%, rgba(197,38,70,.10), transparent 70%);
      pointer-events:none;
    }
    .hero:after{
      content:"";
      position:absolute;
      inset:0;
      border-radius: var(--radius);
      pointer-events:none;
      background: linear-gradient(90deg, rgba(200,166,58,.22), transparent 18%, transparent 82%, rgba(200,166,58,.18));
      mix-blend-mode: multiply;
      opacity:.45;
    }
    .hero > *{ position:relative; }

    h1{
      margin:0 0 10px;
      font-size: 28px;
      letter-spacing:.2px;
      line-height:1.2;
    }
    .sub{
      margin:0;
      color: var(--muted);
      line-height:1.75;
      font-size:14.8px;
      max-width: 98ch;
    }

    .card{
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px 16px 14px;
      margin-top: 12px;
      position:relative;
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.84));
    }
    .card:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(620px 180px at 16% 8%, rgba(200,166,58,.12), transparent 65%),
        radial-gradient(620px 180px at 84% 12%, rgba(11,125,92,.10), transparent 65%);
      pointer-events:none;
      opacity:.75;
    }
    .card > *{ position:relative; }

    .card h2{
      margin:0 0 10px;
      font-size:16px;
      letter-spacing:.2px;
    }
    .card p{
      margin:0 0 10px;
      color: var(--muted);
      font-size:14.2px;
      line-height:1.8;
    }

    .notice{
      border:1px solid rgba(200,166,58,.38);
      background: rgba(200,166,58,.10);
      border-radius: 14px;
      padding: 12px 12px;
      color: rgba(15,17,20,.92);
      line-height:1.75;
      font-size:13.6px;
      margin-top:12px;
      position:relative;
      overflow:hidden;
    }
    .notice:before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(520px 160px at 18% 50%, rgba(200,166,58,.18), transparent 70%);
      pointer-events:none;
    }
    .notice > *{ position:relative; }
    .notice strong{ color: #7a5c00; }

    /* Glossar */
    .glossWrap{ margin-top:10px; }
    details.gloss{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
      padding: 10px 12px;
      margin: 10px 0;
      overflow:hidden;
    }
    details.gloss[open]{
      border-color: rgba(11,125,92,.22);
      box-shadow: 0 18px 40px rgba(0,0,0,.08);
    }
    details.gloss summary{
      cursor:pointer;
      list-style:none;
      font-weight:1000;
      color: rgba(15,17,20,.92);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      outline:none;
    }
    details.gloss summary::-webkit-details-marker{ display:none; }
    .glossBadge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:11px;
      font-weight:1000;
      padding: 4px 8px;
      border-radius:999px;
      border:1px solid rgba(200,166,58,.30);
      background: rgba(200,166,58,.10);
      color: rgba(15,17,20,.82);
      flex:0 0 auto;
    }
    .glossBadge .dot{
      width:8px; height:8px; border-radius:50%;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      box-shadow: 0 0 10px rgba(200,166,58,.28);
    }
    .glossBody{
      margin-top:10px;
      color: var(--muted);
      line-height:1.8;
      font-size: 13.8px;
    }

    /* Auswahl-Felder */
    .form{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:10px;
    }
    .field{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
      padding: 12px 12px;
      position:relative;
      overflow:hidden;
    }
    .field:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 160px at 10% 40%, rgba(200,166,58,.08), transparent 70%),
        radial-gradient(520px 160px at 90% 30%, rgba(11,125,92,.06), transparent 70%);
      pointer-events:none;
      opacity:.9;
    }
    .field > *{ position:relative; }

    .field .lbl{
      font-weight:1000;
      font-size:13px;
      margin-bottom:6px;
      color: rgba(15,17,20,.92);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .hint{
      font-weight:900;
      font-size:12px;
      color: rgba(71,80,95,.92);
      background: rgba(11,125,92,.08);
      border:1px solid rgba(11,125,92,.18);
      border-radius: 999px;
      padding: 4px 8px;
    }

    select{
      width:100%;
      border:1px solid rgba(15,17,20,.18);
      border-radius: 12px;
      padding: 10px 10px;
      font: inherit;
      background: rgba(255,255,255,.96);
      color: var(--ink);
      outline:none;
      font-weight:900;
    }
    .help{
      margin-top:8px;
      color: rgba(71,80,95,.92);
      font-size:12.8px;
      line-height:1.65;
    }

    /* Wow Prozess-Grafik */
    .viz{
      border:1px solid rgba(15,17,20,.12);
      border-radius: 16px;
      background: rgba(255,255,255,.72);
      box-shadow: 0 14px 34px rgba(0,0,0,.08);
      padding: 12px 12px;
      margin-top: 10px;
      overflow:hidden;
      position:relative;
    }
    .viz.shine:before{
      content:"";
      position:absolute;
      inset:-60% -40%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.55), transparent);
      transform: rotate(18deg);
      opacity:.28;
      animation: sheen 6.5s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes sheen{
      0%{ transform: translateX(-30%) rotate(18deg); opacity:.12; }
      50%{ transform: translateX(18%) rotate(18deg); opacity:.32; }
      100%{ transform: translateX(60%) rotate(18deg); opacity:.12; }
    }
    .vizTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .vizTop .title{
      font-weight:1100;
      color: rgba(15,17,20,.94);
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .vizTop .note{
      font-size:12px;
      font-weight:900;
      color: rgba(71,80,95,.92);
      background: rgba(200,166,58,.10);
      border:1px solid rgba(200,166,58,.22);
      border-radius: 999px;
      padding: 4px 8px;
      width: fit-content;
    }
    .vizFrame{
      border:1px solid rgba(15,17,20,.10);
      border-radius: 16px;
      background: rgba(255,255,255,.92);
      padding: 10px;
      overflow:hidden;
      box-shadow: inset 0 0 0 1px rgba(200,166,58,.06);
    }
    .viz svg{ width:100%; height:auto; display:block; }

    /* Checkboxes (für “Nachweise gesehen?”) */
    .checks{
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-top:10px;
    }
    .chk{
      display:flex;
      gap:10px;
      align-items:flex-start;
      border:1px solid rgba(15,17,20,.12);
      background: rgba(255,255,255,.72);
      border-radius: 14px;
      padding: 10px 12px;
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
    }
    .chk input{
      width:18px; height:18px;
      margin-top:2px;
      accent-color: var(--accent);
      flex:0 0 auto;
    }
    .chk .t{
      font-weight:1000;
      color: rgba(15,17,20,.92);
      line-height:1.4;
    }
    .chk .d{
      margin-top:2px;
      color: rgba(71,80,95,.92);
      font-size:12.8px;
      line-height:1.6;
    }

    .footer{
      margin-top: 16px;
      color: rgba(71,80,95,.85);
      font-size: 12px;
      line-height:1.6;
      text-align:center;
    }

    @media print{
      body{ background:#fff !important; color:#000 !important; }
      .spark, .topbar, .actions, .lang, .btn, .footer{ display:none !important; }
      .wrap{ max-width: 820px; padding: 0; }
      .hero, .card, .field, .viz, details.gloss, .chk{
        box-shadow:none !important;
        background:#fff !important;
        border:1px solid #bbb !important;
        color:#000 !important;
      }
      .sub, .card p, .glossBody, .help, .chk .d{ color:#111 !important; }
      .notice{ border:1px solid #999 !important; background:#f7f2df !important; color:#000 !important; }
      details.gloss{ break-inside: avoid; }
      .viz.shine:before{ display:none !important; }
      .hint{ border:1px solid #bbb !important; background:#f2f2f2 !important; color:#000 !important; }
    }
  </style>
</head>

<body>
  <div class="spark" aria-hidden="true"></div>

  <div class="wrap">
    <div class="topbar">
      <div class="brand" aria-label="Kurs">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <defs>
            <linearGradient id="gSunM4" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#c8a63a"/>
              <stop offset="1" stop-color="#e0c466"/>
            </linearGradient>
          </defs>
          <circle cx="12" cy="12" r="5.2" fill="url(#gSunM4)"></circle>
          <g fill="none" stroke="rgba(15,17,20,.75)" stroke-width="1.2" stroke-linecap="round">
            <path d="M12 2.2v2.2M12 19.6v2.2M2.2 12h2.2M19.6 12h2.2"/>
            <path d="M4.6 4.6l1.55 1.55M17.85 17.85l1.55 1.55M19.4 4.6l-1.55 1.55M6.15 17.85L4.6 19.4"/>
          </g>
        </svg>
        <div>
          <div class="t1" data-i18n="brand_title">Premium Kurs</div>
          <div class="t2" data-i18n="brand_sub">Photovoltaik als Kapitalanlage</div>
          <div class="premiumTag" aria-hidden="true">
            <span class="dot"></span>
            <span data-i18n="premium_tag">Modul 04 • Hauptkurs</span>
          </div>
        </div>
      </div>

      <div class="actions">
        <a class="btn" id="toIndex" href="index.html" data-nocache="1" title="Index">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_index">Index</span>
        </a>

        <div class="lang" title="Sprache / Language">
          <label for="langSel" data-i18n="lang_label">Sprache</label>
          <select id="langSel" aria-label="Sprache wählen">
            <option value="de">DE</option>
            <option value="en">EN</option>
          </select>
        </div>

        <button class="btn secondary" id="printBtn" type="button" title="Drucken / Print">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_print">Drucken</span>
        </button>

        <button class="btn danger" id="resetBtn" type="button" title="Projektakte leeren">
          <span class="dot" aria-hidden="true"></span>
          <span data-i18n="btn_reset">Projektakte leeren</span>
        </button>
      </div>
    </div>

    <div class="hero">
      <h1 data-i18n="h1">Modul 04 – Netzanschluss & regulatorische Abläufe</h1>
      <p class="sub" data-i18n="sub">
        In diesem Modul lernst du die Abläufe, die vor und nach dem Bau wichtig sind: Wer spricht mit dem Netzbetreiber, warum ein Einspeiseantrag existiert,
        wann eine Anlage als „in Betrieb“ gilt und welche Meldungen typischerweise dazugehören.
        Ziel: Du kannst im Gespräch sauber nachfragen – ohne Technikstudium.
      </p>
    </div>

    <div class="card">
      <h2 data-i18n="sec1_title">1) Warum dieser Prozess so entscheidend ist</h2>
      <p data-i18n="sec1_p1">
        Viele Betrugs- und Chaos-Fälle entstehen nicht, weil Photovoltaik „schlecht“ ist – sondern weil Abläufe unsauber erklärt werden.
        Wer den Netz- und Prozess-Teil nicht versteht, merkt oft zu spät, dass Versprechen nicht zu den realen Schritten passen.
      </p>
      <p data-i18n="sec1_p2">
        Für dich zählt: Wurde der Ablauf klar erklärt? Wer macht was? Welche Nachweise bekommst du? Und was muss vor Baubeginn geklärt sein?
      </p>

      <div class="notice">
        <strong data-i18n="notice_title">Wichtiger Hinweis:</strong>
        <span data-i18n="notice_text">Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieses Modul ist Bildung: Prozessverständnis, Fragenkatalog, Nachweise.</span>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec2_title">2) Der Prozess als Überblick (Wow-Grafik)</h2>
      <p data-i18n="sec2_p1">
        Diese Grafik ist eine Orientierung. Sie zeigt typische Stationen. Je nach Projekt (Eigenanlage, Pacht, Beteiligung) können einzelne Punkte anders heißen –
        aber seriöse Anbieter können dir den Ablauf in dieser Logik erklären.
      </p>

      <div class="viz shine">
        <div class="vizTop">
          <div class="title" data-i18n="viz_title">Ablauf: Von Anfrage bis Abrechnung (vereinfacht)</div>
          <div class="note" data-i18n="viz_note">Illustration – keine Rechtsauskunft</div>
        </div>

        <div class="vizFrame">
          <!-- FIX: Pfeile + Pfeilspitzen mit Luft zur Box-Kante (keine Überlappung) -->
          <svg viewBox="0 0 1200 460" role="img" aria-label="Prozess Grafik">
            <defs>
              <linearGradient id="gGold" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="rgba(200,166,58,.30)"/>
                <stop offset="1" stop-color="rgba(200,166,58,.08)"/>
              </linearGradient>
              <linearGradient id="gAcc" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="rgba(11,125,92,.22)"/>
                <stop offset="1" stop-color="rgba(11,125,92,.06)"/>
              </linearGradient>
              <linearGradient id="gDng" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="rgba(197,38,70,.18)"/>
                <stop offset="1" stop-color="rgba(197,38,70,.06)"/>
              </linearGradient>
              <filter id="ds" x="-20%" y="-20%" width="140%" height="140%">
                <feDropShadow dx="0" dy="12" stdDeviation="10" flood-color="rgba(0,0,0,.10)"/>
              </filter>
            </defs>

            <rect x="20" y="20" width="1160" height="420" rx="20" fill="rgba(255,255,255,.96)" stroke="rgba(15,17,20,.12)"/>

            <!-- Nodes -->
            <g filter="url(#ds)">
              <rect x="70"  y="90" width="260" height="96" rx="16" fill="url(#gGold)" stroke="rgba(200,166,58,.30)"/>
              <rect x="370" y="90" width="260" height="96" rx="16" fill="rgba(15,17,20,.05)" stroke="rgba(15,17,20,.14)"/>
              <rect x="670" y="90" width="260" height="96" rx="16" fill="url(#gAcc)" stroke="rgba(11,125,92,.26)"/>

              <rect x="70"  y="230" width="260" height="96" rx="16" fill="rgba(15,17,20,.05)" stroke="rgba(15,17,20,.14)"/>
              <rect x="370" y="230" width="260" height="96" rx="16" fill="url(#gGold)" stroke="rgba(200,166,58,.30)"/>
              <rect x="670" y="230" width="260" height="96" rx="16" fill="rgba(15,17,20,.05)" stroke="rgba(15,17,20,.14)"/>
              <rect x="970" y="160" width="160" height="96" rx="16" fill="url(#gDng)" stroke="rgba(197,38,70,.22)"/>
            </g>

            <!-- Arrows (mit Abstand) -->
            <g stroke="rgba(15,17,20,.42)" stroke-width="4" stroke-linecap="round" fill="none">
              <!-- oben: 1->2, 2->3, 3->7 -->
              <path d="M330 138H350"/>
              <path d="M630 138H650"/>
              <path d="M930 138H950"/>

              <!-- runter: 1->4, 2->5, 3->6 -->
              <path d="M200 186V206"/>
              <path d="M500 186V206"/>
              <path d="M800 186V206"/>
            </g>
            <g fill="rgba(15,17,20,.42)">
              <!-- Pfeilspitzen rechts -->
              <path d="M350 138l-18-10v20z"/>
              <path d="M650 138l-18-10v20z"/>
              <path d="M950 138l-18-10v20z"/>

              <!-- Pfeilspitzen unten -->
              <path d="M200 206l-10-18h20z"/>
              <path d="M500 206l-10-18h20z"/>
              <path d="M800 206l-10-18h20z"/>
            </g>

            <!-- Text -->
            <g font-family="system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif">
              <text x="92" y="122" font-size="16" font-weight="900" fill="rgba(15,17,20,.92)">1) Anfrage / Klärung</text>
              <text x="92" y="146" font-size="13.2" font-weight="700" fill="rgba(71,80,95,.95)">Wer ist Netzbetreiber? Was ist möglich?</text>

              <text x="392" y="122" font-size="16" font-weight="900" fill="rgba(15,17,20,.92)">2) Einspeiseantrag</text>
              <text x="392" y="146" font-size="13.2" font-weight="700" fill="rgba(71,80,95,.95)">Voraussetzung vor Baubeginn (typisch)</text>

              <text x="692" y="122" font-size="16" font-weight="900" fill="rgba(15,17,20,.92)">3) Zusage / Vorgaben</text>
              <text x="692" y="146" font-size="13.2" font-weight="700" fill="rgba(71,80,95,.95)">Anschlussbedingungen & Technikvorgaben</text>

              <text x="92" y="262" font-size="16" font-weight="900" fill="rgba(15,17,20,.92)">4) Bau / Installation</text>
              <text x="92" y="286" font-size="13.2" font-weight="700" fill="rgba(71,80,95,.95)">Montage, Elektroarbeiten, Dokumentation</text>

              <text x="392" y="262" font-size="16" font-weight="900" fill="rgba(15,17,20,.92)">5) Inbetriebnahme</text>
              <text x="392" y="286" font-size="13.2" font-weight="700" fill="rgba(71,80,95,.95)">Abnahme, Zähler/Protokolle, Startdatum</text>

              <text x="692" y="262" font-size="16" font-weight="900" fill="rgba(15,17,20,.92)">6) Meldungen</text>
              <text x="692" y="286" font-size="13.2" font-weight="700" fill="rgba(71,80,95,.95)">Register/Betreiberangaben, Abrechnung setup</text>

              <text x="982" y="192" font-size="16" font-weight="900" fill="rgba(15,17,20,.92)">7) Geldfluss</text>
              <text x="982" y="216" font-size="12.2" font-weight="700" fill="rgba(71,80,95,.95)">Vergütung/Markt/Ersparnis</text>

              <text x="70" y="385" font-size="13.8" font-weight="900" fill="rgba(15,17,20,.92)">Merksatz:</text>
              <text x="160" y="385" font-size="13.8" font-weight="700" fill="rgba(71,80,95,.95)">
                Wenn jemand Rendite verspricht, aber den Ablauf nicht sauber erklären kann, ist das ein Warnsignal.
              </text>
            </g>
          </svg>
        </div>
      </div>

      <div class="glossWrap">
        <details class="gloss">
          <summary>
            <span data-i18n="g1_t">Begriff: Einspeiseantrag</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g1_b">
            Der Einspeiseantrag ist (vereinfacht) die formale Anmeldung beim Netzbetreiber: „Hier soll eine Anlage ans Netz.“
            Ohne diesen Prozess kann ein Projekt später an Vorgaben, Zählerthemen oder fehlenden Bestätigungen scheitern.
            Seriöse Anbieter sagen klar, wer den Antrag stellt, wann er gestellt wird und welche Rückmeldung erwartet wird.
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g2_t">Begriff: Inbetriebnahme</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g2_b">
            „Inbetriebnahme“ ist der Moment, ab dem die Anlage als gestartet gilt (praktisch/technisch dokumentiert).
            Für Abrechnung und Nachweise ist oft entscheidend: welches Datum dokumentiert ist und welche Protokolle dazu existieren.
          </div>
        </details>

        <details class="gloss">
          <summary>
            <span data-i18n="g3_t">Begriff: Netzbetreiber</span>
            <span class="glossBadge"><span class="dot" aria-hidden="true"></span><span data-i18n="g_badge">Glossar</span></span>
          </summary>
          <div class="glossBody" data-i18n="g3_b">
            Der Netzbetreiber betreibt das lokale Stromnetz. Er definiert technische Vorgaben (z. B. Zähler, Anmeldung, Schutztechnik),
            nimmt Unterlagen entgegen und ist typischer Ansprechpartner für Netzanschluss und Einspeisung.
          </div>
        </details>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec3_title">3) Projekt-Check: Wer macht was? (als Auswahlfelder)</h2>
      <p data-i18n="sec3_p1">
        Trage hier ein, was dir der Anbieter erklärt hat. Wenn etwas „unklar“ bleibt, ist das ein echtes Gesprächs-Thema.
        Ziel: Du gehst nicht mit Bauchgefühl, sondern mit klaren Fragen in den Termin.
      </p>

      <div class="form" id="formA">
        <div class="field">
          <div class="lbl">
            <span data-i18n="f1_lbl">Wer stellt den Einspeiseantrag?</span>
            <span class="hint" data-i18n="hint_keep">im Gespräch klären</span>
          </div>
          <select data-save="m04_who_apply">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="anbieter" data-i18n="f1_o1">Der Anbieter / Projektpartner</option>
            <option value="elektro" data-i18n="f1_o2">Der Elektrofachbetrieb</option>
            <option value="kunde" data-i18n="f1_o3">Ich selbst / Betreiber</option>
            <option value="netzbetreiber" data-i18n="f1_o4">Wird vom Netzbetreiber initiiert (selten so erklärt)</option>
            <option value="unklar" data-i18n="opt_unclear">Unklar / nicht erklärt</option>
          </select>
          <div class="help" data-i18n="f1_help">
            Wichtig ist weniger „wer“, sondern: Gibt es einen klaren Ablauf + Nachweis, dass es passiert (Bestätigung, Ticket, Schreiben)?
          </div>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f2_lbl">Wann soll der Einspeiseantrag gestellt werden?</span>
            <span class="hint" data-i18n="hint_before_build">vor Baubeginn</span>
          </div>
          <select data-save="m04_when_apply">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="vor_angebot" data-i18n="f2_o1">Schon vor Vertragsabschluss (zur Machbarkeits-Klärung)</option>
            <option value="nach_vertrag_vor_bau" data-i18n="f2_o2">Nach Vertrag, aber klar vor Baubeginn</option>
            <option value="nach_bau" data-i18n="f2_o3">Erst nach Bau (Warnsignal, wenn das so pauschal gesagt wird)</option>
            <option value="unklar" data-i18n="opt_unclear">Unklar / nicht erklärt</option>
          </select>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f3_lbl">Welche Rückmeldung vom Netzbetreiber wurde genannt?</span>
            <span class="hint" data-i18n="hint_proof">Nachweis verlangen</span>
          </div>
          <select data-save="m04_grid_reply">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="zusage" data-i18n="f3_o1">Anschluss-/Zusage oder technische Vorgaben</option>
            <option value="ticket" data-i18n="f3_o2">Ticket / Vorgangsnummer / Portal-Bestätigung</option>
            <option value="frist" data-i18n="f3_o3">Es wurde nur „Dauer/Frist“ genannt</option>
            <option value="nichts" data-i18n="f3_o4">Es wurde keine konkrete Rückmeldung genannt</option>
            <option value="unklar" data-i18n="opt_unclear">Unklar / nicht erklärt</option>
          </select>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f4_lbl">Was wurde zur Inbetriebnahme erklärt?</span>
            <span class="hint" data-i18n="hint_date">Datum + Protokoll</span>
          </div>
          <select data-save="m04_commissioning">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="abnahme" data-i18n="f4_o1">Abnahme/Protokoll + Zähler-Thema wurde klar erklärt</option>
            <option value="nur_start" data-i18n="f4_o2">„Wenn es läuft, ist es in Betrieb“ (zu ungenau)</option>
            <option value="dienstleister" data-i18n="f4_o3">Ein Dienstleister übernimmt Inbetriebnahme + Dokumente</option>
            <option value="unklar" data-i18n="opt_unclear">Unklar / nicht erklärt</option>
          </select>
        </div>

        <div class="field">
          <div class="lbl">
            <span data-i18n="f5_lbl">Welche Meldungen/Registrierungen wurden erwähnt?</span>
            <span class="hint" data-i18n="hint_list">Checkliste</span>
          </div>
          <select data-save="m04_regs">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="voll" data-i18n="f5_o1">Es gibt eine klare Liste + wer sie erledigt</option>
            <option value="teil" data-i18n="f5_o2">Es wurde nur „muss man melden“ gesagt</option>
            <option value="keine" data-i18n="f5_o3">Es wurde gar nichts erwähnt</option>
            <option value="unklar" data-i18n="opt_unclear">Unklar / nicht erklärt</option>
          </select>
          <div class="help" data-i18n="f5_help">
            Du brauchst keine Paragrafen. Du brauchst Verantwortlichkeiten + Nachweise, dass es erledigt wurde.
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec4_title">4) Nachweise & Dokumente (Haken setzen)</h2>
      <p data-i18n="sec4_p1">
        Hier setzt du nur Haken, wenn du es wirklich gesehen hast oder sicher bekommst. „Kommt später“ ist nicht automatisch schlecht –
        aber es muss planbar und nachvollziehbar sein.
      </p>

      <div class="checks" id="checks">
        <label class="chk">
          <input type="checkbox" data-save-check="m04_doc_grid_contact" />
          <span>
            <div class="t" data-i18n="c1_t">Netzbetreiber ist eindeutig benannt</div>
            <div class="d" data-i18n="c1_d">Name/Region/Portal oder Kontaktdaten wurden genannt.</div>
          </span>
        </label>

        <label class="chk">
          <input type="checkbox" data-save-check="m04_doc_apply_proof" />
          <span>
            <div class="t" data-i18n="c2_t">Es gibt einen Nachweis zum Einspeiseantrag</div>
            <div class="d" data-i18n="c2_d">Ticket/Bestätigung/Schreiben oder klarer Ablauf, wie du ihn bekommst.</div>
          </span>
        </label>

        <label class="chk">
          <input type="checkbox" data-save-check="m04_doc_commissioning" />
          <span>
            <div class="t" data-i18n="c3_t">Inbetriebnahme-Protokoll ist vorgesehen</div>
            <div class="d" data-i18n="c3_d">Dokument/Abnahme/Protokoll + Verantwortlicher ist klar.</div>
          </span>
        </label>

        <label class="chk">
          <input type="checkbox" data-save-check="m04_doc_meter" />
          <span>
            <div class="t" data-i18n="c4_t">Zähler-Thema wurde verständlich erklärt</div>
            <div class="d" data-i18n="c4_d">Wer veranlasst was? Welche Art Zähler? Was passiert wann?</div>
          </span>
        </label>

        <label class="chk">
          <input type="checkbox" data-save-check="m04_doc_regs_list" />
          <span>
            <div class="t" data-i18n="c5_t">Liste der Meldungen/Registrierungen ist vorhanden</div>
            <div class="d" data-i18n="c5_d">Nicht nur „muss man machen“, sondern: wer, wann, wie, Nachweis.</div>
          </span>
        </label>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="sec5_title">5) Fragenkatalog für den Profi-Termin (nur Auswahl)</h2>
      <p data-i18n="sec5_p1">
        Diese Fragen sind bewusst „einfach“. Du sollst keine Fachbegriffe beherrschen – du sollst Klarheit bekommen.
        Wähle pro Frage aus, wie gut es beantwortet wurde.
      </p>

      <div class="form" id="formB">
        <div class="field">
          <div class="lbl"><span data-i18n="q1_lbl">Kannst du mir den Ablauf in 6–7 Schritten erklären (wer macht was)?</span><span class="hint" data-i18n="hint_answer">Antwortqualität</span></div>
          <select data-save="m04_q1">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="klar" data-i18n="ans_clear">Klar & verständlich</option>
            <option value="teil" data-i18n="ans_partial">Teilweise / Lücken</option>
            <option value="ausweich" data-i18n="ans_dodge">Ausweichend / unklar</option>
          </select>
        </div>

        <div class="field">
          <div class="lbl"><span data-i18n="q2_lbl">Wer stellt den Einspeiseantrag – und welchen Nachweis bekomme ich?</span><span class="hint" data-i18n="hint_proof">Nachweis</span></div>
          <select data-save="m04_q2">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="klar" data-i18n="ans_clear">Klar & verständlich</option>
            <option value="teil" data-i18n="ans_partial">Teilweise / Lücken</option>
            <option value="ausweich" data-i18n="ans_dodge">Ausweichend / unklar</option>
          </select>
        </div>

        <div class="field">
          <div class="lbl"><span data-i18n="q3_lbl">Was kann den Prozess verzögern (realistische Risiken)?</span><span class="hint" data-i18n="hint_real">realistisch</span></div>
          <select data-save="m04_q3">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="klar" data-i18n="ans_clear">Klar & verständlich</option>
            <option value="teil" data-i18n="ans_partial">Teilweise / Lücken</option>
            <option value="ausweich" data-i18n="ans_dodge">Ausweichend / unklar</option>
          </select>
        </div>

        <div class="field">
          <div class="lbl"><span data-i18n="q4_lbl">Welche Dokumente bekomme ich am Ende (Liste)?</span><span class="hint" data-i18n="hint_list">Liste</span></div>
          <select data-save="m04_q4">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="klar" data-i18n="ans_clear">Klar & verständlich</option>
            <option value="teil" data-i18n="ans_partial">Teilweise / Lücken</option>
            <option value="ausweich" data-i18n="ans_dodge">Ausweichend / unklar</option>
          </select>
        </div>

        <div class="field">
          <div class="lbl"><span data-i18n="q5_lbl">Was bedeutet „Inbetriebnahme“ in diesem Projekt – und welches Datum zählt?</span><span class="hint" data-i18n="hint_date">Datum</span></div>
          <select data-save="m04_q5">
            <option value="" data-i18n="opt_choose">Bitte wählen…</option>
            <option value="klar" data-i18n="ans_clear">Klar & verständlich</option>
            <option value="teil" data-i18n="ans_partial">Teilweise / Lücken</option>
            <option value="ausweich" data-i18n="ans_dodge">Ausweichend / unklar</option>
          </select>
        </div>
      </div>

      <div class="notice">
        <strong data-i18n="mini_rule_t">Mini-Regel:</strong>
        <span data-i18n="mini_rule_b">Wenn mehrere Antworten „ausweichend/unklar“ sind, ist das ein Signal: erst klären, dann entscheiden.</span>
      </div>
    </div>

    <div class="footer" data-i18n="footer">
      Premium Workbook – Modul 04. Eingaben werden lokal gespeichert und sind druckbar.
    </div>
  </div>

  <script>
    (function(){
      const LS_KEY_LANG = "fsa_pvka_lang";
      const LS_KEY_DATA = "fsa_pvka_project";

      const langSel  = document.getElementById("langSel");
      const printBtn = document.getElementById("printBtn");
      const resetBtn = document.getElementById("resetBtn");

      const i18n = {
        de: {
          brand_title: "Premium Kurs",
          brand_sub: "Photovoltaik als Kapitalanlage",
          premium_tag: "Modul 04 • Hauptkurs",
          btn_index: "Index",
          lang_label: "Sprache",
          btn_print: "Drucken",
          btn_reset: "Projektakte leeren",

          h1: "Modul 04 – Netzanschluss & regulatorische Abläufe",
          sub: "In diesem Modul lernst du die Abläufe, die vor und nach dem Bau wichtig sind: Wer spricht mit dem Netzbetreiber, warum ein Einspeiseantrag existiert, wann eine Anlage als „in Betrieb“ gilt und welche Meldungen typischerweise dazugehören. Ziel: Du kannst im Gespräch sauber nachfragen – ohne Technikstudium.",

          sec1_title: "1) Warum dieser Prozess so entscheidend ist",
          sec1_p1: "Viele Betrugs- und Chaos-Fälle entstehen nicht, weil Photovoltaik „schlecht“ ist – sondern weil Abläufe unsauber erklärt werden. Wer den Netz- und Prozess-Teil nicht versteht, merkt oft zu spät, dass Versprechen nicht zu den realen Schritten passen.",
          sec1_p2: "Für dich zählt: Wurde der Ablauf klar erklärt? Wer macht was? Welche Nachweise bekommst du? Und was muss vor Baubeginn geklärt sein?",
          notice_title: "Wichtiger Hinweis:",
          notice_text: "Keine Anlageberatung, keine Steuer- oder Rechtsberatung. Dieses Modul ist Bildung: Prozessverständnis, Fragenkatalog, Nachweise.",

          sec2_title: "2) Der Prozess als Überblick (Wow-Grafik)",
          sec2_p1: "Diese Grafik ist eine Orientierung. Sie zeigt typische Stationen. Je nach Projekt (Eigenanlage, Pacht, Beteiligung) können einzelne Punkte anders heißen – aber seriöse Anbieter können dir den Ablauf in dieser Logik erklären.",
          viz_title: "Ablauf: Von Anfrage bis Abrechnung (vereinfacht)",
          viz_note: "Illustration – keine Rechtsauskunft",

          g_badge: "Glossar",
          g1_t: "Begriff: Einspeiseantrag",
          g1_b: "Der Einspeiseantrag ist (vereinfacht) die formale Anmeldung beim Netzbetreiber: „Hier soll eine Anlage ans Netz.“ Ohne diesen Prozess kann ein Projekt später an Vorgaben, Zählerthemen oder fehlenden Bestätigungen scheitern. Seriöse Anbieter sagen klar, wer den Antrag stellt, wann er gestellt wird und welche Rückmeldung erwartet wird.",
          g2_t: "Begriff: Inbetriebnahme",
          g2_b: "„Inbetriebnahme“ ist der Moment, ab dem die Anlage als gestartet gilt (praktisch/technisch dokumentiert). Für Abrechnung und Nachweise ist oft entscheidend: welches Datum dokumentiert ist und welche Protokolle dazu existieren.",
          g3_t: "Begriff: Netzbetreiber",
          g3_b: "Der Netzbetreiber betreibt das lokale Stromnetz. Er definiert technische Vorgaben (z. B. Zähler, Anmeldung, Schutztechnik), nimmt Unterlagen entgegen und ist typischer Ansprechpartner für Netzanschluss und Einspeisung.",

          sec3_title: "3) Projekt-Check: Wer macht was? (als Auswahlfelder)",
          sec3_p1: "Trage hier ein, was dir der Anbieter erklärt hat. Wenn etwas „unklar“ bleibt, ist das ein echtes Gesprächs-Thema. Ziel: Du gehst nicht mit Bauchgefühl, sondern mit klaren Fragen in den Termin.",

          hint_keep: "im Gespräch klären",
          hint_before_build: "vor Baubeginn",
          hint_proof: "Nachweis verlangen",
          hint_date: "Datum + Protokoll",
          hint_list: "Checkliste",

          opt_choose: "Bitte wählen…",
          opt_unclear: "Unklar / nicht erklärt",

          f1_lbl: "Wer stellt den Einspeiseantrag?",
          f1_o1: "Der Anbieter / Projektpartner",
          f1_o2: "Der Elektrofachbetrieb",
          f1_o3: "Ich selbst / Betreiber",
          f1_o4: "Wird vom Netzbetreiber initiiert (selten so erklärt)",
          f1_help: "Wichtig ist weniger „wer“, sondern: Gibt es einen klaren Ablauf + Nachweis, dass es passiert (Bestätigung, Ticket, Schreiben)?",

          f2_lbl: "Wann soll der Einspeiseantrag gestellt werden?",
          f2_o1: "Schon vor Vertragsabschluss (zur Machbarkeits-Klärung)",
          f2_o2: "Nach Vertrag, aber klar vor Baubeginn",
          f2_o3: "Erst nach Bau (Warnsignal, wenn das so pauschal gesagt wird)",

          f3_lbl: "Welche Rückmeldung vom Netzbetreiber wurde genannt?",
          f3_o1: "Anschluss-/Zusage oder technische Vorgaben",
          f3_o2: "Ticket / Vorgangsnummer / Portal-Bestätigung",
          f3_o3: "Es wurde nur „Dauer/Frist“ genannt",
          f3_o4: "Es wurde keine konkrete Rückmeldung genannt",

          f4_lbl: "Was wurde zur Inbetriebnahme erklärt?",
          f4_o1: "Abnahme/Protokoll + Zähler-Thema wurde klar erklärt",
          f4_o2: "„Wenn es läuft, ist es in Betrieb“ (zu ungenau)",
          f4_o3: "Ein Dienstleister übernimmt Inbetriebnahme + Dokumente",

          f5_lbl: "Welche Meldungen/Registrierungen wurden erwähnt?",
          f5_o1: "Es gibt eine klare Liste + wer sie erledigt",
          f5_o2: "Es wurde nur „muss man melden“ gesagt",
          f5_o3: "Es wurde gar nichts erwähnt",
          f5_help: "Du brauchst keine Paragrafen. Du brauchst Verantwortlichkeiten + Nachweise, dass es erledigt wurde.",

          sec4_title: "4) Nachweise & Dokumente (Haken setzen)",
          sec4_p1: "Hier setzt du nur Haken, wenn du es wirklich gesehen hast oder sicher bekommst. „Kommt später“ ist nicht automatisch schlecht – aber es muss planbar und nachvollziehbar sein.",
          c1_t: "Netzbetreiber ist eindeutig benannt",
          c1_d: "Name/Region/Portal oder Kontaktdaten wurden genannt.",
          c2_t: "Es gibt einen Nachweis zum Einspeiseantrag",
          c2_d: "Ticket/Bestätigung/Schreiben oder klarer Ablauf, wie du ihn bekommst.",
          c3_t: "Inbetriebnahme-Protokoll ist vorgesehen",
          c3_d: "Dokument/Abnahme/Protokoll + Verantwortlicher ist klar.",
          c4_t: "Zähler-Thema wurde verständlich erklärt",
          c4_d: "Wer veranlasst was? Welche Art Zähler? Was passiert wann?",
          c5_t: "Liste der Meldungen/Registrierungen ist vorhanden",
          c5_d: "Nicht nur „muss man machen“, sondern: wer, wann, wie, Nachweis.",

          sec5_title: "5) Fragenkatalog für den Profi-Termin (nur Auswahl)",
          sec5_p1: "Diese Fragen sind bewusst „einfach“. Du sollst keine Fachbegriffe beherrschen – du sollst Klarheit bekommen. Wähle pro Frage aus, wie gut es beantwortet wurde.",
          hint_answer: "Antwortqualität",
          hint_real: "realistisch",

          q1_lbl: "Kannst du mir den Ablauf in 6–7 Schritten erklären (wer macht was)?",
          q2_lbl: "Wer stellt den Einspeiseantrag – und welchen Nachweis bekomme ich?",
          q3_lbl: "Was kann den Prozess verzögern (realistische Risiken)?",
          q4_lbl: "Welche Dokumente bekomme ich am Ende (Liste)?",
          q5_lbl: "Was bedeutet „Inbetriebnahme“ in diesem Projekt – und welches Datum zählt?",

          ans_clear: "Klar & verständlich",
          ans_partial: "Teilweise / Lücken",
          ans_dodge: "Ausweichend / unklar",

          mini_rule_t: "Mini-Regel:",
          mini_rule_b: "Wenn mehrere Antworten „ausweichend/unklar“ sind, ist das ein Signal: erst klären, dann entscheiden.",

          footer: "Premium Workbook – Modul 04. Eingaben werden lokal gespeichert und sind druckbar."
        },

        en: {
          brand_title: "Premium course",
          brand_sub: "Photovoltaics as a capital investment",
          premium_tag: "Module 04 • Main course",
          btn_index: "Index",
          lang_label: "Language",
          btn_print: "Print",
          btn_reset: "Clear project file",

          h1: "Module 04 – Grid connection & regulatory process",
          sub: "This module gives you the practical process view: who talks to the grid operator, why a feed-in application exists, when a system is considered ‘commissioned’, and which registrations typically belong to it. Goal: you can ask the right questions without being a technical expert.",

          sec1_title: "1) Why this process matters",
          sec1_p1: "Many fraud and chaos cases happen not because PV is ‘bad’, but because the process is explained poorly. If the grid/process part is vague, promises often don’t match the real steps.",
          sec1_p2: "What matters for you: Was the process explained clearly? Who does what? Which proofs do you get? And what must be clarified before construction?",
          notice_title: "Important notice:",
          notice_text: "No investment advice, no tax or legal advice. This module is education: process understanding, question list, evidence.",

          sec2_title: "2) The process at a glance (wow graphic)",
          sec2_p1: "This graphic is an orientation. Steps may vary by model (own roof, lease, participation), but serious providers can explain their project in this logic.",
          viz_title: "Flow: from request to cashflow (simplified)",
          viz_note: "Illustration – not legal advice",

          g_badge: "Glossary",
          g1_t: "Term: Feed-in application",
          g1_b: "The feed-in application is (simplified) the formal notice to the grid operator: ‘a system will connect here’. Without a clean process, projects can later fail due to requirements, metering, or missing confirmations. Serious providers explain who submits it, when, and what confirmation you receive.",
          g2_t: "Term: Commissioning",
          g2_b: "‘Commissioning’ is the moment the system is considered started (practically/technically documented). For billing and proofs, the documented date and protocols are often key.",
          g3_t: "Term: Grid operator",
          g3_b: "The grid operator runs the local grid. They define technical requirements (metering, registration, protection), receive documents, and are the typical counterpart for connection/feed-in topics.",

          sec3_title: "3) Project check: who does what? (selection fields)",
          sec3_p1: "Capture what the provider explained. If something remains ‘unclear’, that’s a real meeting topic. Goal: clear questions, not gut feeling.",

          hint_keep: "clarify in meeting",
          hint_before_build: "before build",
          hint_proof: "ask for proof",
          hint_date: "date + protocol",
          hint_list: "checklist",

          opt_choose: "Please choose…",
          opt_unclear: "Unclear / not explained",

          f1_lbl: "Who submits the feed-in application?",
          f1_o1: "Provider / project partner",
          f1_o2: "Electrical contractor",
          f1_o3: "Me / operator",
          f1_o4: "Initiated by grid operator (rarely described like this)",
          f1_help: "Less important is ‘who’—more important: a clear flow + proof it happened (confirmation, ticket, letter).",

          f2_lbl: "When should the feed-in application be submitted?",
          f2_o1: "Before signing (feasibility clarification)",
          f2_o2: "After contract, clearly before construction",
          f2_o3: "Only after construction (warning signal if stated broadly)",

          f3_lbl: "What grid-operator feedback was mentioned?",
          f3_o1: "Connection approval / technical requirements",
          f3_o2: "Ticket / case number / portal confirmation",
          f3_o3: "Only ‘duration/timeframe’ was mentioned",
          f3_o4: "No concrete feedback mentioned",

          f4_lbl: "What was explained about commissioning?",
          f4_o1: "Protocol/acceptance + metering was explained clearly",
          f4_o2: "‘If it runs, it’s commissioned’ (too vague)",
          f4_o3: "A service provider handles commissioning + documents",

          f5_lbl: "Which registrations were mentioned?",
          f5_o1: "A clear list exists + who does it",
          f5_o2: "Only ‘you must register’ was said",
          f5_o3: "Nothing was mentioned",
          f5_help: "You don’t need paragraphs. You need responsibilities + proof it was done.",

          sec4_title: "4) Evidence & documents (tick only if you have it)",
          sec4_p1: "Tick only if you really saw it or will reliably receive it. ‘Later’ is not automatically bad—but it must be planned and traceable.",
          c1_t: "Grid operator clearly identified",
          c1_d: "Name/region/portal or contact was provided.",
          c2_t: "Proof of feed-in application exists",
          c2_d: "Ticket/confirmation/letter or a clear way to obtain it.",
          c3_t: "Commissioning protocol is planned",
          c3_d: "Document/protocol + responsible party is clear.",
          c4_t: "Metering topic explained understandably",
          c4_d: "Who triggers what? Which meter type? What happens when?",
          c5_t: "List of registrations is available",
          c5_d: "Not just ‘must do’—but who/when/how/proof.",

          sec5_title: "5) Meeting question list (selection only)",
          sec5_p1: "These questions are intentionally simple. You don’t need jargon—your goal is clarity. Choose how well it was answered.",
          hint_answer: "answer quality",
          hint_real: "realistic",

          q1_lbl: "Can you explain the process in 6–7 steps (who does what)?",
          q2_lbl: "Who submits the feed-in application—and what proof do I get?",
          q3_lbl: "What can realistically delay the process (risks)?",
          q4_lbl: "Which documents will I receive at the end (list)?",
          q5_lbl: "What does ‘commissioning’ mean in this project—and which date matters?",

          ans_clear: "Clear & understandable",
          ans_partial: "Partial / gaps",
          ans_dodge: "Evasive / unclear",

          mini_rule_t: "Mini rule:",
          mini_rule_b: "If multiple answers are ‘evasive/unclear’, treat it as a signal: clarify first, decide later.",

          footer: "Premium workbook – Module 04. Inputs are stored locally and printable."
        }
      };

      function getData(){
        try{
          const raw = localStorage.getItem(LS_KEY_DATA);
          const obj = raw ? JSON.parse(raw) : {};
          return (obj && typeof obj === "object") ? obj : {};
        }catch(e){
          return {};
        }
      }
      function setData(obj){
        localStorage.setItem(LS_KEY_DATA, JSON.stringify(obj));
      }

      function applyI18n(lang){
        document.documentElement.lang = lang;
        document.querySelectorAll("[data-i18n]").forEach(el => {
          const key = el.getAttribute("data-i18n");
          const txt = (i18n[lang] && i18n[lang][key] !== undefined) ? i18n[lang][key] : null;
          if(txt !== null) el.textContent = txt;
        });

        document.querySelectorAll("option[data-i18n]").forEach(opt=>{
          const k = opt.getAttribute("data-i18n");
          const txt = (i18n[lang] && i18n[lang][k] !== undefined) ? i18n[lang][k] : null;
          if(txt !== null) opt.textContent = txt;
        });
      }

      function loadLang(){
        const saved = localStorage.getItem(LS_KEY_LANG);
        return saved === "en" ? "en" : "de";
      }
      function saveLang(lang){
        localStorage.setItem(LS_KEY_LANG, lang);
      }

      function wireSelects(){
        const data = getData();

        document.querySelectorAll("select[data-save]").forEach(sel=>{
          const k = sel.getAttribute("data-save");
          if(data[k] !== undefined) sel.value = data[k];

          sel.addEventListener("change", ()=>{
            const d = getData();
            d[k] = sel.value;
            setData(d);
          });
        });

        document.querySelectorAll("input[type='checkbox'][data-save-check]").forEach(chk=>{
          const k = chk.getAttribute("data-save-check");
          if(data[k] !== undefined) chk.checked = !!data[k];

          chk.addEventListener("change", ()=>{
            const d = getData();
            d[k] = chk.checked;
            setData(d);
          });
        });
      }

      printBtn.addEventListener("click", () => window.print());
      resetBtn.addEventListener("click", () => {
        const lang = langSel.value === "en" ? "en" : "de";
        const ok = confirm(lang === "en"
          ? "Clear all saved project inputs for this course?"
          : "Alle gespeicherten Eingaben für diesen Kurs wirklich löschen?"
        );
        if(!ok) return;
        localStorage.removeItem(LS_KEY_DATA);
        location.reload();
      });

      (function addNoCache(){
        const ts = Date.now();
        document.querySelectorAll('a[data-nocache="1"]').forEach(link => {
          const href = link.getAttribute("href") || "";
          const url = new URL(href, location.href);
          url.searchParams.set("nocache", String(ts));
          link.setAttribute("href", url.pathname.split("/").pop() + "?" + url.searchParams.toString());
        });
      })();

      const lang = loadLang();
      langSel.value = lang;
      applyI18n(lang);
      wireSelects();

      langSel.addEventListener("change", ()=>{
        const l = langSel.value === "en" ? "en" : "de";
        saveLang(l);
        applyI18n(l);
      });
    })();
  </script>

<!-- PATCH: Modul-Navigation (Prev / Index / Next) -->
<style>
  .modNav{
    margin-top: 14px;
    border:1px solid rgba(15,17,20,.12);
    border-radius: 16px;
    background: rgba(255,255,255,.72);
    box-shadow: 0 14px 34px rgba(0,0,0,.08);
    padding: 12px 12px;
    position:relative;
    overflow:hidden;
  }
  .modNav:before{
    content:"";
    position:absolute;
    inset:-2px;
    background:
      radial-gradient(620px 180px at 16% 8%, rgba(200,166,58,.12), transparent 65%),
      radial-gradient(620px 180px at 84% 12%, rgba(11,125,92,.10), transparent 65%);
    pointer-events:none;
    opacity:.75;
  }
  .modNav > *{ position:relative; }

  .modNavTop{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    flex-wrap:wrap;
    margin-bottom:10px;
  }
  .modNavTitle{
    font-weight:1100;
    font-size:13px;
    color: rgba(15,17,20,.92);
  }
  .modNavHint{
    font-size:12px;
    font-weight:900;
    color: rgba(71,80,95,.92);
    background: rgba(200,166,58,.10);
    border:1px solid rgba(200,166,58,.22);
    border-radius: 999px;
    padding: 4px 8px;
    width: fit-content;
  }

  .modNavBtns{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    align-items:center;
  }

  .modNavBtn{
    display:inline-flex;
    align-items:center;
    gap:10px;
    text-decoration:none;
    font-weight:1100;
    border-radius: 12px;
    padding: 11px 14px;
    border:1px solid rgba(15,17,20,.12);
    background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.76));
    color: rgba(15,17,20,.92);
    box-shadow: 0 14px 30px rgba(0,0,0,.06);
    transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
    white-space:nowrap;
  }
  .modNavBtn:hover{
    transform: translateY(-1px);
    box-shadow: 0 18px 38px rgba(0,0,0,.10);
    border-color: rgba(11,125,92,.28);
  }

  .modNavBtn.primary{
    color:#fff;
    border:1px solid rgba(11,125,92,.22);
    background: linear-gradient(180deg, rgba(26,165,122,1), rgba(11,125,92,1));
    box-shadow: 0 14px 30px rgba(11,125,92,.18);
  }
  .modNavBtn.primary:hover{
    box-shadow: 0 18px 38px rgba(11,125,92,.22);
  }

  .modNavBtn svg{ width:16px; height:16px; flex:0 0 auto; opacity:.95; }
  .modNavBtn.disabled{
    opacity:.45;
    pointer-events:none;
    filter: grayscale(1);
  }

  @media print{
    .modNav{ display:none !important; }
  }
</style>

<nav class="modNav" id="modNav" aria-label="Modul Navigation" style="display:none">
  <div class="modNavTop">
    <div class="modNavTitle" data-i18n="nav_title">Navigation</div>
    <div class="modNavHint" data-i18n="nav_hint">Weiter zum nächsten Modul</div>
  </div>

  <div class="modNavBtns">
    <a class="modNavBtn" id="navPrev" href="#" data-nocache="1">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M15 6l-6 6 6 6" fill="none" stroke="rgba(15,17,20,.85)" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span data-i18n="nav_prev">Vorheriges Modul</span>
    </a>

    <a class="modNavBtn" id="navIndex" href="index.html" data-nocache="1">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M4 10.5l8-6 8 6V20a1 1 0 0 1-1 1h-4v-6H9v6H5a1 1 0 0 1-1-1v-9.5z"
              fill="rgba(200,166,58,.18)" stroke="rgba(15,17,20,.55)" stroke-width="1.4" stroke-linejoin="round"/>
      </svg>
      <span data-i18n="nav_index">Index</span>
    </a>

    <a class="modNavBtn primary" id="navNext" href="#" data-nocache="1">
      <span data-i18n="nav_next">Nächstes Modul</span>
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M9 6l6 6-6 6" fill="none" stroke="rgba(255,255,255,.95)" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </a>
  </div>
</nav>

<script>
  (function(){
    const fallback = {
      de: { nav_title:"Navigation", nav_hint:"Weiter zum nächsten Modul", nav_prev:"Vorheriges Modul", nav_index:"Index", nav_next:"Nächstes Modul" },
      en: { nav_title:"Navigation", nav_hint:"Continue to the next module", nav_prev:"Previous module", nav_index:"Index", nav_next:"Next module" }
    };

    function getLang(){
      const sel = document.getElementById("langSel");
      if(sel && (sel.value==="en" || sel.value==="de")) return sel.value;
      const l = (document.documentElement.lang || "de").toLowerCase();
      return l.startsWith("en") ? "en" : "de";
    }

    const file = (location.pathname.split("/").pop() || "").toLowerCase();
    const m = file.match(/^module-(\d{2})\.html$/);
    if(!m) return;

    const num = parseInt(m[1], 10);
    if(!Number.isFinite(num)) return;

    const nav = document.getElementById("modNav");
    const prev = document.getElementById("navPrev");
    const next = document.getElementById("navNext");
    const idx  = document.getElementById("navIndex");

    function withNoCache(href){
      const ts = Date.now();
      const url = new URL(href, location.href);
      url.searchParams.set("nocache", String(ts));
      return url.pathname.split("/").pop() + "?" + url.searchParams.toString();
    }

    function pad2(n){ return String(n).padStart(2,"0"); }

    idx.href = withNoCache("index.html");

    if(num > 1){
      prev.href = withNoCache("module-" + pad2(num-1) + ".html");
      prev.classList.remove("disabled");
    }else{
      prev.href = "#";
      prev.classList.add("disabled");
    }

    if(num < 12){
      next.href = withNoCache("module-" + pad2(num+1) + ".html");
      next.classList.remove("disabled");
    }else{
      next.href = "#";
      next.classList.add("disabled");
    }

    function applyNavI18n(){
      const lang = getLang();
      document.querySelectorAll("#modNav [data-i18n]").forEach(el => {
        const k = el.getAttribute("data-i18n");
        if(!k) return;
        const current = (el.textContent || "").trim();
        if(current) return;
        el.textContent = (fallback[lang] && fallback[lang][k]) ? fallback[lang][k] : (fallback.de[k] || "");
      });
    }

    nav.style.display = "";
    applyNavI18n();

    const langSel = document.getElementById("langSel");
    if(langSel){
      langSel.addEventListener("change", () => applyNavI18n());
    }
  })();
</script>
<!-- /PATCH: Modul-Navigation -->
</body>
</html>
