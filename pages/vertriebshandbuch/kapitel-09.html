<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kapitel 09 – Preisrahmen & Zahlungsbereitschaft</title>
  <meta name="description" content="Vertriebshandbuch – Kapitel 09: Preisrahmen & Zahlungsbereitschaft." />

  <style>
    :root{
      --bg:#050814;
      --bg2:#020617;
      --panel:rgba(15,23,42,.88);
      --panel2:rgba(15,23,42,.72);
      --txt:#e9eef7;
      --muted:#a9b4c7;
      --gold:#d4af37;
      --gold2:#f2d37a;
      --shadow:0 24px 60px rgba(0,0,0,.55);
      --glow:0 0 26px rgba(212,175,55,.22), 0 12px 30px rgba(0,0,0,.55);
      --radius:18px;
      --maxw:1100px;
    }
    *{box-sizing:border-box;}

    html,body{
      margin:0;
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(212,175,55,.10), transparent 55%),
        radial-gradient(900px 600px at 80% 30%, rgba(94,168,255,.08), transparent 60%),
        linear-gradient(180deg,var(--bg),var(--bg2));
      color:var(--txt);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      overflow-x:hidden;
    }

    body{
      hyphens:auto;
      -webkit-hyphens:auto;
      -ms-hyphens:auto;
      overflow-wrap:anywhere;
      word-break:normal;
    }
    p,li,td,th,small,span,div,h1,h2,h3{
      overflow-wrap:anywhere;
      word-break:normal;
      hyphens:auto;
    }

    .wrap{max-width:var(--maxw);margin:0 auto;padding:34px 18px 60px;}

    .topbar{
      display:flex;align-items:flex-start;justify-content:space-between;
      gap:12px;flex-wrap:wrap;margin:6px 0 14px;
    }
    .brand{display:flex;flex-direction:column;gap:6px;min-width:min(720px,100%);}

    .kicker{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 10px;border-radius:999px;
      border:1px solid rgba(212,175,55,.25);
      background:rgba(0,0,0,.18);
      color:var(--gold2);
      font-size:12px;font-weight:800;letter-spacing:.25px;
      width:fit-content; white-space:nowrap;
    }
    .dot{
      width:8px;height:8px;border-radius:99px;
      background:rgba(242,211,122,.9);
      box-shadow:0 0 12px rgba(212,175,55,.35)
    }

    h1{margin:0;font-size:34px;line-height:1.1;font-weight:900}
    .sub{margin:2px 0 0;color:var(--muted);max-width:95ch;line-height:1.55}

    .line{
      height:2px;
      background:linear-gradient(90deg,transparent,var(--gold),transparent);
      opacity:.85;margin:12px 0 18px;
    }

    .panel{
      background:linear-gradient(180deg,var(--panel),var(--panel2));
      border:1px solid rgba(212,175,55,.22);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      backdrop-filter: blur(6px);
      padding:18px 18px;
      position:relative;
      overflow:hidden;
      margin-top:14px;
    }
    .panel:before{
      content:"";
      position:absolute;inset:-2px;
      background:radial-gradient(650px 240px at 10% 0%, rgba(212,175,55,.10), transparent 55%);
      pointer-events:none;
    }
    .panel > *{position:relative;z-index:1;}

    h2{margin:0 0 8px;font-size:18px;letter-spacing:.2px;color:var(--gold2)}
    p{margin:0 0 10px;color:var(--txt);line-height:1.7;font-size:14.5px;opacity:.98}
    .muted{color:var(--muted);}
    .hr{height:1px;background:rgba(212,175,55,.22);margin:14px 0}

    .vizGrid{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:12px;
      align-items:stretch;
      margin-top:10px;
    }
    @media (max-width: 980px){
      .vizGrid{grid-template-columns:1fr;}
    }
    .vizCard{
      border:1px solid rgba(212,175,55,.22);
      background:rgba(0,0,0,.14);
      border-radius:16px;
      padding:12px;
      overflow:hidden;
      min-width:0;
    }
    .vizTitle{
      margin:0 0 10px;
      font-weight:900;
      color:var(--txt);
      font-size:14.5px;
    }
    .vizInner{
      border:1px solid rgba(212,175,55,.16);
      background:rgba(0,0,0,.14);
      border-radius:14px;
      padding:12px;
      min-width:0;
      overflow:hidden;
    }

    .miniTableWrap{min-width:0; overflow:hidden;}
    table.mini{
      width:100%;
      border-collapse:collapse;
      table-layout:auto;
    }
    table.mini th, table.mini td{
      text-align:left;
      vertical-align:top;
      padding:10px 10px;
      border-bottom:1px solid rgba(212,175,55,.18);
      font-size:13.5px;
      line-height:1.45;
      white-space:normal;
      overflow-wrap:break-word;
      word-break:break-word;
    }
    table.mini th{
      color:var(--gold2);
      font-weight:900;
      border-bottom:1px solid rgba(212,175,55,.26);
      font-size:13px;
    }
    table.mini tr:last-child td{border-bottom:none;}

    .fieldRow{display:grid;grid-template-columns:1fr;gap:8px;margin:10px 0 2px;}
    .label{font-size:13px;color:var(--muted);font-weight:700;}
    .inp, .sel{
      width:100%;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(212,175,55,.22);
      background:rgba(0,0,0,.18);
      color:var(--txt);
      outline:none;
      font-size:14px;
      line-height:1.4;
    }
    .sel{appearance:none;}
    .inp:focus, .sel:focus{border-color:rgba(212,175,55,.42);box-shadow:0 0 0 3px rgba(212,175,55,.10);}
    .inp::placeholder{color:rgba(169,180,199,.75);}

    textarea{
      width:100%;
      min-height:200px;
      resize:vertical;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(212,175,55,.22);
      background:rgba(0,0,0,.18);
      color:var(--txt);
      outline:none;
      line-height:1.6;
      font-size:14px;
    }
    textarea:focus{border-color:rgba(212,175,55,.42);box-shadow:0 0 0 3px rgba(212,175,55,.10);}

    .noteRow{
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin-top:10px
    }
    .saveHint{font-size:12px;color:var(--muted);}
    .smallBtn{
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(212,175,55,.28);
      background:rgba(0,0,0,.22);
      color:var(--txt);
      font-weight:900;
      display:inline-flex;align-items:center;gap:8px;
      white-space:nowrap;cursor:pointer;
      text-decoration:none;
    }
    .smallBtn:hover{background:rgba(0,0,0,.28);}

    .footerNav{margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;justify-content:space-between;align-items:center;}
    .footerNav .left,.footerNav .mid,.footerNav .right{display:flex;gap:10px;flex-wrap:wrap;align-items:center;}
    .navBtn{
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(212,175,55,.28);
      background:rgba(0,0,0,.22);
      color:var(--txt);font-weight:900;text-decoration:none;
      display:inline-flex;align-items:center;gap:8px;white-space:nowrap;
    }
    .navBtn:hover{background:rgba(0,0,0,.28);}
    .navBtnPrimary{
      background:linear-gradient(180deg, rgba(212,175,55,.95), rgba(212,175,55,.75));
      color:#111;border:none;box-shadow:var(--glow);
    }
    .navBtnPrimary:hover{filter:brightness(1.03);}

    @page{ margin:14mm; }
    @media print{
      html,body{
        background:#fff !important;color:#000 !important;
        height:auto !important;overflow:visible !important;
        -webkit-print-color-adjust: exact;print-color-adjust: exact;
      }
      .wrap{padding:0 !important;}
      .noteRow button{display:none !important;}
      .footerNav{display:none !important;}

      .panel{
        box-shadow:none !important;background:#fff !important;
        border:1px solid #999 !important;backdrop-filter:none !important;
      }
      .panel:before{display:none !important;}
      .sub,p,textarea,.muted,.label{color:#000 !important;}
      h1,h2{color:#000 !important;}
      .line{background:#999 !important;}
      a{color:#000 !important;text-decoration:none !important;}

      textarea,.inp,.sel{
        border:1px solid #999 !important;background:#fff !important;color:#000 !important;
      }

      .vizGrid{grid-template-columns: 1fr !important;}

      table.mini thead{display: table-header-group;}
      table.mini tr{break-inside: avoid;page-break-inside: avoid;}
      table.mini th, table.mini td{
        padding:6px 6px !important;
        font-size:11.5px !important;
        line-height:1.35 !important;
        color:#000 !important;
        border-bottom:1px solid #ddd !important;
        word-break: normal !important;
        overflow-wrap: break-word !important;
      }
      table.mini th{font-size:11.5px !important;}
      .vizCard,.vizInner{background:#fff !important;border:1px solid #999 !important;}
      svg text{fill:#000 !important;}
      svg .printStroke{stroke:#000 !important;}
      svg .printFill{fill:#fff !important;}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="kicker"><span class="dot"></span> Band 2 – Markt, Timing, Nachfrage, Positionierung (Realität &amp; Chancen)</div>
        <div>
          <h1>Kapitel 09 – Preisrahmen &amp; Zahlungsbereitschaft</h1>
          <div class="sub">Menschen zahlen nicht für „Infos“. Sie zahlen für Klarheit, Zeit, Fehlervermeidung und sichere Umsetzung – wenn Nutzen &amp; Grenzen sauber sind.</div>
        </div>
      </div>
    </div>

    <div class="line"></div>

    <section class="panel">
      <h2>Kernaussage</h2>
      <p><b>Menschen zahlen nicht für „Infos“. Sie zahlen für Klarheit, Zeit, Fehlervermeidung und sichere Umsetzung – und zwar dann, wenn der Nutzen greifbar ist und die Grenzen sauber sind.</b></p>

      <div class="hr"></div>

      <p>Wenn wir ein seriöses Vertriebs-Handbuch bauen, darf „Preis“ nicht wie ein Verkaufshebel wirken, sondern wie ein Orientierungsrahmen. Der häufigste Fehler in vielen Systemen ist, dass Preis entweder überhöht (als Statusspiel) oder verschämt verschwiegen wird (als wäre Wert etwas Peinliches). Beides führt zu Misstrauen. Ein sauberer Weg ist: Preis = Leistungsrahmen + Schutzlogik + Erwartungsmanagement. Das bedeutet: Du erklärst, wofür Menschen heute wirklich zahlen, du nennst realistische Marktbereiche, und du zeigst, welche „Kosten“ Menschen in Wahrheit vermeiden (Zeit, Stress, Fehlentscheidungen), ohne jemals Renditen oder Versprechen zu behaupten.</p>

      <div class="hr"></div>

      <h2>1) Wofür Menschen tatsächlich bezahlen</h2>
      <p>In der Praxis bezahlen Menschen selten „Wissen“. Sie bezahlen für das, was Wissen für sie verändert. Der Wert entsteht meist aus vier Hebeln:</p>

      <p><b>A) Fehlervermeidung (Risiko senken)</b></p>
      <p>Im Krypto-/NFT-Umfeld ist das besonders sichtbar. Ein einziger unüberlegter Klick, eine falsche Signatur, ein Fake-Link, ein Scam – und Geld ist weg. Aber auch außerhalb von Krypto: Falsche Entscheidungen zu Finanzen, Versicherungen, Verträgen, digitalen Zugängen, Plattformen – kosten oft Geld, Zeit und Nerven. Bildung, die diese Fehler senkt, ist für Menschen sofort nachvollziehbar.</p>

      <p><b>B) Zeitersparnis (Abkürzung durch Struktur, nicht durch Tricks)</b></p>
      <p>Viele haben nicht zu wenig Intelligenz, sondern zu wenig Zeit. Sie hängen in YouTube-Listen, Telegram-Gruppen, widersprüchlichen Meinungen, „Tipps“. Ein System, das Ordnung schafft, spart Wochen. Und genau dafür ist eine Akademie sinnvoll: nicht um „mehr Content“, sondern um weniger Chaos zu erzeugen.</p>

      <p><b>C) Entscheidungssicherheit (Psychologie entlasten)</b></p>
      <p>Wenn Menschen sich unsicher fühlen, treffen sie entweder gar keine Entscheidung oder sie springen hektisch. Beides ist teuer. Ein guter Bildungsweg macht Entscheidungen leichter, weil er Grenzen und Prinzipien vermittelt: Was ist relevant? Was ist Lärm? Welche Reihenfolge? Was ist der nächste Schritt?</p>

      <p><b>D) Umsetzung (vom Verstehen ins Handeln)</b></p>
      <p>Viele scheitern nicht am Willen, sondern am Übergang von Theorie zu Praxis. Wer hier hilft – durch klare Checklisten, Setups, Beispiele, einen roten Faden – erzeugt realen Wert. Und genau deshalb zahlen Menschen für Kurse, Workshops und geführte Setups.</p>

      <div class="hr"></div>

      <h2>2) Preisrahmen im Markt – ohne Angeberei, ohne Kleinmachen</h2>
      <p>Im Weiterbildungsmarkt sind Tagessätze, Seminarpreise und Coaching-Honorare je nach Branche und Format häufig dreistellig bis vierstellig. Das ist kein „Luxus“, sondern Marktlogik: Zeit eines Profis, Vorbereitung, Struktur, Materialien, Betreuung, Raum, Organisation. Wichtig: Wir benutzen diese Realität nicht als Verkaufsargument, sondern als Einordnung: „Bildung kostet, wenn sie sauber ist.“</p>

      <p>Und gleichzeitig gilt: Es gibt einen starken Gegentrend. Viele Menschen sind müde von aggressivem „Coach-Marketing“. Das ist eine Chance – für seriöse Systeme. Wer heute gewinnt, gewinnt nicht über Lautstärke, sondern über: klare Leistung, klare Grenzen, klare Prozesse, saubere Kommunikation.</p>

      <div class="hr"></div>

      <h2>3) Club-Logik: Preis als Schutzsystem, nicht als Drucksystem</h2>
      <p>Der Club hat eine besondere Rolle, weil er Stabilität baut. Ein Kurs ist oft ein einmaliger Impuls. Ein Club ist ein Rahmen, der Menschen im Prozess hält. Dadurch entsteht ein Wert, den Einzelprodukte selten liefern: Wiederholung (dranbleiben), Austausch (Fehler früher erkennen), Standards (sauberer Ton), Rituale (Monatscheck, Checklisten, Tools). Das ist auch die Erklärung, warum „Mitgliedschaft“ und „Umsetzung“ seriös kombinierbar sind: Mitgliedschaft gibt den Rahmen, Produkte geben die Schritte.</p>

      <div class="hr"></div>

      <h2>4) Das wichtigste Element: Grenzen &amp; Haftungslogik</h2>
      <p>Ein seriöses Handbuch muss an dieser Stelle glasklar sein: Keine Beratung, keine Versprechen, kein „schnell reich“. Sonst wird aus Bildung Marketing – und aus Marketing wird später Ärger. Das Handbuch muss Preis immer mit Grenzen koppeln: „Das ist Bildung und Struktur.“ „Entscheidungen liegen beim Nutzer.“ „Risiko bleibt real.“ „Wir reduzieren Fehler, wir garantieren keine Ergebnisse.“</p>

      <div class="hr"></div>

      <h2>5) Praxisbeispiel (ohne Zahlen-Fantasie)</h2>
      <p class="muted"><b>„Wenn du dir mit einem strukturierten Weg drei typische Fehler sparst – Overload, falsche Signatur, unklare Reihenfolge – dann hat sich der Einstieg meist schon gelohnt. Nicht weil du ‘mehr verdienst’, sondern weil du weniger verlierst: Zeit, Geld, Nerven.“</b></p>

      <div class="hr"></div>

      <h2>Anschauung</h2>

      <div class="vizGrid">
        <div class="vizCard">
          <div class="vizTitle">Tabelle: Werttreiber (Fehlerkosten / Zeit / Entscheidungssicherheit / Umsetzung)</div>
          <div class="vizInner miniTableWrap">
            <table class="mini" aria-label="Werttreiber">
              <thead>
                <tr>
                  <th style="width:28%;">Werttreiber</th>
                  <th>Warum Menschen zahlen</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Fehlerkosten</td>
                  <td class="muted">Weniger Scam/Fehlsetup/Fehlentscheidung → weniger Verlust (Geld/Stress).</td>
                </tr>
                <tr>
                  <td>Zeit</td>
                  <td class="muted">Ordnung statt Chaos → Wochen sparen, weniger Umwege.</td>
                </tr>
                <tr>
                  <td>Entscheidungssicherheit</td>
                  <td class="muted">Klarer Rahmen → weniger Zögern oder hektisches Springen.</td>
                </tr>
                <tr>
                  <td>Umsetzung</td>
                  <td class="muted">Checklisten/Setups → vom Verstehen ins Handeln.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="vizCard">
          <div class="vizTitle">Mini-Rechner: „Fehlerkosten“ (ohne Rendite, nur Realität)</div>
          <div class="vizInner" aria-label="Mini Rechner Fehlerkosten">
            <div class="muted" style="font-size:13.5px;line-height:1.6;">
              Trage deine grobe Bandbreite ein – nicht für „Genauigkeit“, sondern für Klarheit.
            </div>

            <div class="hr"></div>

            <div class="fieldRow">
              <div class="label">Zeitverlust (Stunden/Woche):</div>
              <input class="inp" id="calc_time" type="text" placeholder="z. B. 3" />
            </div>

            <div class="fieldRow">
              <div class="label">Stresskosten (Skala 1–10):</div>
              <input class="inp" id="calc_stress" type="text" placeholder="z. B. 6" />
            </div>

            <div class="fieldRow">
              <div class="label">Geldrisiko (Bandbreite, grob):</div>
              <input class="inp" id="calc_money" type="text" placeholder="z. B. 100–500 €" />
            </div>

            <div class="hr"></div>

            <p class="muted" style="margin:0;"><b>Hinweis:</b> Das ist kein Versprechen-Rechner. Es ist ein Klarheits-Tool: Wo tut Chaos am meisten weh?</p>
          </div>
        </div>
      </div>

      <div class="vizCard" style="margin-top:12px;">
        <div class="vizTitle">Grafik: Chaos → Struktur → Handlungsfähigkeit</div>
        <div class="vizInner" aria-label="Chaos Struktur Handlungsfähigkeit Grafik">
          <svg viewBox="0 0 980 220" width="100%" height="auto" role="img" aria-label="Chaos zu Struktur">
            <rect x="14" y="14" width="952" height="192" rx="18"
                  fill="rgba(0,0,0,.12)" class="printFill"
                  stroke="rgba(212,175,55,.18)" stroke-width="2" class="printStroke"/>
            <g font-family="system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif">
              <text x="36" y="54" font-size="16" font-weight="900" fill="rgba(242,211,122,.95)">Weglogik: vom Chaos zur Handlungsfähigkeit</text>

              <g transform="translate(36,82)">
                <rect x="0" y="0" width="260" height="90" rx="16"
                      fill="rgba(0,0,0,.14)" class="printFill"
                      stroke="rgba(212,175,55,.16)" stroke-width="2" class="printStroke"/>
                <text x="18" y="34" font-size="14" font-weight="900" fill="rgba(233,238,247,.92)">Chaos</text>
                <text x="18" y="58" font-size="13" fill="rgba(169,180,199,.95)">Overload · Lärm · Widersprüche</text>

                <path d="M280,45 L370,45" fill="none" stroke="rgba(212,175,55,.75)" stroke-width="4" class="printStroke"/>
                <polygon points="370,45 352,35 352,55" fill="rgba(212,175,55,.75)"/>

                <rect x="390" y="0" width="260" height="90" rx="16"
                      fill="rgba(0,0,0,.14)" class="printFill"
                      stroke="rgba(212,175,55,.16)" stroke-width="2" class="printStroke"/>
                <text x="408" y="34" font-size="14" font-weight="900" fill="rgba(233,238,247,.92)">Struktur</text>
                <text x="408" y="58" font-size="13" fill="rgba(169,180,199,.95)">Reihenfolge · Checklisten · Grenzen</text>

                <path d="M670,45 L760,45" fill="none" stroke="rgba(212,175,55,.75)" stroke-width="4" class="printStroke"/>
                <polygon points="760,45 742,35 742,55" fill="rgba(212,175,55,.75)"/>

                <rect x="780" y="0" width="164" height="90" rx="16"
                      fill="rgba(0,0,0,.14)" class="printFill"
                      stroke="rgba(212,175,55,.16)" stroke-width="2" class="printStroke"/>
                <text x="798" y="34" font-size="14" font-weight="900" fill="rgba(233,238,247,.92)">Handlungsfähig</text>
                <text x="798" y="58" font-size="13" fill="rgba(169,180,199,.95)">ruhig · klar · umsetzbar</text>
              </g>
            </g>
          </svg>
        </div>
      </div>

      <div class="hr"></div>

      <h2>Notizen &amp; Antworten</h2>
      <p class="muted">Alles, was du hier einträgst, bleibt nur auf deinem Gerät (LocalStorage).</p>

      <div class="fieldRow">
        <div class="label">1) Welche 3 Fehler will ich vermeiden? (z. B. Overload, Scam, falsche Reihenfolge)</div>
        <textarea id="q1_fehler" placeholder="3 Fehler…"></textarea>
      </div>

      <div class="fieldRow">
        <div class="label">2) Was kostet mich Chaos am meisten: Zeit / Stress / Geld / Streit?</div>
        <input class="inp" id="q2_kosten" type="text" placeholder="Zeit / Stress / Geld / Streit (und warum)…" />
      </div>

      <div class="fieldRow">
        <div class="label">3) Welche Form hilft mir am meisten: Lesen / Kurs / Umfeld / Checklisten?</div>
        <input class="inp" id="q3_form" type="text" placeholder="Welche Form passt am besten – und warum?" />
      </div>

      <div class="fieldRow">
        <div class="label">4) Welche Grenze ist mir wichtig (damit es seriös bleibt)?</div>
        <input class="inp" id="q4_grenze" type="text" placeholder="Meine wichtigste Grenze…" />
      </div>

      <div class="hr"></div>

      <p class="muted"><b>Freie Notizen (optional):</b></p>
      <textarea id="notes" placeholder="Zusätzliche Notizen…"></textarea>

      <div class="noteRow">
        <div class="saveHint" id="saveHint">Nicht gespeichert.</div>
        <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:flex-end;">
          <button class="smallBtn" type="button" id="clearChapter">Kapitel-Notizen löschen</button>
          <button class="smallBtn" type="button" id="clearAll">Alle Handbuch-Daten löschen</button>
        </div>
      </div>

      <div class="footerNav" aria-label="Kapitel Navigation">
        <div class="left">
          <a class="navBtn" href="./index.html" data-internal>← Inhaltsverzeichnis</a>
        </div>
        <div class="mid">
          <a class="navBtn" href="./kapitel-08.html" data-internal>← Zurück</a>
          <a class="navBtn navBtnPrimary" href="./kapitel-10.html" data-internal>Nächstes →</a>
        </div>
        <div class="right">
          <button class="navBtn navBtnPrimary" type="button" id="printBtn">Drucken</button>
        </div>
      </div>
    </section>
  </div>

  <script>
    (function(){
      document.getElementById("printBtn").addEventListener("click", function(){
        window.print();
      });
    })();
  </script>

  <script>
    (function(){
      const CHAPTER = "09";
      const STORAGE_PREFIX = "fsa_vh_";
      const KEY_NOTES  = STORAGE_PREFIX + "kap" + CHAPTER + "_notes";
      const KEY_FIELDS = STORAGE_PREFIX + "kap" + CHAPTER + "_fields";

      const notesEl = document.getElementById("notes");
      const hintEl  = document.getElementById("saveHint");

      const fieldIds = ["calc_time","calc_stress","calc_money","q1_fehler","q2_kosten","q3_form","q4_grenze"];

      function setSaved(){ if(hintEl) hintEl.textContent = "Gespeichert (lokal)."; }
      function setUnsaved(){ if(hintEl) hintEl.textContent = "Nicht gespeichert."; }

      function safeGet(k){ try{ return localStorage.getItem(k); }catch(e){ return null; } }
      function safeSet(k,v){ try{ localStorage.setItem(k, v); }catch(e){} }

      function restore(){
        const raw = safeGet(KEY_FIELDS);
        if(raw){
          try{
            const obj = JSON.parse(raw);
            fieldIds.forEach(id=>{
              const el = document.getElementById(id);
              if(!el) return;
              if(Object.prototype.hasOwnProperty.call(obj,id)) el.value = obj[id] ?? "";
            });
          }catch(e){}
        }
        const v = safeGet(KEY_NOTES);
        if(v !== null && notesEl){ notesEl.value = v; setSaved(); }
        else setUnsaved();
      }

      let tId=null;
      function scheduleSave(){
        setUnsaved();
        if(tId) clearTimeout(tId);
        tId = setTimeout(function(){
          const obj = {};
          fieldIds.forEach(id=>{
            const el = document.getElementById(id);
            if(el) obj[id] = el.value || "";
          });
          safeSet(KEY_FIELDS, JSON.stringify(obj));
          if(notesEl) safeSet(KEY_NOTES, notesEl.value || "");
          setSaved();
        }, 250);
      }

      fieldIds.forEach(id=>{
        const el = document.getElementById(id);
        if(!el) return;
        el.addEventListener("input", scheduleSave);
        el.addEventListener("change", scheduleSave);
      });
      if(notesEl) notesEl.addEventListener("input", scheduleSave);

      document.getElementById("clearChapter").addEventListener("click", function(){
        if(!confirm("Kapitel-Notizen wirklich löschen?")) return;
        try{ localStorage.removeItem(KEY_NOTES); localStorage.removeItem(KEY_FIELDS); }catch(e){}
        fieldIds.forEach(id=>{ const el=document.getElementById(id); if(el) el.value=""; });
        if(notesEl) notesEl.value="";
        setUnsaved();
      });

      document.getElementById("clearAll").addEventListener("click", function(){
        if(!confirm("ALLE gespeicherten Handbuch-Daten auf diesem Gerät löschen?")) return;
        try{
          const keys=[];
          for(let i=0;i<localStorage.length;i++){
            const k=localStorage.key(i);
            if(k && k.startsWith(STORAGE_PREFIX)) keys.push(k);
          }
          keys.forEach(k=>localStorage.removeItem(k));
        }catch(e){}
        fieldIds.forEach(id=>{ const el=document.getElementById(id); if(el) el.value=""; });
        if(notesEl) notesEl.value="";
        setUnsaved();
        alert("Daten gelöscht.");
      });

      restore();
    })();
  </script>

  <script>
    (function(){
      const t = Date.now();
      document.querySelectorAll('a[data-internal]').forEach(a=>{
        const href = a.getAttribute('href');
        if(!href) return;
        try{
          const u = new URL(href, location.href);
          u.searchParams.set('nocache', t);
          a.href = u.pathname + u.search + u.hash;
        }catch(e){}
      });
    })();
  </script>
</body>
</html>
