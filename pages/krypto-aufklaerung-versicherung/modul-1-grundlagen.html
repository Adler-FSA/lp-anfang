<!doctype html>
<!--
  FSA • Aufklärungskurs • Krypto & Versicherung – Modul 1
  GitHub-Pfad: lp-anfang/pages/krypto-aufklaerung-versicherung/modul-1-grundlagen.html
  Commit-Message: krypto-aufklaerung-versicherung – kurs stand-alone (index + 4 module, DE/EN, print+notes)
  Testlink (nocache): https://adler-fsa.github.io/lp-anfang/pages/krypto-aufklaerung-versicherung/modul-1-grundlagen.html?nocache=__TS__
-->
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modul 1 – Grundlagen: Was ist „Verlust“? | Krypto & Versicherung</title>
  <meta name="description" content="Modul 1: Grundlagen zu Krypto-Verlusten. Kursverlust vs technischer Verlust vs Betrug. Warum die Unterscheidung für Versicherungen entscheidend ist. DE/EN." />
  <meta name="robots" content="noindex,nofollow" />

  <style>
    :root{
      --bg:#050814; --bg2:#020617;
      --panel:rgba(15,23,42,.88); --panel2:rgba(15,23,42,.72);
      --txt:#e9eef7; --muted:#a9b4c7;
      --gold:#d4af37; --gold2:#f2d37a;
      --line:rgba(212,175,55,.38);
      --shadow:0 24px 60px rgba(0,0,0,.55);
      --glow:0 0 26px rgba(212,175,55,.22), 0 12px 30px rgba(0,0,0,.55);
      --radius:18px; --maxw:1100px;
    }
    *{box-sizing:border-box;}
    html,body{
      margin:0;
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(212,175,55,.10), transparent 55%),
        radial-gradient(900px 600px at 80% 30%, rgba(94,168,255,.08), transparent 60%),
        linear-gradient(180deg,var(--bg),var(--bg2));
      color:var(--txt);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      overflow-x:hidden;
      -webkit-text-size-adjust:100%;
      text-size-adjust:100%;
    }
    body{hyphens:auto;-webkit-hyphens:auto;overflow-wrap:anywhere;word-break:normal;}
    p,h1,h2,h3,li,.sub,.muted,.label{overflow-wrap:anywhere;hyphens:auto;-webkit-hyphens:auto;}

    .wrap{max-width:var(--maxw);margin:0 auto;padding:34px 18px 60px;}
    .topbar{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap;margin:6px 0 14px;}
    .brand{display:flex;flex-direction:column;gap:8px;min-width:min(720px,100%);}
    .kicker{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 10px;border-radius:999px;
      border:1px solid rgba(212,175,55,.25);
      background:rgba(0,0,0,.18);
      color:var(--gold2);
      font-size:12px;font-weight:950;letter-spacing:.25px;
      width:fit-content; white-space:nowrap;
    }
    .dot{width:8px;height:8px;border-radius:99px;background:rgba(242,211,122,.9);box-shadow:0 0 12px rgba(212,175,55,.35)}
    h1{margin:0;font-size:30px;line-height:1.15;font-weight:950}
    .sub{margin:2px 0 0;color:var(--muted);max-width:95ch;line-height:1.55}
    .line{height:2px;background:linear-gradient(90deg,transparent,var(--gold),transparent);opacity:.85;margin:12px 0 18px;}

    .panel{
      background:linear-gradient(180deg,var(--panel),var(--panel2));
      border:1px solid rgba(212,175,55,.22);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      backdrop-filter: blur(6px);
      padding:18px;
      position:relative;
      overflow:hidden;
      margin-top:14px;
    }
    .panel:before{
      content:""; position:absolute; inset:-2px;
      background:radial-gradient(650px 240px at 10% 0%, rgba(212,175,55,.10), transparent 55%);
      pointer-events:none;
    }
    .panel > *{position:relative;z-index:1;}
    h2{margin:0 0 8px;font-size:18px;letter-spacing:.2px;color:var(--gold2)}
    h3{margin:12px 0 8px;font-size:15px;letter-spacing:.2px;color:var(--gold2)}
    p{margin:0 0 10px;color:var(--txt);line-height:1.7;font-size:14.5px;opacity:.98}
    ul{margin:8px 0 10px 18px;padding:0;}
    li{margin:6px 0;line-height:1.6;}
    .muted{color:var(--muted);}
    .hr{height:1px;background:rgba(212,175,55,.22);margin:14px 0}

    .langBar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:flex-end;}
    .langBtn{
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(212,175,55,.28);
      background:rgba(0,0,0,.22);
      color:var(--txt);
      font-weight:950;
      cursor:pointer;
      -webkit-appearance:none; appearance:none;
    }
    .langBtn[aria-pressed="true"]{
      background:linear-gradient(180deg, rgba(212,175,55,.95), rgba(212,175,55,.75));
      color:#111;border:none;box-shadow:var(--glow);
    }

    .navBtn,.smallBtn{
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(212,175,55,.28);
      background:rgba(0,0,0,.22);
      color:var(--txt);
      font-weight:950;
      display:inline-flex;align-items:center;gap:8px;
      cursor:pointer;text-decoration:none;
      -webkit-appearance:none; appearance:none;
    }
    .navBtn:hover,.smallBtn:hover{background:rgba(0,0,0,.28);}
    .navBtnPrimary{
      background:linear-gradient(180deg, rgba(212,175,55,.95), rgba(212,175,55,.75));
      color:#111;border:1px solid rgba(212,175,55,.35);
      box-shadow:var(--glow);
    }
    .ico{width:16px;height:16px;display:inline-block;vertical-align:middle}

    /* Notes */
    .fieldRow{display:grid;grid-template-columns:1fr;gap:8px;margin:10px 0 2px;}
    .label{font-size:13px;color:var(--muted);font-weight:800;}
    .inp{
      width:100%;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(212,175,55,.22);
      background:rgba(0,0,0,.18);
      color:var(--txt);
      outline:none;
      font-size:14px;
      -webkit-appearance:none; appearance:none;
    }
    .inp:focus{border-color:rgba(212,175,55,.42);box-shadow:0 0 0 3px rgba(212,175,55,.10);}
    textarea{
      width:100%;
      min-height:180px;
      resize:vertical;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(212,175,55,.22);
      background:rgba(0,0,0,.18);
      color:var(--txt);
      outline:none;
      font-size:14px;
      line-height:1.6;
      -webkit-appearance:none; appearance:none;
    }
    textarea:focus{border-color:rgba(212,175,55,.42);box-shadow:0 0 0 3px rgba(212,175,55,.10);}
    .noteRow{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin-top:10px}
    .saveHint{font-size:12px;color:var(--muted);}
    .footerNav{margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;justify-content:space-between;align-items:center;}
    .footerNav .left,.footerNav .mid,.footerNav .right{display:flex;gap:10px;flex-wrap:wrap;align-items:center;}

    /* PRINT */
    @page{ margin:14mm; }
    @media print{
      html,body{background:#fff !important;color:#000 !important;height:auto !important;overflow:visible !important;-webkit-print-color-adjust: exact;print-color-adjust: exact;}
      body,p,h1,h2,h3,li,.sub,.muted,.label{hyphens:none !important;-webkit-hyphens:none !important;overflow-wrap:normal !important;}
      .wrap{padding:0 !important;}
      .langBar{display:none !important;}
      .noteRow button{display:none !important;}
      .footerNav{display:none !important;}
      .smallBtn{display:none !important;}
      .panel{box-shadow:none !important;background:#fff !important;border:1px solid #999 !important;backdrop-filter:none !important;break-inside:avoid;page-break-inside:avoid;}
      .panel:before{display:none !important;}
      .sub,p,textarea,.muted,.label{color:#000 !important;}
      h1,h2,h3{color:#000 !important;}
      .line{background:#999 !important;}
      a{color:#000 !important;text-decoration:none !important;}
      textarea,.inp{border:1px solid #999 !important;background:#fff !important;color:#000 !important;}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="kicker"><span class="dot"></span> <span data-i18n="kicker">Modul 1</span></div>
        <div>
          <h1 data-i18n="h1">Grundlagen: Was ist eigentlich „Verlust“?</h1>
          <div class="sub" data-i18n="sub">Bevor man über Versicherung spricht, muss man sauber unterscheiden, was genau passiert ist.</div>
        </div>
      </div>
      <div class="langBar" aria-label="Language">
        <button class="langBtn" type="button" id="btnDE" aria-pressed="true">DE</button>
        <button class="langBtn" type="button" id="btnEN" aria-pressed="false">EN</button>
      </div>
    </div>

    <div class="line"></div>

    <section class="panel">
      <h2 data-i18n="t1">1) Drei Arten von „Verlust“</h2>
      <p data-i18n="p1">
        Viele Missverständnisse entstehen, weil „Verlust“ im Alltag alles bedeutet. Im Krypto-Bereich ist die Ursache entscheidend.
        Versicherungen (wenn überhaupt) prüfen fast immer genau: War es Marktbewegung, ein technischer Fehler – oder Betrug?
      </p>
      <ul>
        <li data-i18n="l1"><b>Kursverlust:</b> Der Preis fällt. Du verkaufst (oder bewertest) später niedriger.</li>
        <li data-i18n="l2"><b>Technischer Verlust:</b> Coins sind weg, weil etwas falsch gemacht wurde (Adresse/Netzwerk/Backup).</li>
        <li data-i18n="l3"><b>Betrug/Diebstahl:</b> Jemand hat dich getäuscht oder Zugriffe übernommen (Fake-Support, Phishing, Malware).</li>
      </ul>
      <p class="muted" data-i18n="p2">
        Merksatz: Kursverlust ist „Markt“. Technischer Verlust ist „Handling“. Betrug ist „Angriff“. Das sind drei verschiedene Welten.
      </p>
    </section>

    <section class="panel">
      <h2 data-i18n="t2">2) Warum diese Unterscheidung so wichtig ist</h2>
      <p data-i18n="p3">
        Wenn Club-Mitglieder fragen „Gibt es eine Versicherung?“, meinen sie oft „Gibt es einen Schutz vor allem?“
        Genau das gibt es in der Realität fast nie. Meist geht es – wenn überhaupt – nur um sehr konkrete Ereignisse unter klaren Bedingungen.
      </p>
      <p data-i18n="p4">
        Beispiel: Wenn der Markt fällt, ist das kein Versicherungsfall. Wenn du aber Coins verlierst, weil ein Anbieter nachweislich gehackt wurde,
        kann es in manchen Konstellationen eine Absicherung geben – aber auch dann nicht automatisch und nicht unbegrenzt.
      </p>
    </section>

    <section class="panel">
      <h2 data-i18n="t3">3) „Selbstverwahrung“ vs. „verwahrt beim Anbieter“</h2>
      <p data-i18n="p5">
        Der wichtigste Unterschied für jede Absicherung ist: Wer hatte die Kontrolle über die Schlüssel?
      </p>
      <ul>
        <li data-i18n="l4"><b>Selbstverwahrung (Wallet mit Seed):</b> Du trägst die volle Verantwortung. Fehler sind meist nicht erstattbar.</li>
        <li data-i18n="l5"><b>Verwahrung beim Anbieter:</b> Ein Anbieter verwaltet für dich. Dann hängen Schutz/Erstattung stark von dessen Regeln ab.</li>
      </ul>
      <p class="muted" data-i18n="p6">
        Diese Unterscheidung ist kein „besser/schlechter“, sondern nur: andere Risiken + andere Möglichkeiten.
      </p>
    </section>

    <section class="panel">
      <h2 data-i18n="t4">Mini-Check (30 Sekunden)</h2>
      <p data-i18n="p7">Wenn etwas passiert ist, beantworte diese drei Fragen schriftlich – das klärt 80% der Situation:</p>
      <ul>
        <li data-i18n="c1">Was ist genau passiert (Zeit, Betrag, Coin, Plattform/Wallet)?</li>
        <li data-i18n="c2">War es Marktbewegung, Handling-Fehler oder ein Angriff/Betrug?</li>
        <li data-i18n="c3">Wer hatte die Kontrolle über die Schlüssel (du oder ein Anbieter)?</li>
      </ul>
      <p class="muted" data-i18n="p8">
        In Modul 2 klären wir dann: Welche Versicherungs-/Schutzmodelle es überhaupt gibt – und welche Bedingungen typisch sind.
      </p>
    </section>

    <section class="panel" id="notesPanel">
      <h2 data-i18n="notes_title">Modul-Notizen</h2>
      <p class="muted" data-i18n="notes_sub">Alles bleibt nur auf deinem Gerät (LocalStorage).</p>

      <div class="fieldRow">
        <div class="label" data-i18n="n1">A) Welche „Verlust-Art“ war die Frage im Club (Kurs/Handling/Betrug)?</div>
        <input class="inp" id="n_a" type="text" placeholder="…" data-i18n-placeholder="ph_dots" />
      </div>
      <div class="fieldRow">
        <div class="label" data-i18n="n2">B) Wer hatte die Kontrolle (ich / Anbieter)?</div>
        <input class="inp" id="n_b" type="text" placeholder="…" data-i18n-placeholder="ph_dots" />
      </div>

      <div class="hr"></div>
      <p class="muted"><b data-i18n="free_notes">Freie Notizen:</b></p>
      <textarea id="n_notes" placeholder="…" data-i18n-placeholder="ph_notes"></textarea>

      <div class="noteRow">
        <div class="saveHint" id="saveHint" data-i18n="save_unsaved">Nicht gespeichert.</div>
        <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:flex-end;">
          <button class="smallBtn" type="button" id="clearPage"><span data-i18n="btn_clear_page">Notizen dieser Seite löschen</span></button>
          <button class="smallBtn" type="button" id="clearAll"><span data-i18n="btn_clear_all">Alle Kurs-Notizen löschen</span></button>
        </div>
      </div>

      <div class="footerNav">
        <div class="left">
          <a class="navBtn" href="./index.html" data-internal>← <span data-i18n="btn_home">Start</span></a>
        </div>
        <div class="mid">
          <a class="navBtn navBtnPrimary" href="./modul-2-versicherbarkeit.html" data-internal><span data-i18n="btn_next">Weiter: Modul 2</span> →</a>
        </div>
        <div class="right">
          <button class="navBtn navBtnPrimary" type="button" id="printBtn"><span data-i18n="btn_print">Drucken</span></button>
        </div>
      </div>
    </section>

  </div>

  <script>
    (function(){
      "use strict";

      const COURSE_KEY = "fsa_kav_notes_v1";
      const LANG_KEY   = "fsa_kav_lang_v1";
      const PAGE_ID    = "m1";
      const FIELD_IDS  = ["n_a","n_b","n_notes"];

      function safeGet(k){ try{ return localStorage.getItem(k);}catch(e){ return null; } }
      function safeSet(k,v){ try{ localStorage.setItem(k,v);}catch(e){} }
      function safeRemove(k){ try{ localStorage.removeItem(k);}catch(e){} }

      function loadCourseObject(){
        const raw = safeGet(COURSE_KEY);
        if(!raw) return { v:1, pages:{} };
        try{
          const obj = JSON.parse(raw);
          if(!obj || typeof obj!=="object") return { v:1, pages:{} };
          if(!obj.pages || typeof obj.pages!=="object") obj.pages = {};
          if(!obj.v) obj.v = 1;
          return obj;
        }catch(e){
          return { v:1, pages:{} };
        }
      }
      function saveCourseObject(obj){ safeSet(COURSE_KEY, JSON.stringify(obj)); }

      const i18n = {
        de:{
          kicker:"Modul 1",
          h1:"Grundlagen: Was ist eigentlich „Verlust“?",
          sub:"Bevor man über Versicherung spricht, muss man sauber unterscheiden, was genau passiert ist.",

          t1:"1) Drei Arten von „Verlust“",
          p1:"Viele Missverständnisse entstehen, weil „Verlust“ im Alltag alles bedeutet. Im Krypto-Bereich ist die Ursache entscheidend. Versicherungen (wenn überhaupt) prüfen fast immer genau: War es Marktbewegung, ein technischer Fehler – oder Betrug?",
          l1:"<b>Kursverlust:</b> Der Preis fällt. Du verkaufst (oder bewertest) später niedriger.",
          l2:"<b>Technischer Verlust:</b> Coins sind weg, weil etwas falsch gemacht wurde (Adresse/Netzwerk/Backup).",
          l3:"<b>Betrug/Diebstahl:</b> Jemand hat dich getäuscht oder Zugriffe übernommen (Fake-Support, Phishing, Malware).",
          p2:"Merksatz: Kursverlust ist „Markt“. Technischer Verlust ist „Handling“. Betrug ist „Angriff“. Das sind drei verschiedene Welten.",

          t2:"2) Warum diese Unterscheidung so wichtig ist",
          p3:"Wenn Club-Mitglieder fragen „Gibt es eine Versicherung?“, meinen sie oft „Gibt es einen Schutz vor allem?“ Genau das gibt es in der Realität fast nie. Meist geht es – wenn überhaupt – nur um sehr konkrete Ereignisse unter klaren Bedingungen.",
          p4:"Beispiel: Wenn der Markt fällt, ist das kein Versicherungsfall. Wenn du aber Coins verlierst, weil ein Anbieter nachweislich gehackt wurde, kann es in manchen Konstellationen eine Absicherung geben – aber auch dann nicht automatisch und nicht unbegrenzt.",

          t3:"3) „Selbstverwahrung“ vs. „verwahrt beim Anbieter“",
          p5:"Der wichtigste Unterschied für jede Absicherung ist: Wer hatte die Kontrolle über die Schlüssel?",
          l4:"<b>Selbstverwahrung (Wallet mit Seed):</b> Du trägst die volle Verantwortung. Fehler sind meist nicht erstattbar.",
          l5:"<b>Verwahrung beim Anbieter:</b> Ein Anbieter verwaltet für dich. Dann hängen Schutz/Erstattung stark von dessen Regeln ab.",
          p6:"Diese Unterscheidung ist kein „besser/schlechter“, sondern nur: andere Risiken + andere Möglichkeiten.",

          t4:"Mini-Check (30 Sekunden)",
          p7:"Wenn etwas passiert ist, beantworte diese drei Fragen schriftlich – das klärt 80% der Situation:",
          c1:"Was ist genau passiert (Zeit, Betrag, Coin, Plattform/Wallet)?",
          c2:"War es Marktbewegung, Handling-Fehler oder ein Angriff/Betrug?",
          c3:"Wer hatte die Kontrolle über die Schlüssel (du oder ein Anbieter)?",
          p8:"In Modul 2 klären wir dann: Welche Versicherungs-/Schutzmodelle es überhaupt gibt – und welche Bedingungen typisch sind.",

          notes_title:"Modul-Notizen",
          notes_sub:"Alles bleibt nur auf deinem Gerät (LocalStorage).",
          n1:"A) Welche „Verlust-Art“ war die Frage im Club (Kurs/Handling/Betrug)?",
          n2:"B) Wer hatte die Kontrolle (ich / Anbieter)?",
          free_notes:"Freie Notizen:",
          save_unsaved:"Nicht gespeichert.",
          save_saved:"Gespeichert (lokal).",
          btn_clear_page:"Notizen dieser Seite löschen",
          btn_clear_all:"Alle Kurs-Notizen löschen",
          btn_home:"Start",
          btn_next:"Weiter: Modul 2",
          btn_print:"Drucken",
          ph_dots:"…",
          ph_notes:"Freie Notizen …",
          confirm_clear_page:"Notizen dieser Seite wirklich löschen?",
          confirm_clear_all:"ALLE Kurs-Notizen auf diesem Gerät löschen?",
          alert_cleared:"Daten gelöscht."
        },
        en:{
          kicker:"Module 1",
          h1:"Basics: what does “loss” mean?",
          sub:"Before talking about insurance, you must clearly define what actually happened.",

          t1:"1) Three types of “loss”",
          p1:"Many misunderstandings happen because “loss” means everything in everyday language. In crypto, the cause is crucial. Insurance (if any) usually checks: was it market movement, a technical mistake — or fraud?",
          l1:"<b>Price loss:</b> the price drops. You sell (or value) later at a lower price.",
          l2:"<b>Technical loss:</b> coins are gone because something was done wrong (address/network/backup).",
          l3:"<b>Fraud/theft:</b> someone tricked you or took control (fake support, phishing, malware).",
          p2:"Rule of thumb: price loss = market. technical loss = handling. fraud = attack. Different worlds.",

          t2:"2) Why this distinction matters",
          p3:"When members ask “Is there insurance?”, they often mean “Is there protection for everything?”. In reality, almost never. If anything exists, it’s usually for very specific events with strict conditions.",
          p4:"Example: market drops are not insurance cases. But if coins are lost because a provider was demonstrably hacked, some setups may have protection — still not automatic and not unlimited.",

          t3:"3) Self-custody vs custodial provider",
          p5:"The key question for any protection is: who controlled the keys?",
          l4:"<b>Self-custody (wallet with seed):</b> you carry full responsibility. Mistakes are usually not refundable.",
          l5:"<b>Custody with a provider:</b> a provider holds it for you. Then protection/reimbursement depends on their rules.",
          p6:"This is not “better/worse” — it’s different risks and different possibilities.",

          t4:"Mini-check (30 seconds)",
          p7:"If something happened, answer these three questions in writing — it clarifies most situations:",
          c1:"What exactly happened (time, amount, coin, platform/wallet)?",
          c2:"Was it market movement, handling mistake, or an attack/fraud?",
          c3:"Who controlled the keys (you or a provider)?",
          p8:"In Module 2 we’ll clarify which protection/insurance models exist at all — and which conditions are typical.",

          notes_title:"Module notes",
          notes_sub:"Everything stays on your device (LocalStorage).",
          n1:"A) Which type of “loss” was the club question about (price/handling/fraud)?",
          n2:"B) Who controlled the keys (me / provider)?",
          free_notes:"Free notes:",
          save_unsaved:"Not saved.",
          save_saved:"Saved (local).",
          btn_clear_page:"Clear this page notes",
          btn_clear_all:"Clear all course notes",
          btn_home:"Home",
          btn_next:"Next: Module 2",
          btn_print:"Print",
          ph_dots:"…",
          ph_notes:"Free notes …",
          confirm_clear_page:"Really clear this page notes?",
          confirm_clear_all:"Clear ALL course notes on this device?",
          alert_cleared:"Data cleared."
        }
      };

      function setLang(lang){
        const d = (lang === "en") ? i18n.en : i18n.de;
        document.documentElement.lang = (lang === "en") ? "en" : "de";
        safeSet(LANG_KEY, (lang === "en") ? "en" : "de");

        document.querySelectorAll("[data-i18n]").forEach(el=>{
          const key = el.getAttribute("data-i18n");
          if(key && Object.prototype.hasOwnProperty.call(d, key)) el.innerHTML = d[key];
        });
        document.querySelectorAll("[data-i18n-placeholder]").forEach(el=>{
          const key = el.getAttribute("data-i18n-placeholder");
          if(key && Object.prototype.hasOwnProperty.call(d, key)) el.setAttribute("placeholder", d[key]);
        });

        const btnDE = document.getElementById("btnDE");
        const btnEN = document.getElementById("btnEN");
        if(btnDE && btnEN){
          const isEN = (lang === "en");
          btnEN.setAttribute("aria-pressed", isEN ? "true" : "false");
          btnDE.setAttribute("aria-pressed", isEN ? "false" : "true");
        }
        refreshHintLang(lang);
      }

      document.getElementById("btnDE").addEventListener("click", ()=>setLang("de"));
      document.getElementById("btnEN").addEventListener("click", ()=>setLang("en"));

      const hintEl = document.getElementById("saveHint");
      let lastHintState = "unsaved";

      function refreshHintLang(lang){
        if(!hintEl) return;
        hintEl.textContent = (lastHintState === "saved")
          ? ((lang === "en") ? i18n.en.save_saved : i18n.de.save_saved)
          : ((lang === "en") ? i18n.en.save_unsaved : i18n.de.save_unsaved);
      }

      function restorePageData(){
        const obj = loadCourseObject();
        const page = obj.pages[PAGE_ID] || {};
        FIELD_IDS.forEach(id=>{
          const el = document.getElementById(id);
          if(el && Object.prototype.hasOwnProperty.call(page, id)) el.value = page[id] || "";
        });
      }

      let saveTimer = null;
      function scheduleSave(){
        const lang = safeGet(LANG_KEY) === "en" ? "en" : "de";
        lastHintState = "unsaved";
        refreshHintLang(lang);

        if(saveTimer) clearTimeout(saveTimer);
        saveTimer = setTimeout(function(){
          const obj = loadCourseObject();
          if(!obj.pages[PAGE_ID]) obj.pages[PAGE_ID] = {};
          const page = obj.pages[PAGE_ID];
          FIELD_IDS.forEach(id=>{
            const el = document.getElementById(id);
            if(el) page[id] = el.value || "";
          });
          saveCourseObject(obj);
          lastHintState = "saved";
          refreshHintLang(lang);
        }, 250);
      }

      FIELD_IDS.forEach(id=>{
        const el = document.getElementById(id);
        if(el){ el.addEventListener("input", scheduleSave); el.addEventListener("change", scheduleSave); }
      });

      document.getElementById("clearPage").addEventListener("click", function(){
        const lang = safeGet(LANG_KEY) === "en" ? "en" : "de";
        const msg = (lang === "en") ? i18n.en.confirm_clear_page : i18n.de.confirm_clear_page;
        if(!confirm(msg)) return;

        const obj = loadCourseObject();
        obj.pages[PAGE_ID] = {};
        saveCourseObject(obj);
        FIELD_IDS.forEach(id=>{ const el = document.getElementById(id); if(el) el.value=""; });
        lastHintState = "unsaved";
        refreshHintLang(lang);
      });

      document.getElementById("clearAll").addEventListener("click", function(){
        const lang = safeGet(LANG_KEY) === "en" ? "en" : "de";
        const msg = (lang === "en") ? i18n.en.confirm_clear_all : i18n.de.confirm_clear_all;
        if(!confirm(msg)) return;

        safeRemove(COURSE_KEY);
        FIELD_IDS.forEach(id=>{ const el = document.getElementById(id); if(el) el.value=""; });
        lastHintState = "unsaved";
        refreshHintLang(lang);
        alert((lang === "en") ? i18n.en.alert_cleared : i18n.de.alert_cleared);
      });

      const printBtn = document.getElementById("printBtn");
      if(printBtn) printBtn.addEventListener("click", ()=>window.print());

      /* nocache for internal links */
      (function(){
        const t = Date.now();
        document.querySelectorAll('a[data-internal]').forEach(a=>{
          try{
            const href = a.getAttribute('href');
            const u = new URL(href, location.href);
            u.searchParams.set('nocache', t);
            a.href = u.pathname + u.search + u.hash;
          }catch(e){}
        });
      })();

      (function init(){
        const preferred = safeGet(LANG_KEY);
        const lang = (preferred === "en") ? "en" : "de";
        setLang(lang);
        restorePageData();

        const obj = loadCourseObject();
        const page = obj.pages[PAGE_ID] || {};
        const hasAny = FIELD_IDS.some(id=> (page[id] || "").trim().length>0);
        lastHintState = hasAny ? "saved" : "unsaved";
        refreshHintLang(lang);
      })();

    })();
  </script>
</body>
</html>
