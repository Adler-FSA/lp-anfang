<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>WeFi – Zoom Call | FSA Akademie</title>
<meta name="description" content="WeFi Hörsaal: Zoom-Wochenplanung (wiederkehrend). Nächste Termine werden automatisch angezeigt. DE/EN Umschaltung integriert.">
<style>
  :root{
    --bg:#070a12;
    --bg2:#060815;
    --panel:rgba(10,14,26,.78);
    --panel2:rgba(10,14,26,.60);
    --border:rgba(120,160,255,.22);
    --txt:#eaf0ff;
    --muted:rgba(234,240,255,.72);
    --accent:#32e6ff;
    --accent2:#7c5cff;
    --ok:#3cff9a;
    --warn:#ffd166;
    --bad:#ff4d6d;
    --shadow:0 18px 60px rgba(0,0,0,.55);
    --glow:0 0 24px rgba(50,230,255,.16);
    --radius:16px;
    --maxw:1080px;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    color:var(--txt);
    background:
      radial-gradient(1200px 800px at 18% 8%, rgba(50,230,255,.15), transparent 55%),
      radial-gradient(900px 700px at 82% 18%, rgba(124,92,255,.16), transparent 60%),
      linear-gradient(180deg,var(--bg),var(--bg2));
    overflow-x:hidden;
  }
  a{color:inherit}

  .wrap{max-width:var(--maxw); margin:0 auto; padding:22px 18px 60px}
  .topbar{
    display:flex; align-items:center; justify-content:space-between;
    gap:14px;
    padding:12px 14px;
    border:1px solid var(--border);
    border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(10,14,26,.72), rgba(10,14,26,.42));
    box-shadow:var(--shadow);
    backdrop-filter: blur(10px);
  }
  .brand{display:flex; align-items:center; gap:10px; min-width:220px}
  .logo{
    width:34px; height:34px; border-radius:12px;
    display:grid; place-items:center;
    background: radial-gradient(circle at 30% 25%, rgba(50,230,255,.38), rgba(124,92,255,.22));
    border:1px solid rgba(255,255,255,.10);
    box-shadow: var(--glow);
  }
  .brand h1{
    font-size:14px; margin:0; letter-spacing:.2px; font-weight:750;
    line-height:1.15;
  }
  .brand .sub{display:block; font-size:12px; color:var(--muted); font-weight:600; margin-top:2px}

  nav{display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end}
  .chip{
    display:inline-flex; align-items:center; gap:8px;
    padding:8px 10px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.12);
    background:rgba(255,255,255,.04);
    text-decoration:none;
    font-size:12px;
    color:var(--txt);
    transition:transform .16s ease, background .16s ease, border-color .16s ease;
    user-select:none;
  }
  .chip:hover{transform:translateY(-1px); background:rgba(255,255,255,.06); border-color:rgba(50,230,255,.35)}
  .chip.active{border-color:rgba(50,230,255,.55); box-shadow:0 0 0 3px rgba(50,230,255,.10) inset}
  .chip svg{width:14px; height:14px; opacity:.9}

  .langbar{display:flex; gap:8px; align-items:center; justify-content:flex-end; min-width:160px}
  .btn{
    display:inline-flex; align-items:center; justify-content:center; gap:8px;
    padding:9px 12px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,.14);
    background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    color:var(--txt);
    cursor:pointer;
    font-weight:700;
    font-size:12px;
    box-shadow:0 10px 24px rgba(0,0,0,.22);
    transition:transform .16s ease, border-color .16s ease;
    text-decoration:none;
  }
  .btn:hover{transform:translateY(-1px); border-color:rgba(50,230,255,.38)}
  .btn.primary{
    border-color:rgba(50,230,255,.55);
    background:linear-gradient(180deg, rgba(50,230,255,.14), rgba(124,92,255,.10));
    box-shadow:0 0 0 3px rgba(50,230,255,.10) inset, 0 10px 24px rgba(0,0,0,.28);
  }
  .btn svg{width:14px; height:14px}

  .hero{
    margin-top:18px;
    padding:18px 16px;
    border-radius:var(--radius);
    border:1px solid var(--border);
    background:linear-gradient(180deg, rgba(10,14,26,.76), rgba(10,14,26,.46));
    box-shadow:var(--shadow);
  }
  .hero h2{margin:0 0 10px; font-size:22px; letter-spacing:.2px}
  .hero p{margin:0; color:var(--muted); line-height:1.55; font-weight:600}
  .hero .meta{
    margin-top:12px;
    display:flex; gap:10px; flex-wrap:wrap;
    align-items:center;
  }
  .pill{
    display:inline-flex; align-items:center; gap:8px;
    padding:8px 10px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.12);
    background:rgba(255,255,255,.04);
    color:var(--muted);
    font-size:12px;
    font-weight:850;
  }
  .pill b{color:var(--txt)}

  .grid{
    margin-top:16px;
    display:grid;
    grid-template-columns: repeat(12, 1fr);
    gap:14px;
  }
  .card{
    grid-column: span 12;
    padding:14px 14px;
    border-radius:var(--radius);
    border:1px solid rgba(255,255,255,.12);
    background:linear-gradient(180deg, rgba(10,14,26,.72), rgba(10,14,26,.42));
    box-shadow:0 14px 38px rgba(0,0,0,.35);
  }
  .card h3{margin:0 0 8px; font-size:16px}
  .card p{margin:0; color:var(--muted); line-height:1.55; font-weight:600}

  .note{
    margin-top:10px;
    padding:10px 12px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,.10);
    background:rgba(255,255,255,.03);
    color:var(--muted);
    font-weight:650;
    line-height:1.55;
  }
  .note b{color:var(--txt)}

  .list{
    display:grid;
    gap:12px;
    margin-top:10px;
  }

  .event{
    border:1px solid rgba(255,255,255,.12);
    background:
      radial-gradient(900px 220px at 10% 30%, rgba(50,230,255,.10), transparent 55%),
      linear-gradient(180deg, rgba(10,14,26,.74), rgba(10,14,26,.44));
    border-radius:18px;
    padding:14px 14px;
    box-shadow:0 16px 44px rgba(0,0,0,.30);
  }
  .event.next{
    border-color: rgba(50,230,255,.38);
    box-shadow:0 0 0 3px rgba(50,230,255,.10) inset, 0 16px 44px rgba(0,0,0,.34);
  }
  .event .head{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:12px;
    flex-wrap:wrap;
  }
  .event .title{
    font-weight:950;
    letter-spacing:.2px;
    font-size:16px;
    margin:0;
  }
  .event .when{
    display:flex; gap:8px; flex-wrap:wrap; align-items:center;
    color:var(--muted);
    font-weight:850;
    font-size:12px;
  }
  .badge{
    display:inline-flex; align-items:center; gap:6px;
    padding:7px 10px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.12);
    background:rgba(255,255,255,.04);
    color:rgba(234,240,255,.86);
    font-size:12px;
    font-weight:900;
  }
  .badge.ok{border-color: rgba(60,255,154,.28); background: rgba(60,255,154,.06)}
  .badge.warn{border-color: rgba(255,209,102,.28); background: rgba(255,209,102,.06)}

  .event .desc{
    margin-top:8px;
    color:var(--muted);
    font-weight:650;
    line-height:1.55;
  }
  .kv{
    margin-top:10px;
    display:grid;
    gap:6px;
    color:var(--muted);
    font-weight:650;
    font-size:13px;
  }
  .kv b{color:var(--txt)}
  .actions{
    display:flex; gap:10px; flex-wrap:wrap;
    margin-top:12px;
  }

  .footer{
    margin-top:20px;
    color:rgba(234,240,255,.55);
    font-size:12px;
    text-align:center;
  }

  #toast{
    margin-top:10px;
    display:none;
  }

  @media (min-width: 860px){
    .card.half{grid-column: span 6}
  }
</style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <svg viewBox="0 0 64 64" width="20" height="20" role="img" aria-label="WeFi">
            <defs>
              <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="#32e6ff" stop-opacity="1"/>
                <stop offset="1" stop-color="#7c5cff" stop-opacity="1"/>
              </linearGradient>
            </defs>
            <path d="M10 14h10l10 28 10-28h10L40 50H24L10 14z" fill="url(#g1)"/>
          </svg>
        </div>
        <div>
          <h1 data-i18n="brand.title">WeFi – Zoom Call</h1>
          <span class="sub" data-i18n="brand.sub">FSA Akademie · Wochenplanung</span>
        </div>
      </div>

      <nav aria-label="Navigation">
        <a class="chip" href="./wefi-hoersaal.html">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 3l9 8h-3v10h-5v-6H11v6H6V11H3l9-8z"/></svg>
          <span data-i18n="nav.base">Basis</span>
        </a>
        <a class="chip" href="./wefi-aufklaerung.html">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 2a10 10 0 100 20 10 10 0 000-20zm1 15h-2v-2h2v2zm2.1-7.75l-.9.92A3.5 3.5 0 0013 13h-2v-.5c0-.93.38-1.77 1-2.38l1.24-1.26A1.9 1.9 0 0012 6.5a2 2 0 00-2 2H8a4 4 0 018 0c0 1.1-.45 2.1-1.9 3.75z"/></svg>
          <span data-i18n="nav.education">Aufklärung</span>
        </a>
        <a class="chip" href="./wefi-glossar.html">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 5a3 3 0 013-3h12v18H7a3 3 0 00-3 3V5zm3-1a1 1 0 00-1 1v14.17A3 3 0 017 19h10V4H7z"/></svg>
          <span data-i18n="nav.glossary">Glossar</span>
        </a>
        <a class="chip" href="./wefi-video.html">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M8 5v14l11-7L8 5z"/></svg>
          <span data-i18n="nav.video">Video</span>
        </a>
        <a class="chip active" href="./wefi-zoom.html" aria-current="page">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M17 10.5V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-3.5l5 5v-13l-5 5z"/></svg>
          <span data-i18n="nav.zoom">Zoom Call</span>
        </a>
      </nav>

      <div class="langbar">
        <button class="btn" type="button" id="btnDE" aria-label="Deutsch">DE</button>
        <button class="btn" type="button" id="btnEN" aria-label="English">EN</button>
        <a class="btn primary" href="https://www.wefi.co/" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42 9.3-9.29H14V3z"/><path fill="currentColor" d="M5 5h6v2H7v10h10v-4h2v6H5V5z"/></svg>
          <span data-i18n="btn.openOfficial">WeFi öffnen</span>
        </a>
      </div>
    </div>

    <section class="hero">
      <h2 data-i18n="hero.h">Zoom-Wochenplanung (wiederkehrend)</h2>
      <p data-i18n="hero.p">
        Die Termine werden automatisch fortgeschrieben: Wenn ein Termin vorbei ist, erscheint automatisch der nächste passende Termin (nächste Woche).
      </p>
      <div class="meta">
        <span class="pill"><span data-i18n="meta.now">Jetzt:</span> <b id="nowTxt">–</b></span>
        <span class="pill"><span data-i18n="meta.tz">Zeitzone:</span> <b id="tzTxt">–</b></span>
        <span class="pill"><span data-i18n="meta.next">Nächster Termin:</span> <b id="nextTxt">–</b></span>
      </div>

      <div class="note" id="toast"></div>
    </section>

    <div class="grid">
      <section class="card half">
        <h3 data-i18n="next.h">Als Nächstes</h3>
        <p data-i18n="next.p">Der nächste bevorstehende Call wird hier automatisch hervorgehoben.</p>
        <div id="nextMount" style="margin-top:10px"></div>
      </section>

      <section class="card half">
        <h3 data-i18n="week.h">Alle kommenden Termine</h3>
        <p data-i18n="week.p">Sortiert nach Datum/Uhrzeit (automatisch).</p>
        <div class="list" id="listMount"></div>

        <div class="note" style="margin-top:12px">
          <b data-i18n="disclaimer.h">Hinweis (FSA):</b>
          <span data-i18n="disclaimer.p">Dies sind externe Zoom-Termine. Bitte prüfe Uhrzeit/Details beim Veranstalter. Bildungs-Content, keine Anlageberatung.</span>
        </div>
      </section>
    </div>

    <div class="footer">
      <span data-i18n="footer.txt">FSA Akademie · Hörsaal / WeFi · Stand: 2025-12 · Lokal, ohne Tracking.</span>
    </div>
  </div>

<script>
(function(){
  // Wiederkehrende Wochenplanung (angelehnt an 15.12.2025–21.12.2025), rollt automatisch weiter.
  // Wochentage: 1=Montag ... 6=Samstag (JS: 0=So ... 6=Sa)
  const EVENTS = [
    {
      id:"mon_power",
      dow:1,
      time:"20:00",
      tag:"limited",
      title:{de:"Power Talk mit Werner", en:"Power Talk with Werner"},
      lines:{
        de:[
          "Begrenzte Plätze",
          "Keine Präsentation",
          "HEUTIGE THEMEN:",
          "– Wichtige News aus Frankfurt für Euren Erfolg in 2026"
        ],
        en:[
          "Limited seats",
          "No presentation",
          "TOPICS:",
          "– Important news from Frankfurt for your success in 2026"
        ]
      },
      moderator:{de:"Moderator: KOL Werner Goldwert", en:"Host: KOL Werner Goldwert"},
      link:"https://us02web.zoom.us/j/4742491322?pwd=ZWZLeUxFUXZUWnlBeXorOWlGUkJmZz09&omn=81599231486",
      meetingId:"474 249 1322",
      passcode:"Gold"
    },
    {
      id:"tue_new",
      dow:2,
      time:"19:00",
      tag:"new",
      title:{de:"WeFi Beyond Banking (für neue Interessenten)", en:"WeFi Beyond Banking (for new prospects)"},
      lines:{
        de:["Unser nächster Zoomcall für neue Interessenten."],
        en:["Next Zoom call for new prospects."]
      },
      moderator:{de:"Moderator: Marco P. & Jörg K.", en:"Hosts: Marco P. & Jörg K."},
      link:"https://us06web.zoom.us/j/7570211652?pwd=cnfUbbuN6aJCFgT7tbr3EFVjeJnBX5.1"
    },
    {
      id:"thu_active",
      dow:4,
      time:"21:30",
      tag:"active",
      title:{de:"Call für aktive Member / Kunden / Investoren / Team Builder", en:"Call for active members / customers / investors / team builders"},
      lines:{
        de:["Keine Präsentation", "FAQ, Neuigkeiten für Member/KOLs"],
        en:["No presentation", "FAQ and updates for members/KOLs"]
      },
      moderator:{de:"Moderatorin: KOL Almut M", en:"Host: KOL Almut M"},
      link:"http://us06web.zoom.us/j/4378687597"
    },
    {
      id:"fri_new",
      dow:5,
      time:"19:00",
      tag:"new",
      title:{de:"WeFi Beyond Banking (für neue Interessenten)", en:"WeFi Beyond Banking (for new prospects)"},
      lines:{
        de:["Unser nächster Zoomcall für neue Interessenten."],
        en:["Next Zoom call for new prospects."]
      },
      moderator:{de:"Moderator: Marco P. & Thomas H.", en:"Hosts: Marco P. & Thomas H."},
      link:"https://us06web.zoom.us/j/7570211652?pwd=cnfUbbuN6aJCFgT7tbr3EFVjeJnBX5.1"
    },
    {
      id:"sat_team",
      dow:6,
      time:"09:00",
      tag:"team",
      title:{de:"Für bestehende Community Partner (Aufwind für Team Builder)", en:"For existing community partners (boost for team builders)"},
      lines:{
        de:["Für bereits bestehende Community Partner", "Aufwind für Team Builder"],
        en:["For existing community partners", "Boost for team builders"]
      },
      moderator:{de:"Moderatorin: Almut", en:"Host: Almut"},
      link:"http://us06web.zoom.us/j/4378687597"
    },
    {
      id:"sat_new",
      dow:6,
      time:"10:00",
      tag:"new",
      title:{de:"WeFi Präsentation (für neue Interessenten)", en:"WeFi presentation (for new prospects)"},
      lines:{
        de:[
          "Zoomcall für neue Interessenten.",
          "WeFi Präsentation zur ersten WEB3 dezentralen On-Chain Bank (DEOBank).",
          "Präsentation & Einführung"
        ],
        en:[
          "Zoom call for new prospects.",
          "WeFi presentation about the WEB3 decentralized on-chain bank (DEOBank).",
          "Presentation & introduction"
        ]
      },
      moderator:{de:"Moderatorin: Almut", en:"Host: Almut"},
      link:"http://us06web.zoom.us/j/4378687597"
    }
  ];

  const I18N = {
    de:{
      "brand.title":"WeFi – Zoom Call",
      "brand.sub":"FSA Akademie · Wochenplanung",
      "nav.base":"Basis",
      "nav.education":"Aufklärung",
      "nav.glossary":"Glossar",
      "nav.video":"Video",
      "nav.zoom":"Zoom Call",
      "btn.openOfficial":"WeFi öffnen",
      "hero.h":"Zoom-Wochenplanung (wiederkehrend)",
      "hero.p":"Die Termine werden automatisch fortgeschrieben: Wenn ein Termin vorbei ist, erscheint automatisch der nächste passende Termin (nächste Woche).",
      "meta.now":"Jetzt:",
      "meta.tz":"Zeitzone:",
      "meta.next":"Nächster Termin:",
      "next.h":"Als Nächstes",
      "next.p":"Der nächste bevorstehende Call wird hier automatisch hervorgehoben.",
      "week.h":"Alle kommenden Termine",
      "week.p":"Sortiert nach Datum/Uhrzeit (automatisch).",
      "labels.date":"Datum",
      "labels.time":"Uhrzeit",
      "labels.mod":"Moderation",
      "labels.meeting":"Meeting-ID",
      "labels.pass":"Kenncode",
      "btn.open":"Zoom öffnen",
      "btn.copy":"Link kopieren",
      "toast.copied":"Kopiert.",
      "toast.fail":"Konnte nicht kopieren.",
      "tag.limited":"Begrenzte Plätze",
      "tag.new":"Neue Interessenten",
      "tag.active":"Aktive Member",
      "tag.team":"Community Partner",
      "disclaimer.h":"Hinweis (FSA):",
      "disclaimer.p":"Dies sind externe Zoom-Termine. Bitte prüfe Uhrzeit/Details beim Veranstalter. Bildungs-Content, keine Anlageberatung.",
      "footer.txt":"FSA Akademie · Hörsaal / WeFi · Stand: 2025-12 · Lokal, ohne Tracking."
    },
    en:{
      "brand.title":"WeFi – Zoom Call",
      "brand.sub":"FSA Academy · Weekly schedule",
      "nav.base":"Basics",
      "nav.education":"Education",
      "nav.glossary":"Glossary",
      "nav.video":"Video",
      "nav.zoom":"Zoom Call",
      "btn.openOfficial":"Open WeFi",
      "hero.h":"Zoom weekly schedule (recurring)",
      "hero.p":"Dates roll forward automatically: when an event is over, the next matching slot (next week) is shown automatically.",
      "meta.now":"Now:",
      "meta.tz":"Time zone:",
      "meta.next":"Next event:",
      "next.h":"Up next",
      "next.p":"The next upcoming call is highlighted automatically.",
      "week.h":"All upcoming events",
      "week.p":"Sorted by date/time (automatic).",
      "labels.date":"Date",
      "labels.time":"Time",
      "labels.mod":"Host",
      "labels.meeting":"Meeting ID",
      "labels.pass":"Passcode",
      "btn.open":"Open Zoom",
      "btn.copy":"Copy link",
      "toast.copied":"Copied.",
      "toast.fail":"Copy failed.",
      "tag.limited":"Limited seats",
      "tag.new":"New prospects",
      "tag.active":"Active members",
      "tag.team":"Community partners",
      "disclaimer.h":"Note (FSA):",
      "disclaimer.p":"These are external Zoom events. Please confirm time/details with the organizer. Educational content only, no investment advice.",
      "footer.txt":"FSA Academy · Lecture Hall / WeFi · Status: 2025-12 · Local, no tracking."
    }
  };

  // --- helpers
  function pad2(n){ return String(n).padStart(2,"0"); }
  function parseTimeHHMM(s){
    const m = String(s||"").match(/^(\d{1,2}):(\d{2})$/);
    if(!m) return {h:0, mi:0};
    return {h:parseInt(m[1],10), mi:parseInt(m[2],10)};
  }

  // Return next occurrence of dow+time >= now, recurring weekly
  function nextOccurrence(ev, now){
    const {h, mi} = parseTimeHHMM(ev.time);
    const d = new Date(now.getTime());

    // JS getDay(): 0=Sun ... 6=Sat
    const target = ev.dow % 7; // ev.dow: 1..6
    const cur = d.getDay();

    let add = target - cur;
    if(add < 0) add += 7;

    const cand = new Date(d.getFullYear(), d.getMonth(), d.getDate() + add, h, mi, 0, 0);

    if(cand.getTime() < now.getTime()){
      // next week
      cand.setDate(cand.getDate() + 7);
    }
    return cand;
  }

  function formatDateTime(dt, lang){
    if(lang==="en"){
      // e.g. Tue, Dec 16, 2025 · 19:00
      const opt = {weekday:"short", year:"numeric", month:"short", day:"2-digit"};
      const date = dt.toLocaleDateString(undefined, opt);
      const time = pad2(dt.getHours()) + ":" + pad2(dt.getMinutes());
      return date + " · " + time;
    }
    // de: Di., 16.12.2025 · 19:00
    const opt = {weekday:"short", year:"numeric", month:"2-digit", day:"2-digit"};
    const date = dt.toLocaleDateString(undefined, opt);
    const time = pad2(dt.getHours()) + ":" + pad2(dt.getMinutes());
    return date + " · " + time;
  }

  function formatDateOnly(dt, lang){
    if(lang==="en"){
      return dt.toLocaleDateString(undefined, {weekday:"long", year:"numeric", month:"long", day:"2-digit"});
    }
    return dt.toLocaleDateString(undefined, {weekday:"long", year:"numeric", month:"2-digit", day:"2-digit"});
  }

  function showToast(msg){
    const t = document.getElementById("toast");
    t.textContent = msg;
    t.style.display = "block";
    clearTimeout(showToast._t);
    showToast._t = setTimeout(()=>{ t.style.display="none"; }, 1800);
  }

  async function copyText(text, lang){
    try{
      await navigator.clipboard.writeText(text);
      showToast((lang==="de") ? I18N.de["toast.copied"] : I18N.en["toast.copied"]);
    }catch(e){
      showToast((lang==="de") ? I18N.de["toast.fail"] : I18N.en["toast.fail"]);
    }
  }

  function tagLabel(ev, lang){
    const dict = I18N[lang] || I18N.de;
    if(ev.tag==="limited") return dict["tag.limited"];
    if(ev.tag==="new") return dict["tag.new"];
    if(ev.tag==="active") return dict["tag.active"];
    if(ev.tag==="team") return dict["tag.team"];
    return "";
  }
  function tagClass(ev){
    if(ev.tag==="limited") return "warn";
    if(ev.tag==="new") return "ok";
    if(ev.tag==="active") return "";
    if(ev.tag==="team") return "";
    return "";
  }

  // --- rendering
  function renderEvent(ev, occ, lang, isNext){
    const dict = I18N[lang] || I18N.de;

    const wrap = document.createElement("div");
    wrap.className = "event" + (isNext ? " next" : "");

    const head = document.createElement("div");
    head.className = "head";

    const left = document.createElement("div");
    const title = document.createElement("div");
    title.className = "title";
    title.textContent = (ev.title && ev.title[lang]) ? ev.title[lang] : (ev.title && ev.title.de) ? ev.title.de : "Zoom";
    left.appendChild(title);

    const when = document.createElement("div");
    when.className = "when";
    const badge = document.createElement("span");
    badge.className = "badge " + tagClass(ev);
    badge.innerHTML = '<svg viewBox="0 0 24 24" width="14" height="14" aria-hidden="true"><path fill="currentColor" d="M12 2a10 10 0 100 20 10 10 0 000-20zm1 11H7v-2h6V7h2v6z"/></svg>' + tagLabel(ev, lang);
    const dt = document.createElement("span");
    dt.innerHTML = '<b>' + formatDateTime(occ, lang) + '</b>';
    when.appendChild(badge);
    when.appendChild(dt);

    head.appendChild(left);
    head.appendChild(when);

    const desc = document.createElement("div");
    desc.className = "desc";
    const lines = (ev.lines && ev.lines[lang]) ? ev.lines[lang] : (ev.lines && ev.lines.de) ? ev.lines.de : [];
    desc.textContent = lines.join(" ");

    const kv = document.createElement("div");
    kv.className = "kv";

    const row1 = document.createElement("div");
    row1.innerHTML = '<b>' + dict["labels.date"] + ':</b> ' + formatDateOnly(occ, lang);
    const row2 = document.createElement("div");
    row2.innerHTML = '<b>' + dict["labels.time"] + ':</b> ' + pad2(occ.getHours()) + ":" + pad2(occ.getMinutes());

    const row3 = document.createElement("div");
    const mod = (ev.moderator && ev.moderator[lang]) ? ev.moderator[lang] : (ev.moderator && ev.moderator.de) ? ev.moderator.de : "";
    row3.innerHTML = '<b>' + dict["labels.mod"] + ':</b> ' + (mod || "—");

    kv.appendChild(row1);
    kv.appendChild(row2);
    kv.appendChild(row3);

    if(ev.meetingId){
      const r = document.createElement("div");
      r.innerHTML = '<b>' + dict["labels.meeting"] + ':</b> ' + ev.meetingId;
      kv.appendChild(r);
    }
    if(ev.passcode){
      const r = document.createElement("div");
      r.innerHTML = '<b>' + dict["labels.pass"] + ':</b> ' + ev.passcode;
      kv.appendChild(r);
    }

    const actions = document.createElement("div");
    actions.className = "actions";

    const openBtn = document.createElement("a");
    openBtn.className = "btn primary";
    openBtn.href = ev.link;
    openBtn.target = "_blank";
    openBtn.rel = "noopener";
    openBtn.innerHTML = '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42 9.3-9.29H14V3z"/><path fill="currentColor" d="M5 5h6v2H7v10h10v-4h2v6H5V5z"/></svg><span>' + dict["btn.open"] + '</span>';

    const copyBtn = document.createElement("button");
    copyBtn.type = "button";
    copyBtn.className = "btn";
    copyBtn.innerHTML = '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M16 1H6a2 2 0 00-2 2v12h2V3h10V1zm3 4H10a2 2 0 00-2 2v14a2 2 0 002 2h9a2 2 0 002-2V7a2 2 0 00-2-2zm0 16H10V7h9v14z"/></svg><span>' + dict["btn.copy"] + '</span>';
    copyBtn.addEventListener("click", ()=>copyText(ev.link, lang));

    actions.appendChild(openBtn);
    actions.appendChild(copyBtn);

    wrap.appendChild(head);
    wrap.appendChild(desc);
    wrap.appendChild(kv);
    wrap.appendChild(actions);

    return wrap;
  }

  function applyI18n(lang){
    document.documentElement.lang = (lang==="de" ? "de" : "en");
    const dict = I18N[lang] || I18N.de;
    document.querySelectorAll("[data-i18n]").forEach(el=>{
      const k = el.getAttribute("data-i18n");
      if(dict[k] != null) el.textContent = dict[k];
    });
    document.title = (lang==="de") ? "WeFi – Zoom Call | FSA Akademie" : "WeFi – Zoom Call | FSA Academy";
  }

  function render(lang){
    const now = new Date();
    const dict = I18N[lang] || I18N.de;

    // header meta
    const nowTxt = document.getElementById("nowTxt");
    const tzTxt = document.getElementById("tzTxt");
    nowTxt.textContent = formatDateTime(now, lang);
    try{
      tzTxt.textContent = Intl.DateTimeFormat().resolvedOptions().timeZone || "Local";
    }catch(e){
      tzTxt.textContent = "Local";
    }

    // compute next occurrences
    const upcoming = EVENTS.map(ev=>{
      const occ = nextOccurrence(ev, now);
      return {ev, occ};
    }).sort((a,b)=>a.occ.getTime()-b.occ.getTime());

    const next = upcoming[0];
    document.getElementById("nextTxt").textContent = next ? formatDateTime(next.occ, lang) : "—";

    const nextMount = document.getElementById("nextMount");
    nextMount.innerHTML = "";
    if(next){
      nextMount.appendChild(renderEvent(next.ev, next.occ, lang, true));
    }

    const listMount = document.getElementById("listMount");
    listMount.innerHTML = "";
    upcoming.forEach((x, idx)=>{
      listMount.appendChild(renderEvent(x.ev, x.occ, lang, idx===0));
    });
  }

  let currentLang = (localStorage.getItem("fsa_lang") || "de").toLowerCase();
  if(currentLang!=="de" && currentLang!=="en") currentLang="de";

  document.getElementById("btnDE").addEventListener("click", ()=>{
    currentLang="de"; localStorage.setItem("fsa_lang","de");
    applyI18n("de"); render("de");
  });
  document.getElementById("btnEN").addEventListener("click", ()=>{
    currentLang="en"; localStorage.setItem("fsa_lang","en");
    applyI18n("en"); render("en");
  });

  applyI18n(currentLang);
  render(currentLang);

  // Auto-refresh: wenn Uhrzeit vorbei ist, springt es automatisch auf nächste Woche
  setInterval(()=>render(currentLang), 60 * 1000);
})();
</script>
</body>
</html>
