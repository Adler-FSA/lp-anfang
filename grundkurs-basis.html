<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FSA Akademie – Grundkurs 1: Basis</title>

  <style>
    :root {
      --gold:#d4af37; --ink:#0b0f14; --panel:rgba(17,24,39,.7);
      --line:rgba(212,175,55,.35); --muted:#a3a3a3;
    }
    html,body{margin:0;padding:0;background:var(--ink);color:#e5e7eb;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
    main{max-width:1040px;margin:0 auto;padding:0 16px 100px}
    .sp-3cm{margin-top:3cm}.sp-15{margin-top:1.5cm}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:14px;
      padding:1.4rem;box-shadow:0 0 22px rgba(212,175,55,.08)}
    h1,h2,h3{color:var(--gold);margin:0 0 .6rem 0}
    p{color:var(--muted);line-height:1.6;margin:.4rem 0}
    #quiz-root{margin-top:1.5cm}

    /* ░░ Baustein 03 – Quiz Layout ░░ */
    #quiz-block {
      max-width: 700px;
      margin: 0 auto;
      background: #0f172a;
      padding: 2rem;
      border-radius: 10px;
      color: #e5e7eb;
      box-shadow: 0 0 15px rgba(212, 175, 55, 0.25);
    }
    #quiz-progress {
      background: #1e293b;
      height: 6px;
      width: 100%;
      border-radius: 4px;
      margin-bottom: 1rem;
      overflow: hidden;
    }
    #quiz-progress-bar {
      background: var(--gold);
      width: 0%;
      height: 100%;
      transition: width 0.3s ease;
    }
    #quiz-question-info {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      color: var(--gold);
      margin-bottom: 0.5rem;
    }
    #quiz-question-text {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }
    .quiz-answer {
      display: flex;
      align-items: center;
      background: #1e293b;
      border: 1px solid transparent;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 0.75rem;
      transition: all 0.2s ease;
    }
    .quiz-answer:hover {
      border-color: var(--gold);
    }
    .quiz-label {
      display: inline-block;
      width: 24px;
      height: 24px;
      background: var(--gold);
      color: #0f172a;
      font-weight: 700;
      text-align: center;
      line-height: 24px;
      border-radius: 50%;
      margin-right: 10px;
    }
    .quiz-answer.selected {
      border-color: var(--gold);
      background: #0b0f14;
    }
    #quiz-footer {
      text-align: right;
      margin-top: 1rem;
    }
    #quiz-next-btn {
      background: #2563eb;
      color: #fff;
      border: none;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s ease;
    }
    #quiz-next-btn:hover:enabled {
      background: #1d4ed8;
    }
    #quiz-next-btn:disabled {
      background: #475569;
      cursor: not-allowed;
    }
  </style>
</head>

<body>
  <main>
    <section class="sp-3cm card" id="intro">
      <h1>Grundkurs 1 – Finanzielle Souveränität (Basis)</h1>
      <p>Dieser Kurs legt dein Fundament: Verständnis von Geldflüssen, Verantwortung und Freiheit.</p>
    </section>

    <div class="sp-15"></div>

    <section id="kursmenu-anchor"></section>
    <div class="sp-15"></div>

    <!-- ░░ Baustein 03 – Quiz-Layout eingebunden ░░ -->
    <section id="quiz-root">
      <section id="quiz-block">
        <div id="quiz-header">
          <div id="quiz-progress">
            <div id="quiz-progress-bar"></div>
          </div>
          <div id="quiz-question-info">
            <span id="quiz-question-number"></span>
            <span id="quiz-question-total"></span>
          </div>
          <h2 id="quiz-question-text"></h2>
        </div>

        <div id="quiz-answers"></div>

        <div id="quiz-footer">
          <button id="quiz-next-btn" disabled data-i18n="nextQuestion">Nächste Frage</button>
        </div>
      </section>
    </section>
  </main>

  <!-- ╔══════════════╗ Basis-Module ╚══════════════╗ -->
  <script src="library/js/template.js" defer></script>
  <script src="library/js/menu.js" defer></script>
  <script src="library/js/lang-switcher.js" defer></script>
  <script src="library/js/music-button.js" defer></script>
  <script src="library/js/grundkurs-menu.js" defer></script>

  <!-- ╔══════════════╗ Kurs-Bausteine ╚══════════════╗ -->
  <script src="library/js/text/block-01-intro.js" defer></script>
  <script src="library/js/text/block-03-course.js" defer></script>
  <script src="library/js/text/block-03-engine.js" defer></script>
  <script src="library/js/text/block-04-engine.js" defer></script>
  <script src="library/js/text/block-04-engine-slideshow.js" defer></script>
  <script src="library/js/text/block-05-summary.js" defer></script>

  <!-- ╔══════════════╗ Quiz-Layout Script ╚══════════════╗ -->
  <script>
    (function () {
      const lang = document.documentElement.lang === 'en' ? 'en' : 'de';
      const quizData = window.block03_course[lang].questions;
      const totalQuestions = quizData.length;

      let currentIndex = 0;
      let selectedAnswer = null;

      const questionNumber = document.getElementById('quiz-question-number');
      const questionTotal = document.getElementById('quiz-question-total');
      const questionText = document.getElementById('quiz-question-text');
      const answersContainer = document.getElementById('quiz-answers');
      const nextButton = document.getElementById('quiz-next-btn');
      const progressBar = document.getElementById('quiz-progress-bar');

      questionTotal.textContent = ` / ${totalQuestions}`;

      function loadQuestion(index) {
        const current = quizData[index];
        questionNumber.textContent = `Frage ${index + 1}`;
        questionText.textContent = current.q;

        answersContainer.innerHTML = '';
        const labels = ['A', 'B', 'C'];

        current.a.forEach((answer, i) => {
          const answerEl = document.createElement('div');
          answerEl.classList.add('quiz-answer');
          answerEl.dataset.correct = answer.correct;

          const labelEl = document.createElement('span');
          labelEl.classList.add('quiz-label');
          labelEl.textContent = labels[i];

          const textEl = document.createElement('span');
          textEl.textContent = answer.text;

          answerEl.appendChild(labelEl);
          answerEl.appendChild(textEl);
          answersContainer.appendChild(answerEl);

          answerEl.addEventListener('click', () => {
            document.querySelectorAll('.quiz-answer').forEach(a => a.classList.remove('selected'));
            answerEl.classList.add('selected');
            selectedAnswer = answerEl;
            nextButton.disabled = false;
          });
        });

        updateProgress(index);
        nextButton.disabled = true;
        selectedAnswer = null;
      }

      function updateProgress(index) {
        const percent = (index / totalQuestions) * 100;
        progressBar.style.width = `${percent}%`;
      }

      nextButton.addEventListener('click', () => {
        if (!selectedAnswer) return;
        currentIndex++;
        if (currentIndex < totalQuestions) {
          loadQuestion(currentIndex);
        } else {
          progressBar.style.width = '100%';
          questionText.textContent = '✅ Quiz abgeschlossen';
          answersContainer.innerHTML = '';
          nextButton.style.display = 'none';
        }
      });

      loadQuestion(currentIndex);
    })();
  </script>

  <!-- ╔══════════════╗ Template-Loader ╚══════════════╗ -->
  <script src="library/js/template-loader.js" defer></script>

  <!-- ╔══════════════╗ Automatischer Kursstart ╚══════════════╗ -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const tryStart = () => {
        if (typeof window.startCourse === "function") {
          console.log("🚀 Auto-Start: Grundkurs Basis beginnt.");
          window.startCourse();
        } else {
          setTimeout(tryStart, 300);
        }
      };
      tryStart();
    });
  </script>
</body>
</html>
