<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FSA Akademie â€“ Grundkurs 1: Basis</title>

  <style>
    :root {
      --gold: #d4af37;
      --ink: #0b0f14;
      --panel: rgba(17, 24, 39, 0.7);
      --line: rgba(212,175,55,0.35);
      --muted: #a3a3a3;
    }

    html, body {
      margin: 0;
      padding: 0;
      background: var(--ink);
      color: #e5e7eb;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    }

    main {
      max-width: 1040px;
      margin: 0 auto;
      padding: 0 16px 100px;
    }

    .card {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 1.4rem;
      box-shadow: 0 0 22px rgba(212,175,55,0.08);
      margin-bottom: 1.5cm;
    }

    h1, h2, h3 {
      color: var(--gold);
      margin: 0 0 .6rem 0;
    }

    p {
      color: var(--muted);
      line-height: 1.6;
      margin: .4rem 0;
    }

    /* â–‘â–‘ AbstÃ¤nde â–‘â–‘ */
    #intro { margin-top: 3cm; }             /* Intro unter dem TopmenÃ¼ */
    #kursmenu-anchor { margin-top: 2cm; }   /* MenÃ¼ unter dem Intro */

    /* === Abstand zwischen Grundkurs-MenÃ¼ und Kursblock (exakt 1 cm) === */
    #kursmenu-anchor { margin-top: 0; } /* kein zusÃ¤tzlicher Top-Abstand des Ankers */
    #kursmenu-anchor .grundkurs-menu { margin-bottom: 1cm !important; } /* 1 cm unter dem MenÃ¼ */
    #quiz-root { margin-top: 0 !important; padding-top: 0 !important; } /* Kursblock direkt anschlieÃŸen */
    #quiz-root > :first-child { margin-top: 0 !important; } /* falls der erste Wrapper eigenen Top-Margin hat */

    /* â–‘â–‘ Mobile Drehhinweis â–‘â–‘ */
    #rotateHint {
      display: none;
      text-align: center;
      color: var(--gold);
      margin: 1rem 0;
      font-size: 0.9rem;
      opacity: 0.85;
    }

    @media (orientation: portrait) and (max-width: 900px) {
      #rotateHint { display: block; }
    }
  </style>
</head>

<body>
  <main>

    <!-- â–‘â–‘ EinfÃ¼hrung (wird per block-01-intro.js dynamisch gerendert) â–‘â–‘ -->
    <section id="intro" class="card"></section>

    <div id="rotateHint">ðŸ“± FÃ¼r bessere Ansicht bitte das Smartphone quer drehen.</div>

    <!-- â–‘â–‘ Grundkurs-MenÃ¼ â–‘â–‘ -->
    <section id="kursmenu-anchor"></section>

    <!-- â–‘â–‘ Kursinhalt â–‘â–‘ -->
    <section id="quiz-root"></section>

  </main>

  <!-- â–‘â–‘ FSA Basis-Module â–‘â–‘ -->
  <script src="library/js/menu.js"></script>
  <script src="library/js/lang-switcher.js"></script>
  <script src="library/js/music-button.js"></script>

  <!-- â–‘â–‘ Kurs-Bausteine â–‘â–‘ -->
  <script src="library/js/text/block-01-intro.js"></script>
  <script src="library/js/grundkurs-menu.js"></script>
  <script src="library/js/text/block-03-course.js"></script>
  <script src="library/js/back-to-home.js"></script>

<style>
  /* Einheitliche, zentrierte Kurs-Ãœberschrift Ã¼ber dem Fragenblock */
  #quiz-root .fsa-course-title-centered{
    text-align:center !important;
    color: var(--gold);
    font-weight:600;
    font-size: clamp(1.2rem, 2vw, 1.6rem);
    margin: 0 0 .8rem 0;
  }
</style>

<script>
(function(){
  function getLang(){ return localStorage.getItem("fsa_lang") || "de"; }

  function ensureCenteredCourseTitle(){
    var root = document.getElementById("quiz-root");
    if(!root) return;

    // hole den Kurstitel aus dem bereits geladenen block03_course
    var lang = getLang();
    var data = (window.block03_course && (window.block03_course[lang] || window.block03_course.de)) || null;
    var title = data && data.title ? String(data.title).trim() : "";

    if(!title) return;

    // 1) Versuche die bestehende Ãœberschrift zu finden und zu zentrieren
    var kids = Array.from(root.children);
    var found = null;

    for(var i=0;i<kids.length;i++){
      var el = kids[i];
      // Kandidaten: kurze, einzeilige BlÃ¶cke ohne viele Kindelemente,
      // deren Text den Kurstitel enthÃ¤lt
      var txt = (el.textContent || "").trim();
      if(txt === title || (txt.includes(title) && el.childElementCount <= 2)){
        found = el;
        break;
      }
    }

    if(found){
      found.classList.add("fsa-course-title-centered");
      found.textContent = title; // normalize
      // Stelle sicher, dass die Ãœberschrift oberhalb des Kartenblocks steht
      if(found !== root.firstElementChild){
        root.insertBefore(found, root.firstElementChild);
      }
      return;
    }

    // 2) Fallback: eigene Ãœberschrift injizieren (wenn keine gefunden wurde)
    var existing = document.getElementById("fsaCourseTitle");
    if(!existing){
      existing = document.createElement("div");
      existing.id = "fsaCourseTitle";
      existing.className = "fsa-course-title-centered";
      root.insertBefore(existing, root.firstChild);
    }
    existing.textContent = title;
  }

  // beim ersten Render (nachdem die Kursdatei gezeichnet hat)
  document.addEventListener("DOMContentLoaded", function(){
    // kleiner Puffer, damit block-03-course.js fertig ist
    setTimeout(ensureCenteredCourseTitle, 200);

    // reagiert auf Language-Switcher (Custom Event aus deinem lang-switcher.js)
    document.addEventListener("fsa:lang-change", function(){ 
      setTimeout(ensureCenteredCourseTitle, 50); 
    });

    // Fallback: auch auf Storage-Ã„nderungen reagieren
    window.addEventListener("storage", function(e){
      if(e.key === "fsa_lang") setTimeout(ensureCenteredCourseTitle, 50);
    });

    // Falls der Kursblock bei dir neu aufgebaut wird (Fragenwechsel/Neurender),
    // halten wir die Ãœberschrift stabil zentriert.
    var root = document.getElementById("quiz-root");
    if(root){
      var mo = new MutationObserver(function(){ ensureCenteredCourseTitle(); });
      mo.observe(root, { childList:true, subtree:false });
    }
  });
})();
</script></body>
</html>
