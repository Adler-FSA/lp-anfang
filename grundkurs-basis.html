<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Grundkurs 1 – Finanzielle Souveränität (Basis)</title>
<style>
  :root{
    --bg:#0b0f14; --panel:#121821; --ink:#e5e7eb; --muted:#9aa3b8;
    --gold:#d4af37; --blue:#2f80ed; --ok:#10b981; --bad:#ef4444; --line:#1f2937;
  }
  html,body{margin:0;background:radial-gradient(1200px 600px at 50% -10%, #151a22 0%, #0b0f14 55%, #080b10 100%);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  .wrap{max-width:1000px;margin:28px auto;padding:0 16px}

  /* Top-Bar */
  .top{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:4px 0 18px}
  .head{display:flex;align-items:center;gap:12px}
  .head h1{margin:0;font-size:clamp(20px,3.2vw,28px);font-weight:800;letter-spacing:.2px}
  .pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:#0f1620;border:1px solid #203040}
  .ico{width:22px;height:22px;vertical-align:-4px}
  .controls{display:flex;align-items:center;gap:8px}
  .lang{background:#0f1620;border:1px solid #203040;color:#e5e7eb;border-radius:10px;padding:8px 10px;cursor:pointer}
  .music{background:#0f1620;border:1px solid #203040;color:#e5e7eb;border-radius:10px;padding:8px 10px;cursor:pointer}

  /* Intro */
  .intro{margin:10px 0 18px;color:var(--muted);line-height:1.55}
  .intro strong{color:var(--gold)}

  /* Karte */
  .card{background:linear-gradient(180deg,#121821,#0e141c);border:1px solid rgba(212,175,55,.22);border-radius:16px;box-shadow:0 26px 90px rgba(0,0,0,.35), 0 0 0 1px rgba(47,128,237,.08) inset;padding:18px 18px 14px}
  .q-head{display:flex;justify-content:space-between;align-items:center;gap:12px}
  .q-title{font-size:clamp(18px,2.4vw,22px);margin:6px 0 0;font-weight:700}
  .counter{color:var(--muted);font-weight:700}

  /* Fortschritt */
  .bar{height:10px;background:#0f1620;border:1px solid #1a2430;border-radius:999px;overflow:hidden;margin:10px 0 18px}
  .bar > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#2f80ed,#56ccf2);transition:width .35s ease}

  /* Antworten */
  .opts{display:grid;gap:10px;margin-top:6px}
  .opt{position:relative;border:1px solid #223043;border-radius:12px;background:#0e141c;cursor:pointer;transition:transform .08s ease, border-color .15s ease}
  .opt:hover{transform:translateY(-1px);border-color:#2a3c58}
  .opt.disabled{pointer-events:none;opacity:.9}
  .opt.selected{border-color:#4b84ff}
  .opt input{position:absolute;inset:0;opacity:0;pointer-events:none}
  .opt .row{display:flex;align-items:flex-start;gap:12px;padding:14px}
  .opt .bullet{flex:0 0 28px;height:28px;display:grid;place-items:center;border-radius:8px;background:#0c1118;border:1px solid #1b2635;font-weight:800;color:#8fb7ff}

  /* Mentor-Tipp (neutral, verrät nichts) */
  .tip{margin:14px 0 0;padding:12px 14px;border-radius:12px;background:rgba(47,128,237,.06);border:1px solid rgba(47,128,237,.25);display:none}
  .tip strong{color:#a7c7ff}

  /* Steuerung */
  .actions{display:flex;justify-content:space-between;align-items:center;margin-top:14px}
  .btn{border:0;border-radius:12px;padding:12px 16px;font-weight:800;cursor:pointer}
  .btn-next{background:linear-gradient(180deg,#60a5fa,#2f80ed);color:#0a1020;opacity:.6;pointer-events:none}
  .btn-next.enabled{opacity:1;pointer-events:auto}
  .btn-skip{background:#0f1620;border:1px solid #223043;color:#cfe3ff}

  /* Auswertung */
  .summary{display:none;margin-top:18px}
  .badge{display:inline-block;padding:6px 10px;border-radius:10px;font-weight:800}
  .b-none{background:#1a1f28;color:#a7aab2;border:1px solid #2a2f39}
  .b-repeat{background:#281e1a;color:#ffddc7;border:1px solid #3a2a20}
  .b-bronze{background:#2a2316;color:#ffd8a1;border:1px solid #57421a}
  .review{margin-top:14px;border-top:1px dashed #2a3442;padding-top:10px}
  .rev-item{padding:12px 0;border-bottom:1px dashed #2a3442}
  .rev-item:last-child{border-bottom:0}
  .rev-q{font-weight:700;margin:0 0 6px}
  .rev-a{margin:0 0 6px;color:#d9dee6}
  .rev-c{margin:0 0 6px;color:#a0ffce}
  .rev-tip{margin:0;color:#9fb7ff}
  .muted{color:var(--muted)}

  /* Footer-Navi */
  .footer-nav{margin:22px 0 40px;display:flex;justify-content:space-between;align-items:center;gap:12px}
  .link-btn{color:#9fd0ff;text-decoration:none;border:1px solid #223043;background:#0f1620;padding:10px 14px;border-radius:10px}
  .link-btn:hover{text-decoration:underline}

  /* Audio hint */
  .audio-note{font-size:.9rem;color:var(--muted);margin-top:6px}
</style>
</head>
<body>
<div class="wrap">

  <!-- Top-Leiste -->
  <div class="top">
    <div class="head">
      <span class="pill" title="Kurs-Icon">
        <!-- Buch-Icon (blau) -->
        <svg class="ico" viewBox="0 0 64 64" aria-hidden="true">
          <defs><linearGradient id="b1" x1="0" x2="1"><stop offset="0" stop-color="#90c2ff"/><stop offset="1" stop-color="#2f80ed"/></linearGradient></defs>
          <path d="M12 10h28a6 6 0 0 1 6 6v32H18a6 6 0 0 1-6-6V10Z" fill="url(#b1)"/>
          <rect x="12" y="10" width="6" height="38" fill="#1e3a8a"/><rect x="22" y="18" width="16" height="2" fill="#e6f0ff" opacity=".85"/>
        </svg>
        <strong id="pillTitle">Grundkurs 1</strong>
      </span>
      <h1 id="pageTitle">Finanzielle Souveränität – Einstieg</h1>
    </div>
    <div class="controls">
      <button class="music" id="musicBtn" aria-pressed="false">♪ Musik</button>
      <select id="langSel" class="lang" aria-label="Sprache">
        <option value="de" selected>DE</option>
        <option value="en">EN</option>
        <option value="fr">FR</option>
        <option value="it">IT</option>
        <option value="es">ES</option>
        <option value="ru">RU</option>
      </select>
    </div>
  </div>

  <!-- Intro / Begrüßung -->
  <div class="intro" id="introText">
    <strong id="hello">Hallo</strong> <span id="helloName">!</span><br/>
    <span id="helloLead">Starte deinen ersten Grundkurs und lerne jetzt deine Basis kennen. Diese vier Kurse bilden dein Fundament und geben dir die Chance, finanziell souverän zu leben.</span>
    <div class="audio-note" id="audioNote">Tipp: Du kannst die Hintergrundmusik unten rechts ein-/ausschalten.</div>
  </div>

  <!-- Quiz-Karte -->
  <div class="card" id="quizBox">
    <div class="q-head">
      <div class="counter"><span id="qIndex">Frage 1</span> <span class="muted" id="ofTen">von 10</span></div>
      <div class="muted" id="scoreInfo">0 richtig</div>
    </div>
    <div class="bar"><i id="barFill"></i></div>

    <div id="qTitle" class="q-title">…</div>
    <div id="opts" class="opts"></div>
    <div id="tip" class="tip"></div>

    <div class="actions">
      <button id="skip" class="btn btn-skip" title="Später noch einmal">Überspringen</button>
      <button id="next" class="btn btn-next">Weiter</button>
    </div>
  </div>

  <!-- Auswertung (klappt unten auf) -->
  <div id="summary" class="summary card" aria-live="polite">
    <h2 style="margin:0 0 8px" id="sumTitle">Auswertung</h2>
    <p id="sumLine" style="margin:0 0 10px"></p>
    <p id="sumHint" class="muted" style="margin:0 0 12px"></p>
    <div id="sumBadge" class="badge b-none">Status</div>

    <div class="review" id="reviewList"></div>
  </div>

  <!-- Footer-Navigation -->
  <div class="footer-nav">
    <a class="link-btn" href="grundkurs.html">← Zurück zur Kursübersicht</a>
    <a class="link-btn" href="grundkurs-sicherheit.html" id="nextCourse">Weiter zu Grundkurs 2</a>
  </div>

  <!-- Musik -->
  <audio id="bgm" src="library/music/pool/track-02.mp3" preload="auto" loop></audio>
</div>

<script>
(function(){
  /* -------------------- Utilities -------------------- */
  const $ = s => document.querySelector(s);
  const byId = id => document.getElementById(id);
  const getQS = (k) => new URLSearchParams(location.search).get(k);
  const cap = s => s ? s.charAt(0).toUpperCase()+s.slice(1) : s;

  // Name aus localStorage oder URL
  const storedName = localStorage.getItem('fsa_name');
  const urlName = getQS('name');
  const userName = (urlName || storedName || '').trim();
  if(urlName) localStorage.setItem('fsa_name', urlName);

  /* -------------------- Lokalisierung -------------------- */
  const L = {
    de: {
      pill:"Grundkurs 1",
      title:"Finanzielle Souveränität – Einstieg",
      hello:"Hallo",
      helloLead:"Starte deinen ersten Grundkurs und lerne jetzt deine Basis kennen. Diese vier Kurse bilden dein Fundament und geben dir die Chance, finanziell souverän zu leben.",
      audioNote:"Tipp: Du kannst die Hintergrundmusik unten rechts ein-/ausschalten.",
      ofTen:"von 10",
      btnSkip:"Überspringen",
      btnNext:"Weiter",
      sum:"Auswertung",
      statusNone:"Keine Qualifikation",
      statusRepeat:"Wiederholung empfohlen",
      statusBronze:"Bronze – Qualifiziert",
      sumHintNone:"≤5 von 10: Bitte Inhalte wiederholen.",
      sumHintRepeat:"6 von 10: Du bist nah dran – wiederhole gezielt die unsicheren Punkte.",
      sumHintBronze:"≥7 von 10: Du bist für die Abschlussprüfung qualifiziert (Bronze-Schwelle).",
      nextCourse:"Weiter zu Grundkurs 2",
      backAll:"← Zurück zur Kursübersicht",
      mentor:"Mentor-Tipp",
      deepen:"Vertiefung: Sieh dir die passenden Abschnitte im Kurs an (Begriffe, Wallet, On-/Off-Ramp, Sicherheit, Praxis).",
      q:[
        {
          q:"Warum ist der erste Schritt zur finanziellen Souveränität das eigene Verständnis über Geldflüsse?",
          a:[
            {t:"Weil nur wer versteht, wie Geld entsteht und zirkuliert, bewusste Entscheidungen treffen kann.",ok:true},
            {t:"Weil Geld immer durch Banken kontrolliert wird und man sich dem nicht entziehen kann."},
            {t:"Weil finanzielle Souveränität nur von staatlicher Regulierung abhängt."}
          ],
          tip:"Denke in Ursachen (Entstehung, Fluss) statt nur in Kontoständen."
        },
        {
          q:"Was unterscheidet ein klassisches Bankkonto von einer Krypto-Wallet?",
          a:[
            {t:"Ein Bankkonto gehört einer Bank, eine Wallet gehört ausschließlich dir selbst.",ok:true},
            {t:"Beide speichern nur die Transaktionen, nicht das Geld selbst."},
            {t:"Beide Systeme werden von denselben Institutionen überwacht."}
          ],
          tip:"Schlüsselbesitz = Zugriffshoheit. Nicht deine Schlüssel, nicht deine Coins."
        },
        {
          q:"Warum ist die Seed Phrase der wichtigste Teil einer Wallet?",
          a:[
            {t:"Sie ist der einzige Zugang zu deinem Vermögen – ohne Seed kein Zugriff.",ok:true},
            {t:"Sie ersetzt die PIN deiner Bankkarte."},
            {t:"Sie ist der Nachweis, dass du Kunde einer Börse bist."}
          ],
          tip:"Behandle die Seed wie einen Generalschlüssel – offline, sicher, mehrfach."
        },
        {
          q:"Was bedeutet „finanzielle Eigenverantwortung“ im Krypto-Kontext wirklich?",
          a:[
            {t:"Bereitschaft, für Entscheidungen und Fehler selbst einzustehen.",ok:true},
            {t:"Andere Vertrauenspersonen verwahren lassen."},
            {t:"Möglichst viele Konten bei verschiedenen Börsen eröffnen."}
          ],
          tip:"Souveränität ohne Verantwortung gibt es nicht."
        },
        {
          q:"Warum sollte man trustyfy & Co. verstehen, bevor man Geld einzahlt?",
          a:[
            {t:"Verständnis über Funktion und Risiko schützt vor Verlust.",ok:true},
            {t:"Weil sie das beste Zinsmodell bieten."},
            {t:"Weil sonst Transaktionen automatisch abgelehnt werden."}
          ],
          tip:"Trustyfy ist eine FIAT↔Krypto-Brücke mit eigener IBAN — zentral reguliert, transparent nutzbar."
        },
        {
          q:"Welche Aussage beschreibt „Dezentralität“ am besten?",
          a:[
            {t:"Ein System, bei dem Teilnehmer gleiche Regeln und verteilte Kontrolle haben.",ok:true},
            {t:"Ein System, das von einer zentralen Behörde gesteuert wird."},
            {t:"Ein Bankprodukt ohne Technologie-Bezug."}
          ],
          tip:"Verteilte Validierung statt zentraler Erlaubnis."
        },
        {
          q:"Warum ist „Nicht deine Schlüssel – nicht deine Coins“ mehr als ein Spruch?",
          a:[
            {t:"Ohne eigene Schlüssel bist du nicht der Besitzer deiner Werte.",ok:true},
            {t:"Weil die Schlüssel automatisch bei der Börse gespeichert werden."},
            {t:"Weil Coins immer staatlich versichert sind."}
          ],
          tip:"Selbstverwahrung ≠ Börsenkonto. Verwechsle das nie."
        },
        {
          q:"Welche Haltung führt am ehesten zu langfristigem Erfolg?",
          a:[
            {t:"Geduld, Disziplin und die Bereitschaft, ständig zu lernen.",ok:true},
            {t:"Schnelles Handeln ohne Vorbereitung."},
            {t:"Blindes Vertrauen in Dritte."}
          ],
          tip:"Rituale schlagen Impulsivität: klein testen, dokumentieren, skalieren."
        },
        {
          q:"Warum braucht Souveränität ein Verständnis für Risiko?",
          a:[
            {t:"Ohne Risikobewusstsein entscheidest du nicht frei, sondern abhängig.",ok:true},
            {t:"Risiko gibt es nur bei Banken."},
            {t:"Risiken gleichen sich automatisch aus, wenn man Geduld hat."}
          ],
          tip:"Risiko erkennen → dosiert eingehen → überleben."
        },
        {
          q:"Was zeigt echte finanzielle Souveränität?",
          a:[
            {t:"Wissen bewusst nutzen, um unabhängig von Systemen zu handeln.",ok:true},
            {t:"Schnell Geld leihen, wenn es brennt."},
            {t:"Andere für dich entscheiden lassen."}
          ],
          tip:"Souverän = bewusst + eigenständig + vorbereitet."
        }
      ]
    },

    /* ---------- English (concise, practical) ---------- */
    en: {
      pill:"Foundation Course 1",
      title:"Financial Sovereignty – Basics",
      hello:"Hello",
      helloLead:"Start your first course and master the basics. These four courses form your foundation and help you live financially sovereign.",
      audioNote:"Tip: You can toggle background music at the bottom right.",
      ofTen:"of 10",
      btnSkip:"Skip",
      btnNext:"Next",
      sum:"Summary",
      statusNone:"Not qualified",
      statusRepeat:"Retake recommended",
      statusBronze:"Bronze – Qualified",
      sumHintNone:"≤5/10: Please review the content.",
      sumHintRepeat:"6/10: Close! Repeat weak spots.",
      sumHintBronze:"≥7/10: You qualify for the final exam (Bronze threshold).",
      nextCourse:"Continue to Course 2",
      backAll:"← Back to course overview",
      mentor:"Mentor tip",
      deepen:"Deepen on course sections (wallets, on/off-ramp, safety, practice).",
      q:[
        {q:"Why is understanding money flows the first step to financial sovereignty?",
         a:[{t:"Because only those who understand creation and circulation can decide consciously.",ok:true},
            {t:"Because banks always control money and you cannot escape."},
            {t:"Because sovereignty only depends on regulation."}],
         tip:"Think root causes, not just balances."},
        {q:"What differentiates a bank account from a crypto wallet?",
         a:[{t:"A bank account is owned by a bank; a wallet is fully under your key control.",ok:true},
            {t:"Both only store transactions, not money."},
            {t:"Both are supervised by the same institutions."}],
         tip:"Keys = control. Not your keys, not your coins."},
        {q:"Why is the seed phrase crucial?",
         a:[{t:"It’s the only way to access your funds — lose it, lose access.",ok:true},
            {t:"It replaces your bank card PIN."},
            {t:"It proves you are a customer of an exchange."}],
         tip:"Treat it like a master key — offline, redundant."},
        {q:"What does personal responsibility mean here?",
         a:[{t:"Owning outcomes and mistakes.",ok:true},
            {t:"Letting others custody for you."},
            {t:"Opening many exchange accounts."}],
         tip:"No sovereignty without responsibility."},
        {q:"Why learn trustyfy before funding?",
         a:[{t:"Understanding function and risk prevents loss.",ok:true},
            {t:"It offers the best interest rates."},
            {t:"Otherwise your transfers get auto-rejected."}],
         tip:"Trustyfy is a FIAT↔crypto bridge with IBAN — centralized, transparent."},
        {q:"What best describes decentralization?",
         a:[{t:"Shared rules and distributed control.",ok:true},
            {t:"Central authority steering."},
            {t:"A bank product."}],
         tip:"Validation is distributed, not permitted."},
        {q:"Why is 'Not your keys' more than a slogan?",
         a:[{t:"Without your keys, you don’t own the assets.",ok:true},
            {t:"Exchanges store keys for you automatically."},
            {t:"Coins are state-insured."}],
         tip:"Custody ≠ ownership."},
        {q:"Which mindset wins long term?",
         a:[{t:"Patience, discipline, continuous learning.",ok:true},
            {t:"Speed without prep."},
            {t:"Blind trust."}],
         tip:"Small tests, notes, then scale."},
        {q:"Why understand risk?",
         a:[{t:"Without it you decide dependently, not freely.",ok:true},
            {t:"Only banks have risk."},
            {t:"Time fixes all risk."}],
         tip:"Size risk to survive."},
        {q:"What signals sovereignty?",
         a:[{t:"Using knowledge to act independently of systems.",ok:true},
            {t:"Borrow fast when needed."},
            {t:"Let others decide."}],
         tip:"Conscious + independent + prepared."
        }
      ]
    },

    /* ---------- Français (sobre, pédagogique) ---------- */
    fr: {
      pill:"Cours 1 – Base",
      title:"Souveraineté financière – Fondamentaux",
      hello:"Bonjour",
      helloLead:"Commence ton premier cours et maîtrise les bases. Ces quatre cours forment ton socle pour vivre souverain financièrement.",
      audioNote:"Astuce : tu peux activer/désactiver la musique en bas à droite.",
      ofTen:"sur 10",
      btnSkip:"Passer",
      btnNext:"Suivant",
      sum:"Bilan",
      statusNone:"Non qualifié",
      statusRepeat:"Reprise recommandée",
      statusBronze:"Bronze – Qualifié",
      sumHintNone:"≤5/10 : Revois les notions.",
      sumHintRepeat:"6/10 : Tu y es presque — révise ce qui bloque.",
      sumHintBronze:"≥7/10 : Tu es qualifié pour l’examen final (seuil Bronze).",
      nextCourse:"Continuer vers Cours 2",
      backAll:"← Retour aux cours",
      mentor:"Conseil du mentor",
      deepen:"Approfondis dans les sections du cours (portefeuille, on/off-ramp, sécurité, pratique).",
      q:[
        {q:"Pourquoi comprendre les flux monétaires est-il le premier pas vers la souveraineté financière ?",
         a:[{t:"Parce que comprendre création et circulation permet de décider en conscience.",ok:true},
            {t:"Parce que les banques contrôlent tout et on ne peut rien y faire."},
            {t:"Parce que seule la réglementation compte."}],
         tip:"Cherche les causes, pas seulement les soldes."},
        {q:"Quelle différence entre compte bancaire et wallet crypto ?",
         a:[{t:"Le compte appartient à la banque ; le wallet est sous ton contrôle (tes clés).",ok:true},
            {t:"Les deux ne stockent que les transactions."},
            {t:"Les mêmes autorités supervisent les deux."}],
         tip:"Clés = contrôle. Sans clés, pas de propriété."},
        {q:"Pourquoi la seed est-elle essentielle ?",
         a:[{t:"Unique accès à tes fonds — sans seed, pas d’accès.",ok:true},
            {t:"Elle remplace le code de carte."},
            {t:"Preuve d’inscription à une bourse."}],
         tip:"Traite-la comme un passe-maître — hors ligne, redondant."},
        {q:"Que signifie la responsabilité personnelle ici ?",
         a:[{t:"Assumer choix et erreurs.",ok:true},
            {t:"Confier la garde à d’autres."},
            {t:"Ouvrir beaucoup de comptes d’échange."}],
         tip:"Pas de souveraineté sans responsabilité."},
        {q:"Pourquoi comprendre trustyfy avant d’y déposer ?",
         a:[{t:"Comprendre fonctions et risques évite les pertes.",ok:true},
            {t:"Parce que les taux sont meilleurs."},
            {t:"Sinon, tout est refusé automatiquement."}],
         tip:"Trustyfy = pont FIAT↔crypto avec IBAN — centralisé, transparent."},
        {q:"Qu’est-ce que la décentralisation, vraiment ?",
         a:[{t:"Règles partagées et contrôle distribué.",ok:true},
            {t:"Autorité centrale."},
            {t:"Un produit bancaire."}],
         tip:"Validation distribuée, pas permission centrale."},
        {q:"Pourquoi « pas tes clés, pas tes coins » ?",
         a:[{t:"Sans tes clés, tu ne possèdes pas tes actifs.",ok:true},
            {t:"La bourse garde tes clés automatiquement."},
            {t:"Les coins sont assurés par l’État."}],
         tip:"Garde ≠ propriété."},
        {q:"Quel état d’esprit gagne sur la durée ?",
         a:[{t:"Patience, discipline, apprentissage continu.",ok:true},
            {t:"Aller vite sans préparer."},
            {t:"Faire confiance aveuglément."}],
         tip:"Petits tests, notes, puis échelle."},
        {q:"Pourquoi comprendre le risque ?",
         a:[{t:"Sans ça, tu décides sous dépendance, pas librement.",ok:true},
            {t:"Le risque n’existe qu’en banque."},
            {t:"Le temps annule le risque."}],
         tip:"Dimensionne le risque pour durer."},
        {q:"Qu’est-ce qui montre la souveraineté ?",
         a:[{t:"Utiliser ton savoir pour agir de façon indépendante.",ok:true},
            {t:"Emprunter vite."},
            {t:"Laisser décider les autres."}],
         tip:"Conscience + autonomie + préparation."
        }
      ]
    },

    /* ---------- Italiano (chiaro, pragmatico) ---------- */
    it: {
      pill:"Corso 1 – Base",
      title:"Sovranità finanziaria – Fondamenti",
      hello:"Ciao",
      helloLead:"Inizia il primo corso e padroneggia le basi. Quattro corsi per costruire il tuo fondamento e vivere da sovrano finanziario.",
      audioNote:"Suggerimento: puoi attivare/disattivare la musica in basso a destra.",
      ofTen:"di 10",
      btnSkip:"Salta",
      btnNext:"Avanti",
      sum:"Valutazione",
      statusNone:"Non qualificato",
      statusRepeat:"Ripetizione consigliata",
      statusBronze:"Bronzo – Qualificato",
      sumHintNone:"≤5/10: Rivedi i contenuti.",
      sumHintRepeat:"6/10: Sei vicino — ripassa i punti deboli.",
      sumHintBronze:"≥7/10: Qualifichi per l’esame finale (soglia Bronzo).",
      nextCourse:"Vai al Corso 2",
      backAll:"← Torna ai corsi",
      mentor:"Suggerimento del mentore",
      deepen:"Approfondisci nelle sezioni del corso (wallet, on/off-ramp, sicurezza, pratica).",
      q:[
        {q:"Perché capire i flussi di denaro è il primo passo verso la sovranità finanziaria?",
         a:[{t:"Solo capendo creazione e circolazione puoi decidere con consapevolezza.",ok:true},
            {t:"Perché le banche controllano sempre il denaro e basta."},
            {t:"Perché la sovranità dipende solo dalle regole statali."}],
         tip:"Pensa alle cause, non solo ai saldi."},
        {q:"Differenza tra conto bancario e wallet?",
         a:[{t:"Il conto è della banca; il wallet è sotto il tuo controllo (le tue chiavi).",ok:true},
            {t:"Entrambi memorizzano solo transazioni."},
            {t:"Stessa vigilanza per entrambi."}],
         tip:"Chiavi = controllo. Non tue chiavi, non tue monete."},
        {q:"Perché la seed è cruciale?",
         a:[{t:"È l’unico accesso ai fondi — senza seed, niente accesso.",ok:true},
            {t:"Sostituisce il PIN."},
            {t:"Dimostra che sei cliente di un exchange."}],
         tip:"Chiave maestra: offline e ridondante."},
        {q:"Cosa significa responsabilità personale qui?",
         a:[{t:"Assumersi scelte ed errori.",ok:true},
            {t:"Affidare la custodia ad altri."},
            {t:"Aprire molti conti exchange."}],
         tip:"Sovranità senza responsabilità non esiste."},
        {q:"Perché capire trustyfy prima di versare denaro?",
         a:[{t:"Capire funzione e rischio evita perdite.",ok:true},
            {t:"Per tassi migliori."},
            {t:"Altrimenti i trasferimenti vengono rifiutati."}],
         tip:"Trustyfy = ponte FIAT↔crypto con IBAN — centrale ma trasparente."},
        {q:"Cos’è davvero la decentralizzazione?",
         a:[{t:"Regole condivise e controllo distribuito.",ok:true},
            {t:"Autorità centrale."},
            {t:"Un prodotto bancario."}],
         tip:"Validazione distribuita, non permessa."},
        {q:"Perché 'non le tue chiavi' è importante?",
         a:[{t:"Senza chiavi tue non possiedi davvero gli asset.",ok:true},
            {t:"Le chiavi le conserva l’exchange."},
            {t:"Le monete sono assicurate dallo Stato."}],
         tip:"Custodia ≠ proprietà."},
        {q:"Quale mentalità vince nel lungo periodo?",
         a:[{t:"Pazienza, disciplina, apprendimento continuo.",ok:true},
            {t:"Velocità senza preparazione."},
            {t:"Fiducia cieca."}],
         tip:"Test piccoli, note, poi scala."},
        {q:"Perché capire il rischio?",
         a:[{t:"Senza rischio consapevole decidi in dipendenza, non libero.",ok:true},
            {t:"Il rischio è solo delle banche."},
            {t:"Il tempo annulla ogni rischio."}],
         tip:"Dimensiona il rischio per durare."},
        {q:"Cosa segnala sovranità?",
         a:[{t:"Usare il sapere per agire in autonomia dai sistemi.",ok:true},
            {t:"Prestiti rapidi."},
            {t:"Lasciare decidere gli altri."}],
         tip:"Consapevole + autonomo + preparato."
        }
      ]
    },

    /* ---------- Español (claro, directo) ---------- */
    es: {
      pill:"Curso 1 – Base",
      title:"Soberanía financiera – Fundamentos",
      hello:"Hola",
      helloLead:"Empieza tu primer curso y domina las bases. Estos cuatro cursos forman tu fundamento para vivir con soberanía financiera.",
      audioNote:"Truco: puedes activar/desactivar la música abajo a la derecha.",
      ofTen:"de 10",
      btnSkip:"Omitir",
      btnNext:"Siguiente",
      sum:"Resultados",
      statusNone:"No calificado",
      statusRepeat:"Repetición recomendada",
      statusBronze:"Bronce – Calificado",
      sumHintNone:"≤5/10: Revisa los contenidos.",
      sumHintRepeat:"6/10: ¡Casi! Repite lo débil.",
      sumHintBronze:"≥7/10: Calificas para el examen final (umbral Bronce).",
      nextCourse:"Continuar al Curso 2",
      backAll:"← Volver a cursos",
      mentor:"Consejo del mentor",
      deepen:"Profundiza en secciones del curso (billetera, on/off-ramp, seguridad, práctica).",
      q:[
        {q:"¿Por qué entender los flujos de dinero es el primer paso hacia la soberanía financiera?",
         a:[{t:"Porque entender creación y circulación permite decidir con conciencia.",ok:true},
            {t:"Porque los bancos controlan todo y no hay salida."},
            {t:"Porque depende solo de la regulación estatal."}],
         tip:"Causas, no solo saldos."},
        {q:"¿Diferencia entre cuenta bancaria y billetera cripto?",
         a:[{t:"La cuenta pertenece al banco; la billetera está bajo tus llaves.",ok:true},
            {t:"Ambas guardan solo transacciones."},
            {t:"Las supervisa la misma entidad."}],
         tip:"Llaves = control."},
        {q:"¿Por qué la semilla (seed) es crucial?",
         a:[{t:"Es el único acceso a tus fondos: sin semilla, sin acceso.",ok:true},
            {t:"Reemplaza el PIN."},
            {t:"Demuestra que eres cliente de un exchange."}],
         tip:"Guárdala offline y en copia."},
        {q:"¿Qué significa responsabilidad aquí?",
         a:[{t:"Asumir decisiones y errores.",ok:true},
            {t:"Delegar la custodia."},
            {t:"Abrir muchas cuentas."}],
         tip:"Sin responsabilidad no hay soberanía."},
        {q:"¿Por qué entender trustyfy antes de ingresar dinero?",
         a:[{t:"Entender función y riesgo evita pérdidas.",ok:true},
            {t:"Porque da mejores intereses."},
            {t:"O si no, todo se rechaza."}],
         tip:"Trustyfy = puente FIAT↔cripto con IBAN — centralizado y transparente."},
        {q:"¿Qué describe mejor la descentralización?",
         a:[{t:"Reglas compartidas y control distribuido.",ok:true},
            {t:"Autoridad central."},
            {t:"Producto bancario."}],
         tip:"Validación distribuida."},
        {q:"¿Por qué 'no tus llaves' importa?",
         a:[{t:"Sin tus llaves no eres dueño real de tus activos.",ok:true},
            {t:"El exchange guarda tus llaves."},
            {t:"Las monedas están aseguradas por el Estado."}],
         tip:"Custodia ≠ propiedad."},
        {q:"¿Qué mentalidad gana a largo plazo?",
         a:[{t:"Paciencia, disciplina y aprender siempre.",ok:true},
            {t:"Velocidad sin preparación."},
            {t:"Confianza ciega."}],
         tip:"Prueba pequeña, anota y escala."},
        {q:"¿Por qué entender el riesgo?",
         a:[{t:"Sin conciencia del riesgo decides sin libertad.",ok:true},
            {t:"Solo los bancos tienen riesgo."},
            {t:"El tiempo lo arregla todo."}],
         tip:"Dimensiona para sobrevivir."},
        {q:"¿Qué demuestra soberanía?",
         a:[{t:"Usar conocimiento para actuar con independencia.",ok:true},
            {t:"Pedir préstamos rápido."},
            {t:"Dejar que otros decidan."}],
         tip:"Consciente + independiente + preparado."
        }
      ]
    },

    /* ---------- Русский (деловой, понятный) ---------- */
    ru: {
      pill:"Курс 1 – База",
      title:"Финансовый суверенитет – основы",
      hello:"Привет",
      helloLead:"Начни первый курс и осво́й базу. Эти четыре курса — фундамент для финансовой самостоятельности.",
      audioNote:"Подсказка: музыку можно включать/выключать справа внизу.",
      ofTen:"из 10",
      btnSkip:"Пропустить",
      btnNext:"Далее",
      sum:"Итоги",
      statusNone:"Нет допуска",
      statusRepeat:"Рекомендуется повторение",
      statusBronze:"Бронза – допуск",
      sumHintNone:"≤5/10: повтори материал.",
      sumHintRepeat:"6/10: почти готово — проработай слабые места.",
      sumHintBronze:"≥7/10: допуск к финальному экзамену (порог Бронза).",
      nextCourse:"К курсу 2",
      backAll:"← Назад к курсам",
      mentor:"Совет наставника",
      deepen:"Углуби знание в разделах курса (кошельки, on/off-ramp, безопасность, практика).",
      q:[
        {q:"Почему понимание денежных потоков — первый шаг к суверенитету?",
         a:[{t:"Только понимая создание и циркуляцию денег, можно осознанно выбирать.",ok:true},
            {t:"Потому что банки контролируют всё и выхода нет."},
            {t:"Потому что всё решает лишь регуляция."}],
         tip:"Ищи причины, а не только остатки на счёте."},
        {q:"Чем отличается банковский счёт от криптокошелька?",
         a:[{t:"Счёт принадлежит банку; кошелёк под твоими ключами.",ok:true},
            {t:"Оба хранят только транзакции."},
            {t:"Оба под одним надзором."}],
         tip:"Ключи = контроль."},
        {q:"Почему seed-фраза критична?",
         a:[{t:"Это единственный доступ к средствам — потеряешь seed, потеряешь доступ.",ok:true},
            {t:"Она заменяет PIN-код."},
            {t:"Это доказательство клиента биржи."}],
         tip:"Храни офлайн, делай копии."},
        {q:"Что значит личная ответственность здесь?",
         a:[{t:"Быть готовым отвечать за выбор и ошибки.",ok:true},
            {t:"Доверить хранение другим."},
            {t:"Открыть много аккаунтов на биржах."}],
         tip:"Нет ответственности — нет суверенитета."},
        {q:"Почему важно понять trustyfy до пополнения?",
         a:[{t:"Понимание функций и рисков предотвращает потери.",ok:true},
            {t:"Из-за лучших процентов."},
            {t:"Иначе переводы отклоняются."}],
         tip:"Trustyfy — мост FIAT↔крипто с IBAN: централизованный, прозрачный."},
        {q:"Что лучше описывает децентрализацию?",
         a:[{t:"Общие правила и распределённый контроль.",ok:true},
            {t:"Центральное управление."},
            {t:"Банковский продукт."}],
         tip:"Валидация распределена."},
        {q:"Почему «не твои ключи — не твои монеты» важно?",
         a:[{t:"Без ключей ты не владелец активов.",ok:true},
            {t:"Биржа хранит ключи за тебя."},
            {t:"Монеты страхует государство."}],
         tip:"Кастодиальное хранение ≠ собственность."},
        {q:"Какая установка выигрывает на длинной дистанции?",
         a:[{t:"Терпение, дисциплина, постоянное обучение.",ok:true},
            {t:"Скорость без подготовки."},
            {t:"Слепое доверие."}],
         tip:"Малые тесты, заметки, масштабирование."},
        {q:"Зачем понимать риск?",
         a:[{t:"Без этого решения не свободны, а зависимы.",ok:true},
            {t:"Риск есть только у банков."},
            {t:"Время устраняет риски."}],
         tip:"Размер риска под выживание."},
        {q:"Что показывает суверенитет?",
         a:[{t:"Использование знаний для независимых действий.",ok:true},
            {t:"Быстрые займы."},
            {t:"Пусть решают другие."}],
         tip:"Осознанность + самостоятельность + готовность."
        }
      ]
    }
  };

  const AUDIO = byId('bgm');
  const musicBtn = byId('musicBtn');
  musicBtn.addEventListener('click', ()=>{
    if(AUDIO.paused){ AUDIO.play().catch(()=>{}); musicBtn.setAttribute('aria-pressed','true'); }
    else { AUDIO.pause(); musicBtn.setAttribute('aria-pressed','false'); }
  });

  /* -------------------- State -------------------- */
  let lang = (localStorage.getItem('fsa_lang') || 'de');
  const langSel = byId('langSel');
  langSel.value = lang;

  // UI refs
  const pillTitle = byId('pillTitle');
  const pageTitle = byId('pageTitle');
  const hello = byId('hello');
  const helloName = byId('helloName');
  const helloLead = byId('helloLead');
  const audioNote = byId('audioNote');

  const qIndexEl = byId('qIndex');
  const ofTen = byId('ofTen');
  const scoreInfo = byId('scoreInfo');
  const barFill = byId('barFill');
  const qTitle = byId('qTitle');
  const optsBox = byId('opts');
  const tipBox = byId('tip');
  const btnNext = byId('next');
  const btnSkip = byId('skip');

  const summary = byId('summary');
  const sumTitle = byId('sumTitle');
  const sumLine = byId('sumLine');
  const sumHint = byId('sumHint');
  const sumBadge = byId('sumBadge');
  const reviewList = byId('reviewList');
  const backBtn = document.querySelector('.footer-nav a[href="grundkurs.html"]');
  const nextCourse = byId('nextCourse');

  // session vars
  let QUESTIONS = [];
  let order = [];
  let idx = 0;
  let score = 0;
  let answered = false;
  let chosen = [];    // index der gewählten Antwort pro Frage (in Anzeige-Reihenfolge)
  let shuffledOptions = []; // pro Frage: Permutation der Antworten

  function shuffle(arr){
    const a = arr.slice();
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i],a[j]] = [a[j],a[i]];
    }
    return a;
  }

  function applyLang(){
    const T = L[lang];
    pillTitle.textContent = T.pill;
    pageTitle.textContent = T.title;
    hello.textContent = T.hello;
    helloName.textContent = userName ? (", "+cap(userName)+"!") : "!";
    helloLead.textContent = T.helloLead;
    audioNote.textContent = T.audioNote;
    ofTen.textContent = T.ofTen;
    btnSkip.textContent = T.btnSkip;
    btnNext.textContent = T.btnNext;
    sumTitle.textContent = T.sum;
    document.querySelector('.footer-nav a[href="grundkurs.html"]').textContent = T.backAll;
    nextCourse.textContent = T.nextCourse;

    QUESTIONS = T.q;
    order = shuffle(QUESTIONS.map((_,i)=>i));
    idx = 0; score = 0; answered = false; chosen = new Array(QUESTIONS.length).fill(null);
    shuffledOptions = QUESTIONS.map(q=>shuffle(q.a.map((_,i)=>i)));

    summary.style.display = 'none';
    document.querySelector('.actions').style.display = 'flex';
    render();
  }

  function render(){
    // Fortschritt
    qIndexEl.textContent = (lang==='en'?'Question ':'Frage ') + (idx+1);
    scoreInfo.textContent = `${score} ${(lang==='en'?'correct':'richtig')}`;
    barFill.style.width = `${(idx/QUESTIONS.length)*100}%`;

    // Frage
    const q = QUESTIONS[order[idx]];
    qTitle.textContent = q.q;
    tipBox.style.display = 'none';
    tipBox.innerHTML = '';

    btnNext.classList.remove('enabled');
    answered = false;

    // Antworten rendern (in der pro-Frage-Permutation)
    optsBox.innerHTML = '';
    const perm = shuffledOptions[order[idx]];
    perm.forEach((ansIdx, i) => {
      const opt = QUESTIONS[order[idx]].a[ansIdx];
      const el = document.createElement('label');
      el.className = 'opt';
      el.innerHTML = `
        <input type="radio" name="opt">
        <div class="row">
          <div class="bullet">${String.fromCharCode(65+i)}</div>
          <div class="txt">${opt.t}</div>
        </div>`;
      el.addEventListener('click', () => {
        if(answered) return;
        // Auswahl nur markieren (keine Korrektheit anzeigen)
        [...optsBox.children].forEach(n=>n.classList.remove('selected'));
        el.classList.add('selected');
        chosen[order[idx]] = i; // Position in der Anzeige
        tipBox.style.display = 'block';
        const T = L[lang];
        tipBox.innerHTML = `<strong>${T.mentor}:</strong> ${q.tip}`;
        btnNext.classList.add('enabled');
      });
      optsBox.appendChild(el);
    });
  }

  function next(){
    if(!btnNext.classList.contains('enabled')) return;
    idx++;
    if(idx >= QUESTIONS.length){ finish(); return; }
    render();
  }

  function skip(){
    if(chosen[order[idx]]!==null) return; // nur wenn noch nichts gewählt
    const current = order[idx];
    order = order.slice(0,idx).concat(order.slice(idx+1)).concat(current);
    render();
  }

  function finish(){
    // Score berechnen
    score = 0;
    const T = L[lang];
    reviewList.innerHTML = '';
    QUESTIONS.forEach((q, qi)=>{
      const selPos = chosen[qi];
      // Mapping Anzeige-Position -> tatsächlicher Antwortindex
      const perm = shuffledOptions[qi];
      const pickedRealIdx = selPos!=null ? perm[selPos] : null;
      const correctIdx = q.a.findIndex(x=>x.ok);
      const isOk = pickedRealIdx===correctIdx;
      if(isOk) score++;

      const item = document.createElement('div');
      item.className = 'rev-item';
      const your = selPos==null ? (lang==='en'?'(no answer)':'(keine Antwort)') : q.a[pickedRealIdx].t;
      const corr = q.a[correctIdx].t;

      item.innerHTML = `
        <div class="rev-q">${lang==='en'?'Question':'Frage'} ${order.indexOf(qi)+1}: ${q.q}</div>
        <div class="rev-a"><strong>${lang==='en'?'Your answer:':'Deine Antwort:'}</strong> ${your}</div>
        <div class="rev-c"><strong>${lang==='en'?'Correct:':'Richtig:'}</strong> ${corr}</div>
        <p class="rev-tip"><strong>${T.mentor}:</strong> ${q.tip}<br><span class="muted">${T.deepen}</span></p>
      `;
      reviewList.appendChild(item);
    });

    // Badge + Text
    const total = QUESTIONS.length;
    const pct = Math.round((score/total)*100);
    sumLine.textContent = `${(lang==='en'?'Correct':'Richtig')}: ${score} / ${total} (${pct}%)`;

    let badge='b-none', label=T.statusNone, hint=T.sumHintNone;
    if(score===6){ badge='b-repeat'; label=T.statusRepeat; hint=T.sumHintRepeat; }
    if(score>=7){ badge='b-bronze'; label=T.statusBronze; hint=T.sumHintBronze; }

    sumBadge.className = `badge ${badge}`;
    sumBadge.textContent = label;
    sumHint.textContent = hint;

    barFill.style.width = '100%';
    summary.style.display = 'block';
    document.querySelector('.actions').style.display='none';
  }

  // Events
  byId('next').addEventListener('click', next);
  byId('skip').addEventListener('click', skip);
  langSel.addEventListener('change', ()=>{
    lang = langSel.value; localStorage.setItem('fsa_lang', lang); applyLang();
  });

  // Init
  applyLang();

})();
</script>
</body>
</html>
