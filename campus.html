<!-- Slideshow + Musik -->
<div id="slideshow" style="position:fixed;inset:0;z-index:-1;overflow:hidden"></div>
<audio id="bgMusic" loop src="library/music/pool/track-01.mp3"></audio>
<button id="musicBtn" style="position:fixed;bottom:20px;right:20px;z-index:10;padding:10px 16px;border-radius:999px;background:rgba(0,0,0,.55);color:#fff;border:1px solid rgba(212,175,55,.25);box-shadow:0 0 26px rgba(212,175,55,.45),0 10px 28px rgba(0,0,0,.55);backdrop-filter:blur(6px)">🎵 Musik starten</button>

<script>
// ========== Slideshow aus pool-live ==========
(function(){
  const path = 'library/images/pool-live/';
  const count = 48;            // Anzahl deiner Bilder
  const interval = 8000;       // Zeit zwischen den Wechseln
  const fadeTime = 2000;       // Übergangszeit

  const container = document.getElementById('slideshow');
  const layers = [];
  let active = 0;
  let index = 0;

  for (let i = 0; i < 2; i++) {
    const layer = document.createElement('div');
    Object.assign(layer.style, {
      position: 'absolute',
      top: 0,
      left: 0,
      width: '100%',
      height: '100%',
      backgroundSize: 'cover',
      backgroundPosition: 'center',
      transition: `opacity ${fadeTime}ms ease-in-out`,
      opacity: i === 0 ? '1' : '0'
    });
    container.appendChild(layer);
    layers.push(layer);
  }

  function imgName(n){
    return `${path}slide-${String(n).padStart(2,'0')}.jpg`;
  }

  // Bilder vorladen
  for (let i = 1; i <= count; i++){
    const img = new Image();
    img.src = imgName(i);
  }

  function next(){
    index = (index + 1) % count;
    const nextLayer = 1 - active;
    layers[nextLayer].style.backgroundImage = `url(${imgName(index+1)})`;
    layers[nextLayer].style.opacity = '1';
    layers[active].style.opacity = '0';
    active = nextLayer;
  }

  layers[0].style.backgroundImage = `url(${imgName(1)})`;
  setInterval(next, interval);
})();

// ========== Musik-Button ==========
const music = document.getElementById('bgMusic');
const musicBtn = document.getElementById('musicBtn');
let playing = false;

async function startMusic(){
  try{
    await music.play();
    playing = true;
    musicBtn.textContent = "⏸ Musik stoppen";
  }catch(e){
    // iOS-Schutz
  }
}

musicBtn.addEventListener('click', async ()=>{
  if(!playing){ await startMusic(); }
  else{ music.pause(); playing=false; musicBtn.textContent="🎵 Musik starten"; }
});

// einmaliges Auto-Start-Event bei erstem Tap
window.addEventListener('pointerdown', function once(){
  if(!playing) startMusic();
  window.removeEventListener('pointerdown', once);
},{once:true});
</script>
