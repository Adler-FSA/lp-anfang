<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FSA Akademie – Hauptprüfung (50 Fragen)</title>

  <style>
    :root{
      --gold:#d4af37;--ink:#0b0f14;--panel:rgba(17,24,39,.78);
      --line:rgba(212,175,55,.35);--muted:#a3a3a3;
    }
    html,body{margin:0;padding:0;background:var(--ink);color:#e5e7eb;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
    main{max-width:1040px;margin:0 auto;padding:0 16px 120px}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:14px;
      padding:1.2rem;box-shadow:0 0 22px rgba(212,175,55,.08)}
    h1,h2,h3{color:var(--gold);margin:0 0 .6rem 0}
    p{color:var(--muted);line-height:1.6;margin:.4rem 0}
    .sp-top{margin-top:3cm}
    /* Quiz */
    #exam-root{margin-top:1.2cm}
    .q-title{font-size:1.1rem;margin:.4rem 0 1rem}
    .answers{list-style:none;margin:0;padding:0;display:grid;gap:.6rem}
    .answers li label{display:flex;gap:.6rem;align-items:flex-start;
      border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:.7rem .9rem;
      background:rgba(255,255,255,.04);cursor:pointer}
    .answers input{margin-top:.25rem}
    .mentor{margin:.8rem 0 0;color:#cbd5e1;font-style:italic}
    .progressbar{height:10px;background:rgba(255,255,255,.12);border-radius:6px;
      overflow:hidden;margin:1rem 0 1.2rem}
    .progressbar>div{height:100%;background:linear-gradient(90deg,#3b82f6,#d4af37)}
    .btn-row{display:flex;flex-wrap:wrap;gap:.8rem;margin-top:1rem}
    .btn{background:rgba(0,0,0,.7);color:#d4af37;border:1px solid rgba(212,175,55,.6);
      border-radius:8px;padding:.7rem 1.2rem;font-weight:600;cursor:pointer;transition:.25s}
    .btn:hover{filter:brightness(1.1)}
    .btn.primary{background:linear-gradient(90deg,#3b82f6,#d4af37);color:#fff;border:none}
    .muted{color:#94a3b8}
    /* Result */
    .result-wrap{margin-top:1.2cm}
    .bar{height:14px;background:#1e293b;border-radius:8px;overflow:hidden;margin:.8rem auto 1rem}
    .bar>div{height:100%;transition:width .8s ease}
    .wrong{color:#ef4444;font-weight:600}
    .right{color:#10b981;font-weight:600}
    .feedback{margin-top:1rem;text-align:left}
    .fb-item{border-top:1px solid rgba(212,175,55,.2);padding:.8rem 0}
    .badge{display:inline-block;border:1px solid var(--line);border-radius:999px;
      padding:.2rem .6rem;color:#fff;background:rgba(255,255,255,.06);margin-left:.4rem}
    /* Responsive */
    @media (max-width:740px){
      .answers li label{padding:.7rem .8rem}
      .btn-row{justify-content:space-between}
      .btn{flex:1 1 auto;text-align:center}
    }
  </style>
</head>
<body>
  <main>
    <!-- Intro -->
    <section class="card sp-top" id="intro">
      <h1>Hauptprüfung – 50 Fragen</h1>
      <p id="introTextDe">
        Willkommen zur großen Prüfung. Du beantwortest <strong>50 Fragen</strong>, je richtige Antwort gibt
        <strong>2 Punkte</strong> – maximal <strong>100 Punkte</strong>. Dein Ergebnis ist dein <strong>Wissensindex</strong>.
        Name (optional) wird aus der Kursanmeldung übernommen und auf dem Mini-Zertifikat angezeigt.
      </p>
      <p id="introTextEn" style="display:none">
        Welcome to the final exam. You’ll answer <strong>50 questions</strong>, each correct answer is worth
        <strong>2 points</strong> – max <strong>100 points</strong>. Your result is your <strong>Knowledge Index</strong>.
        The (optional) name comes from course registration and appears on the mini-certificate.
      </p>
      <div class="btn-row">
        <button id="startExam" class="btn primary">Prüfung starten</button>
        <button id="startExamEn" class="btn" title="Start in English">Start exam (EN)</button>
      </div>
      <p class="muted" id="nameInfo"></p>
    </section>

    <!-- Exam UI -->
    <section id="exam-root"></section>

    <!-- Result -->
    <section id="result-root"></section>
  </main>

  <!-- Globale Module -->
  <script src="library/js/menu.js" defer></script>
  <script src="library/js/lang-switcher.js" defer></script>
  <script src="library/js/music-button.js" defer></script>
  <script src="library/js/back-to-home.js" defer></script>

  <script>
  (function(){
    // ==== Language & Name ====
    const getLang = () => localStorage.getItem("fsa_lang") || "de";
    const setLang = l => localStorage.setItem("fsa_lang", l);
    const first = localStorage.getItem("fsa_firstName")||"";
    const last  = localStorage.getItem("fsa_lastName")||"";
    const fullName = (first + " " + last).trim();

    // Show current name hint
    const nameInfo = document.getElementById("nameInfo");
    nameInfo.textContent = fullName
      ? (getLang()==="de"
          ? `Name für Zertifikat: ${fullName}`
          : `Name for certificate: ${fullName}`)
      : (getLang()==="de"
          ? "Kein Name hinterlegt – Zertifikat zeigt nur den Pokal."
          : "No name set – certificate shows trophy only.");

    // ==== Question Pools (DE & EN) ====
    // Basis: Kurs 1 (aus deiner bestehenden Logik; hier erneut definiert)
    const course1_de = [
      {q:"Warum ist der erste Schritt zur finanziellen Souveränität das eigene Verständnis über Geldflüsse?",
       a:[{text:"Weil nur wer versteht, wie Geld entsteht und zirkuliert, bewusste Entscheidungen treffen kann.",correct:true},
          {text:"Weil Geld immer durch Banken kontrolliert wird und man sich dem nicht entziehen kann.",correct:false},
          {text:"Weil finanzielle Souveränität nur von staatlicher Regulierung abhängt.",correct:false}],
       mentor:"Finanzielle Souveränität beginnt mit Wissen: Wer versteht, wie Geld wirklich funktioniert, kann frei und bewusst entscheiden."},
      {q:"Was unterscheidet ein klassisches Bankkonto von einer Krypto-Wallet?",
       a:[{text:"Beide speichern nur die Transaktionen, nicht das Geld selbst.",correct:false},
          {text:"Ein Bankkonto gehört einer Bank, eine Wallet gehört ausschließlich dir selbst.",correct:true},
          {text:"Beide Systeme werden von denselben Institutionen überwacht.",correct:false}],
       mentor:"Eine Wallet ist dein persönlicher Tresor auf der Blockchain – du allein kontrollierst die Schlüssel und Zugriffe."},
      {q:"Warum ist die Seed Phrase der wichtigste Teil einer Wallet?",
       a:[{text:"Sie ersetzt die PIN deiner Bankkarte.",correct:false},
          {text:"Sie ist der Nachweis, dass du Kunde einer Börse bist.",correct:false},
          {text:"Sie ist der einzige Zugang zu deinem Vermögen – ohne Seed kein Zugriff.",correct:true}],
       mentor:"Die Seed Phrase ist der Ursprungsschlüssel zu deinem Besitz. Wer sie verliert, verliert den Zugang unwiderruflich."},
      {q:"Was bedeutet „finanzielle Eigenverantwortung“ im Krypto-Kontext wirklich?",
       a:[{text:"Dass man bereit ist, für seine Entscheidungen und Fehler selbst einzustehen.",correct:true},
          {text:"Dass man anderen Vertrauenspersonen die Verwahrung überlässt.",correct:false},
          {text:"Dass man möglichst viele Konten bei verschiedenen Börsen eröffnet.",correct:false}],
       mentor:"Eigenverantwortung heißt, Kontrolle zu behalten – und Verantwortung für Wissen, Risiko und Entscheidung zu übernehmen."},
      {q:"Warum sollte man Plattformen wie Trustyfy verstehen, bevor man Geld einzahlt?",
       a:[{text:"Weil sie das beste Zinsmodell bieten.",correct:false},
          {text:"Weil Verständnis über Funktion und Risiko vor Verlust schützt.",correct:true},
          {text:"Weil sonst Transaktionen automatisch abgelehnt werden.",correct:false}],
       mentor:"Wer versteht, wie eine Plattform funktioniert, kann Chancen nutzen und Risiken vermeiden – Wissen schützt Kapital."},
      {q:"Welche Aussage beschreibt „Dezentralität“ am besten?",
       a:[{text:"Ein System, das von einer zentralen Behörde gesteuert wird.",correct:false},
          {text:"Ein System, bei dem jeder Teilnehmer gleiche Rechte und Zugriffe hat.",correct:true},
          {text:"Ein System, das keine Technologie, sondern eine Bankstruktur nutzt.",correct:false}],
       mentor:"Dezentralität heißt Gleichberechtigung: kein Mittelpunkt, keine Abhängigkeit – jeder ist Teil des Ganzen."},
      {q:"Warum ist „Nicht deine Schlüssel – nicht deine Coins“ mehr als nur ein Spruch?",
       a:[{text:"Weil du ohne eigene Schlüssel nicht wirklich der Besitzer deiner Krypto-Werte bist.",correct:true},
          {text:"Weil die Schlüssel automatisch bei der Börse gespeichert werden.",correct:false},
          {text:"Weil Coins immer durch staatliche Versicherung geschützt sind.",correct:false}],
       mentor:"Nur wer die privaten Schlüssel besitzt, besitzt wirklich das Vermögen. Alles andere ist Vertrauen – nicht Kontrolle."},
      {q:"Welche Haltung führt am ehesten zu langfristigem finanziellen Erfolg?",
       a:[{text:"Schnelles Handeln, ohne sich vorher zu informieren.",correct:false},
          {text:"Geduld, Disziplin und die Bereitschaft, ständig weiter zu lernen.",correct:true},
          {text:"Blindes Vertrauen in die Erfahrungen anderer.",correct:false}],
       mentor:"Vermögen entsteht aus Geduld und Lernen – nicht aus Hektik oder Nachahmung."},
      {q:"Warum braucht finanzielle Souveränität ein Verständnis für Risiko?",
       a:[{text:"Weil Risiko nur bei Banken existiert.",correct:false},
          {text:"Weil du ohne Risikobewusstsein nicht frei, sondern abhängig entscheidest.",correct:true},
          {text:"Weil Risiken sich automatisch ausgleichen, wenn man Geduld hat.",correct:false}],
       mentor:"Wer Risiko versteht, entscheidet mit Bewusstsein statt mit Angst – das ist echte Freiheit."},
      {q:"Was zeigt, dass jemand finanziell souverän geworden ist?",
       a:[{text:"Er kann sich schnell Geld leihen, wenn er es braucht.",correct:false},
          {text:"Er nutzt sein Wissen bewusst, um unabhängig von Systemen zu handeln.",correct:true},
          {text:"Er vertraut darauf, dass andere für ihn die richtige Entscheidung treffen.",correct:false}],
       mentor:"Souveränität heißt, Wissen anzuwenden – unabhängig, informiert und selbstbestimmt zu handeln."},
    ];

    // Kurs 2 – Sicherheit (vom Nutzer geliefert)
    const course2_de = [
      {q:"Warum sollte eine Seed Phrase niemals digital gespeichert werden?",
       a:[{text:"Weil sie sonst nicht wiedergefunden werden kann.",correct:false},
          {text:"Weil Börsen den Zugriff sonst verweigern.",correct:false},
          {text:"Weil jedes digitale Gerät gehackt oder kopiert werden kann – und damit auch deine Werte.",correct:true}],
       mentor:"Offline ist König: Papier/Metall statt Cloud, Foto oder Screenshot."},
      {q:"Was unterscheidet eine Passphrase von der Seed Phrase?",
       a:[{text:"Die Passphrase ergänzt die Seed Phrase und bietet zusätzlichen Schutz, ähnlich wie eine zweite Tür vor dem Tresor.",correct:true},
          {text:"Beide sind identisch und tauschbar.",correct:false},
          {text:"Die Passphrase ist nur bei zentralen Börsen notwendig.",correct:false}],
       mentor:"Passphrase = zusätzlicher Faktor – wer sie nicht kennt, kann die Wallet nicht ableiten."},
      {q:"Warum ist ein Hardware-Wallet oft sicherer als eine App-Wallet am Smartphone?",
       a:[{text:"Weil es mehr Funktionen und größere Displays hat.",correct:false},
          {text:"Weil die privaten Schlüssel offline gespeichert und niemals mit dem Internet verbunden werden.",correct:true},
          {text:"Weil es kostenpflichtig ist und daher seriöser wirkt.",correct:false}],
       mentor:"Air-gapped/secure element schützt vor vielen Angriffswegen."},
      {q:"Was bedeutet „Not your keys, not your coins“ konkret für Börsennutzer?",
       a:[{text:"Dass du bei einer zentralen Börse immer die vollen Eigentumsrechte behältst.",correct:false},
          {text:"Dass du deine Coins verlierst, wenn du sie nicht innerhalb von 24 Stunden abziehst.",correct:false},
          {text:"Dass du ohne eigene private Schlüssel nur ein Anspruchsrecht gegen die Börse hast – nicht das Eigentum selbst.",correct:true}],
       mentor:"Depot vs. Besitz: ohne Keys ist es Verwahrung durch Dritte."},
      {q:"Warum reicht ein Screenshot der Seed Phrase nicht als Backup?",
       a:[{text:"Weil Screenshots oft automatisch in Clouds hochgeladen werden und damit öffentlich zugänglich sein können.",correct:true},
          {text:"Weil die Wallet den Screenshot nicht lesen kann.",correct:false},
          {text:"Weil Screenshots immer unscharf werden.",correct:false}],
       mentor:"Automatische Backups (Cloud/Album) sind das Leck."},
      {q:"Wann sollte man eine neue Wallet erstellen?",
       a:[{text:"Wenn die alte lange nicht mehr benutzt wurde.",correct:false},
          {text:"Wenn man den Verdacht hat, dass jemand Zugriff auf die Seed Phrase erlangt hat.",correct:true},
          {text:"Wenn man eine neue App-Version installiert.",correct:false}],
       mentor:"Kompromittierung = migrieren, bevor Werte abgeflossen sind."},
      {q:"Was sollte man tun, wenn man seine Seed Phrase verloren hat?",
       a:[{text:"Sofort eine neue Wallet erstellen und Werte übertragen, solange Zugriff noch besteht.",correct:true},
          {text:"Sich an den technischen Support der Börse wenden, um eine Kopie zu erhalten.",correct:false},
          {text:"Warten, bis die Blockchain einen Reset durchführt.",correct:false}],
       mentor:"Handele sofort, solange du noch signieren kannst."},
      {q:"Was zeichnet eine dezentrale Börse (DEX) im Vergleich zu einer CEX aus?",
       a:[{text:"Auf einer DEX behältst du die Kontrolle über deine Schlüssel und handelst direkt aus deiner Wallet.",correct:true},
          {text:"Auf einer DEX werden die Daten auf Servern der Börse gespeichert.",correct:false},
          {text:"Eine DEX braucht keine Blockchain.",correct:false}],
       mentor:"Self-custody + on-chain Ausführung statt Verwahrung."},
      {q:"Warum ist es ratsam, mehrere Wallets für verschiedene Zwecke zu nutzen?",
       a:[{text:"Weil man so Verluste besser verstecken kann.",correct:false},
          {text:"Weil Risikotrennung Sicherheit erhöht und man nicht alles auf einer Adresse liegen hat.",correct:true},
          {text:"Weil jede Wallet Zinsen bringt.",correct:false}],
       mentor:"Trennung: Cold, Hot, Trading, Testnetz – Risiko wird segmentiert."},
      {q:"Was sollte man tun, wenn eine Börse plötzlich Auszahlungen stoppt?",
       a:[{text:"Ruhe bewahren, aber zukünftig auf eigene Verwahrung setzen und nicht mehr alles auf CEX lagern.",correct:true},
          {text:"Sofort ein neues Konto eröffnen und Geld überweisen.",correct:false},
          {text:"Nichts, solche Pausen sind üblich und ungefährlich.",correct:false}],
       mentor:"Lehre: Verwahrung selbst in die Hand nehmen."},
    ];

    // Kurs 3 – Einkommen (vom Nutzer geliefert)
    const course3_de = [
      {q:"Warum ist „schnell reich werden“ der sicherste Weg, Geld zu verlieren?",
       a:[{text:"Weil kurzfristige Gier rationale Entscheidungen ersetzt und dich anfällig für Manipulation macht.",correct:true},
          {text:"Weil Reichtum nur durch staatliche Förderung entsteht.",correct:false},
          {text:"Weil Gewinne ohne Risiko gesetzlich verboten sind.",correct:false}],
       mentor:"Tempo macht blind. Prozess schlägt Versprechen."},
      {q:"Woran erkennt man ein seriöses Krypto-Projekt?",
       a:[{text:"Daran, dass Influencer es stark bewerben.",correct:false},
          {text:"Daran, dass es eine extrem hohe Rendite verspricht.",correct:false},
          {text:"An Transparenz, offenem Team, nachvollziehbarer Technologie und realem Nutzen.",correct:true}],
       mentor:"Substanz statt Slogan. Dokumentation, Code, Nutzen."},
      {q:"Warum ist „passives Einkommen“ kein Zauberwort?",
       a:[{text:"Weil es immer steuerfrei bleibt.",correct:false},
          {text:"Weil es nur funktioniert, wenn man versteht, wie der Ertrag entsteht und das Risiko trägt.",correct:true},
          {text:"Weil es automatisch wächst, egal was man tut.",correct:false}],
       mentor:"Kein Free Lunch – immer Quelle & Risiko prüfen."},
      {q:"Was unterscheidet Investieren von Spekulieren?",
       a:[{text:"Investieren basiert auf Analyse, Spekulieren auf Hoffnung.",correct:true},
          {text:"Beide sind identisch, nur unterschiedlich benannt.",correct:false},
          {text:"Spekulieren ist immer sicherer, weil es kurzfristig ist.",correct:false}],
       mentor:"These, Zeit, Disziplin vs. Impuls."},
      {q:"Was bedeutet „Risikostreuung“ praktisch?",
       a:[{text:"Alles Geld in ein einziges starkes Projekt legen.",correct:false},
          {text:"Zufällig mehrere Coins kaufen, ohne Plan.",correct:false},
          {text:"Kapital auf verschiedene Anlageformen verteilen, um Ausfälle abzufangen.",correct:true}],
       mentor:"Körbe verteilen, nicht Eier zählen."},
      {q:"Wie erkennt man einen typischen Scam (Betrug) im Kryptobereich?",
       a:[{text:"Wenn ein Projekt zu Transparenz und Geduld aufruft.",correct:false},
          {text:"Wenn unrealistische Versprechen, anonyme Gründer oder fehlende Nachweise auftauchen.",correct:true},
          {text:"Wenn es von großen Medien positiv erwähnt wird.",correct:false}],
       mentor:"Wenn’s zu gut klingt, ist es das meist auch."},
      {q:"Warum ist Liquiditätsbereitstellung (LP) mit Risiko verbunden?",
       a:[{text:"Weil die Kurse der Coins schwanken und der eigene Anteil dadurch an Wert verlieren kann.",correct:true},
          {text:"Weil der Anbieter garantiert Verluste ausgleicht.",correct:false},
          {text:"Weil Liquidität nur bei Börsen ohne Nutzer entsteht.",correct:false}],
       mentor:"Impermanent Loss ist real – verstehe die Mechanik."},
      {q:"Was ist ein gesundes Ziel beim langfristigen Vermögensaufbau?",
       a:[{text:"Monatliche Verdopplung des Kapitals.",correct:false},
          {text:"Stetiges, realistisches Wachstum mit Fokus auf Substanz und Lernfortschritt.",correct:true},
          {text:"Möglichst viele Coins gleichzeitig besitzen.",correct:false}],
       mentor:"Langsam ist schnell, nachhaltig ist stark."},
      {q:"Wie sollte man auf Markt-Hypes reagieren?",
       a:[{text:"Mit sofortigem Kauf, um nichts zu verpassen.",correct:false},
          {text:"Mit Ruhe, Analyse und klaren Einstiegspunkten statt Emotion.",correct:true},
          {text:"Mit Rückzug aus allen Märkten.",correct:false}],
       mentor:"System > Stimmung. Regeln bestimmen Timing."},
      {q:"Was unterscheidet erfolgreiche Investoren von Glücksrittern?",
       a:[{text:"Ein klarer Plan, Disziplin und die Bereitschaft, Fehler zu reflektieren.",correct:true},
          {text:"Ein Geheimtipp, der nur in Telegram-Gruppen geteilt wird.",correct:false},
          {text:"Die Anzahl der Trades pro Tag.",correct:false}],
       mentor:"Werkbank: Plan, Journal, Reflexion."},
    ];

    // Kurs 4 – Network (vom Nutzer geliefert)
    const course4_de = [
      {q:"Was ist das Fundament eines stabilen Netzwerks?",
       a:[{text:"Möglichst viele neue Kontakte in kurzer Zeit.",correct:false},
          {text:"Vertrauen, gemeinsame Werte und ehrliche Kommunikation.",correct:true},
          {text:"Permanente Aktivität in sozialen Medien.",correct:false}],
       mentor:"Qualität vor Quantität – Beziehungen tragen."},
      {q:"Warum ist Zuhören für einen Mentor wichtiger als Reden?",
       a:[{text:"Weil echtes Verständnis erst entsteht, wenn man die Perspektive des anderen wirklich kennt.",correct:true},
          {text:"Weil Reden zu viel Energie kostet.",correct:false},
          {text:"Weil Zuhören automatisch Autorität verleiht.",correct:false}],
       mentor:"Verstehen schafft Wirkung."},
      {q:"Was unterscheidet einen Sponsor von einem echten Mentor?",
       a:[{text:"Ein Mentor gibt nur finanzielle Unterstützung.",correct:false},
          {text:"Ein Sponsor hilft, das System zu verstehen.",correct:false},
          {text:"Ein Mentor begleitet fachlich und menschlich, nicht nur mit Geld oder Links.",correct:true}],
       mentor:"Mentoring = Weg + Mensch, nicht nur Tool."},
      {q:"Wie entsteht langfristige Motivation im Team?",
       a:[{text:"Durch Druck und Kontrolle von oben.",correct:false},
          {text:"Durch Sinn, gemeinsame Ziele und gegenseitige Anerkennung.",correct:true},
          {text:"Durch tägliche Gewinnversprechen.",correct:false}],
       mentor:"Bedeutung schlägt Belohnung."},
      {q:"Warum ist es wichtig, dass ein Mentor selbst Verantwortung lebt?",
       a:[{text:"Weil Vorbildverhalten mehr prägt als Worte.",correct:true},
          {text:"Weil Verantwortung nur die Struktur stärkt.",correct:false},
          {text:"Weil sonst kein Vertrauen in Technik entsteht.",correct:false}],
       mentor:"Walk the talk."},
      {q:"Was bedeutet „Führen durch Vorangehen“ in der Praxis?",
       a:[{text:"Den anderen ständig Aufgaben zu geben.",correct:false},
          {text:"Immer der Lauteste im Raum zu sein.",correct:false},
          {text:"Das eigene Wissen authentisch vorzuleben, statt nur zu predigen.",correct:true}],
       mentor:"Taten sind lauter als Folien."},
      {q:"Warum ist Transparenz im Network-Marketing entscheidend?",
       a:[{text:"Weil Menschen auf Dauer nur folgen, wenn sie Klarheit und Fairness erleben.",correct:true},
          {text:"Weil es gesetzlich vorgeschrieben ist.",correct:false},
          {text:"Weil man dadurch automatisch mehr Umsatz macht.",correct:false}],
       mentor:"Klarheit baut Vertrauen – Vertrauen baut Teams."},
      {q:"Was passiert, wenn im Team Konkurrenzdenken überwiegt?",
       a:[{text:"Die Leistung steigt automatisch, weil alle sich anstrengen.",correct:false},
          {text:"Vertrauen zerbricht, Zusammenarbeit leidet, Wachstum stagniert.",correct:true},
          {text:"Motivation und Offenheit wachsen.",correct:false}],
       mentor:"Wir > Ich – sonst bricht es."},
      {q:"Wie kann man mit Ablehnung oder Kritik souverän umgehen?",
       a:[{text:"Mit Verständnis, Humor und Fokus auf Inhalte statt Emotionen.",correct:true},
          {text:"Mit Gegenangriff, um Stärke zu zeigen.",correct:false},
          {text:"Mit sofortigem Rückzug aus dem Gespräch.",correct:false}],
       mentor:"Kühl im Kopf, warm im Ton."},
      {q:"Was bleibt das Ziel eines Mentors – egal wie groß das Team wird?",
       a:[{text:"Sich selbst überflüssig zu machen, indem er andere befähigt, eigenständig zu handeln.",correct:true},
          {text:"Seine Position zu sichern.",correct:false},
          {text:"Alle Entscheidungen allein zu treffen.",correct:false}],
       mentor:"Freiheit vermehren, nicht Abhängigkeit.",
      },
    ];

    // 10 neue Exam-Fragen (DE)
    const extra_de = [
      {q:"Warum ist ein Notfallplan (Backup-Workflow) Teil echter Souveränität?",
       a:[{text:"Weil damit im Ernstfall klar ist, wer, wie und womit wiederherstellt.",correct:true},
          {text:"Weil er Behörden überzeugt.",correct:false},
          {text:"Weil er automatisch Rendite steigert.",correct:false}],
       mentor:"Souverän ist, wer vorbereitet ist – nicht wer hofft."},
      {q:"Wozu dient eine Address-Whitelist bei CEX?",
       a:[{text:"Nur hübsche UI.",correct:false},
          {text:"Abflüsse sind nur zu vorab freigegebenen Adressen möglich.",correct:true},
          {text:"Sie beschleunigt Einzahlungen.",correct:false}],
       mentor:"Reduziert Schaden bei Account-Hacks."},
      {q:"Warum ist Rebalancing sinnvoll?",
       a:[{text:"Um Ziel-Allokationen wiederherzustellen und Risiko zu steuern.",correct:true},
          {text:"Um mehr Trades zu haben.",correct:false},
          {text:"Weil Kurse so steigen.",correct:false}],
       mentor:"Risiko-Management schlägt Bauchgefühl."},
      {q:"Warum ist Testen mit Kleinbeträgen klug?",
       a:[{text:"Weil Fehler mit kleinem Einsatz günstig sind.",correct:true},
          {text:"Weil große Beträge langsam sind.",correct:false},
          {text:"Weil Blockchains kleine Beträge bevorzugen.",correct:false}],
       mentor:"Erst üben, dann skalieren."},
      {q:"Woran erkennst du kognitive Verzerrung „Herdentrieb“?",
       a:[{text:"Ich kaufe, weil alle kaufen – nicht wegen meiner Analyse.",correct:true},
          {text:"Ich kaufe, weil der Chart grün ist.",correct:false},
          {text:"Ich kaufe, weil der Coin billig ist.",correct:false}],
       mentor:"Eigenes Denken ist die Mauer gegen FOMO."},
      {q:"Warum ist Multi-Sig in Teams nützlich?",
       a:[{text:"Zugriff/Transaktionen benötigen mehrere Unterschriften.",correct:true},
          {text:"Es macht Transaktionen kostenlos.",correct:false},
          {text:"Es ersetzt Backups.",correct:false}],
       mentor:"Sicherheit durch geteilte Verantwortung."},
      {q:"Was bedeutet „Private Key Exposure“ praktisch?",
       a:[{text:"Der private Schlüssel wurde Dritten bekannt.",correct:true},
          {text:"Die Adresse ist öffentlich sichtbar.",correct:false},
          {text:"Die Seed hat 11 statt 12 Wörter.",correct:false}],
       mentor:"Exposure = Funds migrieren."},
      {q:"Warum gehört Steuer-Dokumentation zur Souveränität?",
       a:[{text:"Weil Nachvollziehbarkeit rechtliche Sicherheit gibt.",correct:true},
          {text:"Weil der Staat sonst Wallets sperrt.",correct:false},
          {text:"Weil Gewinne dann garantiert sind.",correct:false}],
       mentor:"Ordnung ist Freiheit – auch finanziell."},
      {q:"Was ist beim Verwahren von Stablecoins zu bedenken?",
       a:[{text:"Emittenten-/Collateral-Risiko und Smart-Contract-Risiko.",correct:true},
          {text:"Es gibt keinerlei Risiken.",correct:false},
          {text:"Sie steigen immer im Wert.",correct:false}],
       mentor:"Stabil ≠ risikolos – Quelle prüfen."},
      {q:"Warum ist „Keep it simple“ oft überlegen?",
       a:[{text:"Komplexität schafft mehr Fehlerstellen.",correct:true},
          {text:"Einfachheit ist langweilig.",correct:false},
          {text:"Nur Profis dürfen komplex sein.",correct:false}],
       mentor:"Klarer Prozess, klares Handeln.",
      },
    ];

    // EN mirrors (kurz, sinngleich)
    const t_en = {
      mapCourse: (src) => src.map(o=>({
        q: ({
          de:o.q,
          en: o.q // keep wording; can be translated later if needed
        })[getLang()] || o.q,
        a: o.a,
        mentor: o.mentor
      }))
    };

    const pool_de = [...course1_de, ...course2_de, ...course3_de, ...course4_de, ...extra_de]; // 50
    const pool_en = t_en.mapCourse(pool_de); // Platzhalter-EN (du kannst später echte EN-Texte einsetzen)

    // ==== Exam Engine ====
    const state = {
      lang: getLang(),
      idx: 0,
      correct: 0,
      order: [],
      answers: [] // {qIndex, chosen, isCorrect, question, chosenText, correctText, mentor}
    };

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];
      }
      return arr;
    }

    function startExam(forceLang){
      if(forceLang){ state.lang = forceLang; setLang(forceLang); }
      const pool = state.lang==="de" ? pool_de : pool_en;
      state.order = shuffle([...Array(pool.length).keys()]);
      state.idx = 0; state.correct = 0; state.answers = [];
      document.getElementById("intro").style.display="none";
      renderQuestion();
    }

    function renderQuestion(){
      const root = document.getElementById("exam-root");
      const pool = state.lang==="de" ? pool_de : pool_en;
      const qIndex = state.order[state.idx];
      const item = pool[qIndex];

      const answered = state.idx;
      const total = pool.length;
      const pct = Math.round((answered/total)*100);

      root.innerHTML = `
        <div class="card">
          <div class="progressbar"><div style="width:${pct}%"></div></div>
          <h2>${state.lang==="de"?"Frage":"Question"} ${state.idx+1} / ${total}</h2>
          <p class="q-title">${item.q}</p>
          <ul class="answers">
            ${item.a.map((opt,i)=>`
              <li>
                <label>
                  <input type="radio" name="ans" value="${i}">
                  <span>${opt.text}</span>
                </label>
              </li>`).join("")}
          </ul>
          <p class="mentor">🧭 ${item.mentor}</p>
          <div class="btn-row">
            <button class="btn" id="prevBtn" ${state.idx===0?"disabled":""}>${state.lang==="de"?"Zurück":"Back"}</button>
            <button class="btn primary" id="nextBtn">${state.idx===total-1?(state.lang==="de"?"Abschließen":"Finish"):(state.lang==="de"?"Weiter":"Next")}</button>
          </div>
        </div>
      `;

      document.getElementById("prevBtn")?.addEventListener("click", ()=>{
        if(state.idx>0){ state.idx--; renderQuestion(); }
      });

      document.getElementById("nextBtn")?.addEventListener("click", ()=>{
        const sel = root.querySelector("input[name='ans']:checked");
        if(!sel){ // kleine freundliche Schranke
          alert(state.lang==="de"?"Bitte eine Antwort wählen.":"Please select an answer.");
          return;
        }
        const chosen = parseInt(sel.value,10);
        const isCorrect = !!item.a[chosen].correct;
        if(isCorrect) state.correct++;

        // store detailed
        const correctText = item.a.find(x=>x.correct)?.text || "";
        state.answers.push({
          qIndex, chosen, isCorrect,
          question: item.q,
          chosenText: item.a[chosen].text,
          correctText,
          mentorTip: item.mentor
        });

        if(state.idx < pool.length-1){
          state.idx++;
          renderQuestion();
        } else {
          renderResult();
        }
      });
    }

    function renderResult(){
      const pool = state.lang==="de" ? pool_de : pool_en;
      const total = pool.length;
      const points = state.correct * 2; // 2 Punkte pro richtige
      const percent = Math.round((points/100)*100);
      const color = points<60 ? "#ef4444" : points<75 ? "#cd7f32" : points<90 ? "#93c5fd" : "#d4af37";
      const status = points<60 ? (state.lang==="de"?"Wiederholen ❌":"Repeat ❌")
                   : points<75 ? (state.lang==="de"?"Bronze 🥉":"Bronze 🥉")
                   : points<90 ? (state.lang==="de"?"Silber 🥈":"Silver 🥈")
                   : (state.lang==="de"?"Gold 🥇":"Gold 🥇");

      // Save to localStorage
      localStorage.setItem("fsa_exam_points", String(points));
      localStorage.setItem("fsa_exam_correct", String(state.correct));
      localStorage.setItem("fsa_exam_total", String(total));
      localStorage.setItem("fsa_exam_percent", String(percent));
      localStorage.setItem("fsa_exam_status", status);
      localStorage.setItem("fsa_exam_results", JSON.stringify(state.answers||[]));

      // Feedback: nur falsche
      const wrong = state.answers.filter(r=>!r.isCorrect);
      let fb = "";
      if(wrong.length){
        fb += `<div class="feedback"><h3>${state.lang==="de"?"Deine Korrekturen":"Your corrections"}</h3>`;
        wrong.forEach((r,i)=>{
          fb += `<div class="fb-item">
            <p><strong>${state.lang==="de"?"Frage":"Question"} ${i+1}:</strong> ${r.question}</p>
            <p><span class="wrong">${state.lang==="de"?"Deine Antwort:":"Your answer:"}</span> ${r.chosenText}</p>
            <p><span class="right">${state.lang==="de"?"Richtig:":"Correct:"}</span> ${r.correctText}</p>
            <p class="mentor">🧭 ${r.mentorTip}</p>
          </div>`;
        });
        fb += `</div>`;
      }

      const resultRoot = document.getElementById("result-root");
      resultRoot.innerHTML = `
        <div class="card result-wrap" style="border-color:${color};box-shadow:0 0 25px ${color}22">
          <h2>${state.lang==="de"?"Auswertung":"Result"} ${fullName?`<span class="badge">${fullName}</span>`:""}</h2>
          <p>${state.lang==="de"?"Richtige Antworten":"Correct answers"}: <strong>${state.correct}/${total}</strong></p>
          <p>${state.lang==="de"?"Punkte":"Points"}: <strong>${points}/100</strong></p>
          <div class="bar"><div style="width:${percent}%; background:${color}"></div></div>
          <p>${state.lang==="de"?"Wissensindex":"Knowledge index"}: <strong>${percent}%</strong></p>
          <p>${state.lang==="de"?"Status":"Status"}: <strong style="color:${color}">${status}</strong></p>
          <p class="muted">
            ${state.lang==="de"
              ? "Bei 100 Punkten hast du 100 % Wissen aufgebaut – ein echtes Mentor-Niveau."
              : "At 100 points you’ve built 100% knowledge – true mentor level."}
          </p>
          <div class="btn-row">
            <button class="btn" id="repeatBtn">${state.lang==="de"?"Prüfung wiederholen":"Retake exam"}</button>
            <button class="btn primary" id="toPanelBtn">${state.lang==="de"?"Zum Qualifikationspanel":"To qualification panel"}</button>
          </div>
          ${fb}
        </div>
      `;

      document.getElementById("exam-root").innerHTML = "";

      document.getElementById("repeatBtn")?.addEventListener("click", ()=> location.reload());
      document.getElementById("toPanelBtn")?.addEventListener("click", ()=>{
        // Du kannst diese Zielseite frei bestimmen – hier nutzen wir deine vorhandene Seite:
        window.location.href = "grundkurs-pruefung-vorbereitung.html";
      });
    }

    // ==== Intro Lang Switch Buttons ====
    document.getElementById("startExam").addEventListener("click", ()=> startExam("de"));
    document.getElementById("startExamEn").addEventListener("click", ()=> startExam("en"));

    // Dyn. Intro-Text je Sprache
    function syncIntro(){
      const isDe = getLang()==="de";
      document.getElementById("introTextDe").style.display = isDe?"":"none";
      document.getElementById("introTextEn").style.display = isDe?"none":"";
    }
    window.addEventListener("DOMContentLoaded", syncIntro);
    syncIntro();
  })();
  </script>
</body>
</html>
